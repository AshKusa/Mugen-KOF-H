;-------------------------------------------------------------------------------
[Statedef 3700]
type = S
movetype = A
physics = S
anim = 3710
velset = 0,0
ctrl = 0

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 30
under = 1
supermove = 1

[State 3800, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 1
value = ifelse(fvar(30) > 0,0,-1000)

[State 3800, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
time = 30
movetime = 2
anim = -1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = f7000
scale = .5,.5
postype = p1
pos = 16,-80
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = f7010
scale = .5,.5
postype = p1
pos = 16,-80
sprpriority = 3
ownpal = 1
bindtime = 1
supermove = 1

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = f9000,0

[State 3800, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 102
trans = add
timegap = 2
framegap = 2
length = 8
palbright = 0,0,50

[State 3800, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HT
damage = 0
getpower = 0
hitflag = M
guardflag = 
pausetime = 0, 0
sparkno = 9
sparkxy = -10,-70
hitsound = 800,0
fall = 1
fall.recover = 0
p1stateno = 3701
p2stateno = 3703

[State 3800, AfterImageTime]
type = AfterImageTime
trigger1 = !AnimTime
time = 0

[State 3800, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 3701]
type = S
movetype = A
physics = S
anim = 3701
sprpriority = 1
ctrl = 0

[State 3801, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 169
trans = add
timegap = 2
framegap = 2
length = 8
palbright = 0,0,50

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 2, < 0
pos = 40,0

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
pos = 36,0

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 4, < 0
pos = 40,0

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 4, >= 0 && AnimElem = 5, < 0
pos = 35,-95

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 5, >= 0 && AnimElem = 6, < 0
pos = 40,-96

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 6, >= 0 && AnimElem = 7, < 0
pos = 5,-80

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 7, >= 0 && AnimElem = 8, < 0
pos = -15,-70

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 8
pos = -40,0

[State 3801, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 20,27
channel = 0

[State 3801, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 8
value = -150
kill = 0

[State 3801, HitAdd]
type = HitAdd
trigger1 = AnimElem = 8
value = 1

[State 3801, EnvShake]
type = EnvShake
trigger1 = AnimElem = 8
time = 15
ampl = 6

[State 700, GtFNg\]
type = Explod
trigger1 = AnimElem = 8
anim = Fifelse(StageVar(info.author) = "water",24,67)
facing = ifelse(StageVar(info.author) = "water",-1,1)
pos = ifelse(StageVar(info.author) = "water",30,20),0
postype = P1
sprpriority = 15
ownpal = 0

[State 700, GtFNg\]
type = Explod
trigger1 = AnimElem = 8
anim = Fifelse(StageVar(info.author) = "water",24,66)
pos = ifelse(StageVar(info.author) = "water",10,20),0
sprpriority = ifelse(StageVar(info.author) = "water",10,-5)
postype = P1
ownpal = 0

[State 3801, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = 3,5

[State 3801, AfterImageTime]
type = AfterImageTime
trigger1 = AnimElem = 8, > 0 && enemyNear, StateNo != [3703,3704]
time = 0

[State 3801, ChangeState]
type = ChangeState
trigger1 = AnimElem = 8, > 0 && enemyNear, StateNo != [3703,3704]
value = 0
ctrl = 1

[State 3801, Turn]
type = Turn
trigger1 = AnimElem = 11

[State 1000, R}h]
type = Varset
triggerall = power >= 2000
triggerall = AnimElemtime(7) >= 0
trigger1 = command = "MAX2"
var(16) = 1

[State 1000, R}h]
type = ChangeState
trigger1 = AnimElemtime(11) > 0 && AnimElemtime(13) < 0
trigger1 = var(16) = 1
value = 3200

[State 3801, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 3702
;---------------------------------------------------------------
[Statedef 3702]
type = S
movetype = A
physics = S
anim = 3702
ctrl = 0

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 4, < 0
pos = 40,0

[State 3801, TargetBind]
type = Targetstate
trigger1 = AnimElem = 1, >= 0 && AnimElem = 4, < 0
value = 3803

[State 1853, hitadd]
type = hitadd
trigger1 = AnimElem = 7
value = 1

[State 3702, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
x = 2

[State 3702, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 20,29

[State 3702, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = 8

[State 3702, PosAdd]
type = PosAdd
trigger1 = AnimElem = 5
x = 14

[State 3702, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8 || AnimElem = 9 || AnimElem = 10
x = 12

[State 3801, TargetBind]
type = Targetstate
trigger1 = AnimElem = 4
value = 3950

[State 3702, SprPriority]
type = SprPriority
trigger1 = NumTarget
value = 0

[State 3702, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElem = 4, >= 0 && AnimElem = 5, < 0
time = 1
pos = -4,-26

[State 3702, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElem = 5, >= 0 && AnimElem = 6, < 0
time = 1
pos = 44,-86

[State 3702, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 6
value = -100

[State 3801, HitAdd]
type = HitAdd
trigger1 = AnimElem = 6
value = 1

[State 3702, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1
;-------------------------------------------------------------------------------

;-------------------------------------------------------------------------------
[Statedef 3900]
type = S
movetype = A
physics = S
anim = 3700
velset = 0,0
ctrl = 0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 0
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 30
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3800, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 1, = 2
value = -2000

[State 6000,白色底色]
type = Envcolor
trigger1 = animelem = 1,=1
persistent = 0
ignorehitpause = 1
value = 255,255,255
time = 1
under = 1
supermove = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1,=2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 40
under = 1
supermove = 1
darken = 0

;-----------------------------------------------
[State a];SC/DC 取消1技gc
type = VarAdd
trigger1 = prevstateno = [1000,3999]
fvar(29) = -1000
persistent = 0

[State 3800, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1, = 2
time = 33
movetime = 33
anim = -1

[State 2000]
type = Explod
trigger1 = AnimElem = 1, = 3
anim = f7300
postype = p1
pos = 6,-75
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1, = 3
anim = f7310
postype = p1
pos = 6,-75
sprpriority = 3
ownpal = 1
bindtime = 1
supermove = 1

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1, = 3
value = f9000,2

[State 3800, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1, = 2
value = 10,43

[State 3800, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 102
length = 6
timegap = 2
framegap = 1
trans = add1
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 140,140,140
palpostbright = 0,0,0
paladd = 0,-80,-80
palmul = 1,1,1

[State 3800, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HT
damage = 0
getpower = 0
hitflag = M
guardflag = 
pausetime = 0, 0
sparkno = 9
sparkxy = -10,-70
hitsound = 800,0
fall = 1
fall.recover = 0
p1stateno = 3901
p2stateno = 3703
bindtime = -1

[State 3800, AfterImageTime]
type = AfterImageTime
trigger1 = !AnimTime
time = 0

[State 3800, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; SDM 214632 A/C Contact
[Statedef 3901]
type = S
movetype = A
physics = S
anim = 3701
sprpriority = 1
ctrl = 0

[State 3910]
type = ScreenBound
trigger1 = animelem = 5,>0 && AnimElem = 11,<0
value = 0
movecamera = 0,0

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 2, < 0
pos = 40,0

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
pos = 36,0

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 4, < 0
pos = 28,0

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 4, >= 0 && AnimElem = 5, < 0
pos = 12,-91

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 5, >= 0 && AnimElem = 6, < 0
pos = 4,-96

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 6, >= 0 && AnimElem = 7, < 0
pos = -25,-87

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 7, >= 0 && AnimElem = 8, < 0
pos = -32,-72

[State 3801, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 20,27
channel = 0

[State 3801, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 8
value = -50
kill = 0

[State 3801, HitAdd]
type = HitAdd
trigger1 = AnimElem = 8
value = 1

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 8
pos = 0,0

[State 3801, EnvShake]
type = EnvShake
trigger1 = AnimElem = 8
time = 15
ampl = -6

[State 700, GtFNg\]
type = Explod
trigger1 = AnimElem = 8
anim = Fifelse(StageVar(info.author) = "water",24,67)
facing = ifelse(StageVar(info.author) = "water",-1,1)
pos = ifelse(StageVar(info.author) = "water",30,20),0
postype = P1
sprpriority = 15
ownpal = 0

[State 700, GtFNg\]
type = Explod
trigger1 = AnimElem = 8
anim = Fifelse(StageVar(info.author) = "water",24,66)
pos = ifelse(StageVar(info.author) = "water",10,20),0
sprpriority = ifelse(StageVar(info.author) = "water",10,-5)
postype = P1
ownpal = 0

[State 3801, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = 3,5

[State 3801, AfterImageTime]
type = AfterImageTime
trigger1 = AnimElem = 8, > 0 && enemyNear, StateNo != [3703,3704]
time = 0

[State 3801, ChangeState]
type = ChangeState
trigger1 = AnimElem = 8, > 0 && enemyNear, StateNo != [3703,3704]
value = 0
ctrl = 1

[State 3801, Turn]
type = Turn
trigger1 = AnimElem = 11

[State 3801, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 3902
;-------------------------------------------------------------------------------
; DM 214632 A/C Contacted
[Statedef 3703]
type = A
movetype = H
physics = N
sprpriority = 0
ctrl = 0

[State 3703, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 3703+var(55)*30000

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 3703, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 3704

[Statedef 3704]
type = L
movetype = H
physics = N
anim = IfElse(SelfAnimExist(5172+var(55)*30000),5172+var(55)*30000,5170+var(55)*30000)
ctrl = 0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 3704, ChangeAnim]
type = ChangeAnim
trigger1 = !AnimTime
value = IfElse(SelfAnimExist(5112+var(55)*30000),5112+var(55)*30000,5110+var(55)*30000)

[State 3704, SelfState]
type = SelfState
trigger1 = Time = 180
value = 5110

;---------------------------------------------------------------
[Statedef 3902]
type = S
movetype = A
physics = S
anim = 3800
ctrl = 0
velset = 0,0

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 20, < 0
pos = 40,0

[state a]
type = velset
trigger1 = AnimElem = 3, >= 0 && AnimElem = 7, < 0
trigger1 = pos x < -14
trigger1 = facing = 1
x = 7

[state a]
type = velset
trigger1 = AnimElem = 3, >= 0 && AnimElem = 7, < 0
trigger1 = pos x > 0
trigger1 = facing = 1
x = -7

[state a]
type = velset
trigger1 = AnimElem = 3, >= 0 && AnimElem = 7, < 0
trigger1 = pos x >= -14 && pos x <= 0
trigger1 = facing = 1
x = 0

[state a]
type = velset
trigger1 = AnimElem = 3, >= 0 && AnimElem = 7, < 0
trigger1 = pos x > 14
trigger1 = facing = -1
x = 7

[state a]
type = velset
trigger1 = AnimElem = 3, >= 0 && AnimElem = 7, < 0
trigger1 = pos x < 0
trigger1 = facing = -1
x = -7

[state a]
type = velset
trigger1 = AnimElem = 3, >= 0 && AnimElem = 7, < 0
trigger1 = pos x <= 14 && pos x >= 0
trigger1 = facing = -1
x = 0

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 3802, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 20,28
channel = 0

[State 810,]
type = EnvShake
trigger1 = AnimElem = 20
ampl = 9
freq = 80
time = 30

[State 1000]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 20
anim = F63
facing = facing
ignorehitpause = 1
postype = p1
pos = 20, 0
sprpriority = 7

[State 3121, 1]
type = Helper
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 20
id = 8882
postype = p1
pos = 20, 0
sprpriority = 10
stateno = 11492
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State 700, GtFNg\]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 20
anim = 25
postype = P1
pos = -20, 0
sprpriority = 10
ownpal = 0

[State 700, GtFNg\]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 20
anim = 25
postype = P1
pos = 60, 0
sprpriority = 10
ownpal = 0
facing = -1

[State 3802, HitDef]
type = HitDef
trigger1 = AnimElem = 20
attr = A, HA
animtype = Back
damage = 200
getpower = 0
givepower = 21,21
hitflag = AFD
guardflag = 
pausetime = 0,0
sparkno = 3
sparkxy = 0,-5
hitsound = S1,4
guardsound = S2,1
ground.type = Low
envshake.time = 20
envshake.ampl = -8
p2stateno = 3803

[State 3802, EnvColor]
type = EnvColor
trigger1 = AnimElem = 20
time = 1
value = 255,255,255
ignorehitpause = 1
persistent = 0

[State 3802, ChangeState]
type = ChangeState
trigger1 = animelem = 24,3
value = 3903
ctrl = 1
;-------------------------------------------------------------------------------
; SDM 214632 A/C Contacted
[Statedef 3803]
type = L
movetype = H
physics = N
anim = IfElse(SelfAnimExist(5082+var(55)*30000),5082+var(55)*30000,5080+var(55)*30000)
ctrl = 0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3704, ChangeAnim]
type = ChangeAnim
trigger1 = !AnimTime
value = IfElse(SelfAnimExist(5112+var(55)*30000),5112+var(55)*30000,5110+var(55)*30000)

[State 3704, SelfState]
type = SelfState
trigger1 = Time = 140
value = 5110

;---------------------------------------------------------------
[Statedef 3903]
type = S
movetype = A
physics = S
anim = 3702
ctrl = 0

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 3801, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 4, < 0
pos = 40,0

[State 3801, TargetBind]
type = Targetstate
trigger1 = AnimElem = 1, >= 0 && AnimElem = 4, < 0
value = 3803

[State 3910]
type = ScreenBound
trigger1 = AnimElem = 1
value = 0
movecamera = 0,0

[State 1853, hitadd]
type = hitadd
trigger1 = AnimElem = 7
value = 1

[State 3910]
type = PosAdd
trigger1 = BackEdgeDist > 92
x = -10

[State 3910]
type = PosAdd
trigger1 = BackEdgeDist < 92
x = 10

[State 3702, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
x = 2

[State 3702, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 20,29

[State 3702, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = 8

[State 3702, PosAdd]
type = PosAdd
trigger1 = AnimElem = 5
x = 14

[State 3702, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8 || AnimElem = 9 || AnimElem = 10
x = 12

[State 3801, TargetBind]
type = Targetstate
trigger1 = AnimElem = 4
value = 3950

[State 3702, SprPriority]
type = SprPriority
trigger1 = NumTarget
value = 0

[State 3702, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElem = 4, >= 0 && AnimElem = 5, < 0
time = 1
pos = -4,-26

[State 3702, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElem = 5, >= 0 && AnimElem = 6, < 0
time = 1
pos = 44,-86

[State 3702, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = NumTarget
trigger1 = AnimElem = 6
value = -100
kill = 0

[State 3801, HitAdd]
type = HitAdd
trigger1 = AnimElem = 6
value = 1

[State 3702, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 3904
ctrl = 0

;-------------------------------------------------------------------------------
[Statedef 3950]
type = A
movetype = H
physics = N
sprpriority = 1
ctrl = 0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3711, Turn]
type = Turn
trigger1 = !Time

[State 3711, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 3711+var(55)*30000

[State 3711, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3711, PosAdd]
type = PosAdd
trigger1 = !AnimTime
y = 60

[State 3711, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 3951

[Statedef 3951]
type = A
movetype = H
physics = N
anim = 5050+var(55)*30000
velset = -18,-3
ctrl = 0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3712, ChangeState]
type = ChangeState
trigger1 = BackEdgeBodyDist < 24
value = 3952

[Statedef 3952]
type = A
movetype = H
physics = N
anim = 3952+var(55)*30000
velset = 0,0
ctrl = 0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1027, 撞墙声音]
type = PlaySnd
trigger1 = Time = 0
value = F5000,2

[State 1027, 撞墙震动]
type = envshake
trigger1 = !Time
time = 10

[State 296, 撞墙火花]
type = Explod
trigger1 = Time = 0
anim = F70
pos = -30,-50
postype = p1
sprpriority = -1
supermove = 1
bindtime = 1
ownpal = 1
removeongethit = 1

[State 3713, Turn]
type = Turn
trigger1 = !Time

[State 3713, PosAdd]
type = PosAdd
trigger1 = !Time
x = -3
y = -2

[State 3713, VelSet]
type = VelSet
trigger1 = !Time
x = -1
y = -8

[State 3713, VelAdd]
type = VelAdd
trigger1 = Vel Y < 0
y = .5

[State 3713, VelAdd]
type = VelAdd
trigger1 = Vel Y >= 0
y = .45

[State 3713, PosSet]
type = PosSet
trigger1 = Pos Y >= 0
y = 0

[State 3713, VelSet]
type = VelSet
trigger1 = Pos Y >= 0
x = -2
y = -3

[State 3713, SelfState]
type = SelfState
trigger1 = Pos Y >= 0
value = 5100
;-------------------------------------------------------------------------------
; 63214 B/D
[Statedef 3904]
type = S
movetype = A
physics = N
anim = 3904
velset = 12,-2
poweradd = 83
ctrl = 0
juggle = 0
facep2 = 1

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 1200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3501,10

[State 1200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 10,45

[State 1200, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8
x = IfElse(MoveContact,p2dist X - 12,174)

[State 1200, VelSet]
type = VelSet
trigger1 = AnimElem = 8, = 1
x = 7

[State 1200, VelMul]
type = VelMul
trigger1 = Vel X > 0
x = 0.854853

[State 1200, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, ST
animtype = Back
damage = 0
priority = 7
getpower = 167,167
givepower = 21,21
hitflag = MAFP
guardflag = MA
pausetime = 2,10
sparkno = 9
sparkxy = 0,-45
hitsound = 800,0
guardsound = S2,1
ground.type = Low
guard.hittime = 23
guard.velocity = -11
airguard.velocity = -4,-5
p1stateno = 3905
p2stateno = 3953

[State 1200, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 63214 B/D Contact
[Statedef 3905]
type = S
movetype = A
physics = N
anim = 1201
sprpriority = -1
velset = 0,0
ctrl = 0

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 1201, targetstate]
type = targetstate
trigger1 = !Time
value = 3953

[State 1201, Explod]
type = Explod
trigger1 = !Time
anim = 11201
sprpriority = 1
postype = p1
pos = 0,0
bindtime = -1

[State 1201, HitAdd]
type = HitAdd
trigger1 = !Time
trigger2 = AnimElem = 6
value = 1

[State 1201, targetlifeadd]
type = targetlifeadd
trigger1 = AnimElem = 6
value = -100
kill = 0

[State 3250, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = f2
sprpriority = 10
postype = p1
vfacing = -1
pos = 0,-65
bindtime = 1

[State 1201, PosSet]
type = PosSet
trigger1 = !Time
x = target, Pos X - IfElse(facing = 1,12,-12)

[State 1201, TargetBind]
type = TargetBind
trigger1 = Time && AnimElem = 4, < 0
time = 1
pos = 25,0

[State 1201, TargetBind]
type = TargetBind
trigger1 = Time && AnimElem = 4, >= 0 && AnimElem = 6, < 0
time = 1
pos = 10,4

[State 1201, targetstate]
type = targetstate
trigger1 = AnimElem = 6
value = 3954

[State 1201, playsnd]
type = playsnd
trigger1 = AnimElem = 6
value = 1,1

[State 1201, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = C, SA
animtype = DiagUp
damage = 49
getpower = 0
givepower = 0
hitflag = MAFP
guardflag = MA
pausetime = 0,0
sparkno = 2
sparkxy = 0,-64
hitsound = S1,1
ground.type = Low
ground.velocity = -3.5,-5.5 ;-10,-6
fall = 1
fall.recover = 0
fall.xvelocity = -3
fall.yvelocity = -2

[State 1201, ChangeState]
type = turn
trigger1 = animelem = 14,= 1

[State 1201, ChangeState]
type = ChangeState
trigger1 = animelem = 14,= 1
value = 3906
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 3954]
type = A
movetype = H
physics = N

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 951,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 951, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 951, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 3959+var(55)*30000

[State 951, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 3955

;-------------------------------------------------------------------------------
[Statedef 3955]
type = A
movetype = H
physics = N
velset = -2,-25

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 952,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 952, 1]
type = VelAdd
trigger1 = Time > 0
y = .88

[State 952, 2]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 952, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100
;-------------------------------------------------------------------------------
; 63214 B/D GotHit
[Statedef 3953]
type = S
movetype = H
physics = N
velset = 0,0
sprpriority = 0
ctrl = 0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1202, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 3953+var(55)*30000

;-------------------------------------------------------------------------------
[Statedef 3906]
type = A
movetype = A
physics = N
anim = 3906
velset = 5,-7
ctrl = 0
juggle = 0

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 1851, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s10,45

[State 1851, PosAdd]
type = PosAdd
trigger1 = AnimElem = 1
x = 2

[State 1851, VelAdd]
type = VelAdd
trigger1 = Vel Y < 0
y = 0.470588

[State 1851, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0 && !(Vel Y < 0)
y = 0.52 ;0.524444

[State 1851, changestate]
type = changestate
trigger1 = time = 20
value = 3908

[State 1851, targetstate]
type = targetstate
trigger1 = time = 20
value = 3956

[State 1851, ChangeState]
type = ChangeState
trigger1 = animelem = 4 ,>= 5
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3907

;-------------------------------------------------------------------------------
[Statedef 3907]
type = S
movetype = A
physics = S
anim = 1852
velset = 0,0
ctrl = 0

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 1852, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 1852, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
[Statedef 3908]
type    = A
movetype= A
physics = N
anim = 1435
velset = 0,0

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 1851, targetstate]
type = targetstate
trigger1 = !Time
value = 3956

[State 170, G]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, IL]
type = Width
trigger1 = time = 0
edge = 30,0

[State 810, ]
type = Turn
trigger1 = AnimElem = 11

[State 700, GtFNg\]
type = Explod
trigger1 = time = 0
anim = f9
postype = P1
pos = 0, 0
sprpriority = 15
ownpal = 0

[State 700, GtFNg\]
type = Explod
trigger1 = AnimElem = 10
anim = f6
postype = P1
pos = 0, 0
sprpriority = 15
ownpal = 0

[State 810, 1]
type = PlaySnd
Trigger1 = time = 0
value = F800,0

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 10
value = s10,22
channel = 4

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 10
value = s1,8

[State 810, 1]
type = BindtoTarget
trigger1 = time = 0
pos = 0,10,head

[State 810, 3]
type = TargetBind
Trigger1 = time >= 0 && AnimElemtime(10) < 0
pos = 0,0

[State 810, 1]
type = TargetLifeAdd
Trigger1 = AnimElem = 10
value = -100
kill = 0

[State 3801, HitAdd]
type = HitAdd
trigger1 = AnimElem = 10
value = 1

[State 1851, targetstate]
type = targetstate
trigger1 = AnimElem = 10
value = 3957

[State 2100, ]
type = posadd
trigger1 = AnimElem = 11
x = 10
y = 15

[State 2100, ]
type = Velset
trigger1 = AnimElem = 11
x = -4

[State 2100, ]
type = Velset
trigger1 = AnimElem = 11
y = -5

[State 2100, ]
type = Veladd
trigger1 = AnimElemtime(11) > 0
y = .38

[State 810, 1]
type = ChangeState
trigger1 = AnimElemtime(19) >= 0
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 3909
;-------------------------------------------------------------------------------
[Statedef 3956]
type = S
movetype = H
physics = N
velset = 0,0
ctrl = 0
facep2 = 1

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1436+var(55)*30000

[State 1830]
type = ChangeAnim
Trigger1 = time = 45
value = 5050+var(55)*30000

[State 2100, ]
type = PosSet
trigger1 = time = 45
y = 0

[State 2100, ]
type = VelSet
trigger1 = time = 45
x = 4
y = -6

[State 2100, ]
type = Veladd
trigger1 = time > 45
y = .42

[State 820, 1]
type = SelfState
trigger1 = time > 45
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100
;-------------------------------------------------------------------------------
[Statedef 3957]
type = A
movetype = H
physics = N

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 951,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 951, 1]
type = VelSet
trigger1 = Time = 0
x = -3
y = 6

[State 951, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 3957+var(55)*30000

[State 952, 2]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 952, 3]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3958
;-------------------------------------------------------------------------------
[Statedef 3958]
type = A
movetype = H
physics = N

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 951, 2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3958+var(55)*30000

[State 951,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 951, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 951, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 810,]
type = EnvShake
trigger1 = Time = 0
ampl = 9
freq = 80
time = 30

[State 3250, Explod]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = F66
sprpriority = 10
postype = p1
pos = 0,0
bindtime = 1

[State 3250, Explod]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = F67
sprpriority = 10
postype = p1
pos = 0,0
bindtime = 1

[State 1400, flog]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 0
anim = f25
postype = p1
pos = -20,0
ownpal = 1
sprpriority = 5
removeongethit = 1

[State 1400, flog]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 0
anim = f25
postype = p1
facing = -1
pos = 20,0
ownpal = 1
sprpriority = 5
removeongethit = 1

[State 951, 3]
type = ChangeState
trigger1 = !animtime
value = 3959

;-------------------------------------------------------------------------------
[Statedef 3959]
type = A
movetype = H
physics = N

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 951,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 951, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 951, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 3959+var(55)*30000

[State 951, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 3960
;-------------------------------------------------------------------------------
[Statedef 3960]
type = A
movetype = H
physics = N
velset = 0,-34

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 952,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 952, 1]
type = VelAdd
trigger1 = Time > 0
y = .85

[State 952, 2]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 952, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100
;-------------------------------------------------------------------------------

[Statedef 3909]
type = S
movetype = A
physics = S
anim = 3909
velset = 0,0
poweradd = 0
ctrl = 0

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 1500, posset]
type = posset
trigger1 = !Time
y = 0

[State 1500, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 20,28
channel = 0

[State 1500, PosAdd]
type = PosAdd
trigger1 = AnimElem = 12 || AnimElem = 13 || AnimElem = 14
x = 13

[State 1500, targetstate]
type = targetstate
trigger1 = animelem = 12,1
value = 3940

[State 1500, targetstate]
type = targetbind
trigger1 = animelem = 12,0
pos = 50,-20

[State 1500, targetlifeadd]
type = targetlifeadd
trigger1 = animelem = 12,1
value = -200

[State 952, 2]
type = EnvShake
trigger1 = animelem = 12,1
time = 50

[State 1500, PlaySnd]
type = PlaySnd
trigger1 = animelem = 12,1
value = 1,4
channel = 1

[State 1500, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = DiagUp
damage = 250
getpower = 208,208
givepower = 21,21
hitflag = MA
guardflag = 
pausetime = 42,44
sparkno = 2
sparkxy = 0,-80
hitsound = S1,4
guardsound = S2,1
ground.type = High
ground.velocity = -10,-8 ;-19,-8
air.velocity = -10,-8 ;-19,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
fall.xvelocity = -2
fall.yvelocity = -3
fall.envshake.time = 5
fall.envshake.ampl = -4

[State 1500, EnvColor]
type = EnvColor
trigger1 = animelem = 12,1
time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1

[State 1500, EnvShake]
type = EnvShake
trigger1 = animelem = 12,1
time = 30
ampl = 8
persistent = 0
ignorehitpause = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 12,1
anim = f2
sprpriority = 12
postype = p1
pos = 60,-65
bindtime = -1
supermove = 1
ignorehitpause = 0
under = 0

[State 1853, hitadd]
type = hitadd
trigger1 = animelem = 12,1
value = 1

[State 1500, ChangeState]
type = ChangeState
trigger1 = animelem = 12,2
value = 3910
ctrl = 0
;-------------------------------------------------------------------------------
[Statedef 3910]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0

[State 2041, 2]
type = Afterimagetime
trigger1 = !time
time = 0

[State 1500, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
[Statedef 3940]
type     = A
movetype = H
physics  = N
velset   = 0,0
facep2 = 1

[State 0, ]
type = ChangeAnim2
trigger1 = Time = 0
value = 2040+var(55)*30000

[State 0, ]
type = VelSet
trigger1 = Time > 10
x = -13
y = -4

[State 1026, VelAdd]
type = VelAdd
trigger1 = Time > 12
y = .35

[State 1026, ScreenBound]
type = ScreenBound
triggerall = Pos Y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, ChangeState]
type = ChangeState
triggerall = Pos Y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 3945

[State 1026, SelfState]
type = SelfState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 5100
;-------------------------------------------------------------------------------
[Statedef 3945]
type     = A
movetype = H
physics  = N

[State 1027, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 2045+var(55)*30000

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, PosFreeze]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, 撞墙声音]
type = PlaySnd
trigger1 = Time = 0
value = F5000,2

[State 1027, 撞墙震动]
type = envshake
trigger1 = !Time
time = 10

[State 296, 撞墙火花]
type = Explod
trigger1 = Time = 0
anim = F70
pos = -30,-50
postype = p1
sprpriority = -1
supermove = 1
bindtime = 1
ownpal = 1
removeongethit = 1

[State 1027, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3946
;-------------------------------------------------------------------------------
[Statedef 3946]
type     = A
movetype = H
physics  = N

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
x = 4.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, VelAdd]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052+var(55)*30000)
value = 5050+var(55)*30000

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052+var(55)*30000)
value = 5052+var(55)*30000

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050+var(55)*30000
trigger1 = SelfAnimExist(5060+var(55)*30000)
persistent = 0
value = 5060+var(55)*30000

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052+var(55)*30000
trigger1 = SelfAnimExist(5062+var(55)*30000)
persistent = 0
value = 5062+var(55)*30000

[State 1028, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;----------------------------------------------------------------------------------------
[Statedef 11111]
type     = S
movetype = A
physics  = S
juggle   = 8
poweradd = 80
velset   = 0,0
anim     = 1000
ctrl     = 0
sprpriority = 3

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 4
value = s10,45
channel = 4

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 4
value = s12,0

[State 700, GtFNg\]
type = Explod
trigger1 = AnimElem = 4
anim = Fifelse(StageVar(info.author) = "water",25,26)
postype = P1
pos = 0, 0
sprpriority = 10
ownpal = 0

[State 200,]
type = Posadd
trigger1 = AnimElem = 1 | AnimElem = 2 | AnimElem = 3 | AnimElem = 4
trigger2 = AnimElem = 5
x = 10

[State 200,]
type = Posadd
trigger1 = AnimElem = 6 | AnimElem = 7
x = 20

[State 200,]
type = Posadd
trigger1 = AnimElem = 8 | AnimElem = 9
x = 25

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(9) > 0
x = 10

[State 800, qbg`ipj]
type = HitDef
trigger1 = Time = 0
attr = S, ST
hitflag = MAF
guardflag = M
priority = 3, Hit
sparkno = -1
guard.sparkno = 42
sparkxy = -10, -35
p1sprpriority = 0     ;U\Dx0
p2sprpriority = 1     ;U\Dx1
p1facing = 1          ;U U
p2facing = 1          ;U
p1stateno = 1010
p2stateno = 1020
guardsound = s2,1
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = 0
air.type = High
air.velocity = -2.5,-4
air.hittime = 12
fall = 1
numhits = 0

[State 1000, Xe[gX]
type = ChangeState
trigger1 = MoveGuarded
trigger2 = AnimTime = 0
value = 1005

;-----------------------------------------------------------------------------------
[Statedef 22222]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 80
velset   = 0,0
ctrl     = 0
anim     = 1150
sprpriority = 3

[State 170, G]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 5

[State 170, G]
type = NotHitBy
trigger1 = AnimElem = 3
value = SCA
time = 1

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 4
value = s10,47

[State 200,]
type = Posadd
trigger1 = AnimElem = 3
x = 10

[State 200,]
type = Posadd
trigger1 = AnimElem = 6
x = -10

[State 800, qbg`ipj]
type = HitDef
trigger1 = Time = 0
attr = S, ST
hitflag = M-
numhits = 0
priority = 1, Miss
sparkno = -1
sparkxy = -20,-60
p1sprpriority = 1     ;U\Dx1
p2sprpriority = 0     ;U\Dx0
p2facing = 1
p1stateno = 1110
p2stateno = 1120
guard.dist = 0
fall = 1

[State 800, Xe[gX]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------
[Statedef 21111]
type     = S
movetype = A
physics  = S
juggle   = 8
poweradd = 70
velset   = 0,0
anim     = 11350
ctrl     = 0
sprpriority = 2

[State 810, IL]
type = Width
trigger1 = 1
edge = 20,0

[State 170, G]
type = NotHitBy
trigger1 = AnimElemtime(7) < 0
value = SCA

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 6
value = s10010,11
channel = 4
volume = -100

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 6
value = s0,4

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 9
value = s3,2

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 6
value = s10012,7

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 6
value = s10012,9

[State 1000, ]
type = Velset
trigger1 = AnimElem = 4
x = 4

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(9) >= 0
x = -1.5

[State 1000, ]
type = Velset
trigger1 = AnimElem = 9
y = -11

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(9) >= 0
y = .52

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 9
statetype = A

[State 700, GtFNg\]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 6
anim = 11305
postype = P1
pos = 40, 0
sprpriority = 10
ownpal = 0

[State 700, GtFNg\]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 6
anim = f250
postype = P1
pos = 30, 0
sprpriority = 10
ownpal = 0


[State 700, GtFNg\]
type = Explod
trigger1 = AnimElem = 7
anim = 11310
postype = P1
pos = 45, -20
sprpriority = 10
ownpal = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
damage = 40, 4
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = 2
guard.sparkno = 42
sparkxy = -20, -50
hitsound = s1,1
guardsound = s2,1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = 0
air.type = Low
air.velocity = -2,-3
air.hittime = 12
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
damage = 30, 3
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = 2
guard.sparkno = 42
sparkxy = -20, -65
hitsound = s1,1
guardsound = s2,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -3
air.type = High
air.velocity = -3,-4
air.hittime = 12
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 10
attr = A, SA
damage = 50, 5
animtype = up
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = 2
guard.sparkno = 42
sparkxy = -25, -80
hitsound = s1,4
guardsound = s2,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -4.8,-8.5
air.type = High
air.velocity = -4.8,-8.5
air.hittime = 12
yaccel = .43
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 1000, Xe[gX]
type = ChangeState
triggerall = AnimElemtime(16) >= 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 10811

;-----------------------------------------------------------------------------
[Statedef 32222]
type     = S
movetype = A
physics  = S
juggle   = 8
poweradd = 80
velset   = 0,0
anim     = 11050
ctrl     = 0
sprpriority = 3

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 5
value = s10010,19
channel = 4
volume = -100

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 5
value = s10012,0

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 5
value = s10012,7

[State 700, GtFNg\]
type = Explod
trigger1 = AnimElem = 5
anim = Fifelse(StageVar(info.author) = "water",25,27)
postype = P1
pos = 0, 0
sprpriority = 10
ownpal = 0

[State 200,]
type = Posadd
trigger1 = AnimElem = 1
x = 15

[State 1000, ]
type = Velset
trigger1 = AnimElem = 7
x = 30

[State 800, qbg`ipj]
type = HitDef
trigger1 = Time = 0
attr = S, ST
hitflag = MAF
guardflag = M
priority = 3, Hit
sparkno = -1
guard.sparkno = 42
sparkxy = -10, -35
p1sprpriority = 1     ;U\Dx1
p2sprpriority = 0     ;U\Dx0
p1facing = 1          ;U U
p2facing = 1          ;U
p1stateno = 11010
p2stateno = 11020
guardsound = s2,1
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = 0
guard.velocity = -7
air.type = High
air.velocity = -2.5,-4
air.hittime = 12
fall = 1

[State 1000, Xe[gX]
type = ChangeState
trigger1 = MoveGuarded
value = 11005

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
