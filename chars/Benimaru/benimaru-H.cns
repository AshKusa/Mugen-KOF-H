;----------------------------------------------------------------------------
[Statedef 1900]
type = S
movetype = A
physics = S
anim = 1900
sprpriority = 2
ctrl = 0
juggle = 8
velset = 0,0
poweradd = ifelse(fvar(30) > 0,0,-1000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 2200, 8]
type = SuperPause
trigger1 = Time = 0
time = 33
movetime = 33
anim = -1
darken = 0

[State 2200, 6]
type = Explod
trigger1 = Time = 0
anim = f7310
pos = 2,-70
postype = p1
sprpriority = 2
supermove = 1
bindtime = -1
ID = 200
ownpal = 1

[State 2200, 7]
type = Explod
trigger1 = Time = 0
anim = f7300
pos = 2,-70
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ID = 200
ownpal = 1

[State 1300, 5]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = Time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 1000, 2]
type = PlaySnd
trigger1 = Time = 0
value = f9000,2

[State 3810, dashsound]
type = PlaySnd
trigger1 = ANIMELEM = 1
value = 8,6 

[State 3810, dashsound]
type = stopSnd
trigger1 = ANIMELEM = 13
channel = 0

[State 3810, dashsound]
type = PlaySnd
trigger1 = ANIMELEM = 13
value = 3500,11 

[State 1110, 1]
type = HELPER
trigger1 = animelem = 14
name = "fire"
ID = 1910
pos = 24,0
postype = P1
stateno = 1910
keyctrl = 0
ownpal = 1
FACING = -1
size.xscale = 1
size.yscale = 1
PAUSEMOVETIME = 5

[State a] 
type = Afterimage
trigger1 = ANIMELEM = 12
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  20
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15

[State 1200,1]
type = ReversalDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
trigger4 = AnimElem = 9
trigger5 = AnimElem = 10
trigger6 = AnimElem = 11
reversal.attr = SCA,NA,SA
numhits = 0
P1STATENO = 1920
sparkno = 7
pausetime = 8,12
hitsound = s3,5

[State 1600]
type = HitDef
trigger1 = AnimElemTime(14) = 0 || AnimElemTime(15) = 0
trigger2 = AnimElemTime(16) = 0 || AnimElemTime(17) = 0
attr = S,SP
hitflag = MAFP
guardflag = MA
animtype = up
damage = 20,5
pausetime = 2,2
sparkno = 7
guard.sparkno = 42
sparkxy = -30,-60+(enemy,pos Y)
hitsound = S2,2
guardsound = S2,0
ground.type = low
ground.slidetime = 20
ground.hittime = 20
yaccel = .58
ground.velocity = 0,-10
ground.cornerpush.veloff = 0
guard.velocity = -4
air.velocity = 0,-10
airguard.velocity = -3,-4
fall = 1
fall.recover = 0
palfx.time = 30
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126,4
Palfx.color = 0

[State 1600]
type = HitDef
trigger1 = AnimElemTime(18) = 0 || AnimElemTime(19) = 0 
attr = S,SP
hitflag = MAFP
guardflag = MA
animtype = DIAGup
damage = 20,5
pausetime = 2,4
sparkno = 7
guard.sparkno = 42
sparkxy = -30,-60+(enemy,pos Y)
hitsound = S2,2
guardsound = S2,0
ground.type = low
ground.slidetime = 20
ground.hittime = 20
yaccel = .58
ground.velocity = -2,-12
ground.cornerpush.veloff = 0
guard.velocity = -4
air.velocity = -2,-12
airguard.velocity = -3,-4
fall = 1
fall.recover = 0
palfx.time = 40
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126,4
Palfx.color = 0

[State 180,]
type = VarRandom
trigger1 = 1
v = 20
range = -20,20

[State 180,]
type = VarRandom
trigger1 = 1
v = 21
range = -50,-80

[State 180,]
type = VarRandom
trigger1 = 1
v = 20
range = -20,20

[State 180,]
type = VarRandom
trigger1 = 1
v = 21
range = -50,-80

[State 1110, 1]
type = HELPER
trigger1 = MOVEHIT >= 1
trigger1 = timemod = 2, 1 && animelem = 14 > 0 && animelem = 20 < 0
name = "fire"
ID = 1340
pos = VAR(20)*1,VAR(21)
postype = P2
stateno = 1340
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 780, Activate]
type = VarSet
trigger1 = animelem = 20,>=0
var(55) = 0

[State 1000, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------
[Statedef 1950]
type     = A
movetype = A
physics  = N
juggle   = 6
poweradd = ifelse(fvar(30) > 0,0,-1000)
velset   = 0,0
anim     = 192
ctrl     = 0
sprpriority = 3

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = Time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 2200, 8]
type = SuperPause
trigger1 = Time = 0
time = 33
movetime = 33
anim = -1
darken = 0

[State 1300, 5]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 2200, 6]
type = Explod
trigger1 = Time = 0
anim = f7310
pos = 2,-70
postype = p1
sprpriority = 2
supermove = 1
bindtime = -1
ID = 200
ownpal = 1

[State 2200, 7]
type = Explod
trigger1 = Time = 0
anim = f7300
pos = 2,-70
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ID = 200
ownpal = 1

[State 1000, 2]
type = PlaySnd
trigger1 = Time = 0
value = f9000,2

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 1,30
helpertype = normal
ID = 1510
stateno = 1510
pos = 0,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.5
size.yscale = 0.5

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 7
helpertype = normal
ID = 1510
stateno = 1510
pos = 0,0
postype = p2    
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.5
size.yscale = 0.5

[State 1000, ]
type = PlaySnd
trigger1 = time = 16
value = s2600,0

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 1,30
trigger2 = AnimElem = 7
value = s2610,0

[State 266,3]
type = envshake
trigger1 = AnimElem = 7
time = 10

[State 780, Activate]
type = VarSet
trigger1 = AnimElem = 1,30
var(55) = 1

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------
[Statedef 2000]
type     = S
movetype = A
physics  = S
juggle   = 9
poweradd = ifelse(fvar(30) > 0,0,-1000)
velset   = 0,0
anim     = 2000
ctrl     = 0
sprpriority = 3
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[state 266,6]
type = envcolor
trigger1 = animelem = 1
time = 55
value = 0,0,0
under = -2

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 1,=2
value = s2100,0

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 1
value = F9000,0

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 6
value = s2,2

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelem = 1
movetime = 28
time = 1
anim = -1
p2defmul = 1
darken = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = animelem = 1
anim = f7000
scale = .5,.5
ownpal = 1
facing = 1
postype = p1
pos = 12,-132
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = animelem = 1
anim = f7010
scale = .5,.5
ownpal = 1
facing = 1
postype = p1
pos = 12,-132
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
helpertype = normal
ID = 2010
stateno = 2010
pos = -6,-56
postype = p1    
facing = 1
keyctrl = 0
ownpal = 0
 
[State 3000]
type = Projectile
trigger1 = AnimElem = 7
projID = 2001
projanim = 2001
projremove = 0
projpriority = 1
projhitanim = -1
projremanim = -1
projsprpriority = 4
projshadow = 0,0,0
projremovetime = 26
ownpal = 1
offset = 0,-55
velocity = 0,0
attr = S, SP
animtype = Hard
damage = 20,2
hitflag = MAFD
guardflag = M
hitsound = s2,2
guardsound = s2,0
pausetime = 2,23
sparkno = 7
guard.sparkno = 42
sparkxy = 45,-15
ground.type = high
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -2,0
air.juggle = 1
air.velocity = -2.5,-1
air.fall = 1
fall.recover = 0
palfx.time = 20
palfx.color = 0
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126,4
getpower = 50,20
givepower = 10,5

[State 3000]
type = Projectile
trigger1 = AnimElem = 6,2
projID = 2002
projanim = 2002
projscale = .8,.8
projremove = 0
projpriority = 1
projhitanim = -1
projremanim = -1
projsprpriority = 4
projshadow = 0,0,0
projremovetime = 24
ownpal = 1
offset = 0,-12
velocity = 0,0
attr = S, SP
animtype = Hard
damage = 135,15
hitflag = MAFD
guardflag = M
hitsound = s2,2
guardsound = s2,0
pausetime = 0,23
sparkno = 7
guard.sparkno = 42
sparkxy = 45,-15
ground.type = high
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -2,0
air.juggle = 1
air.velocity = -3,-2
air.fall = 1
fall.recover = 0
palfx.time = 40
palfx.color = 64
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126,4
getpower = 50,50
givepower = 20,20
projscale = 1.3,1.3

[State 3100,1]
type = NotHitBy
trigger1 = Time = [0,9]
value = SCA

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
[Statedef 2010]
type     = A
movetype = A
physics  = N
juggle   = 9
poweradd = 0
velset   = 0,0
anim     = 2010
ctrl     = 0
sprpriority = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
pos = -6,-56

[State 200, 1]
type = HitDef
trigger1 = time%10 = 0
attr = S, NA; 
animtype = HIGH
damage = 10,2
guardflag = MA;
hitflag = MAF
priority = 3, Hit; 
pausetime = 1,17
hitsound = s2,2
guardsound = s2,0
ground.type = High;
ground.slidetime = 13
ground.hittime  = 12
ground.velocity = -2.5,0
airguard.velocity = -1.5,-1
air.type = High;
air.velocity = -2.5,-1
air.hittime = 13; 
sparkno = 7
guard.sparkno = 42
sparkxy = -25,-15
palfx.time = 20
palfx.color = 0
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 1000, Xe[gX]
type = Destroyself
trigger1 = time = 160

;===========================================================================
[Statedef 1501]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
velset   = 0,0
anim     = 1500
ctrl     = 0
facep2   = 1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 1000, NotHitBy]
type = SuperPause
trigger1 = time = 0
time = 38
movetime = 38
anim = -1

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 1
anim = f7100
scale = .5,.5
ownpal = 1
facing = 1
postype = p1
pos = -5,-75
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 1
anim = f7110
scale = .5,.5
ownpal = 1
facing = 1
postype = p1
pos = -5,-75
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3200, 4]
type = Explod
trigger1 = time=1
anim = f996
scale = .5,.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=1
anim = f995
scale = .5,.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3500, 1]
type = PlaySnd
trigger1 = Time = 1
value = F9000, 0

[State 2000, BGPalFX]
type = BGPalFX
trigger1 = animelem = 6
time = 10
mul = 0,0,0

[State 2000, BGPalFX]
type = BGPalFX
trigger1 = target,stateno = 1503
trigger1 = target,time = 1
time = 35
mul = 0,0,0

[State 1000, Explod]
type = Explod
triggerall = target,stateno = 1503
trigger1 = target,time = 1
anim = 3010
pos = 70,-77
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
ownpal = 1
scale = .27,.27
sprpriority = 9
removeongethit = 0
ignorehitpause = 1

[State 1000, Explod]
type = Explod
triggerall = target,stateno = [1503,1504]
triggerall = time > 38
trigger1 = target,time = 5
trigger2 = target,time = 9
trigger3 = target,time = 13
trigger4 = target,time = 17
trigger5 = target,time = 21
trigger6 = target,time = 25
trigger7 = target,time = 29
trigger8 = target,time = 33
trigger9 = target,time = 37
trigger10= target,time = 41
trigger11= target,time = 45
trigger12= target,time = 49
trigger13= target,time = 53
trigger14= target,time = 57
trigger15= target,time = 61
anim = 3010
pos = (500- random)/10,-(random)/20-30
postype = p2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .1,.1
supermove = 1
ownpal = 1
sprpriority = 9
removeongethit = 0
ignorehitpause = 1

[State 1000, PlaySnd]
type = PlaySnd
triggerall = target,stateno = [1503,1504]
triggerall = time > 38
trigger1 = target,time = 1
trigger2 = target,time = 11
trigger3 = target,time = 21
trigger4 = target,time = 31
trigger5 = target,time = 41
trigger6 = target,time = 51
trigger7 = target,time = 61
value = S3000,12
volume = 255

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4000,1

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = time = [0,50]
value = SCA,AA,AT,AP

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = anim = 1501
value = SCA,AA,AT,AP

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S8,10

[State -2,]
type = Explod
;Trigger1 = time < 15
trigger1 = gametime%3 = 0
;trigger1 = Random < 700
anim = 7063
pos = 0,-40
ownpal = 1
postype = p1
sprpriority = 9
supermove = 1
bindtime = 1
random = 20,40
supermove = 1
scale = .3,.3

[State 3600]
type = ReversalDef
Trigger1 = 1
reversal.attr = SCA,AA,AT
pausetime = 0,0
sparkno = -1
sparkxy = 20,0
hitsound = -1
numhits = 1
p2facing = 1
p2stateno = 1503  ;;;;;;;;;;;;;;;;;;;;;;;;;;;ok

[State 200, HitDef]
type = HitDef
trigger1 = animelem = 6
attr = S, HA
damage = 0,10
getpower = 0,15
animtype = diagup
guardflag = M
hitflag = MAF
priority = 9, Hit
pausetime = 0,0
sparkno = 2
guard.sparkno = 42
sparkxy = -30, -70
hitsound = 5,4
guardsound = 6,2
ground.type = High
ground.slidetime = 23
ground.hittime  = 24
ground.velocity = -10,-7.5
air.velocity = -10,-7.5
air.type = High
air.hittime = 12
p2stateno = 1503 ;;;;ok
p2facing = 1
envshake.time = 35
envshake.ampl = 20
envshake.freq = 270
fall.recover = 0
fall = 1

[State 1000, Explod]
type = Explod
triggerall = movehit
trigger1 = numexplod(10445) = 0
trigger1 = animelem = 6
anim = 10445
pos = 62,-67
id = 10445
postype = p1
facing = 1
vfacing = 1
bindtime = 1
supermove = 1
ownpal = 1
removetime = -2
sprpriority = 9
removeongethit = 0
ignorehitpause = 1

[State deadsuperpause]
type = SuperPause
trigger1 = target,stateno = 1503
trigger1 = gametime%2 = 0
trigger1 = movehit
time = 1
movetime = 0
anim = -1
darken = 0
unhittable = 0
IgnoreHitPause = 1

[State 4000, ScreenBound]
type = ScreenBound
trigger1 = (target,stateno = [1503,1505]) || (BackEdgeBodyDist < -1)
movecamera = 0,0
value = 0

[State 1000, ChangeState]
type = ChangeState
triggerall = animtime = 0
trigger1 = !movehit
trigger2 = (BackEdgeBodyDist > 0)
value = 0
ctrl = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = movehit
trigger1 = animtime = 0
value = 1502

[Statedef 1502]
type    = S
movetype= I
physics = N
ANIM = 1009;;;;;;;;;;;;;ok
velset = 0,0
facep2 = 1

[State 1000, Explod]
type = Explod
triggerall = target,stateno = [1503,1504]
trigger1 = target,time = 5
trigger2 = target,time = 9
trigger3 = target,time = 13
trigger4 = target,time = 17
trigger5 = target,time = 21
trigger6 = target,time = 25
trigger7 = target,time = 29
trigger8 = target,time = 33
trigger9 = target,time = 37
trigger10= target,time = 41
trigger11= target,time = 45
trigger12= target,time = 49
trigger13= target,time = 53
trigger14= target,time = 57
trigger15= target,time = 61
anim = 3010
pos = (500- random)/10,-(random)/20-30
postype = p2
facing = 1
vfacing = 1
supermove = 1
bindtime = 1
removetime = -2
ownpal = 1
scale = .1,.1
sprpriority = 9
removeongethit = 0
ignorehitpause = 1

[State 1000, PlaySnd]
type = PlaySnd
triggerall = target,stateno = [1503,1504]
trigger1 = target,time = 1
trigger2 = target,time = 11
trigger3 = target,time = 21
trigger4 = target,time = 31
trigger5 = target,time = 41
trigger6 = target,time = 51
trigger7 = target,time = 61
value = S3000,12
volume = 255

[State 4000, ScreenBound]
type = ScreenBound
trigger1 = (target,stateno = [1503,1505])  || (BackEdgeBodyDist < -1)
movecamera = 0,0
value = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = target,stateno = 1505
trigger1 = target,time >= 25
value = 100

[Statedef 1503]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 700,]
type = Palfx
trigger1 = time = 0
time = -1
add = 30,30,150
mul = 256,256,256
sinadd = 126,126,126,4
invertall = 1
color = 0

[State 0]
type = lifeadd
trigger1 = time = 0
value = -lifemax*0.25
absolute = 1

[State 0]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[State 1000, VelAdd]
type = Veladd
trigger1 = 1
x = -3
y = 0.35

[State 1000, VelAdd]
type = Velset
trigger1 = time = 0
y = -6

[State 2018, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = selfAnimExist(5052+var(55)*30000)
value = 5052+var(55)*30000

[State 2018, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
trigger1 = !selfAnimExist(5052+var(55)*30000)
value = 1506+var(55)*30000

[State 1026, ChangeState]
type = ChangeState
triggerall = time >= 20
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
trigger3 = Pos Y > -15
trigger3 = vel Y > 0
value = 1504

;-------------------------------------------------------------------------------
[Statedef 1504]
type     = A
movetype = H
physics  = N

[State 1027, 1]
type = PlaySnd
trigger1 = Time = 1
volume = 255
value = F7,2

[State 0, EnvShake]
type = EnvShake
Trigger1 = time = 0
time = 20
ampl = 10

[State 700,]
type = Palfx
trigger1 = time = 0
time = 1
mul = 256,256,256

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, PosFreeze]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, GtFNg\]
type = Explod
trigger1 = Time = 0
anim = F70
pos = 0, floor(ScreenPos Y) - 50
postype = Back
sprpriority = -1

[State 1027, GtFNg\]
type = Explod
trigger1 = Time = 0
anim = F70
pos = 0, floor(ScreenPos Y) - 50
postype = Back
sprpriority = 5

[State 1027, PlaySound]
type = PlaySnd
trigger1 = Time = 0
value = F7,4

[State 1027, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027+var(55)*30000

[State 1027, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1505

;-------------------------------------------------------------------------------
[Statedef 1505]
type     = A
movetype = H
physics  = N

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = vel y <= 0
value = SCA,AA,AT,AP

[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Velset]
type = VelSet
trigger1 = Time = 0
x = 2.5

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, VelAdd]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052+var(55)*30000)
value = 5050+var(55)*30000

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052+var(55)*30000)
value = 5052+var(55)*30000

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050+var(55)*30000
trigger1 = SelfAnimExist(5060+var(55)*30000)
persistent = 0
value = 5060+var(55)*30000

[State 1028, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052+var(55)*30000
trigger1 = SelfAnimExist(5062+var(55)*30000)
persistent = 0
value = 5062+var(55)*30000

[State 1028, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;===========================================================================
[Statedef 3000]
type = S
movetype = A
physics = S
anim = 3000
sprpriority = 2
ctrl = 0
velset = 0,0
juggle = 3 -3*(prevstateno=245)
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 170, G]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 30

[State 3000, env]
type = EnvColor
triggerall = var(40) <= 0
trigger1 = animelem = 1
value = 0,0,0
time = 30
under = 1

[State 3000, SparkSound]
type = PlaySnd
trigger1 = animelem = 2
value = f9000,0

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelem = 2
movetime = 30
poweradd = ifelse(fvar(30) > 0,0,-1000)
time = 30
anim = -1
p2defmul = 1
darken = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 2
anim = f7000
scale = .5,.5
sprpriority = -1
postype = p1
pos = -28,-88
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 2
anim = f7010
scale = .5,.5
sprpriority = 3
postype = p1
pos = -28,-88
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 3000, NOTHITBY]
type = Nothitby
trigger1 = time < 4
value = SCA

[State 3000, Bolt]
type = Explod
trigger1 = AnimElem = 1, =1
anim = 3030
sprpriority = 3
postype = p1
pos = -27,-63
bindtime = 60
supermove = 1
scale = 0.6,0.6

[State 1110, 1]
type = HELPER
trigger1 = time = 34
name = "fire"
ID = 3010
pos = 78,-76
postype = P1
stateno = 3010
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 3, =2
value = 8, 5
channel = 0
supermove = 1

[State 3000, SFX]
type = PlaySnd
trigger1 = time = 35
value = 4, 1
supermove = 1

[State 3000, Hitdef1]
type = HitDef
triggerall = p2stateno != 5040 
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10
trigger3 = AnimElem = 12
trigger4 = AnimElem = 14
attr = S, HP
sprpriority = 2
air.juggle = 3
p2getp1stateno = 1
p2stateno = 7000 + ((p2statetype=C)*10)
animtype = Back
pausetime = 1,13
damage = 51,5
sparkno = 7
guard.sparkno = 42
sparkxy = -10,-82
hitsound = S2,2
guardsound = S2,0
getpower = 0,0
givepower = 15
hitflag = MAF
guardflag = M
guard.velocity = -12
guard.slidetime = 20
guard.hittime = 20
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -3, -9 
air.velocity = -3,-9
fall = 1
fall.recovertime = 35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .5

[State 3000, Hitdef2]
type = HitDef
triggerall = p2stateno != 5040 
trigger1 = AnimElem = 16
attr = S, HP
sprpriority = 2
air.juggle = 3
p2getp1stateno = 1
p2stateno = 7000 + ((p2statetype=C)*10)
animtype = Back
pausetime = 1,2
damage = 51,5
sparkno = 7
guard.sparkno = 42
sparkxy = -10,-82
hitsound = S2,2
guardsound = S2,0
getpower = 0,0
givepower = 15
hitflag = MAF
guardflag = M
guard.velocity = -12
guard.slidetime = 20
guard.hittime = 20
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -4, -9 
air.velocity = -4,-9
fall = 1
fall.yvelocity = -3.4
fall.recovertime = 35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .5

[State 3000, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
[Statedef 3050]
type = S
movetype = A
physics = S
anim = 3050
sprpriority = 2
ctrl = 0
velset = 0,0
juggle = 3 -3*(prevstateno=245)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3050, SparkSound]
type = PlaySnd
trigger1 = animelem = 1, =2
value = f9000,0

[State 3050, env]
type = EnvColor
triggerall = var(40) <= 0
trigger1 = animelem = 1
value = 0,0,0
time = 30
under = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1, = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3050, Super Pause]
type = SuperPause
trigger1 = animelem = 1, = 2
movetime = 28
poweradd = ifelse(fvar(30) > 0,0,-1000)
time = 28
anim = -1
p2defmul = 1
darken = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7000
scale = .5,.5
sprpriority = -1
postype = p1
pos = -9,-89
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7010
scale = .5,.5
sprpriority = 3
postype = p1
pos = -9,-89
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 3050, NOTHITBY]
type = Nothitby
trigger1 = time < 4
value = SCA

[State 3000, Bolt]
type = Explod
trigger1 = AnimElem = 1, =1
anim = 3030
sprpriority = 3
postype = p1
pos = -8,-63
bindtime = 60
supermove = 1
scale = 0.6,0.6

[State 1110, 1]
type = HELPER
trigger1 = time = 34
name = "fire"
ID = 3011
pos = 61,-116
postype = P1
stateno = 3010
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 3050, Voice]
type = PlaySnd
trigger1 = AnimElem = 3, =2
value = 8, 5
channel = 0

[State 3050, SFX]
type = PlaySnd
trigger1 = time = 35
value = 4, 1
supermove = 1

[State 3050, Hitdef1]
type = HitDef
triggerall = p2stateno != 5040 
trigger1 = AnimElem = 7
trigger2 = AnimElem = 9
trigger3 = AnimElem = 11
trigger4 = AnimElem = 13
attr = S, HP
sprpriority = 2
p2getp1stateno = 1
p2stateno = 7000 + ((p2statetype=C)*10)
animtype = Back
pausetime = 1,13
damage = 51,5
sparkno = 7
guard.sparkno = 42
sparkxy = -10,-122
hitsound = S2,2
guardsound = S2,0
getpower = 0,0
givepower = 15
hitflag = MAF
guardflag = M
guard.velocity = -12
guard.slidetime = 20
guard.hittime = 20
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -3, -9 
air.velocity = -3,-9
fall = 1
fall.recovertime = 35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .5

[State 3050, Hitdef2]
type = HitDef
triggerall = p2stateno != 5040 
trigger1 = AnimElem = 15
attr = S, HP
sprpriority = 2
p2getp1stateno = 1
p2stateno = 7000 + ((p2statetype=C)*10)
animtype = Back
pausetime = 1,2
damage = 51,5
sparkno = 7
guard.sparkno = 42
sparkxy = -10,-122
hitsound = S2,2
guardsound = S2,0
getpower = 0,0
givepower = 15
hitflag = MAF
guardflag = M
guard.velocity = -12
guard.slidetime = 20
guard.hittime = 20
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -4, -9 
air.velocity = -4,-9
fall.yvelocity = -3.4
fall = 1
fall.recovertime = 35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .5

[State 3050, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
[Statedef 3100]
type = S
movetype = A
physics = S
anim = 3100
sprpriority = 2
ctrl = 0
velset = 0,0

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3100, ShadowReset]
type = VarSet
trigger1 = time = 0
v = 21
value = 1

[State 3100, Voice]
type = PlaySnd
trigger1 = time = 0
value = 8,6
channel = 0
supermove = 1

[State 3100, SparkSound]
type = PlaySnd
trigger1 = AnimElem = 1, = 2
value = f9000,0

[State 3100, Super Pause]
type = SuperPause
trigger1 = animelem = 1, = 2
movetime = 28
poweradd = ifelse(fvar(30) > 0,0,-1000)
time = 28
anim = -1
p2defmul = 1
darken = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1, = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7000
scale = .5,.5
sprpriority = -1
postype = p1
pos = -63,-74
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7010
scale = .5,.5
sprpriority = 3
postype = p1
pos = -63,-74
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 3100, NOTHITBY]
type = Nothitby
trigger1 = time < 4
value = SCA

[State 3100, env]
type = EnvColor
triggerall = var(40) <= 0
trigger1 = animelem = 1
value = 0,0,0
time = 30
under = 1

[State 3100, Invincible]
type = NotHitBy
trigger1 = animelem = 3, >= 0
value = SCA

[State 3100, Camera]
type = Screenbound
trigger1 = animelem = 4, >= 0
movecamera = 0,0

[State 3100, Shadow1] ; Initial Dash
type = Helper
trigger1 = animelem = 5
stateno = 3105
name = "Shadow"
id = 10
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3100, Shadow2] ;Punch #1
type = Helper
trigger1 = NumHelper(10) = 1
trigger1 = helper(10), anim = 3110 && var(21) = 2
stateno = 3115
name = "Punch #1"
id = 3115
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3100, Shadow3] ;Punch #2
type = Helper
trigger1 = var(21) = 3
stateno = 3120
name = "Punch #2"
id = 3120
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3100, Shadow4] ;Knee
type = Helper
trigger1 = var(21) = 4
stateno = 3125
name = "Knee"
id = 3125
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3100, Shadow5] ;Dash
type = Helper
trigger1 = var(21) = 5
stateno = 3130
name = "2nd Dash"
id = 3130
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3100, Shadow6] ;High Kick
type = ChangeState
trigger1 = var(21) = 6
value = 3135
persistent = 0

[State 3100, Block]
type = VarSet
triggerall = NumHelper(10) = 1
trigger1 = helper(10), moveguarded
trigger2 = helper(10), time = 14 && !(helper(10), movecontact)
v = 19
value = floor(helper(10), rootdist x)

[State 3100, Block]
type = PosAdd
triggerall = NumHelper(10) = 1
trigger1 = helper(10), moveguarded
trigger2 = helper(10), time = 14 && !(helper(10), movecontact)
x = helper(10), rootdist x * -1

[State 3100, ChangeState]
type = ChangeState
;trigger1 = anim = 3101 && animelem = 1, =1
triggerall = NumHelper(10) = 1
trigger1 = helper(10), moveguarded
trigger2 = helper(10), time = 14 && !(helper(10), movecontact)
value = 3107

[State 3100, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
[Statedef 3105]
type = S
movetype = A
physics = N
anim = 3105
id = 3105

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  30
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15

[State 3105, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3105, Vel]
type = VelSet
trigger1 = time = 2
x = 16

[State 3100, SFX]
type = PlaySnd
trigger1 = time = 2
;trigger1 = animelem = 3
value = 4,2

[State 3105, Hit]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HP
damage = 120,10
animtype = Heavy
guardflag = M
hitflag = MAF
p2stateno = 3145
p2getp1stateno = 1
priority = 4, Hit
pausetime = 10,10
getpower = 0,0
p2stateno = 3145
sparkno = 2
forcestand = 1
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
guard.slidetime = 22
guard.hittime = 22
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3105, Block]
type = ChangeAnim
trigger1 = moveguarded
trigger2 = time = 14 && !movecontact
value = 3106
persistent = 0

[State 3105, Block]
type = VelSet
trigger1 = moveguarded
trigger2 = time = 14 && !movecontact
x = 0
persistent = 0

[State 3105, Stop]
type = VelSet
triggerall = movecontact
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
x = 0
persistent = 0

[State 3105, Align]
type = PosSet
triggerall = movecontact;!MoveGuarded
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
x = 96 * (root, facing)
persistent = 0

[State 3105, Anim]
type = ChangeAnim
trigger1 = movecontact
trigger1 = time > 3 && vel x = 0
value = 3110
persistent = 0

[State 3105, DetermineDistance]
type = ParentVarSet
triggerall = !MoveGuarded
trigger1 = time > 3 && vel x = 0
v = 19
value = helper(10), floor(Abs(rootdist x))
persistent = 0

[State 3125, ShadowCount]
type = ParentVarAdd
trigger1 = pos x = 96 * (root,facing)
v = 21
value = 1
persistent = 0

[State 3105, Destroy]
type = DestroySelf
trigger1 = !MoveGuarded
trigger1 = time > 3 && vel x = 0
trigger1 = parent, stateno = 3140
trigger2 = anim = 3106
trigger2 = animtime = 0
trigger3 = parent, movetype = H
trigger4 = parent, stateno = 3107

;-----------------------------------------------------------------------------------
[Statedef 3107]
type = S
movetype = I
physics = S
anim = 3107
sprpriority = 2
ctrl = 0
velset = 0,0

[State 3100, Blocksprite]
type = Explod
trigger1 = numhelper(10) = 1
trigger1 = helper(10), moveguarded
anim = 3101
sprpriority = 2
postype = p1
pos = var(19),0
bindtime = 1

[State 3107, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
[Statedef 3115]
type = S
movetype = A
physics = N
anim = 3115
id = 3115

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  999
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15

[State 3115, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3100, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3115, Vel]
type = VelSet
trigger1 = time = 4
x = 16

[State 3115, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 30,5
animtype = Heavy
guardflag = M
getpower = 0,0
hitflag = MAF
p2stateno = 3145
p2getp1stateno = 1
priority = 4, Hit
pausetime = 10,10
sparkno = 2
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3115, ShadowCount]
type = ParentVarAdd
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
v = 21
value = 1

[State 3115, Destroy]
type = DestroySelf
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
trigger3 = time >= 40

;-----------------------------------------------------------------------------------
[Statedef 3120]
type = S
movetype = A
physics = N
anim = 3120
id = 3120

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  999
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15

[State 3120, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3100, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3120, Vel]
type = VelSet
trigger1 = animelem = 3
x = 16

[State 3120, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 25,5
animtype = Heavy
guardflag = M
hitflag = MAF
p2stateno = 3145
p2getp1stateno = 1
priority = 4, Hit
pausetime = 10,10
getpower = 0,0
sparkno = 2
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3120, ShadowCount]
type = ParentVarAdd
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
v = 21
value = 1

[State 3120, Destroy]
type = DestroySelf
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
trigger3 = time >= 40

;-----------------------------------------------------------------------------------
[Statedef 3125]
type = S
movetype = A
physics = N
anim = 3125
id = 3125

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  999
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15

[State 3125, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3125, Vel]
type = VelSet
trigger1 = animelem = 3
x = 16

[State 3100, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3125, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 20,5
animtype = Heavy
guardflag = M
hitflag = MAF
p2stateno = 3145
p2getp1stateno = 1
priority = 4, Hit
pausetime = 10,10
getpower = 0,0
sparkno = 2
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3125, ShadowCount]
type = ParentVarAdd
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
v = 21
value = 1

[State 3125, Destroy]
type = DestroySelf
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
trigger3 = time >= 40

;-----------------------------------------------------------------------------------
[Statedef 3130]
type = S
movetype = A
physics = N
anim = 3130
id = 3130

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  999
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15

[State 3130, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3100, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3130, Vel]
type = VelSet
trigger1 = animelem = 3
x = 16

[State 3130, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 25,5
animtype = Heavy
guardflag = M
hitflag = MAF
p2stateno = 3145
p2getp1stateno = 1
priority = 4, Hit
pausetime = 10,10
getpower = 0,0
sparkno = 2
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3130, ShadowCount]
type = ParentVarAdd
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
v = 21
value = 1

[State 3130, Destroy]
type = DestroySelf
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
trigger3 = time >= 40

;-----------------------------------------------------------------------------------
[Statedef 3135]
type = S
movetype = A
physics = N
anim = 3135
ctrl = 0

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  40
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15

[State 3135, Invincible]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3135, Vel]
type = VelSet
trigger1 = animelem = 3
x = 16

[State 3100, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3135, DistanceCountdown]
type = VarAdd
trigger1 = animelem = 3, >= 0
v = 19
value = -16

[State 3135, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 40,5
animtype = Heavy
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 10,10
p2stateno = 3150
p2getp1stateno = 1
getpower = 0,0
sparkno = 7
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = -5,-8
air.velocity = 0,0
fall = 1
fall.recover = 0

[State 3135, State]
type = ChangeState
;trigger1 = helper(10), rootdist x > 8
trigger1 = var(19) < -60;-12
value = 3140
persistent = 0

;-----------------------------------------------------------------------------------
[Statedef 3140]
type = S
movetype = I
physics = S
anim = 3140
velset = 0,0
ctrl = 0

[State 0, 1]
type = AllPalFX
trigger1 = ANIMELEM = 8
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State 3140, State]
type = posadd
trigger1 = time = 0
x = -48

[State 3140, Invincible]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3140, Voice]
type = PlaySnd
trigger1 = time = 10
value = 8,7
channel = 0
supermove = 1

[State 3140, State]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
[Statedef 3145]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 3145, Anim]
type = Changeanim2
trigger1 = time = 0
value = 3145+var(55)*30000

[State 3145, Align]
type = PosSet
trigger1 = time = 0
y = 0

;-----------------------------------------------------------------------------------
[Statedef 3150]
type = A
movetype = H
physics = N
ctrl = 0

[State 3150, Anim]
type = velset
trigger1 = time = 10
x = -3
y = -13

[State 3150, Anim]
type = ChangeAnim2
trigger1 = time = 10; && hitshakeover = 1
value = 3150+var(55)*30000

[State 3150, Gravity]
type = VelAdd
trigger1 = time >= 10
y = .43

[State 3150, Shock]
type = PalFX
trigger1 = Time % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 3150, State]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 5100

;-----------------------------------------------------------------------------------
[Statedef 3200]
type = S
movetype = A
physics = S
anim = 3200
sprpriority = 2
ctrl = 0
velset = 0,0
juggle = 14 -14*(prevstateno=245)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3200, Voice]
type = PlaySnd
trigger1 = time = 0
value = 8,8

[State 3200, env]
type = EnvColor
triggerall = var(40) <= 0
trigger1 = animelem = 1
value = 0,0,0
time = 30
under = 1

[State 3200, Super Pause]
type = SuperPause
trigger1 = animelem = 1, = 2
movetime = 28
poweradd = ifelse(fvar(30) > 0,0,-1000)
time = 28
anim = -1
p2defmul = 1
darken = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1, = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7000
scale = .5,.5
sprpriority = -1
postype = p1
pos = -15,-82
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7010
scale = .5,.5
sprpriority = 3
postype = p1
pos = -15,-82
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 3500, 1]
type = PlaySnd
trigger1 = animelem = 1, = 2
value = F9000, 0

[State 3200, NOTHITBY]
type = Nothitby
trigger1 = animelem = 4, <= 0
value = SCA

[State 3200, HitDef]
type = HitDef
triggerall = var(5) <= 0
trigger1 = time = 4 && p2statetype !=A 
attr = S, HT
id = 3200
animtype = Heavy
guard = 0
hitflag = M
priority = 7, Miss
poweradd = 20,5
p1stateno = 3210
p2stateno = 3220
p2getp1stateno = 1
p2facing = 1
sparkno = -1
sparkxy = -25,-83
hitsound = -1
guardsound = S2,0
ground.type = High
air.animtype = Low
fall = 1

[State 3200, HitDef]
type = HitDef
triggerall = var(5) <= 0
trigger1 = prevstateno = 245
trigger1 = time = 4 && p2statetype !=A 
attr = S, HT
id = 3200
animtype = Heavy
guard = 0
hitflag = M
priority = 7, Miss
poweradd = 20,5
p1stateno = 3210
p2stateno = 3220
p2getp1stateno = 1
p2facing = 1
sparkno = -1
sparkxy = -25,-83
hitsound = -1
guardsound = S2,0
ground.type = High
air.animtype = Low
fall = 1

[State 3200, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
[Statedef 3210]
type = S
movetype = A
physics = S
anim = 3210
sprpriority = 3
ctrl = 0
velset = 0,0

[State 3200, SparkSound]
type = PlaySnd
trigger1 = animelem = 1
value = F800,0
channel = 1

[State 3210, Invincibility]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3210, Color]
type = EnvColor
trigger1 = timemod = 6, 1 && time > 25 && animelem = 6 < 0
;trigger2 = time = 30
value = 255, 255, 255
time = 1

[State 3210, Move]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 16

[State 3210, Bind1]
type = TargetBind
trigger1 = animelem = 3, < 0
pos = 28,0

[State 3210, Bind2]
type = TargetBind
trigger1 = animelem = 3, >= 0 && animelem = 4, < 0
pos = 4,-20

[State 3210, Bind3]
type = TargetBind
trigger1 = animelem = 4, >= 0 && animelem = 5, < 0
pos = 0,0

[State 3210, Bind4]
type = TargetBind
trigger1 = animelem = 5, >= 0 && animelem = 6, < 0
pos = 8,0

[State 3210, Bind5]
type = TargetBind
trigger1 = animelem = 6, >= 0 && animelem = 7, < 0
pos = -4,-45;2, -130

[State 3210, Bind5]
type = TargetBind
trigger1 = animelem = 7, >= 0 && animelem = 8, < 0
pos = -16,-44

[State 3210, Bind6]
type = TargetBind
trigger1 = animelem = 8, = 0
pos = 31,-39

[State 1110, 1]
type = HELPER
trigger1 = TIME = 24
name = "fire"
ID = 3230
pos = 0,0
postype = P1
stateno = 3230
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 3210, SFX]
type = PlaySnd
trigger1 = time = 24
value = 4,5
volume = 128

[State 3000, Lightning Ball]
type = Explod
trigger1 = TIME = 97
anim = 4011
ownpal = 1
sprpriority = 4
postype = p1
removeongethit = 1
pos = 0,-90
bindtime = -1
scale = 0.6,0.6

[State 40, Snd]
type = PlaySnd
trigger1 = TIME = 97
value = 6000,1

[State 180,]
type = VarRandom
trigger1 = 1
v = 20
range = -40,0

[State 180,]
type = VarRandom
trigger1 = 1
v = 21
range = -30,-120

[State explod]
type = Explod
trigger1 = animelem = 1
anim = f9
ownpal = 1
sprpriority = 4
postype = p1
removeongethit = 1
pos = 50,-100

[State explod]
type = Explod
trigger1 = TIME = 95
anim = 2016
id = 2016
ownpal = 1
sprpriority = 4
postype = p1
removeongethit = 1
pos = 0,-110
bindtime = -1
scale = 0.5,0.5

[State explod];c
type = Explod
trigger1 = TIME = 24
anim = 2015
id = 103
sprpriority = 5
postype = p1
pos = 18,-80
bindtime = 1
ignorehitpause = 1
ownpal = 1
under = 0
scale = 0.5,0.5

[State 705, 3]
type = RemoveExplod
trigger1 = TIME = 40
id = 2016

[State 3210, SFX]
type = PlaySnd
trigger1 = time = 97
value = 4,6

[State 3210, Damage]
type = TargetLifeAdd
trigger1 = timemod = 2, 1 && animelem = 5, >= 0 && animelem = 6, < 0
value = -11;21
kill = 0

[State 3210, Damage]
type = TargetLifeAdd
trigger1 = time = 97
value = -3

[State 3210, Move2]
type = PosAdd
trigger1 = animelem = 10
x = -14

[State 3210, Move3]
type = PosAdd
trigger1 = animelem = 11
x = -12

[State 3210, Move4]
type = PosAdd
trigger1 = animelem = 12
trigger2 = animtime = 0
x = -16

[State 3210, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
[Statedef 3220]
type = S
movetype = H
physics = N
sprpriority = 0
ctrl = 0
velset = 0,0

[State 3220, Invincibility]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3220, Camera]
type = ScreenBound
trigger1 = time < 97
movecamera = 0,0

[State 3220, Anim]
type = ChangeAnim2
trigger1 = time = 0
value = 3220+var(55)*30000

[State 3220, Shock]
type = PalFX
trigger1 = timemod = 2, 1 && time >= 24
time = 1
invertall = 1
add = 30,30,150
mul = 256,256,256
sinadd = 126,126,126,4
color = 0

[State 3220, Anim2]
type = ChangeAnim2
trigger1 = time = 74
value = 3225+var(55)*30000

[State 3220, Anim3]
type = ChangeAnim
trigger1 = time = 97
value = 5050+var(55)*30000

[State 3220, Anim3]
type = ChangeAnim
trigger1 = selfanimexist(5060+var(55)*30000)
trigger1 = time = 102
value = 5060+var(55)*30000

[State 3220, FlyAway]
type = VelSet
trigger1 = time = 97
x = -6
y = -8

[State 3220, Gravity]
type = Gravity
trigger1 = time >= 97

[State 3220, State]
type = Selfstate
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100
ctrl = 0

;===========================================================================
[Statedef 3500]
type = S
movetype = A
physics = S
anim = 3500
sprpriority = 2
ctrl = 0
velset = 0,0
juggle = 5
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3500, KillMAX]
type = VarSet
trigger1 = animelem = 3, =3
v = 10
value = 0

[State 3500, env]
type = EnvColor
triggerall = var(40) <= 0
trigger1 = animelem = 1
value = 0,0,0
time = 30
under = 1

[State 3500, SparkSound]
type = PlaySnd
trigger1 = animelem = 1, = 2
value = f9000,1

[State 3500, Super Pause]
type = SuperPause
trigger1 = animelem = 1, = 2
movetime = 28
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
time = 28
anim = -1
p2defmul = 1
darken = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1, = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7100
scale = .5,.5
sprpriority = -1
postype = p1
pos = -28,-88
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7110
scale = .5,.5
sprpriority = 3
postype = p1
pos = -28,-88
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 3200, 4]
type = Explod
trigger1 = animelem = 1, = 2
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = animelem = 1, = 2
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3500, NOTHITBY]
type = Nothitby
trigger1 = time < 4
value = SCA

[State 3000, Bolt]
type = Explod
trigger1 = AnimElem = 3, =2
anim = 3030
sprpriority = 3
postype = p1
pos = -27,-63
bindtime = 60
supermove = 1
scale = 0.5,0.5

[State 3000, Lightning Ball]
type = Explod
trigger1 = AnimElem = 7
anim = 3015
ownpal = 1
sprpriority = 4
postype = p1
removeongethit = 1
pos = 78,-76
bindtime = -1
scale = 0.5,0.5

[State 3500, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3500, 12
supermove = 1
channel = 0

[State 0, Snd]
type = PlaySnd
trigger1 = animelem = 7
value = 3010,0

[State 3500, Hitdef1]
type = HitDef
triggerall = p2stateno != 5040 
trigger1 = AnimElem = 7
trigger2 = AnimElem = 9
trigger3 = AnimElem = 11
trigger4 = AnimElem = 13
trigger5 = AnimElem = 15
trigger6 = AnimElem = 17
trigger7 = AnimElem = 19
trigger8 = AnimElem = 21
trigger9 = AnimElem = 23
attr = S, HP
sprpriority = 2
air.juggle = 3
p2getp1stateno = 1
p2stateno = 7000 + ((p2statetype=C)*10)
animtype = Hard
pausetime = 1,12
damage = 45,5
sparkno = 7
guard.sparkno = 42
sparkxy = -10,-82
hitsound = S2,2
guardsound = S2,0
getpower = 0,0
givepower = 15
hitflag = MAF
guardflag = M
guard.velocity = -12
guard.slidetime = 20
guard.hittime = 20
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -3, -9 
air.velocity = -3,-9
fall = 1
fall.recovertime = 35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .5

[State 3500, Hitdef2]
type = HitDef
triggerall = p2stateno != 5040 
trigger1 = AnimElem = 25
attr = S, HP
sprpriority = 2
air.juggle = 3
p2getp1stateno = 1
p2stateno = 7000 + ((p2statetype=C)*10)
animtype = Diagup
pausetime = 1,6
damage = 48,5
sparkno = 7
guard.sparkno = 42
sparkxy = -10,-82
hitsound = S2,2
guardsound = S2,0
getpower = 0,0
givepower = 15
hitflag = MAF
guardflag = M
guard.velocity = -12
guard.slidetime = 20
guard.hittime = 20
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -4, -9 
air.velocity = -4,-9
fall = 1
fall.yvelocity = -3.4
fall.recovertime = 35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .5

[State 3500, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------
[Statedef 3600]
type = S
movetype = A
physics = S
anim = 3100
sprpriority = 2
ctrl = 0
velset = 0,0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3600, KillMAX]
type = VarSet
trigger1 = animelem = 3
v = 10
value = 0

[State 3600, Voice]
type = PlaySnd
trigger1 = time = 0
value = 8,6
channel = 0
supermove = 1

[State 3600, ShadowReset]
type = VarSet
trigger1 = time = 0
v = 21
value = 1

[State 3600, env]
type = EnvColor
triggerall = var(40) <= 0
trigger1 = animelem = 1
value = 0,0,0
time = 30
under = 1

[State 3600, SparkSound]
type = PlaySnd
trigger1 = animelem = 1, = 2
value = f9000,1

[State 3600, Super Pause]
type = SuperPause
trigger1 = animelem = 1, = 2
movetime = 28
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
time = 28
anim = -1
p2defmul = 1
darken = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1, = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7100
scale = .5,.5
sprpriority = -1
postype = p1
pos = -63,-74
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7110
scale = .5,.5
sprpriority = 3
postype = p1
pos = -63,-74
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 3200, 4]
type = Explod
trigger1 = animelem = 1, = 2
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = animelem = 1, = 2
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3600, NOTHITBY]
type = Nothitby
trigger1 = time < 4
value = SCA

[State 3600, Invincible]
type = NotHitBy
trigger1 = animelem = 3, >= 0
value = SCA

[State 3600, Camera]
type = Screenbound
trigger1 = animelem = 4, >= 0
movecamera = 0,0

[State 3600, Shadow1] ; Initial Dash
type = Helper
trigger1 = animelem = 5
stateno = 3605
name = "Shadow"
id = 10
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3600, Shadow2] ;Punch #1
type = Helper
triggerall = NumHelper(10) = 1
trigger1 = helper(10), anim = 3110 && var(21) = 2
stateno = 3615
name = "Punch #1 A"
id = 3615
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3600, Shadow3] ;Punch #2
type = Helper
trigger1 = var(21) = 3
stateno = 3620
name = "Punch #2 A"
id = 3620
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3600, Shadow4] ;Punch #1 B
type = Helper
trigger1 = var(21) = 4
stateno = 3625
name = "Punch #1 B"
id = 3625
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3600, Shadow5] ;High kick
type = Helper
trigger1 = var(21) = 5
stateno = 3630
name = "High Kick"
id = 3630
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3600, Shadow6] ;Knee
type = Helper
trigger1 = var(21) = 6
stateno = 3635
name = "Knee"
id = 3635
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3600, Shadow3] ;Punch #2
type = Helper
trigger1 = var(21) = 7
stateno = 3640
name = "Punch #2 A"
id = 3640
persistent = 0
postype = p1
keyctrl = 0
pos = 0,0
ownpal = 1

[State 3600, Shadow6] ;Straight Kick
type = ChangeState
trigger1 = var(21) = 8
value = 3645
persistent = 0

[State 3600, Block]
type = VarSet
triggerall = NumHelper(10) = 1
trigger1 = helper(10), moveguarded
trigger2 = helper(10), time = 14 && !(helper(10), movecontact)
v = 19
value = floor(helper(10), rootdist x)

[State 3600, Block]
type = PosAdd
triggerall = NumHelper(10) = 1
trigger1 = helper(10), moveguarded
trigger2 = helper(10), time = 14 && !(helper(10), movecontact)
x = helper(10), rootdist x * -1

[State 3600, ChangeState]
type = ChangeState
;trigger1 = anim = 3101 && animelem = 1, =1
triggerall = NumHelper(10) = 1
trigger1 = helper(10), moveguarded
trigger2 = helper(10), time = 14 && !(helper(10), movecontact)
value = 3607

[State 3600, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------
[Statedef 3605]
type = S
movetype = A
physics = N
anim = 3105
id = 3605

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  30
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15

[State 3605, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3605, Vel]
type = VelSet
trigger1 = time = 2
x = 16

[State 3600, SFX]
type = PlaySnd
trigger1 = time = 2
;trigger1 = animelem = 3
value = 4,2

[State 3605, Hit]
type = HitDef
trigger1 = p2stateno != [5020,5040]
trigger1 = AnimElem = 2
attr = S, HP
damage = 100,10
animtype = Heavy
guardflag = M
hitflag = MAF
p2stateno = 3145
p2getp1stateno = 1
priority = 4, Hit
pausetime = 10,10
getpower = 0,0
sparkno = 2
forcestand = 1
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3605, Block]
type = ChangeAnim
trigger1 = moveguarded
trigger2 = time = 14 && !movecontact
value = 3106
persistent = 0

[State 3605, Block]
type = VelSet
trigger1 = moveguarded
trigger2 = time = 14 && !movecontact
x = 0
persistent = 0

[State 3605, Stop]
type = VelSet
triggerall = movecontact
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
x = 0
persistent = 0

[State 3605, Align]
type = PosSet
triggerall = movecontact;!MoveGuarded
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
x = 96 * (root, facing)
persistent = 0

[State 3605, Anim]
type = ChangeAnim
trigger1 = movecontact
trigger1 = time > 3 && vel x = 0
value = 3110
persistent = 0

[State 3605, DetermineDistance]
type = ParentVarSet
triggerall = !MoveGuarded
trigger1 = time > 3 && vel x = 0
v = 19
value = helper(10), floor(Abs(rootdist x))
persistent = 0

[State 3625, ShadowCount]
type = ParentVarAdd
trigger1 = pos x = 96 * (root,facing)
v = 21
value = 1
persistent = 0

[State 3605, Destroy]
type = DestroySelf
trigger1 = !MoveGuarded
trigger1 = time > 3 && vel x = 0
trigger1 = parent, stateno = 3650
trigger2 = anim = 3106
trigger2 = animtime = 0
trigger3 = parent, movetype = H
trigger4 = parent, stateno = 3607

;------------------------------------------------------------------------------------
[Statedef 3607]
type = S
movetype = I
physics = S
anim = 3107
sprpriority = 2
ctrl = 0
velset = 0,0

[State 3600, Blocksprite]
type = Explod
trigger1 = numhelper(10) = 1
trigger1 = helper(10), moveguarded
anim = 3101
sprpriority = 2
postype = p1
pos = var(19),0
bindtime = 1

[State 3607, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------
[Statedef 3615]
type = S
movetype = A
physics = N
anim = 3115
id = 3615

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State 3200, 7]
type = PalFX
trigger1 = ANIM = 3110
time = 100
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  30
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15

[State 3615, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3600, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3615, Vel]
type = VelSet
trigger1 = time = 4
x = 16

[State 3615, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 50,5
animtype = Heavy
guardflag = M
getpower = 0,0
hitflag = MAF
p2stateno = 3145
p2getp1stateno = 1
priority = 4, Hit
pausetime = 10,10
sparkno = 2
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3615, ShadowCount]
type = ParentVarAdd
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
v = 21
value = 1

[State 3615, Destroy]
type = DestroySelf
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
trigger3 = time >= 40

;------------------------------------------------------------------------------------
[Statedef 3620]
type = S
movetype = A
physics = N
anim = 3120
id = 3620


[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  30
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15
[State 3620, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3600, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3620, Vel]
type = VelSet
trigger1 = animelem = 3
x = 16

[State 3620, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 50,5
animtype = Heavy
guardflag = M
hitflag = MAF
p2stateno = 3145
p2getp1stateno = 1
priority = 4, Hit
pausetime = 10,10
getpower = 0,0
sparkno = 2
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3620, ShadowCount]
type = ParentVarAdd
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
v = 21
value = 1

[State 3620, Destroy]
type = DestroySelf
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
trigger3 = time >= 40

;------------------------------------------------------------------------------------
[Statedef 3625]
type = S
movetype = A
physics = N
anim = 3115
id = 3625

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State 3200, 7]
type = PalFX
trigger1 = ANIM = 3110
time = 100
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  30
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15
[State 3625, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3625, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3625, Vel]
type = VelSet
trigger1 = time = 4
x = 16

[State 3625, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 50,5
animtype = Heavy
guardflag = M
getpower = 0,0
hitflag = MAF
p2getp1stateno = 1
p2stateno = 3145
priority = 4, Hit
pausetime = 10,10
sparkno = 2
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3625, ShadowCount]
type = ParentVarAdd
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
v = 21
value = 1

[State 3625, Destroy]
type = DestroySelf
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
trigger3 = time >= 40

;------------------------------------------------------------------------------------
[Statedef 3630]
type = S
movetype = A
physics = N
anim = 3135
id = 3630

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  30
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15
[State 3630, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3630, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3630, Vel]
type = VelSet
trigger1 = time = 4
x = 16

[State 3630, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 40,5
animtype = Heavy
guardflag = M
getpower = 0,0
hitflag = MAF
p2getp1stateno = 1
p2stateno = 3145
priority = 4, Hit
pausetime = 10,10
sparkno = 2
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3630, ShadowCount]
type = ParentVarAdd
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
v = 21
value = 1

[State 3630, Destroy]
type = DestroySelf
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
trigger3 = time >= 40

;------------------------------------------------------------------------------------
[Statedef 3635]
type = S
movetype = A
physics = N
anim = 3125
id = 3635

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  30
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15
[State 3635, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3635, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3635, Vel]
type = VelSet
trigger1 = time = 4
x = 16

[State 3635, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 40,5
animtype = Heavy
guardflag = M
getpower = 0,0
hitflag = MAF
p2getp1stateno = 1
p2stateno = 3145
priority = 4, Hit
pausetime = 10,10
sparkno = 2
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3635, ShadowCount]
type = ParentVarAdd
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
v = 21
value = 1

[State 3635, Destroy]
type = DestroySelf
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
trigger3 = time >= 40

;------------------------------------------------------------------------------------
[Statedef 3640]
type = S
movetype = A
physics = N
anim = 3120
id = 3640

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  30
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15

[State 3640, Camera]
type = Screenbound
trigger1 = time >= 0
movecamera = 0,0

[State 3640, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3640, Vel]
type = VelSet
trigger1 = time = 4
x = 16

[State 3640, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 30,5
animtype = Heavy
guardflag = M
getpower = 0,0
hitflag = MAF
p2getp1stateno = 1
p2stateno = 3145
priority = 4, Hit
pausetime = 10,10
sparkno = 2
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
kill = 0

[State 3640, ShadowCount]
type = ParentVarAdd
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
v = 21
value = 1

[State 3640, Destroy]
type = DestroySelf
trigger1 = pos x > 170 && root, facing = 1
trigger2 = pos x < -170 && root, facing = -1
trigger3 = time >= 40

;------------------------------------------------------------------------------------
[Statedef 3645]
type = S
movetype = A
physics = N
anim = 3136
ctrl = 0

[State 0, 1]
type = AllPalFX
trigger1 = MOVEHIT 
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256

[State a] 
type = Afterimage
trigger1 = TIME = 0
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,0
time    =  30
length  = 8
TimeGap = 1
FrameGap = 1
sprpriority = 15

[State 3645, Invincible]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3645, Vel]
type = VelSet
trigger1 = animelem = 3
x = 16

[State 3645, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 4,2

[State 3645, DistanceCountdown]
type = VarAdd
trigger1 = animelem = 3, >= 0
v = 19
value = -16

[State 3645, Hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage = 70,5
animtype = Heavy
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 10,10
p2getp1stateno = 1
p2stateno = 3150
getpower = 0,0
sparkno = 2
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
ground.type = High
ground.slidetime = 50
ground.hittime = 50
ground.velocity = -5,-8
air.velocity = 0,0
fall = 1
fall.recover = 0

[State 3645, State]
type = ChangeState
trigger1 = var(19) < -60
value = 3650
persistent = 0

;------------------------------------------------------------------------------------
[Statedef 3650]
type = S
movetype = I
physics = S
anim = 3650
velset = 0,0
ctrl = 0

[State 0, 1]
type = AllPalFX
trigger1 = ANIMELEM = 3
add = 255,255,255
sinadd = -255,-255,-255,38
persistent = 0
time =10
ignorehitpause = 1

[State 3200, 7]
type = PalFX
trigger1 = TIME = 0
time = 40
add = 110,110,110
mul = 255,255,255
sinadd = 40,40,40,6
invertall = 0
color = 256


[State 3650, State]
type = posadd
trigger1 = time = 0
x = -48

[State 3650, Invincible]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3650, Voice]
type = PlaySnd
trigger1 = time = 10
value = 8,7
channel = 0
supermove = 1

[State 3650, State]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------
[Statedef 3700]
type = S
movetype = A
physics = S
anim = 3200
sprpriority = 2
ctrl = 0
velset = 0,0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3700, Voice]
type = PlaySnd
trigger1 = time = 0
value = 8,8
channel = 0

[State 3700, KillMAX]
type = VarSet
trigger1 = time = 4
v = 10
value = 0

[State 3700, env]
type = EnvColor
triggerall = var(40) <= 0
trigger1 = animelem = 1
value = 0,0,0
time = 30
under = 1

[State 3700, SparkSound]
type = PlaySnd
trigger1 = animelem = 1, = 2
value = F9000,1

[State 3700, Super Pause]
type = SuperPause
trigger1 = animelem = 1, = 2
movetime = 28
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
time = 28
anim = -1
p2defmul = 1
darken = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1, = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7100
scale = .5,.5
sprpriority = -1
postype = p1
pos = -15,-82
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 1, = 2
anim = f7110
scale = .5,.5
sprpriority = 3
postype = p1
pos = -15,-82
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 3200, 4]
type = Explod
trigger1 = animelem = 1, = 2
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = animelem = 1, = 2
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3700, NOTHITBY]
type = Nothitby
trigger1 = animelem = 4, <= 0
value = SCA

[State 3700, HitDef]
type = HitDef
triggerall = var(5) <= 0
trigger1 = time = 4 && p2statetype !=A
attr = S, HT
id = 3200
animtype = Heavy
guard = 0
hitflag = M
priority = 7, Miss
poweradd = 20,5
p1stateno = 3710
p2stateno = 3220
p2getp1stateno = 1
p2facing = 1
sparkno = -1
sparkxy = -25,-83
hitsound = -1
guardsound = S2,0
ground.type = High
air.animtype = Low
fall = 1

[State 3700, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------
[Statedef 3710]
type = S
movetype = A
physics = S
anim = 3210
sprpriority = 3
ctrl = 0
velset = 0,0

[State 3200, SparkSound]
type = PlaySnd
trigger1 = animelem = 1
value = 2,3
channel = 1

[State explod]
type = Explod
trigger1 = animelem = 1
anim = f9
ownpal = 1
sprpriority = 4
postype = p1
removeongethit = 1
pos = 50,-100

[State 3710, Invincibility]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3210, Color]
type = EnvColor
trigger1 = timemod = 6, 1 && time > 25 && animelem = 6 < 0
;trigger2 = time = 30
value = 255, 255, 255
time = 1

[State 3710, Move]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 16

[State 3710, Bind1]
type = TargetBind
trigger1 = animelem = 3, < 0
pos = 28,0

[State 3710, Bind2]
type = TargetBind
trigger1 = animelem = 3, >= 0 && animelem = 4, < 0
pos = 4,-20

[State 3710, Bind3]
type = TargetBind
trigger1 = animelem = 4, >= 0 && animelem = 5, < 0
pos = 0,0

[State 3710, Bind4]
type = TargetBind
trigger1 = animelem = 5, >= 0 && animelem = 6, < 0
pos = 8,0

[State 3710, Bind5]
type = TargetBind
trigger1 = animelem = 6, >= 0 && animelem = 7, < 0
pos = -4,-45;2, -130

[State 3710, Bind5]
type = TargetBind
trigger1 = animelem = 7, >= 0 && animelem = 8, < 0
pos = -16,-44

[State 3710, Bind6]
type = TargetBind
trigger1 = animelem = 8, = 0
pos = 31,-39

[State 1110, 1]
type = HELPER
trigger1 = TIME = 24
name = "fire"
ID = 3230
pos = 0,0
postype = P1
stateno = 3230
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 3710, SFX]
type = PlaySnd
trigger1 = time = 24
value = 4,5
volume = 128

[State 3710, KillBolt]
type = RemoveExplod
trigger1 = time = 76
id = 3730

[State 3000, Lightning Ball]
type = Explod
trigger1 = TIME = 97
anim = 4011
ownpal = 1
sprpriority = 4
postype = p1
removeongethit = 1
pos = 0,-90
bindtime = -1
scale = 0.6,0.6

[State explod]
type = Explod
trigger1 = TIME = 95
anim = 2016
id = 2016
ownpal = 1
sprpriority = 4
postype = p1
removeongethit = 1
pos = 0,-110
bindtime = -1
scale = 0.5,0.5

[State explod];c
type = Explod
trigger1 = TIME = 24
anim = 1030
id = 103
sprpriority = 5
postype = p1
pos = 18,-80
bindtime = 1
ignorehitpause = 1
ownpal = 1
under = 0
scale = 0.5,0.5

[State explod]
type = Explod
trigger1 = TIME = 60
anim = 2016
id = 2016
ownpal = 1
sprpriority = 4
postype = p1
removeongethit = 1
pos = 18,-80
bindtime = -1
scale = 0.5,0.5

[State 180,]
type = VarRandom
trigger1 = 1
v = 20
range = -40,0

[State 180,]
type = VarRandom
trigger1 = 1
v = 21
range = -30,-120

[State 3710, SFX]
type = PlaySnd
trigger1 = time = 97
value = 4,6

[State 3710, Damage]
type = TargetLifeAdd
trigger1 = timemod = 2, 1 && animelem = 5, >= 0 && animelem = 6, < 0
value = -20
kill = 0

[State 3710, Damage]
type = TargetLifeAdd
trigger1 = time = 97
value = -18

[State 3710, Move2]
type = PosAdd
trigger1 = animelem = 10
x = -14

[State 3710, Move3]
type = PosAdd
trigger1 = animelem = 11
x = -12

[State 3710, Move4]
type = PosAdd
trigger1 = animelem = 12
trigger2 = animtime = 0
x = -16

[State 3710, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;========================================================================================
[Statedef 3800]
type = S
movetype = A
physics = S
anim = 3800
sprpriority = 1
ctrl = 0
velset = 0,0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3800, Voice]
type = PlaySnd
trigger1 = Animelem = 3
value = 8,9
channel = 0
volume = 40
supermove = 1

[State 3800, env]
type = EnvColor
triggerall = var(40) <= 0
trigger1 = animelem = 3
value = 0,0,0
time = 30
under = 1

[State 3800, SparkSound]
type = PlaySnd
trigger1 = animelem = 3, = 2
value = f9000,0

[State 3800, Super Pause]
type = SuperPause
trigger1 = animelem = 3, = 2
movetime = 28
poweradd = ifelse(fvar(30) > 0,0,-1000)
time = 28
anim = -1
p2defmul = 1
darken = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 3, = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 3, = 2
anim = f7000
scale = .5,.5
sprpriority = -1
postype = p1
pos = -9,-26
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 3, = 2
anim = f7010
scale = .5,.5
sprpriority = 3
postype = p1
pos = -9,-26
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 3800, NOTHITBY]
type = Nothitby
trigger1 = time < 4
value = SCA

[State 3800, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 3,5
volume = -16

[State 1110, 1]
type = HELPER
trigger1 = animelem = 3,= 1
name = "fire"
ID = 3805
pos = -38,28
postype = P1
stateno = 3805
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1110, 1]
type = HELPER
trigger1 = ANIMtime = -1
name = "fire"
ID = 3240
pos = 0,0
postype = P1
stateno = 3240
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 3800, State]
type = ChangeState
trigger1 = animtime = 0
value = 3810
ctrl = 0

;------------------------------------------------------------------------------------
[Statedef 3810]
type = A
movetype = A
physics = N
anim = 3810
sprpriority = 1
ctrl = 0
velset = 14,0
juggle = 14 -14*(prevstateno=245)

[State 1110, 1]
type = HELPER
trigger1 = AnimElem = 1
name = "fire"
ID = 3814
pos = 0,-10
postype = P1
stateno = 3814
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 3810, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 10
trans = add1
timegap = 2
framegap = 1
length = 5
PalBright = 0, 0, 0
PalContrast =  150,150,150
PalAdd = 0, 0, 0
PalMul = 1,1,1

[State 3810, Hit]
type = HitDef
trigger1 = p2stateno != [5020,5040]
trigger1 = AnimElem = 1
attr = S, HA
damage = 47,10
animtype = Heavy
guardflag = M
hitflag = MAF
p2stateno = 7000 + ((p2statetype=C)*10)
p2getp1stateno = 1
p1stateno = 3818
priority = 4, Hit
pausetime = 0,2
guard.pausetime = 0,2
getpower = 0,0
sparkno = 2
forcestand = 1
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
snap = 30,0
ground.velocity = 15,0
ground.cornerpush.veloff = 15
air.cornerpush.veloff = 6
guard.cornerpush.veloff = 15
ground.type = High
ground.slidetime = 100
ground.hittime = 100
guard.slidetime = 12
guard.hittime = 12
air.hittime = 100
air.velocity = 0,0
kill = 0

[State 3810, Shock]
type = PalFX
trigger1 = timemod = 3,2
time = 1
invertall = 1
add = 30,30,150
mul = 256,256,256
sinadd = 126,126,126,4
color = 0

[State 3810, State]
type = playerpush
trigger1 = animelem = 2, > 0
ignorehitpause = 1
value = 0

[State 3810, State]
type = Nothitby
trigger1 = movehit
ignorehitpause = 1
value = SCA

[State 3810, dashsound]
type = PlaySnd
trigger1 = time = 0
value = 3,2 

[State 3810, State]
type = ChangeState
trigger1 = movehit
trigger1 = animtime = 0
value = 3825
ctrl = 0

[State 3810, State]
type = ChangeState
trigger1 = animtime = 0
value = 3815
ctrl = 0

;------------------------------------------------------------------------------------
[Statedef 3815]
type = S
movetype = A
physics = S
anim = 3815
sprpriority = 2
velset = 1,0
ctrl = 0

;Posadd
[State 3815, Posadd]
type = Posadd
trigger1 = time = 0
x = 26

;Play Land sound
[State 3815, landsnd]
type = PlaySnd
trigger1 = time = 1
value = S3,1
persistent = 0

[State 3815, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------
[Statedef 3818]
type = A
movetype = A
physics = N
anim = 3818
sprpriority = 1
ctrl = 0
velset = 9,0

[State 3818, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 5
trans = add1
timegap = 2
framegap = 1
length = 5
PalBright = 0, 0, 0
PalContrast =  150,150,150
PalAdd = 0, 0, 0
PalMul = 1,1,1

[State 3818, State]
type = playerpush
trigger1 = 1
ignorehitpause = 1
value = 0

[State 3818, State]
type = Nothitby
trigger1 = 1
ignorehitpause = 1
value = SCA

[State 3818, Shock]
type = PalFX
trigger1 = timemod = 3,1
time = 1
invertall = 1
add = 30,30,150
mul = 256,256,256
sinadd = 126,126,126,4
color = 0

[State 3818, State]
type = ChangeState
trigger1 = animtime = 0
value = 3825
ctrl = 0

;------------------------------------------------------------------------------------
[Statedef 3825]
type = S
movetype = A
physics = S
anim = 3825
sprpriority = 2
velset = 2,0
ctrl = 0

;Posadd
[State 3825, Posadd]
type = Posadd
trigger1 = time = 0
x = 26

[State 3825, Voice2]
type = PlaySnd
trigger1 = Animelem = 3, = 15
value = 8,10
channel = 0
volume = 40
supermove = 1

[State 3825, SFX]
type = PlaySnd
trigger1 = Animelem = 3, = 14
value = 3, 5
supermove = 1

[State 3818, DarkBG]
type = BgPalFX
trigger1 = animelem = 3
time = 36
color = 64
add = 0,0,0
mul = 0,00,0

[State 3825, Projectile]
type = Projectile
trigger1 = Animelem = 3, = 15
projid = 3821
projanim = 3821
projhitanim = 3821
projremoveanim = 3821
projremovetime = 12
projscale = 1,0.7
projsprpriority = 1
postype = back
air.juggle = 1
offset = 0,-20
getpower = 0,0
velocity = 0,0
projhits = 1
attr = S, HP
animtype = diagup
damage = 168,5
p2stateno = 7311
p2getp1stateno = 1
pausetime = 0,31
sparkno = -1
guard.sparkno = -1
hitsound = S2,2
guardsound = S2,0
getpower = 0,0
hitflag = MAF
guardflag = MA
guard.velocity = 0
guard.slidetime = 20
guard.hittime = 20
ground.slidetime = 20
ground.hittime = 20
ground.velocity = 0,0
air.velocity = 0,0
yaccel = .5
fall = 1
fall.recovertime = 35
palfx.time = 50
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126,4
Palfx.color = 0

[State explod]
type = Explod
trigger1 = Projhit = 1
anim = F7
sprpriority = 25
postype = p2
pos = 0,-50
random = 20,50

[State 1110, 1]
type = HELPER
trigger1 = Animelem = 3, = 14
name = "fire"
ID = 13300
pos = 17,-31
postype = P1
stateno = 13300
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1110, 1]
type = HELPER
trigger1 = Animelem = 3, = 14
name = "fire"
ID = 3822
pos = -3,-10
postype = P1
stateno = 3822
keyctrl = 0
ownpal = 1
size.xscale = 1.1
size.yscale = 0.6

[State 3825, NH]
type = Nothitby
trigger1 = 1
ignorehitpause = 1
value = SCA

[State 3210, Shock]
type = PalFX
trigger1 = Animelem = 3, = 12
trigger2 = Animelem = 3, = 15
trigger3 = Animelem = 3, = 18
trigger4 = Animelem = 3, = 21
time = 1
invertall = 1
add = 30,30,150
mul = 256,256,256
sinadd = 126,126,126,4
color = 0

[State 3825, Color]
type = EnvColor
trigger1 = projhit3821 >= 1 
value = 255, 255, 255
time = 1

[State 3825, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------
[Statedef 3850]
type = S
movetype = A
physics = S
anim = 3800
sprpriority = 1
ctrl = 0
velset = 0,0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3850, Voice]
type = PlaySnd
trigger1 = Animelem = 3
value = 8,9
channel = 0
volume = 40
supermove = 1

[State 3850, env]
type = EnvColor
triggerall = var(40) <= 0
trigger1 = animelem = 3
value = 0,0,0
time = 30
under = 1

[State 3850, SparkSound]
type = PlaySnd
trigger1 = animelem = 3, = 2
value = f9000,0

[State 3850, Super Pause]
type = SuperPause
trigger1 = animelem = 3, = 2
movetime = 28
poweradd = ifelse(fvar(30) > 0,0,-1000)
time = 28
anim = -1
p2defmul = 1
darken = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 3, = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 3, = 2
anim = f7000
scale = .5,.5
sprpriority = -1
postype = p1
pos = -9,-26
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 3, = 2
anim = f7010
scale = .5,.5
sprpriority = 3
postype = p1
pos = -9,-26
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 3850, NOTHITBY]
type = Nothitby
trigger1 = time < 4
value = SCA

[State 3850, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 3,5
volume = -16

[State 1110, 1]
type = HELPER
trigger1 = animelem = 3,= 1
name = "fire"
ID = 3805
pos = -38,28
postype = P1
stateno = 3805
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1110, 1]
type = HELPER
trigger1 = ANIMtime = -1
name = "fire"
ID = 3240
pos = 0,0
postype = P1
stateno = 3240
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 3850, State]
type = ChangeState
trigger1 = animtime = 0
value = 3860
ctrl = 0

;------------------------------------------------------------------------------------
[Statedef 3860]
type = A
movetype = A
physics = N
anim = 3860
sprpriority = 1
ctrl = 0
velset = 14,0
juggle = 14 -14*(prevstateno=245)

[State 1110, 1]
type = HELPER
trigger1 = AnimElem = 2
name = "fire"
ID = 3814
pos = 0,-10
postype = P1
stateno = 3814
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 3860, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 15
trans = add1
timegap = 2
framegap = 1
length = 5
PalBright = 0, 0, 0
PalContrast =  150,150,150
PalAdd = 0, 0, 0
PalMul = 1,1,1

[State 3860, Hit]
type = HitDef
trigger1 = p2stateno != [5020,5040]
trigger1 = AnimElem = 1
attr = S, HA
damage = 117,10
animtype = Heavy
guardflag = M
hitflag = MAF
p2stateno = 7000 + ((p2statetype=C)*10)
p2getp1stateno = 1
p1stateno = 3818
priority = 4, Hit
pausetime = 0,2
guard.pausetime = 0,2
getpower = 0,0
sparkno = 2
forcestand = 1
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
snap = 30,0
ground.velocity = 15,0
ground.cornerpush.veloff = 15
air.cornerpush.veloff = 6
guard.cornerpush.veloff = 15
ground.type = High
ground.slidetime = 100
ground.hittime = 100
guard.slidetime = 12
guard.hittime = 12
air.hittime = 100
air.velocity = 0,0
kill = 0

[State 3860, Shock]
type = PalFX
trigger1 = timemod = 3,2
time = 1
invertall = 1
add = 30,30,150
mul = 256,256,256
sinadd = 126,126,126,4
color = 0

[State 3860, State]
type = playerpush
trigger1 = animelem = 2, > 0
ignorehitpause = 1
value = 0

[State 3860, State]
type = Nothitby
trigger1 = movehit
ignorehitpause = 1
value = SCA

[State 3860, dashsound]
type = PlaySnd
trigger1 = time = 0
value = 3,2 

[State 3860, State]
type = ChangeState
trigger1 = movehit
trigger1 = animtime = 0
value = 3825
ctrl = 0

[State 3860, State]
type = ChangeState
trigger1 = animtime = 0
value = 3815
ctrl = 0

;------------------------------------------------------------------------------------
[Statedef 3900]
type = S
movetype = A
physics = S
anim = 3800
sprpriority = 1
ctrl = 0
velset = 0,0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3900, Voice]
type = PlaySnd
trigger1 = Animelem = 1
value = 8,9
channel = 0
volume = 40
supermove = 1

[State 3900, SparkSound]
type = PlaySnd
trigger1 = animelem = 3, = 2
value = f9000,1
channel = 1
volume = -10

[State 3900, Super Pause]
type = SuperPause
trigger1 = animelem = 3, = 2
movetime = 28
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
time = 28
anim = -1
p2defmul = 1
darken = -1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 3, = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 3, = 2
anim = f7100
scale = .5,.5
sprpriority = -5
postype = p1
pos = -9,-26
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 3, = 2
anim = f7110
scale = .5,.5
sprpriority = 3
postype = p1
pos = -9,-26
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 3200, 4]
type = Explod
trigger1 = animelem = 3, = 2
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = animelem = 3, = 2
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3900, NOTHITBY]
type = Nothitby
trigger1 = time < 4
value = SCA

[State 3900, SFX]
type = PlaySnd
trigger1 = animelem = 3, = 2
value = 3,5
volume = -16

[State 1110, 1]
type = HELPER
trigger1 = animelem = 3
name = "fire"
ID = 3805
pos = -38,28
postype = P1
stateno = 3805
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1110, 1]
type = HELPER
trigger1 = ANIMtime = -1
name = "fire"
ID = 3240
pos = 10,0
postype = P1
stateno = 3240
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 3900, State]
type = ChangeState
trigger1 = animtime = 0
value = 3910
ctrl = 0

;------------------------------------------------------------------------------------
[Statedef 3910]
type = A
movetype = A
physics = N
anim = 3860
sprpriority = 1
ctrl = 0
velset = 14,0
juggle = 14

[State 3910, Floor Spark]
type = Explod
trigger1 = Animelem = 2
anim = 3812
sprpriority = 3
postype = p1
pos = 10,0
bindtime = 1
supermove = 1
removeongethit = 1
ownpal = 1

[State 3910, Dash Spark]
type = Explod
trigger1 = Animelem = 2
anim = 3814
sprpriority = 3
postype = p1
pos = 0,-10
bindtime = 14
supermove = 1
removeongethit = 1
ownpal = 1

[State 3910, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 14
trans = add1
timegap = 2
framegap = 1
length = 5
PalBright = 0, 0, 0
PalContrast =  150,150,150
PalAdd = 0, 0, 0
PalMul = 1,1,1

[State 3910, Hit]
type = HitDef
triggerall = p2stateno != [5020,5040]
trigger1 = AnimElem = 2
attr = S, HA
damage = 108,10
animtype = Heavy
guardflag = M
hitflag = MA
p2stateno = 7000 + ((p2statetype=C)*10)
p2getp1stateno = 1
p1stateno = 3915
priority = 4, Hit
pausetime = 12,14
guard.pausetime = 8,12
getpower = 0,0
sparkno = 7
forcestand = 1
sparkxy = -20,-91
hitsound = S2,1
guardsound = S2,0
snap = 30,0
ground.velocity = 16,0
ground.type = High
ground.slidetime = 100
ground.hittime = 100
guard.slidetime = 16
guard.hittime = 16
ground.velocity = 0,0
air.hittime = 100
air.velocity = 0,0
kill = 0

[State 3210, Color]
type = EnvColor
trigger1 = movehit
value = 255, 255, 255
persistent = 0
ignorehitpause = 1
time = 1

[State 3910, Shock]
type = PalFX
trigger1 = timemod = 3,2
time = 1
invertall = 1
add = 30,30,150
mul = 256,256,256
sinadd = 126,126,126,4
color = 0

[State 3910, State]
type = playerpush
trigger1 = animelem = 2,>= 0
ignorehitpause = 1
value = 0

[State 3910, State]
type = Nothitby
trigger1 = movehit
ignorehitpause = 1
value = SCA

[State 3910, dashsound]
type = PlaySnd
trigger1 = time = 0
value = 3,2 

[State 3910, State]
type = ChangeState
triggerall = movehit
trigger1 = animtime = 0
value = 3920
ctrl = 0

[State 3910, State]
type = ChangeState
trigger1 = animtime = 0
value = 3815
ctrl = 0

;------------------------------------------------------------------------------------
[Statedef 3915]
type = A
movetype = A
physics = N
anim = 3818
sprpriority = 1
ctrl = 0
velset = 8,0

[State 3915, Shock]
type = PalFX
trigger1 = timemod = 3,2
time = 1
invertall = 1
add = 30,30,150
mul = 256,256,256
sinadd = 126,126,126,4
color = 0

[State 3915, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 5
trans = add1
timegap = 2
framegap = 1
length = 5
PalBright = 0, 0, 0
PalContrast =  150,150,150
PalAdd = 0, 0, 0
PalMul = 1,1,1

[State 3915, State]
type = playerpush
trigger1 = 1
ignorehitpause = 1
value = 0

[State 3915, State]
type = Nothitby
trigger1 = 1
ignorehitpause = 1
value = SCA

[State 3915, State]
type = ChangeState
trigger1 = animtime = 0
value = 3920
ctrl = 0

;------------------------------------------------------------------------------------
[Statedef 3920]
type = S
movetype = A
physics = S
anim = 3920
sprpriority = 2
velset = 2,0
ctrl = 0

;Posadd
[State 3920, Posadd]
type = Posadd
trigger1 = time = 0
x = 26

[State 3920, Voice2]
type = PlaySnd
trigger1 = Animelem = 3, = 15
value = 8,10
channel = 0
volume = 40
supermove = 1

[State 3920, SFX]
type = PlaySnd
trigger1 = Animelem = 3, = 14
trigger2 = Animelem = 3, = 39
trigger3 = Animelem = 3, = 64
value = 3, 5
supermove = 1

[State 3920, DarkBG]
type = BgPalFX
trigger1 = animelem = 3, >= 0
trigger1 = animelem = 4, < 0
time = 1
color = 64
add = 0,0,0
mul = 0,00,0

[State 3920, Projectile]
type = Projectile
trigger1 = Animelem = 3, = 15
trigger2 = Animelem = 3, = 40
trigger3 = Animelem = 3, = 65
projid = 3821
projanim = 3821
projhitanim = 3821
projremoveanim = 3821
projremovetime = 12
projscale = 1,0.7
projsprpriority = 1
projhits = 3
projmisstime = 6
postype = back
air.juggle = 1
offset = 0,-20
getpower = 0,0
velocity = 0,0
attr = S, HP
animtype = Hard
damage = 42,10
p2stateno = ifelse((Animelem = 3, = 65),7311,3145)
p2getp1stateno = 1
pausetime = 0,31
sparkno = -1
guard.sparkno = -1
sparkxy = -1
hitsound = S2,2
guardsound = S2,0
getpower = 0,0
hitflag = MAF
guardflag = MA
guard.velocity = 0
guard.slidetime = 20
guard.hittime = 20
ground.slidetime = 20
ground.hittime = 20
ground.velocity = 0,0
air.velocity = 0,0
yaccel = .5
fall = 1
fall.recovertime = 35
palfx.time = 30
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126,4
Palfx.color = 0

[State 1000, 5]
type = Explod
trigger1 = projhit = 1
anim = f7
sprpriority = 5
postype = p2
pos = 0,-50
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1110, 1]
type = HELPER
trigger1 = Animelem = 3, = 14
name = "fire"
ID = 13301
pos = 17,-31
postype = P1
stateno = 13300
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1110, 1]
type = HELPER
trigger1 = Animelem = 3, = 14
name = "fire"
ID = 3822
pos = -3,-10
postype = P1
stateno = 3822
keyctrl = 0
ownpal = 1
size.xscale = 1.1
size.yscale = 0.6

[State 1110, 1]
type = HELPER
trigger1 = Animelem = 3, = 42
name = "fire"
ID = 3823
pos = -5,-3
postype = P1
stateno = 3822
keyctrl = 0
ownpal = 1
size.xscale = 1.2
size.yscale = 0.8

[State 1110, 1]
type = HELPER
trigger1 = Animelem = 3, = 70
name = "fire"
ID = 3824
pos = -11,-2
postype = P1
stateno = 3822
keyctrl = 0
ownpal = 1
size.xscale = 1.3
size.yscale = 1

[State 3210, Color]
type = EnvColor
trigger1 = projhit3821 >= 1 
value = 255, 255, 255
time = 1

[State 3920, NH]
type = Nothitby
trigger1 = 1
ignorehitpause = 1
value = SCA

[State 3920, Shock]
type = PalFX
trigger1 = Animelem = 3, = 12
trigger2 = Animelem = 3, = 15
trigger3 = Animelem = 3, = 18
trigger4 = Animelem = 3, = 21
trigger5 = Animelem = 3, = 37
trigger6 = Animelem = 3, = 40
trigger7 = Animelem = 3, = 43
trigger8 = Animelem = 3, = 46
trigger9 = Animelem = 3, = 62
trigger10 = Animelem = 3, = 65
trigger11 = Animelem = 3, = 68
trigger12 = Animelem = 3, = 71
trigger13 = Animelem = 3, = 74
trigger14 = Animelem = 3, = 77
trigger15 = Animelem = 3, = 80
trigger16 = Animelem = 3, = 83
time = 1
color = 64
invertall = 1
add = 1,1,1
mul = 256,256,256

[State 3920, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 9011]
type     = S
movetype = A
physics  = S
juggle   = 10
poweradd = ifelse(fvar(30) > 0,0,-1000)
velset   = 0,0
anim     = 6000
ctrl     = 0
sprpriority = 3

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3000, 变黑]
type = envcolor
trigger1 = time = 0 ;开始时间
time = 30 ;持续时间
under = 1
value = 0, 0, 0

[State 1100, dm spark]
type = Explod
trigger1 = AnimElem = 6
anim = 901014
ID = 1000
postype = p1
pos = 0,0
bindtime = -1
sprpriority = 2
supermovetime = 30
ownpal = 1
removeongethit = 1
ontop = 1
scale = .5,.5

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 1
value = 4000,1

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 6
value = 4000,0

[State 3000]
type = HitDef
triggerall = root,var(12) = 0
trigger1 = 1
attr = A, HP
ownpal = 1
offset = 0,0
velocity = 0,0
attr = S, SP
animtype = Hard
damage = 15,2
hitflag = MAFD
guardflag = M
hitsound = s94,7
guardsound = s2,0
pausetime = 1,17
sparkno = 7
guard.sparkno = 42
sparkxy = -25,-45
ground.type = high
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -1.5,-10
air.velocity = -1.5,-9
fall.recover = 0
getpower = 20,15
givepower = 15,10
envshake.time = 35
envshake.ampl = 4
envshake.freq = 300
projhits = 25
fall = 1
airjuggle = 7
projscale = 0.5,0.5
palfx.time = 60
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126,4
palfx.invertall = 1
palfx.color = 0

[State 3000,snd]
type = PlaySnd
trigger1 = animelem = 1
value = S3000,2

[state 266,1]
type = superpause
trigger1 = animelem = 1
time = 30
movetime = 30
anim = -1
darken = 0
unhittable = 1

[State 0, LV1闪光后方]
type = Explod
trigger1 = time = 1
anim = f7000
scale = .5,.5
pos = -16,-110
postype = p1
bindtime = 1
removetime = -2
supermove = 1
supermovetime = -2
scale = 1,1
sprpriority = -1
ownpal = 1

[State 0, LV1闪光前方]
type = Explod
trigger1 = time = 1
anim = f7010
scale = .5,.5
pos = -16,-110
postype = p1
bindtime = 1
removetime = -2
supermove = 1
supermovetime = 9999
scale = 1,1
sprpriority = 10
ownpal = 1

[State 1000, dm sound]
type = Playsnd
trigger1 = AnimElem = 1
value = F9000,0

[State 3000, State]
type = ChangeState
trigger1 = animelem = 35
value = 4001
ctrl = 1

;----------------------------------------------------------------------------------
[StateDef 4001]
type = S
movetype = I
physics = S
anim = 6001
velset = 0,0
ctrl = 1
sprpriority = 1

[State 195]
type = ChangeAnim
trigger1 = Anim = 6000
trigger1 = AnimTime = 35
value = 6001

[State 3000, Lightning Ball]
type = Explod
trigger1 = animelem = 9
anim = 4011
ownpal = 1
sprpriority = 4
postype = p1
removeongethit = 1
pos = 5,-100
bindtime = -1
scale = 0.5,0.5

[State 40, Snd]
type = PlaySnd
trigger1 = animelem = 9
value = 6000,1

[State 195, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------
[Statedef 6200]
type = S
movetype = A
physics = S
anim = 6100
velset = 0
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
ctrl = 0
facep2 = 1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 1000, 0]
type = BGPalFX
trigger1 = 1
time = 2
add = -255,-255,-255
ignorehitpause = 1

[State 3000, G]
type = HitBy
trigger1 = time = 0
value = SCA, NT, ST, HT
time = 102

[State 2200, 3]
type = PlaySnd ;超杀声效
trigger1 = Time = 10
value = F9000,1

[State 2200, 3]
type = null;PlaySnd
trigger1 = Time = 10
value = 4,0

[State 0, LV1闪光后方]
type = Explod
trigger1 = time = 10
anim = f7100
scale = .5,.5
pos = 20,-75
postype = p1
bindtime = 1
removetime = -2
supermove = 1
supermovetime = -2
scale = 1,1
sprpriority = -1
ownpal = 1

[State 0, LV1闪光前方]
type = Explod
trigger1 = time = 10
anim = f7110
scale = .5,.5
pos = 20,-75
postype = p1
bindtime = 1
removetime = -2
supermove = 1
supermovetime = 9999
scale = 1,1
sprpriority = 10
ownpal = 1

[State 3200, 4]
type = Explod
trigger1 = time=1
anim = f996
scale = .5,.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=1
anim = f995
scale = .5,.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 2200, 7]
type = Explod   ;雷球
trigger1 = Time = 11
id = 2010
anim = 6010
pos = 20,-72
postype = p1
sprpriority = 2
removetime = -1
supermove = 1
bindtime = 1
ownpal = 1
scale = .7,.7

[State -2, 0]
type = RemoveExplod
trigger1 = AnimElem = 4
ID = 2010

[State 2000, 15]
type = EnvColor
trigger1 = Time = 10
time = 4
value = 255,255,255
under = 1
ignorehitpause = 1
persistent = 0

[State 1300, 5]
type = Envcolor
trigger1 = Time = 14
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 26
under = 1
supermove = 1

[State 2200, 8]
type = SuperPause
trigger1 = Time = 10
time = 30
movetime = 30
anim = -1
darken = 0

[State 3500, 13]
type = AssertSpecial
trigger1 = 1;Time = [10,39]
flag = Nofg
flag1 = noshadow
ignorehitpause = 1

[State 1000, 2]
type = PlaySnd  ;库ZZZZzzz....
trigger1 = AnimElem = 4
value = 4,0

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelem = 4
helpertype = normal ;player 援助级别
name = "弹球"
ID = 6201;援助ID
stateno = 6201 ;statedef编号
pos = 65,-75 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
facing = 1 ;脸的方向
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = 0.7
size.yscale = 0.7

[State 1002, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 6210

;---------------------------------------------------------------------
[Statedef 6210]
type = S
movetype = I
physics = S
anim = 1101
sprpriority = 2
ctrl = 0
velset = 0,0

[State 0, BGPalFX]
type = BGPalFX ;背景颜色改变控制器 参数部分参考allpalfx
trigger1 = animelemtime(4) <= 0
time = 1
add = -255,-255,-255

[State 1110, 1]
type = HELPER
trigger1 = TIME = 7
name = "fire"
ID = 1105
pos = 0,0
postype = P1
stateno = 1105
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1100, Voice]
type = PlaySnd
trigger1 = animelem = 3
value = 8,1
channel = 0

[State 1100, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

[State 1100, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
[StateDef 6201]
type = S           ;S,A,C,L    状态设定 S站立 A空中 C下蹲 L躺倒
movetype = A       ;I,A,H      行动状态设定 I无作用 A攻击 H受击
physics = N        ;A,C,S,N    物理摩擦 A空中 C下蹲 S站立 N无摩擦
anim = 6010
ctrl = 0
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = !time
value = S7000,1    ;SND中的声音编号
volume = 255      ;声音的大小 最大为255
channel = 5      ;声音的优先级

[State 1505, 5]
type = Projectile
trigger1 = time%4 = 0
projpriority = 3
ProjID = 6011
attr = S, SP
projanim = 6011
projremove = 1
projremovetime = 1
projhitS = 1
offset = 0,0
velocity = 0,0
hitflag = MAFDL
damage = 10,5
getpower = 0,0
givepower = 5,5
animtype = Hard
guardflag = M
pausetime = 2,12
sparkno = 7
guard.sparkno = 42
sparkxy = 0,0
hitsound = S2,2
guardsound = S2,0
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.type = Low
air.velocity = -4,-8
yaccel = .6
air.fall = 1
palfx.time = 30
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126
palfx.invertall = 1
palfx.color = 0

[State 0, Trans]
type = Trans    ;透明处理
trigger1 = 1
trans = add      ;透明的形势 ADD ADD1 ADDALPHA SUP

[State 0, AfterImage]
type = AfterImage ;残影控制器
trigger1 = !time
time = -1 ;残影持续时间
length = 20 ;残影长度
palcontrast = 255,255,255 ;加上palbright的三个值 乘 这三个值再分别除256
timegap = 1 ;AIR中每timegap张图片作为需要做残影的图片
framegap = 1 ;timegap算过需要做残影的图片中每fremegap-ticks出现残影
trans = add ;"none","add1","sub" ;残影透明类型

[State 0, ChangeState]
type = ChangeState ;改变状态控制器
trigger1 = root,stateno = 6210
trigger1 = root,animelem = 4 >= 0
value = 6202;statedef编号
ctrl = 0 ;是否可控

[State 0, DestroySelf]
type = DestroySelf ;毁灭自己控制器
trigger1 = time >= 60

;---------------------------------------------------------------------
[StateDef 6202]
type = S           ;S,A,C,L    状态设定 S站立 A空中 C下蹲 L躺倒
movetype = A       ;I,A,H      行动状态设定 I无作用 A攻击 H受击
physics = N        ;A,C,S,N    物理摩擦 A空中 C下蹲 S站立 N无摩擦
anim = 6012
ctrl = 0
velset = 0,0

[State 1100, HitDef1]
type = HitDef
trigger1 = time%2 = 1
attr = A,HA
damage = 20,5
animtype = diagup
guardflag = M
hitflag = MAFDL
priority = 4, Hit
pausetime = 0,0
sparkno = 2
sparkxy = 0,0
hitsound = S1,2
guardsound = S2,0
ground.type = High
air.animtype = Low
ground.velocity = ifelse((vel x<0),6,-6),-3
ground.slidetime = 22
ground.hittime = 22
air.velocity = ifelse((vel x<0),6,-6),-3
guard.velocity = -12
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
guard.pausetime = 1,4
guard.slidetime = 22
guard.hittime = 44
guard.ctrltime = 44
yaccel = .55

[State 0, Trans]
type = Trans    ;透明处理
trigger1 = 1
trans = add      ;透明的形势 ADD ADD1 ADDALPHA SUP

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = !time
value = S7000,1    ;SND中的声音编号
volume = 255      ;声音的大小 最大为255
channel = 5      ;声音的优先级

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = pos y <= -240
trigger2 = pos y >= 0
trigger2 = FrontEdgeBodyDist <= 0
value = S4,0    ;SND中的声音编号
volume = 255      ;声音的大小 最大为255

[State 0, PlaySnd]
triggerall = StageVar(info.author) != "water"
type = PlaySnd  ;播放声音控制器
trigger1 = pos y <= -240
trigger2 = pos y >= 0
value = F7,2    ;SND中的声音编号
volume = 255      ;声音的大小 最大为255

[State 855, whomp]
type = PlaySnd
trigger1 = FrontEdgeBodyDist <= 0
value = F5000, 11
volume = 255

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = pos y <= -240
trigger2 = pos y >= 0
value = F5000, 11
volume = 255

[State 0, Explod]
type = Explod ;图像控制器
triggerall = StageVar(info.author) != "water"
trigger1 = pos y <= -240
anim = F62;图像的动画编号
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
facing = 1 ;脸的方向
vfacing = -1
bindtime = 1 ;绑定时间
removetime = -2 ;移除时间
scale = 1,1 ;纵横比例
sprpriority = 10 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = pos y <= -240
anim = f25
id = 2100
sprpriority = -2
postype = p1
facing = 1
vfacing = -1
pos = 9,0
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = pos y <= -240
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
facing = 1
vfacing = -1
pos = 9,0
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 0, Explod]
type = Explod ;图像控制器
triggerall = StageVar(info.author) != "water"
trigger1 = pos y >= 0
anim = F62;图像的动画编号
pos = 0,25 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
facing = 1 ;脸的方向
vfacing = 1
bindtime = 1 ;绑定时间
removetime = -2 ;移除时间
scale = 1,1 ;纵横比例
sprpriority = 10 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = pos y >= 0
anim = f25
id = 2100
sprpriority = -2
postype = p1
pos = 9,25
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = pos y >= 0
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
pos = 9,25
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = FrontEdgeBodyDist <= 0
anim = F70;图像的动画编号
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
facing = -1 ;脸的方向
vfacing = 1
bindtime = 1 ;绑定时间
removetime = -2 ;移除时间
scale = 1,1 ;纵横比例
sprpriority = 10 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = !time
x = 5           ;横向速度
y = -25           ;纵向..

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = time > 0
trigger1 = pos y <= -240
y = 25           ;纵向..

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = time > 0
trigger1 = pos y >= 0
y = -25           ;纵向..

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = time > 0
trigger1 = FrontEdgeBodyDist <= 0
x = -5           ;纵向..

[State 0, ChangeState]
type = ChangeState ;改变状态控制器
trigger1 = time >= 40
value = 6203;statedef编号
ctrl = 0 ;是否可控

;---------------------------------------------------------------------
[StateDef 6203]
type = S           ;S,A,C,L    状态设定 S站立 A空中 C下蹲 L躺倒
movetype = A       ;I,A,H      行动状态设定 I无作用 A攻击 H受击
physics = N        ;A,C,S,N    物理摩擦 A空中 C下蹲 S站立 N无摩擦
anim = 6012
ctrl = 0

[State 1100, HitDef1]
type = HitDef
trigger1 = time%2 = 1
attr = A,HA
damage = 20,5
animtype = diagup
guardflag = M
hitflag = MAFDL
priority = 4, Hit
pausetime = 0,0
sparkno = 2
sparkxy = 0,0
hitsound = S1,2
guardsound = S2,0
ground.type = High
air.animtype = Low
ground.velocity = ifelse((vel x<0),6,-6),-3
ground.slidetime = 22
ground.hittime = 22
air.velocity = ifelse((vel x<0),6,-6),-3
guard.velocity = -12
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
guard.pausetime = 1,4
guard.slidetime = 22
guard.hittime = 44
guard.ctrltime = 44
yaccel = .55

[State 0, Trans]
type = Trans    ;透明处理
trigger1 = 1
trans = add      ;透明的形势 ADD ADD1 ADDALPHA SUP

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = pos y <= -240
trigger2 = pos y >= 0
trigger3 = FrontEdgeBodyDist <= 0
value = S4,0    ;SND中的声音编号
volume = 255      ;声音的大小 最大为255

[State 0, PlaySnd]
triggerall = StageVar(info.author) != "water"
type = PlaySnd  ;播放声音控制器
trigger1 = pos y <= -240
trigger2 = pos y >= 0
value = F7,2    ;SND中的声音编号
volume = 255      ;声音的大小 最大为255

[State 855, whomp]
type = PlaySnd
trigger1 = FrontEdgeBodyDist <= 0
value = F5000, 11
volume = 255

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = pos y <= -240
trigger2 = pos y >= 0
value = F5000, 11
volume = 255

[State 0, Explod]
type = Explod ;图像控制器
triggerall = StageVar(info.author) != "water"
trigger1 = pos y <= -240
anim = F62;图像的动画编号
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
facing = 1 ;脸的方向
vfacing = -1
bindtime = 1 ;绑定时间
removetime = -2 ;移除时间
scale = 1,1 ;纵横比例
sprpriority = 10 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = pos y <= -240
anim = f25
id = 2100
sprpriority = -2
postype = p1
facing = 1
vfacing = -1
pos = 9,0
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = pos y <= -240
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
facing = 1
vfacing = -1
pos = 9,0
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 0, Explod]
type = Explod ;图像控制器
triggerall = StageVar(info.author) != "water"
trigger1 = pos y >= 0
anim = F62;图像的动画编号
pos = 0,25 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
facing = 1 ;脸的方向
vfacing = 1
bindtime = 1 ;绑定时间
removetime = -2 ;移除时间
scale = 1,1 ;纵横比例
sprpriority = 10 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = pos y >= 0
anim = f25
id = 2100
sprpriority = -2
postype = p1
pos = 9,25
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = pos y >= 0
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
pos = 9,25
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = FrontEdgeBodyDist <= 0
anim = F70;图像的动画编号
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
facing = -1 ;脸的方向
vfacing = 1
bindtime = 1 ;绑定时间
removetime = -2 ;移除时间
scale = 1,1 ;纵横比例
sprpriority = 10 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = time > 0
trigger1 = pos y <= -240
y = 25           ;纵向..

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = time > 0
trigger1 = FrontEdgeBodyDist <= 0
x = -5           ;纵向..

[State 0, ChangeState]
type = ChangeState ;改变状态控制器
trigger1 = time > 0
trigger1 = pos y >= 0
value = 6204;statedef编号
ctrl = 0 ;是否可控

;---------------------------------------------------------------------
[StateDef 6204]
type = S           ;S,A,C,L    状态设定 S站立 A空中 C下蹲 L躺倒
movetype = I       ;I,A,H      行动状态设定 I无作用 A攻击 H受击
physics = N        ;A,C,S,N    物理摩擦 A空中 C下蹲 S站立 N无摩擦
anim = 6204
ctrl = 0
velset = 0,0

[State 0, Trans]
type = Trans    ;透明处理
trigger1 =1
trans = add      ;透明的形势 ADD ADD1 ADDALPHA SUP

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1.3,1.3

[State 0, AfterImageTime]
type = AfterImageTime ;残影时间控制器
trigger1 =1
time = 0 ;残影消失前显示的时间

[State 0, AssertSpecial]
type = AssertSpecial ;特殊断言控制器
trigger1 = 1
flag = noshadow ;无影子

[State 0, AllPalFX]
type = AllPalFX ;全部的图像改变颜色
trigger1 = !time
time = 2 ;持续时间
add = 255,255,255 ;颜色增加

[State 5100, KOFM]
type = EnvShake
trigger1 = Time = 0
time = 25
freq = 210
ampl = 10

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = !time
value = S8000,0    ;SND中的声音编号
volume = 255      ;声音的大小 最大为255

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = !time
value = S8000,1    ;SND中的声音编号
volume = 255      ;声音的大小 最大为255

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = 1
x = 0           ;横向速度
y = 0           ;纵向..

[State 0, PosSet]
type = PosSet     ;位置设定控制器
trigger1 = 1
y = 0

[State 0, DestroySelf]
type = DestroySelf ;毁灭自己控制器
trigger1 = !animtime

;---------------------------------------------------------------------
[Statedef 13800]
type = S
movetype = A
physics = S
anim = 3800
sprpriority = 1
ctrl = 0
velset = 0,0

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3800, Voice]
type = PlaySnd
trigger1 = Animelem = 3
value = 8,9
channel = 0
volume = 40
supermove = 1

[State 3800, SparkSound]
type = PlaySnd
trigger1 = animelem = 3, = 2
value = f9000,0

[State a]
type = VarSet
trigger1 = animelem = 3, = 2;只要弄var(20)清零的rg比扣獾r候的rg晚一c就可以了
v = 20
value = 0

[State 3800, Super Pause]
type = SuperPause
trigger1 = animelem = 3, = 2
movetime = 28
poweradd = ifelse(fvar(30) > 0,0,-1000)
time = 28
anim = -1
p2defmul = 1
darken = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 3, = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 3, = 2
anim = f7000
scale = .5,.5
sprpriority = -1
postype = p1
pos = -9,-26
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 3, = 2
anim = f7010
scale = .5,.5
sprpriority = 3
postype = p1
pos = -9,-26
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State a]
type = Nothitby
trigger1 = 1
value = SCA

[State a]
type = helper
trigger1 = animelem = 3,= 1
name = "shadow"
helpertype = normal
ID = 13805
pos = -38,28
postype = p1
stateno = 13805
keyctrl = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999

[State 3800, Shock]
type = PalFX
trigger1 = animelem = 3,= 0
time = 1
color = 64
invertall = 1
add = 1,1,1
mul = 256,256,256

[State 3800, SFX]
type = PlaySnd
trigger1 = animelem = 3
value = 3,5
volume = -16

[State 3800, State]
type = ChangeState
trigger1 = animtime = 0
value = 13810
ctrl = 0

;-------------------------------------------------------------------------------
[Statedef 13810]
type=A
movetype=A
physics=A
anim=13811
sprpriority = 2

[State a]
type = Nothitby
trigger1 = time < 10
value = SCA


[State 3201,1]
type=Velset
trigger1=Time=[0,2]
y=-8
x=2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 3200,AfterImage]
type = AfterImage
trigger1 = time = 0
time = -1
length = 4
frameGap = 1
timeGap = 3
palcolor = 0
palinvertall = 0
palbright = 66,40,51
palcontrast = 146,120,220
palpostbright = 0,0,0
Trans = Add1

[State 1200, 2]
type = Hitdef
trigger1 = animelem = 1
attr = A, HT
hitflag = AF
priority = 7, Miss
sparkno = -1
sprpriority = 1
p2facing = 1
p1stateno = 13820
p2stateno = 13830
p2getp1state = 1
;chainID = 1501
;id = 801
getpower = 340
givepower = 244

[State a]
type=ChangeState
trigger1=AnimTime=0
value= 13815

;-------------------------------------------------------------------------------
[Statedef 13815]
type=A
movetype=I
physics=N
anim= 13811
velset=2.5,0.3
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 6

[State 1200, 4.2]
type = Gravity
trigger1 = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1200, 6]
type = ChangeState
trigger1 = Pos y >= 0
trigger1 = Vel y > 0
value = 52

;-------------------------------------------------------------------------------
[Statedef 13805]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3805
sprpriority = 2

[State a]
type = Sprpriority
trigger1 = 1
value = 9

[State a]
type=assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State a]
type = AfterImage
trigger1 = Time = 0
length = 18
PalBright = 12,12,12
PalContrast = 120,120,120
PalAdd      = 0,0,0
TimeGap  = 4
FrameGap = 1
Trans = Add
time = 9999

[State a]
type = afterimagetime
trigger1 = numhelper(13805) = 0
ignorehitpause = 1
time = 0

[State a]
type = destroyself
trigger1 = parent, MoveType = H
trigger2 = animtime = 0
ignorehitpause = 1
persistent = 0

;-------------------------------------------------------------------------------
[Statedef 13820]
type = A
movetype = A
physics = N
velset = 0,0
anim = 13812
ctrl = 0

[State a]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0

[State 910, GrabSound]
type = PlaySnd
trigger1 = animelem = 1
value = f800,0

[State 910, GrabSpark]
type = Explod
trigger1 = animelem = 1
anim = f9
postype = p1
pos = 22,-83
sprpriority = 2
bindtime = 1
ownpal = 1

[State 910, Invincibility]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State a]
type = VelAdd
trigger1 = time > 14
;x = 0
y = -0.8

[State a]
type = VelAdd
trigger1 = time > 36
;x = 0
y = 2

[State 910, Gravity]
type = Gravity
trigger1 = time >= 46

[State 910, Bind1]
type = TargetBind
trigger1 = animelem = 2, <0
pos = 22,-83;4, -20

[State 910, Bind2]
type = TargetBind
trigger1 = animelem = 2, >=0 && animelem = 3, <0
pos = -7,-42

[State 910, Bind3]
type = TargetBind
trigger1 = animelem = 3, >=0 && animelem = 4, <0
pos = -14,-45

[State 910, Bind2]
type = TargetBind
trigger1 = animelem = 4, >=0
pos = -12,-12

[State 855, GrabSpark]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Pos Y >= 0 && Vel Y > 0
anim = f62
postype = p1
pos = 0,0
sprpriority = -1
bindtime = 1
ownpal = 1
ID =62

[State 3121, 1]
type = Helper
triggerall = StageVar(info.author) != "water"
trigger1 = Pos Y >= 0 && Vel Y > 0
id = 8882
postype = p1
pos = 0,10
sprpriority = 10
stateno = 11492
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Pos Y >= 0 && Vel Y > 0
anim = f25
id = 2100
sprpriority = -2
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Pos Y >= 0 && Vel Y > 0
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = Pos Y >= 0 && Vel Y > 0
value = F5000, 10
volume = 20

[State 910, Damage]
type = TargetLifeAdd
trigger1 = Pos Y >= 0 && Vel Y > 0
value = -250

[State 910, Target]
type = TargetState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3152

[State 1600, Lightning]
type = Explod
trigger1 = time = 66
anim = 1620
id = 1620
ownpal = 1
sprpriority = 4
postype = p1
pos = 0,110
bindtime = 1
removeongethit = 1
scale = 0.5,0.5

[State 910, State]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 13825

;-------------------------------------------------------------------------------
[Statedef 13825]
type = A
movetype = I
physics = S
anim = 13813
velset = 0,0

[State a]
type = helper
trigger1 = time = 0
name = "6204"
helpertype = normal
ID = 6204
pos = -15,-18
postype = p2
stateno = 6204
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State a]
type = PlaySnd
trigger1 = time = 0
value = s5,7

[State a]
type = PlaySnd
trigger1 = time = 0
value = s4,0

[State a]
type = PlaySnd
trigger1 = time = 0
value = s2,2

[State a]
type = PlaySnd
trigger1 = time = 0
value = f7,3

[State 915, Align]
type = PosSet
trigger1 = time = 0
y = 0

[State 915, Push]
type = PlayerPush
trigger1 = win = 1
value = 0

[State 915, State]
type = ChangeState
trigger1 = animelem = 2;animtime = 0
value = 920

;-------------------------------------------------------------------------------
[Statedef 13830]
type = A
movetype = H
physics = N
ctrl = 0

[State a]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0

[State 930, Invincibility]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 930, Anim]
type = ChangeAnim2
trigger1 = time = 0
value = 930+var(55)*30000

;-------------------------------------------------------------------------------
[Statedef 3152]
type = A
movetype = H
physics = N
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 5

[State 3150, Anim]
type = velset
trigger1 = time = 10
x = -1
y = -10;15

[State 3150, Anim]
type = ChangeAnim2
trigger1 = time = 10; && hitshakeover
value = 3150+var(55)*30000

[State 3150, Gravity]
type = VelAdd
trigger1 = time >= 10
y = .43

[State 3150, Shock]
type = PalFX
trigger1 = Time % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 855, GrabSpark]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Pos Y >= 0 && Vel Y > 0
anim = f66
postype = p1
pos = 0,0
sprpriority = -1
bindtime = 1
ownpal = 1
ID =66

[State 855, GrabSpark]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Pos Y >= 0 && Vel Y > 0
anim = f67
postype = p1
pos = 0,0
sprpriority = 9
bindtime = 1
ownpal = 1
ID =67

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Pos Y >= 0 && Vel Y > 0
anim = f25
id = 2100
sprpriority = -2
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Pos Y >= 0 && Vel Y > 0
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = Pos Y >= 0 && Vel Y > 0
value = F5000, 10
volume = 20

[State 3150, State]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 5100

;-------------------------------------------------------------------------------
[Statedef 13240]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3240
sprpriority = 2

[State a]
type = Sprpriority
trigger1 = 1
value = 9

[State a]
type=assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State a]
type = AfterImage
trigger1 = Time = 0
length = 18
PalBright = 12,12,12
PalContrast = 120,120,120
PalAdd      = 0,0,0
TimeGap  = 4
FrameGap = 1
Trans = Add
time = 9999

[State a]
type = afterimagetime
trigger1 = numhelper(13240) = 0
ignorehitpause = 1
time = 0

[State a]
type = destroyself
trigger1 = animtime = 0
ignorehitpause = 1
persistent = 0

;===========================================================================
[Statedef 4900]
type    = S
movetype= A
physics = N
ctrl = 0
poweradd = -2000
anim = 4900
velset = 0,0
sprpriority = 0
juggle = 1
facep2 = 1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
;--------------------------------------

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 1
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;---------------------------------------------------------
[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 1
helpertype = normal
stateno = 24301
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;---------------------------------------------------------------

[State a]
type = SuperPause
trigger1 = AnimElem = 1
darken =0
time = 50
anim = -1
movetime = 50

[state a]
type = assertspecial
trigger1 = time = [0,28]
flag = NoFG

[State a]
type = NotHitBy
trigger1 = Time = 1
value = SCA
time = 68
;-----------------------------------------------
[State a];SC/DC 取消1技gc
type = VarAdd
trigger1 = prevstateno = [1000,3999]
fvar(29) = -1000
persistent = 0

[State 2200, 8]
type = SuperPause
trigger1 = Time = 0
time = 33
movetime = 33
anim = -1
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 0
anim = f7300
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 0,-75
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 0
anim = f7310
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 0,-75
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 1]
type = PlaySnd
trigger1 = Time = 0
value = F9000, 3

;-----------------------------------------------------------------------
[State a]
type = helper
trigger1 = AnimElem = 8
name = "shadow"
helpertype = normal
ID = 4950
pos = 0,6
postype = p1
stateno = 4950
keyctrl = 0
ownpal = 1
size.xscale = .5
size.yscale = .5
pausemovetime = 28
supermovetime = 28

[State a]
type = helper
trigger1 = AnimElem = 11,=15
name = "shadow"
helpertype = normal
ID = 4951
pos = -2,0
postype = p1
stateno = 4951
keyctrl = 0
ownpal = 1
size.xscale = .475
size.yscale = .475
pausemovetime = 28
supermovetime = 28

[State 0, 2]
type = palfx
triggerall = time >= 51
trigger1 = time%2=0
time = 1
add = 0,15,75
color = 0
invertall = 1
ignorehitpause=1

;-----------------------------------------------------------------------
[State a]
type = PlaySnd
trigger1 = AnimElem = 2
value = s4900, 0

[State a]
type = helper
trigger1 = AnimElem = 11,=30
name = "shadow"
helpertype = normal
ID = 4953
pos = 10,-130
postype = p1
stateno = 4953
keyctrl = 0
ownpal = 1
size.xscale = .5
size.yscale = .5
;pausemovetime = 28
;supermovetime = 28

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 11,=20
value = s4900, 1

[State a,a]
type = ChangeState
Trigger1 = Command = "holdup"
trigger1 = AnimTime = 0
value = 4911

[State a,a]
type = ChangeState
Trigger1 = Command = "holddown"
trigger1 = AnimTime = 0
value = 4912

[State a,a]
type = ChangeState
trigger1 = AnimTime = 0
value = 4910

;===========================================================================
[Statedef 4910]
type    = S
movetype= A
physics = N
ctrl = 0
anim = 4910
velset = 0,0
sprpriority = 0

[State 0, 2]
type = palfx
triggerall = time = [0,9]
trigger1 = time%2=0
time = 1
add = 0,15,75
color = 0
invertall = 1
ignorehitpause=1

[State 1000, Bright]
type = PalFX
trigger1 = time = 10
time = 2
add = 96,96,96
ignorehitpause = 1

[State 1000, 0]
type = PlaySnd
trigger1 = AnimElem = 1,=2
value = s8,11

[State a]
type = Projectile
trigger1 = AnimElem = 1,=2
projscale = .5,.5
ownpal = 1
projsprpriority = 4
projpriority = 15
attr = S, HP
projID = 4900
projanim = 4961
projhitanim = 4961
projremanim = -1
projcancelanim = -1
projshadow = 0,0,0
projremovetime = 30
projmiSStime = 1
projhitS = 10
offset = -14,-80
velocity = 0
guardflag = M
hitflag = MAF
getpower = 0,0
givepower = 20,20
pausetime = 0,5
damage = 60,8
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
animtype = up
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -4,-9
guard.hittime = 14
guard.pausetime = 0,6
guard.velocity = -12
air.velocity = -4,-9
fall = 1
AfterImage.length = 6
AfterImage.PalBright = 12,12,12
AfterImage.PalContrast = 120,120,120
AfterImage.PalAdd      = 0,0,0
AfterImage.TimeGap  = 2
AfterImage.FrameGap = 1
AfterImage.Trans = Add
AfterImage.time = 9999
id = 4000
yaccel = .6
p2stateno = 4170
p2getp1stat1 = 0
palfx.time = 50
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126,4
Palfx.color = 0

[State a,a]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
[Statedef 4911]
type    = S
movetype= A
physics = N
ctrl = 0
anim = 4910
velset = 0,0
sprpriority = 0

[State 0, 2]
type = palfx
triggerall = time = [0,9]
trigger1 = time%2=0
time = 1
add = 0,15,75
color = 0
invertall = 1
ignorehitpause=1

[State 1000, Bright]
type = PalFX
trigger1 = time = 10
time = 2
add = 96,96,96
ignorehitpause = 1

[State 1000, 0]
type = PlaySnd
trigger1 = AnimElem = 1,=2
value = s8,11

[State a]
type = Projectile
trigger1 = AnimElem = 1,=2
projscale = .5,.5
ownpal = 1
projsprpriority = 4
projpriority = 15
attr = S, HP
projID = 4900
projanim = 4960
projhitanim = 4960
projremanim = -1
projcancelanim = -1
projshadow = 0,0,0
projremovetime = 30
projmiSStime = 1
projhitS = 10
offset = -14,-80
velocity = 0
guardflag = M
hitflag = MAF
getpower = 0,0
givepower = 20,20
pausetime = 0,5
damage = 60,8
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
animtype = up
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -4,-9
guard.hittime = 14
guard.pausetime = 0,6
guard.velocity = -12
air.velocity = -4,-9
fall = 1
AfterImage.length = 6
AfterImage.PalBright = 12,12,12
AfterImage.PalContrast = 120,120,120
AfterImage.PalAdd      = 0,0,0
AfterImage.TimeGap  = 2
AfterImage.FrameGap = 1
AfterImage.Trans = Add
AfterImage.time = 9999
id = 4000
yaccel = .6
p2stateno = 4170
p2getp1stat1 = 0
palfx.time = 50
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126,4
Palfx.color = 0

[State a,a]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
[Statedef 4912]
type    = S
movetype= A
physics = N
ctrl = 0
anim = 4910
velset = 0,0
sprpriority = 0

[State 0, 2]
type = palfx
triggerall = time = [0,9]
trigger1 = time%2=0
time = 1
add = 0,15,75
color = 0
invertall = 1
ignorehitpause=1

[State 1000, Bright]
type = PalFX
trigger1 = time = 10
time = 2
add = 96,96,96
ignorehitpause = 1

[State 1000, 0]
type = PlaySnd
trigger1 = AnimElem = 1,=2
value = s8,11

[State a]
type = Projectile
trigger1 = AnimElem = 1,=2
projscale = .5,.5
ownpal = 1
projsprpriority = 4
projpriority = 15
attr = S, HP
projID = 4900
projanim = 4962
projhitanim = 4962
projremanim = -1
projcancelanim = -1
projshadow = 0,0,0
projremovetime = 30
projmiSStime = 1
projhitS = 10
offset = -14,-80
velocity = 0
guardflag = M
hitflag = MAF
getpower = 0,0
givepower = 20,20
pausetime = 0,5
damage = 60,8
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
animtype = up
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -4,-9
guard.hittime = 14
guard.pausetime = 0,6
guard.velocity = -12
air.velocity = -4,-9
fall = 1
AfterImage.length = 6
AfterImage.PalBright = 12,12,12
AfterImage.PalContrast = 120,120,120
AfterImage.PalAdd      = 0,0,0
AfterImage.TimeGap  = 2
AfterImage.FrameGap = 1
AfterImage.Trans = Add
AfterImage.time = 9999
id = 4000
yaccel = .6
p2stateno = 4170
p2getp1stat1 = 0
palfx.time = 50
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126,4
Palfx.color = 0

[State a,a]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
[Statedef 4950]
type    = A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 4950
sprpriority = 5

[State a]
type = PlaySnd
trigger1 = AnimElem = 1
value = s4900,2

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 200,250

[State a]
type=assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State a]
type = AfterImage
trigger1 = Time = 0
length = 6
PalBright = 12,12,12
PalContrast = 120,120,120
PalAdd      = 0,0,0
TimeGap  = 2
FrameGap = 1
Trans = Add
time = -1

[State a]
type = destroyself
trigger1 = parent, MoveType = H
trigger2 = animtime = 0
ignorehitpause = 1
persistent = 0

;------------------------------------------------------------------------------
[Statedef 4951]
type    = A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 4951
sprpriority = 5

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
pos = -2,0

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 200,250

[State a]
type=assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State a]
type = AfterImage
trigger1 = Time = 0
length = 6
PalBright = 12,12,12
PalContrast = 120,120,120
PalAdd      = 0,0,0
TimeGap  = 2
FrameGap = 1
Trans = Add
time = -1

[State a]
type = destroyself
trigger1 = Root,stateno!=4900
trigger2 = Root,stateno=4900&&Root,AnimElem=12
ignorehitpause = 1
persistent = 0

;------------------------------------------------------------------------------
[Statedef 4952]
type    = A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 4952
sprpriority = 5

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 200,250

[State a]
type=assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State a]
type = AfterImage
trigger1 = Time = 0
length = 6
PalBright = 12,12,12
PalContrast = 120,120,120
PalAdd      = 0,0,0
TimeGap  = 2
FrameGap = 1
Trans = Add
time = -1

[State a]
type = destroyself
trigger1 = parent, MoveType = H
trigger2 = animtime = 0
ignorehitpause = 1
persistent = 0

;------------------------------------------------------------------------------
[Statedef 4953]
type    = A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 4953
sprpriority = 5

[State a]
type = PlaySnd
trigger1 = AnimElem = 1
value = s4900,3

[State 0, EnvShake]
type = EnvShake
trigger1 = AnimElem = 1
time = 20
freq = 90
ampl = 8
phase = 90

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 200,250

[State a]
type=assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State a]
type = AfterImage
trigger1 = Time = 0
length = 6
PalBright = 12,12,12
PalContrast = 120,120,120
PalAdd      = 0,0,0
TimeGap  = 2
FrameGap = 1
Trans = Add
time = -1

[State a]
type = destroyself
trigger1 = parent, MoveType = H
trigger2 = animtime = 0
ignorehitpause = 1
persistent = 0

;-----------------------------------------------------------------
[Statedef 2900]
type     = A
movetype = A
physics  = N
juggle   = 6
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
velset   = 0,0
anim     = 2900
ctrl     = 0
sprpriority = 3
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelem = 1
movetime = 40
time = 40
anim = -1
p2defmul = 1
darken = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = time = 1
anim = f7100
ID = 4010
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = -39,-60
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[state 4500,必杀闪光2]
type = Explod
trigger1 = time = 1
anim = f7110
ID = 4011
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = -39,-60
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3000, SparkSound]
type = PlaySnd
trigger1 = time = 1
value = F9000,1

[State 3000, NOTHITBY]
type = Nothitby
trigger1 = time < 3
value = SCA

[State 1000, ]
type = PlaySnd
trigger1 = time = 10
value = s13,0

[State 1000, ]
type = PlaySnd
trigger1 = time = 4
value = s6,7

[State 266,3]
type = envshake
trigger1 = time = 10
time = 10

[State 0, Helper]
type = Helper
trigger1 = time = 10
helpertype = normal
ID = 2910
stateno = 2910
pos = -30,-65
postype = p1
keyctrl = 0
ownpal = 0
supermovetime = 64

[State 183, Bright]
type = PalFX
trigger1 = time = 10
time = 12
add = 96,96,96
ignorehitpause = 1

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
[Statedef 2910]
type     = A
movetype = A
physics  = N
juggle   = 1
poweradd = 0
velset   = 0,0
anim     = 2910
ctrl     = 0
sprpriority = 5

[State 3030, Color]
type = EnvColor
trigger1 = movehit = 1
under = 1
time = 3
value = 255, 255, 255

[State 1000, ]
type = PlaySnd
trigger1 = time = 33
value = s13,1

[State 3100,1]
type = NotHitBy
trigger1 = Time = [0,64]
value = SCA

[State 1000, Xe[gX]
type = velset
trigger1 = Animelem = 18
x = -17
y = 0

[State 266,3]
type = envshake
trigger1 = movecontact = 1
time = 10

[State 1000, Xe[gX]
type = velmul
trigger1 = Animelem = 18,=2
x = -1.1
y = 0

[State 200, 1]
type = HitDef
trigger1 = animelem = 17
attr = S, NA
animtype = Hard
damage = 350,15
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 0,14
hitsound = s2,2
guardsound = 6,2
ground.type = High
ground.slidetime = 13
ground.hittime  = 12
ground.velocity = -2.5,0
airguard.velocity = -2,0
air.type = High
air.velocity = -2,0
air.hittime = 13
sparkno = 7
guard.sparkno = 42
sparkxy = 45,-15
palfx.time = 55
palfx.color = 0
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.fall = 1
fall = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 18
attr = S, NA
animtype = Hard
damage = 350,25
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 0,9
hitsound = s2,2
guardsound = 6,2
ground.type = High
ground.slidetime = 13
ground.hittime  = 12
ground.velocity = -10,-4
airguard.velocity = -1.5,0
air.type = High
air.velocity = -9,-3.5
air.hittime = 13
sparkno = 7
guard.sparkno = 42
sparkxy = 45,-15
palfx.time = 65
palfx.color = 0
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.fall = 1
fall = 1

[State 3000,Explod]
type = Explod
trigger1 = movehit = 1
anim = 2920
id = 2920
pos = 0,-45
postype = p2
supermove = 1
sprpriority = 5
bindtime = 16
ontop = 1
ownpal = 1
scale = 0.5,0.5

[State 1000, Xe[gX]
type = Destroyself
trigger1 = time = 64

;--------------------------------------------------------------------------
[Statedef 14500]
type     = A
movetype = A
physics  = N
juggle   = 7
poweradd = -2000
velset   = 0,0
anim     = 14500
ctrl     = 0
sprpriority = 3
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 8
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 8
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3000, SparkSound]
type = PlaySnd
trigger1 = animelem = 1
value = F9000,2
channel = 1

[State 2000, 2]
type = SuperPause
trigger1 = time = 1
time = 158
movetime = 158
anim = -1

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = time = 1
anim = f7300
ID = 4010
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = -7,-96
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = time = 1
anim = f7310
ID = 4011
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = -7,-96
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3000, NOTHITBY]
type = Nothitby
trigger1 = time < 7
value = SCA

[State 1000, ]
type = PlaySnd
trigger1 = time = 7
value = s6,10

[State 1000, ]
type = PlaySnd
trigger1 = time = 7
trigger2 = time = 42
trigger3 = time = 77
value = s13,0

[State 266,3]
type = envshake
type = PlaySnd
trigger1 = time = 8
trigger2 = time = 43
trigger3 = time = 78
time = 10

[State 0, Helper]
type = Helper
trigger1 = time = 7
helpertype = normal
ID = 14510
stateno = 14510
pos = 10,-130
postype = p1
keyctrl = 0
ownpal = 0
supermovetime = 234

[State 0, Helper]
type = Helper
trigger1 = time = 42
helpertype = normal
ID = 14520
stateno = 14520
pos = -27,-80
postype = p1
keyctrl = 0
ownpal = 0
supermovetime = 234

[State 0, Helper]
type = Helper
trigger1 = time = 77
helpertype = normal
ID = 14530
stateno = 14530
pos = -6,-30
postype = p1
keyctrl = 0
ownpal = 0
supermovetime = 234

[State 183, Bright]
type = PalFX
trigger1 = time = 0
time = 151
add = 0,0,0
ignorehitpause = 1

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------
[Statedef 14510]
type     = A
movetype = A
physics  = N
juggle   = 1
poweradd = 0
velset   = 0,0
anim     = 2910
ctrl     = 0
sprpriority = 5

[State 3030, Color]
type = EnvColor
trigger1 = movehit = 1
under = 1
time = 3
value = 255, 255, 255

[State 1000, ]
type = PlaySnd
trigger1 = time = 158
value = s13,1

[State 3100,1]
type = NotHitBy
trigger1 = Time = [0,184]
value = SCA

[State 1000, Xe[gX]
type = velset
trigger1 =  time = 158
x = -18
y = 0

[State 266,3]
type = envshake
trigger1 = movecontact = 1
time = 10

[State 1000, Xe[gX]
type = velmul
trigger1 =  time = 159
x = -1.1
y = 0

[State 200, 1]
type = HitDef
trigger1 = animelem = 18
attr = S, NA
animtype = Hard
damage = 250,25
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 0,9
hitsound = s2,2
guardsound = 6,2
ground.type = High
ground.slidetime = 13
ground.hittime  = 12
ground.velocity = -10,-4
airguard.velocity = -1.5,0
air.type = High
air.velocity = -9,-3.5
air.hittime = 13
sparkno = 7
guard.sparkno = 42
sparkxy = 45,-15
palfx.time = 65
palfx.color = 0
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.fall = 1
fall = 1

[State 3000,Explod]
type = Explod
trigger1 = movehit = 1
anim = 2920
id = 3220
pos = 0,-45
postype = p2
supermove = 1
sprpriority = 5
bindtime = 16
ontop = 1
ownpal = 1
scale = 0.5,0.5

[State 1000, Xe[gX]
type = Destroyself
trigger1 = time = 184;234

;-----------------------------------------------------------------------------
[Statedef 14520]
type     = A
movetype = A
physics  = N
juggle   = 1
poweradd = 0
velset   = 0,0
anim     = 2910
ctrl     = 0
sprpriority = 5

[State 3030, Color]
type = EnvColor
trigger1 = movehit = 1
under = 1
time = 3
value = 255, 255, 255

[State 1000, ]
type = PlaySnd
trigger1 = time = 130
value = s13,1

[State 3100,1]
type = NotHitBy
trigger1 = Time = [0,164]
value = SCA

[State 1000, Xe[gX]
type = velset
trigger1 =  time = 130
x = -18
y = 0

[State 266,3]
type = envshake
trigger1 = movecontact = 1
time = 10

[State 1000, Xe[gX]
type = velmul
trigger1 =  time = 131
x = -1.1
y = 0

[State 200, 1]
type = HitDef
trigger1 = animelem = 18
attr = S, NA
animtype = Hard
damage = 250,25
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 0,9
hitsound = s2,2
guardsound = 6,2
ground.type = High
ground.slidetime = 13
ground.hittime  = 12
ground.velocity = -10,-4
airguard.velocity = -1.5,0
air.type = High
air.velocity = -9,-3.5
air.hittime = 13
sparkno = 7
guard.sparkno = 42
sparkxy = 45,-15
palfx.time = 65
palfx.color = 0
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.fall = 1
fall = 1

[State 3000,Explod]
type = Explod
trigger1 = movehit = 1
anim = 2920
id = 2920
pos = 0,-45
postype = p2
supermove = 1
sprpriority = 5
bindtime = 16
ontop = 1
ownpal = 1
scale = 0.5,0.5

[State 1000, Xe[gX]
type = Destroyself
trigger1 = time = 164;234

;-------------------------------------------------------------------------
[Statedef 14530]
type     = A
movetype = A
physics  = N
juggle   = 1
poweradd = 0
velset   = 0,0
anim     = 2910
ctrl     = 0
sprpriority = 5

[State 3030, Color]
type = EnvColor
trigger1 = movehit = 1
under = 1
time = 3
value = 255, 255, 255

[State 1000, ]
type = PlaySnd
trigger1 = time = 102
value = s13,1

[State 3100,1]
type = NotHitBy
trigger1 = Time = [0,134]
value = SCA

[State 1000, Xe[gX]
type = velset
trigger1 =  time = 102
x = -18
y = 0

[State 266,3]
type = envshake
trigger1 = movecontact = 1
time = 10

[State 1000, Xe[gX]
type = velmul
trigger1 =  time = 103
x = -1.1
y = 0

[State 200, 1]
type = HitDef
trigger1 = animelem = 18
attr = S, NA
animtype = Hard
damage = 250,25
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 0,9
hitsound = s2,2
guardsound = 6,2
ground.type = High
ground.slidetime = 13
ground.hittime  = 12
ground.velocity = -10,-4
airguard.velocity = -1.5,0
air.type = High
air.velocity = -9,-3.5
air.hittime = 13
sparkno = 7
guard.sparkno = 42
sparkxy = 45,-15
palfx.time = 65
palfx.color = 0
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.fall = 1
fall = 1

[State 3000,Explod]
type = Explod
trigger1 = movehit = 1
anim = 2920
id = 2920
pos = 0,-45
postype = p2
supermove = 1
sprpriority = 5
bindtime = 16
ontop = 1
ownpal = 1
scale = 0.5,0.5

[State 1000, Xe[gX]
type = Destroyself
trigger1 = time = 134

;-------------------------------------------------------------------------------
[Statedef 13700]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = -2000
velset   = 0,0
anim     = 13700
ctrl     = 0
sprpriority = -1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 1000, HitBy]
type = HitBy
trigger1 = Time = [0,61]
value = SA,HA,NP,HP,NT,ST,HT

[State 1000, HitBy]
type = HitBy
trigger1 = Time = [61,241]
value = SCA

;--------------------------------------

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;---------------------------------------------------------
[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;---------------------------------------------------------------

[State 2000, 4]
type = SuperPause
trigger1 = animelem = 1
time = 53
movetime = 53
anim = -1
sound = F9000,3

[State 2000, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1
time = 61
mul = 0,0,0

[State 2000, Explod]
type = Explod
trigger1 = animelem = 1
anim = f7300
pos = 6,-86
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
sprpriority = -2

[State 2000, Explod]
type = Explod
trigger1 = animelem = 1
anim = f7310
pos = 6,-86
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
sprpriority = 19

[State 183, Sparks]
type = Explod
trigger1 = animelem = 1
anim = 13705
sprpriority = 2
postype = p1
pos = 0,0
bindtime = -1
ownpal = 1
supermove = 1

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S6,2

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 15
value = S8,7

[State 1000, Helper]
type = Helper
trigger1 = animelem = 13
helpertype = normal
name = "Electrical Explods"
ID = 13701
stateno = 13701
pos = -83,-240
postype = p1
facing = 1
keyctrl = 0
ownpal = 0

[State 1000, Helper]
type = Helper
trigger1 = animelem = 13
helpertype = normal
name = "Electrical Explods"
ID = 13701
stateno = 13702
pos = -250,-260
postype = p1
facing = 1
keyctrl = 0
ownpal = 0

[State 1000, State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 13701]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 13701
ctrl     = 0
sprpriority = 9

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
trigger4 = animelem = 8
value = S20,5

[State 1000, EnvColor]
type = EnvColor
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
trigger6 = animelem = 6
trigger7 = animelem = 7
trigger8 = animelem = 8
value = 255,255,255
time = 1
under = 1

[State 200, HitDef]
type = HitDef
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
trigger6 = animelem = 6
trigger7 = animelem = 7
trigger8 = animelem = 8
attr = A, HA
getpower = 0,20
damage = 12,4
animtype = up
guardflag = MA
hitflag = MAF
priority = 9, Hit
pausetime = 1,5
sparkno = 7
guard.sparkno = 42
sparkxy = 10,-65 + (floor(p2bodydist Y))
hitsound = s20,5
guardsound = 6,2
ground.type = high
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -10,-10
ground.cornerpush.veloff = 0
guard.velocity = -5
air.velocity = -10,-10
airguard.velocity = -2,-3
palfx.time = 20
palfx.color = 0
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126
fall = 1
fall.recover = 0
yaccel = .45

[state a]
type = destroyself
trigger1 = time = 100

;-------------------------------------------------------------------------------
[Statedef 13702]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 13701
ctrl     = 0
sprpriority = 8

[State 1000, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 90
freq = 90
ampl = -7
phase = 90

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
trigger3 = animelem = 5
trigger4 = animelem = 7
value = S20,9

[State 1000, EnvColor]
type = EnvColor
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
trigger6 = animelem = 6
trigger7 = animelem = 7
trigger8 = animelem = 8
value = 255,255,255
time = 1
under = 1

[State 200, HitDef]
type = HitDef
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
trigger6 = animelem = 6
trigger7 = animelem = 7
trigger8 = animelem = 8
attr = A, HA
getpower = 0,20
damage = 7,2
animtype = up
guardflag = MA
hitflag = MAF
priority = 9, Hit
pausetime = 1,5
sparkno = 7
guard.sparkno = 42
sparkxy = 10,-65 + (floor(p2bodydist Y))
hitsound = s20,5
guardsound = 6,2
ground.type = high
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -10,-10
ground.cornerpush.veloff = 0
guard.velocity = -5
air.velocity = -10,-10
airguard.velocity = -2,-3
palfx.time = 20
palfx.color = 0
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126
fall = 1
fall.recover = 0
yaccel = .45

[state a]
type = destroyself
trigger1 = time = 100

;=====================================================================================
[StateDef 13500]
type = S           ;S,A,C,L    状态设定 S站立 A空中 C下蹲 L躺倒
movetype = I       ;I,A,H      行动状态设定 I无作用 A攻击 H受击
physics = S        ;A,C,S,N    物理摩擦 A空中 C下蹲 S站立 N无摩擦
anim = 13500
ctrl = 0
velset = 0,0
poweradd = -2000
facep2 = 1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1899]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = animelemtime(11) = 54
anim = 13512;图像的动画编号
pos = -31,-131
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -2 ;移除时间
scale = .7,.7;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, NotHitBy]
type = NotHitBy   ;不会被一些攻击参数打中 用于无敌处理
trigger1 = 1
value = SCA

[State 0, Width]
type = null;Width   ;边缘设定
trigger1 = 1
value = 0,40

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = animelem = 2
value = S3500,4    ;SND中的声音编号

[State 0, AllPalFX]
type = AllPalFX ;全部的图像改变颜色
trigger1 = animelem = 27
time = 5 ;持续时间
add = 255,255,255 ;颜色增加

[State 0, EnvShake]
type = EnvShake ;震动控制器
trigger1 = animelem = 27
time = 20 ;持续时间
freq = 100 ;震动强度
ampl = -10 ;震动的上下距离
phase = 90 ;震动幅度

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = animelem = 27
value = S3500,1    ;SND中的声音编号

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = animelem = 16
trigger2 = animelem = 20
trigger3 = animelem = 24
value = S3500,3    ;SND中的声音编号

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = animelem = 16
anim = 13502;图像的动画编号
pos = 11,-133 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -2 ;移除时间
scale = 1,1 ;纵横比例
sprpriority = 10 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = animelem = 20
anim = 13502;图像的动画编号
pos = 11,-143 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -2 ;移除时间
scale = 1,1 ;纵横比例
sprpriority = 10 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = animelem = 24
anim = 13502;图像的动画编号
pos = 11,-163 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -2 ;移除时间
scale = 1,1 ;纵横比例
sprpriority = 10 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = animelem = 25
anim = 13503;图像的动画编号
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -2 ;移除时间
scale = .7,.7 ;纵横比例
sprpriority = 10 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = animelem = 12
anim = 13504;图像的动画编号
pos = -14,-111 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -2 ;移除时间
scale = 1,1 ;纵横比例
sprpriority = 10 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, NotHitBy]
type = NotHitBy   ;不会被一些攻击参数打中 用于无敌处理
trigger1 = 1
value = SCA
;--------------------------------------

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;---------------------------------------------------------
[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;---------------------------------------------------------------
[State 0, SuperPause]
type = SuperPause   ;超级停止控制器 一般超必杀用到
trigger1 = time = 0
time = 33       ;持续时间
anim = -1      ;超杀闪光 -1就是没有 必须设定
movetime = 33

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 0
anim = f7300
ID = 4010
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 55,-96
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 0
anim = f7310
ID = 4011
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 55,-96
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 0, LV4闪光声效]
type = PlaySnd
trigger1 = time = 0
value = F9000,2

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = animelem = 11
anim = 13501;图像的动画编号
ID = 13501;图像ID
pos = -31,-131 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 1,1 ;纵横比例
sprpriority = 10 ;图层
shadow = 0,0,0 ;倒影
ownpal = 1 ;用自己的色表

[State 0, RemoveExplod]
type = RemoveExplod   ;移除某个图像
trigger1 = animelemtime(11) = 34
id = 13501     ;图像的ID

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 0
helpertype = normal ;player 援助级别
ID = 13510;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 3
helpertype = normal ;player 援助级别
ID = 13511;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 6
helpertype = normal ;player 援助级别
ID = 13512;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 9
helpertype = normal ;player 援助级别
ID = 13513;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 12
helpertype = normal ;player 援助级别
ID = 13514;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 15
helpertype = normal ;player 援助级别
ID = 13515;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 18
helpertype = normal ;player 援助级别
ID = 13516;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 21
helpertype = normal ;player 援助级别
ID = 13517;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 24
helpertype = normal ;player 援助级别
ID = 13518;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 27
helpertype = normal ;player 援助级别
ID = 13519;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 30
helpertype = normal ;player 援助级别
ID = 13520;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = animelemtime(11) = 33
helpertype = normal ;player 援助级别
ID = 13521;援助ID
stateno = 13510;statedef编号
pos = -31,-131 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = .5
size.yscale = .5

[State 0, ChangeState]
type = ChangeState ;改变状态控制器
trigger1 = animtime = 0
value = 0;statedef编号
ctrl = 1 ;是否可控

;-----------------------------------------------------------------------
[StateDef 13510]
type = A           ;S,A,C,L    状态设定 S站立 A空中 C下蹲 L躺倒
movetype = I       ;I,A,H      行动状态设定 I无作用 A攻击 H受击
physics = N        ;A,C,S,N    物理摩擦 A空中 C下蹲 S站立 N无摩擦
anim = 13510
ctrl = 0
sprpriority = 10

[State 1034, 2]
type = Projectile
trigger1 = time%6 = 1
projremove = 1
Projremovetime = 1
projhits = 1
projpriority = 9999
projanim = 13511
projID = 13500
offset = 0,0
velocity = 0,0
attr = S, HP
damage = 10,5
getpower = 0,0
givepower = 0,0
animtype = up
guardflag = M
hitflag = MAFD
pausetime = 0,20
sparkno = 7
guard.sparkno = 42
sparkxy = 0 + (floor(p2bodydist X)),-65 + (floor(p2bodydist Y))
hitsound = S3500,2
guardsound = 6,1
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
guard.hittime = 5
ground.velocity = -4,-4
air.velocity = -4,-4
fall = 1
fall.recover = 0
sprpriority = 4
ignorehitpause = 1
palfx.time = 30
palfx.color = 0
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = time = 0
value = S4,6    ;SND中的声音编号

[State 0, AfterImage]
type = AfterImage  ;残影控制器 直接参考我写好解释的afterimage就行了
trigger1 = time = 0
time = -1
length = 9
palbright = 0,0,255
palcontrast = 200,50,256
paladd = 0,10,20
palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add ;"none","add1","sub"

[State 0, Trans]
type = Trans    ;透明处理
trigger1 = 1
trans = add;alpha
;alpha = 100,255      ;透明的形势 ADD ADD1 ADDALPHA SUP

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13510)
anim = 13553;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13511)
anim = 13551;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13512)
anim = 13552;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13513)
anim = 13553;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13514)
anim = 13554;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13515)
anim = 13555;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13516)
anim = 13556;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13517)
anim = 13557;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13518)
anim = 13558;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13519)
anim = 13559;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13520)
anim = 13560;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, Explod]
type = Explod ;图像控制器
trigger1 = time = 0
trigger1 = ishelper(13521)
anim = 13561;图像的动画编号
ID = 10000;图像ID
pos = 0,0 ;位置
postype = p1  ;p2,front,back,left,right 绑定位置
bindtime = -1 ;绑定时间
removetime = -1 ;移除时间
scale = 0.5,0.5 ;纵横比例
sprpriority = 20 ;图层
ontop = 1 ;最顶层
ownpal = 1 ;用自己的色表

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(13510)||ishelper(13511)||ishelper(13512)
trigger1 = time = 0
fv = 10
value = ifelse(ishelper(13510),15,ifelse(ishelper(13511),45,75))*(pi/180)

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(13513)||ishelper(13514)||ishelper(13515)
trigger1 = time = 0
fv = 10
value = ifelse(ishelper(13513),105,ifelse(ishelper(13514),135,165))*(pi/180)

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(13516)||ishelper(13517)||ishelper(13518)
trigger1 = time = 0
fv = 10
value = ifelse(ishelper(13516),-165,ifelse(ishelper(13517),-135,-105))*(pi/180)

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(13519)||ishelper(13520)||ishelper(13521)
trigger1 = time = 0
fv = 10
value = ifelse(ishelper(13519),-75,ifelse(ishelper(13520),-45,-15))*(pi/180)

[State 0, VarAdd]
type = VarAdd
trigger1 = time = [0,20]
fv = 10
value = 0.08

[State 0, VarAdd]
type = VarAdd
trigger1 = time = [0,20]
fv = 11
value = 5

[State 0, AssertSpecial]
type = AssertSpecial ;特殊断言控制器
trigger1 = 1
flag = noshadow ;无影子

[State 0, PosSet]
type = PosSet     ;位置设定控制器
trigger1 = 1
x = (Parent,pos x-(31*facing))+(Fvar(11)*(sin(Fvar(10)*facing)))
y = (Parent,pos y-131)+(Fvar(11)*(cos(Fvar(10)*facing)))

[State 0, ChangeState]
type = ChangeState ;改变状态控制器
trigger1 = time = 60
value = 13515;statedef编号
ctrl = 0 ;是否可控

;-----------------------------------------------------------------------------------
[StateDef 13515]
type = A           ;S,A,C,L    状态设定 S站立 A空中 C下蹲 L躺倒
movetype = I       ;I,A,H      行动状态设定 I无作用 A攻击 H受击
physics = N        ;A,C,S,N    物理摩擦 A空中 C下蹲 S站立 N无摩擦
anim = 13510
ctrl = 0

[State 0, RemoveExplod]
type = RemoveExplod   ;移除某个图像
trigger1 = time = 0
id = 10000     ;图像的ID

[State 0, PlaySnd]
type = PlaySnd  ;播放声音控制器
trigger1 = time = 0
value = S2,2   ;SND中的声音编号

[State 1034, 2]
type = Projectile
trigger1 = time%4 = 1
projremove = 1
Projremovetime = 1
projhits = 1
projpriority = 9999
projanim = 13511
projID = 13500
offset = 0,0
velocity = 0,0
attr = S, HP
damage = 10,5
getpower = 0,0
givepower = 0,0
animtype = up
guardflag = M
hitflag = MAFD
pausetime = 0,20
guard.pausetime = 0,20
sparkno = 7
guard.sparkno = 42
sparkxy = 0 + (floor(p2bodydist X)),-65 + (floor(p2bodydist Y))
hitsound = S3500,2
guardsound = 6,1
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
guard.hittime = 5
ground.velocity = -2,-14
air.velocity = -2,-14
fall = 1
fall.recover = 0
sprpriority = 4
ignorehitpause = 1
palfx.time = 20
palfx.color = 0
palfx.invertall = 1
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126

[State 0, Trans]
type = Trans    ;透明处理
trigger1 = 1
trans = add;alpha
;alpha = 100,255      ;透明的形势 ADD ADD1 ADDALPHA SUP

[State 0, ChangeState]
type = null;ChangeState ;改变状态控制器
trigger1 = time = 55
value = 13520;statedef编号
ctrl = 0 ;是否可控

[State 0, Helper]
type = Helper ;援助控制器
trigger1 = time = 54
helpertype = normal ;player 援助级别
stateno = 13520;statedef编号
pos = 0,0 ;位置
postype = p1    ;p2,front,back,left,right 绑定位置
keyctrl = 0 ;控制
ownpal = 1 ;独立色表
size.xscale = 1
size.yscale = 1

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = time = 0
trigger1 = p2bodydist x!=[0,10]
x = p2bodydist x  / 20          ;横向速度
y = (p2bodydist y - 70) / 20           ;纵向..

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = p2bodydist x =[0,10]
x = p2bodydist x  / 10           ;横向速度
y = (p2bodydist y - 70) / 10           ;纵向..

[State 0, DestroySelf]
type = DestroySelf ;毁灭自己控制器
trigger1 = time = 55

;--------------------------------------------------------------------------------
[StateDef 13520]
type = A           ;S,A,C,L    状态设定 S站立 A空中 C下蹲 L躺倒
movetype = I       ;I,A,H      行动状态设定 I无作用 A攻击 H受击
physics = N        ;A,C,S,N    物理摩擦 A空中 C下蹲 S站立 N无摩擦
anim = 99999
ctrl = 0

[State 0, AfterImage]
type = AfterImage  ;残影控制器 直接参考我写好解释的afterimage就行了
trigger1 = time = 0
time = -1
length = 9
palbright = 0,0,255
palcontrast = 200,50,256
paladd = 0,10,20
palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add ;"none","add1","sub"

[State 0, Trans]
type = Trans    ;透明处理
trigger1 = 1
trans = add;alpha
;alpha = 100,255     ;透明的形势 ADD ADD1 ADDALPHA SUP

[State 0, VelSet]
type = VelSet    ;速度设定
trigger1 = 1
x = 0       ;横向速度
y = 0           ;纵向..

[State 0, DestroySelf]
type = DestroySelf ;毁灭自己控制器
trigger1 = animtime = 0

;---------------------------------------------------------------------------
[Statedef 2200]
type = S
movetype = A
physics = S
juggle = 0
velset = 0,0
anim = 2200
poweradd = ifelse(fvar(30) > 0,0,-1000)
ctrl = 0
sprpriority = 2

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 0, NotHitBy]
type = NotHitBy 
trigger1 = 1
value = SCA

[State 2200, 8]
type = SuperPause
trigger1 = Time = 0
time = 33
movetime = 33
anim = -1
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 0
anim = f7000
scale = .5,.5
ownpal = 1
facing = 1
postype = p1
pos = -15,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 0
anim = f7010
scale = .5,.5
ownpal = 1
facing = 1
postype = p1
pos = -15,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 1]
type = PlaySnd
trigger1 = Time = 0
value = F9000, 0

[State a]
type = AfterImage
trigger1 = Time = 0
time = -1
trans = add1
length = 4
timeGap = 3
frameGap = 1
palBright = 0,0,0
palContrast = 128,128,128
palAdd = 0,0,0
palMul = 1,1,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 3500,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = 3500,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = 2200,0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 8,>= 0
x = 8

[State a]
type = helper
trigger1 = AnimElem = 9
helpertype = normal
ID = 1561
pos = 0,0
postype = p1
stateno = 1004
keyctrl = 0
ownpal = 1
size.xscale = .5
size.yscale = .88
ignorehitpause = 1
persistent = 0

[State 1100, 1]
type = NULL;Helper
trigger1 = AnimElem = 9
id = 1561
sprpriority = 10
postype = P1
pos = 85,-70
stateno = 1004
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
persistent = 0 
pausemovetime = 9999999
supermovetime = 9999999
IgnoreHitPause = 1
Size.xscale = .5
Size.yscale = .88

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 50
trans = add1
length = 4
timeGap = 3
frameGap = 1
palBright = 0,0,0
palContrast = 128,128,128
palAdd = 0,0,0
palMul = 1,1,1
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 50,0
numhits = 0
animtype = Hard
guardflag = M
priority = 5
pausetime = 2,2
sparkxy = -20,-70
sparkno = 7
guard.sparkno = 42
hitsound = s2,2
guardsound = 6,2
guard.velocity = -5
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0,0
air.velocity = 0,0
palfx.time = 80
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126
palfx.color = 0
palfx.invertall = 1
envshake.time = 20
envshake.ampl = 6
envshake.freq = 100
p2facing = 1
p1StateNo = 2210
p2StateNo = 2220

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = MoveGuarded
value = 2205

;---------------------------------------------------------------------------
[Statedef 2205]
type = S
movetype = I
physics = S
juggle = 0
velset = 0,0
anim = 2205
ctrl = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(3) <= 0
x = 4

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 2210]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 2210
velset = 0,0
juggle = 0

[State 0, NotHitBy]
type = NotHitBy 
trigger1 = 1
value = SCA

[State 0, TargetBind]
type = TargetBind
trigger1 = time = 0
pos = 100,0

[State 0, StateTypeset]
type = StateTypeset
trigger1 = animelem = 3
statetype = A
movetype = A
physics = S

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 3
value = 2200,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 4900,2

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 5
id = 1560
sprpriority = 10
postype = P2
pos = 0,0
stateno = 1004
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
persistent = 0 
pausemovetime = 9999999
supermovetime = 9999999
IgnoreHitPause = 1
Size.xscale = .65
Size.yscale = .65

[State 0, HitAdd]
type = HitAdd
trigger1 = movehit = 1
value = 1

[State 0, Envcolor]
type = Envcolor
trigger1 = movehit = 1
value = 255,255,255
under = 1
time = 2
ignorehitpause = 1
persistent = 0

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 30
trans = add1
length = 4
timeGap = 3
frameGap = 1
palBright = 0,0,0
palContrast = 128,128,128
palAdd = 0,0,0
palMul = 1,1,1
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = animelem = 6
attr = A, NA
animtype  = Hard
damage = 0
getpower = 0,0
givepower = 15,15
hitflag = MAF
guardflag = H
pausetime = 8,12
sparkxy = -20,-70
sparkno = 7
guard.sparkno = 42
hitsound = s2,2
guardsound = 6,2
ground.type = Low
ground.slidetime = 17
ground.hittime  = 20
ground.velocity = -6
air.velocity = -3,-4
air.animtype = Back
palfx.time = 40
palfx.add = 30,30,150
palfx.mul = 256,256,256
palfx.sinadd = 126,126,126
palfx.color = 0
palfx.invertall = 1
envshake.time = 20
envshake.ampl = 6
envshake.freq = 100
p2stateno = 2226

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 6
value = -200
absolute = 1
kill = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 4
y = -5.8

[State 0, VelAdd]
type = VelAdd
trigger1 = time >= 26
x =.5

[State 0, VelAdd]
type = VelAdd
trigger1 = time >= 26
y = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 13 && pos Y>=0&&vel Y>0
value = 2215

;---------------------------------------------------------------------------
[Statedef 2215]
type    = S
movetype= I
physics = S
anim = 2215
ctrl = 0
velset = 0,0

[State 0, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 2220]
type = A
movetype = H
physics = N
velset = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = time = 5
x = 0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 2220+var(55)*30000

[State 0, SelfState]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 2226]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
poweradd = 40
sprpriority = -2

[State 0, Changeanim2]
type= Changeanim2
trigger1 = Time = 0
value = 2222+var(55)*30000

[State 0, Changeanim]
type= Changeanim
trigger1 = time = 10
trigger1 = SelfAnimExist(5062+var(55)*30000)=1
value = 5062+var(55)*30000

[State 0, VelSet]
type = VelSet
trigger1 = time = 10
x = -2
y = 5

[State 0, VelAdd]
type = VelAdd
trigger1 = time>=10
y = 5

[State 0, SelfState]
type = SelfState
trigger1 = pos Y>=0&&Vel Y>0
trigger2 = Time>=25
trigger3 = Anim!=2222+var(55)*30000&&Anim!=5062+var(55)*30000
value = 5100