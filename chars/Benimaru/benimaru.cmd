;------| TAG |------------------------------------------------------
[Command]
name = "换人"
command = ~B, F, B, F, s
time = 30

[Command]
name = "援护攻击A"
command = ~D, DF, F, D, DF, F, s
time = 30

[Command]
name = "援护攻击B"
command = ~D, DB, B, D, DB, B, s
time = 30
;------------------------------------------------------------------

;-| Shortcuts |--------------------------------------------------------

[Command]
name = "模式转换"
command = ~B, F, B, F, c
time = 30
buffer.time = 9

[command]
name = "雷咒术"
command = ~D, B, D, B, c
time = 30
buffer.time = 9

[command]
name = "夺命高压"
command = ~D, B, D, B, c
time = 30
buffer.time = 9

[Command]
name = "雷之箭MAX"
command = ~D, F, D, F, c
time = 30
buffer.time = 9

[Command]
name = "雷皇拳"
command = ~D, F, D, F, c
time = 30
buffer.time = 9

[Command]
name = "RaikoukenX"
command = ~D, F, D, F, x+y
time = 30
buffer.time = 9

[Command]
name = "雷之箭"
command = ~D, B, D, B, x+y
time = 30
buffer.time = 9

[Command]
name = "ElecTriggerX"
command = ~D, B, D, B, x+y
time = 30
buffer.time = 9

[Command]
name = "SparkX"
command = ~D, B, D, F, a+b
time = 30

[Command]
name = "Gen'ei HurricaneX"
command = ~D, B, D, F, a+b
time = 30
buffer.time = 9

[Command]
name = "RaikoukenA"
command = ~D, F, D, F, x
time = 30
buffer.time = 9

[Command]
name = "RaikoukenC"
command = ~D, F, D, F, y
time = 30
buffer.time = 9

[Command]
name = "电气附身"
command = ~D, B, D, B, x
time = 30
buffer.time = 9

[Command]
name = "电气附身"
command = ~D, B, D, B, y
time = 30
buffer.time = 9

[Command]
name = "ElecTrigger"
command = ~D, B, D, B, x
time = 30
buffer.time = 5

[Command]
name = "ElecTrigger"
command = ~D, B, D, B, y
time = 30
buffer.time = 5

[Command]
name = "1501"
command = ~D, F, D, F, a+b
time = 30
buffer.time = 9

[Command]
name = "Plasma Ball Attack"
command = ~D, B, D, B, a+b
time = 30

[Command]
name = "Gen'ei Hurricane"
command = ~D, B, D, F, a
time = 30
buffer.time = 9

[Command]
name = "Gen'ei Hurricane"
command = ~D, B, D, F, b
time = 30
buffer.time = 9

[Command]
name = "2200"
command = ~D, F, D, F, a
time = 30
buffer.time = 9

[Command]
name = "2200"
command = ~D, F, D, F, b
time = 30
buffer.time = 9

[Command]
name = "13800"
command = ~D, B, D, B,  a
time = 30
buffer.time = 9

[Command]
name = "13800"
command = ~D, B, D, B, b
time = 30
buffer.time = 9

[Command]
name = "9011"
command = ~D, B, D, B, a
time = 30
buffer.time = 9

[Command]
name = "9011"
command = ~D, B, D, B, b
time = 30
buffer.time = 9

[Command]
name = "SparkA"
command = ~D, B, D, F, a
time = 30
buffer.time = 9

[Command]
name = "SparkB"
command = ~D, B, D, F, b
time = 30
buffer.time = 9

;-| Special Motions |------------------------------------------------------

[Command]
name = "DAO"
command = ~D,B, x
time = 10
buffer.time = 5

[Command]
name = "DAO2"
command = ~D,B, y
time = 10
buffer.time = 5

[Command]
name = "闪电"
command = ~F,DF,F,x+y
time = 25
buffer.time = 5

[Command]
name = "2800"
command = ~F,DF,F, x
time = 20
buffer.time = 5

[Command]
name = "2800"
command = ~F,DF,F, y
time = 20
buffer.time = 5

[Command]
name = "flipA"
command = ~F,DF,F, a
time = 20
buffer.time = 5

[Command]
name = "flipB"
command = ~F,DF,F, b
time = 20
buffer.time = 5

[Command]
name = "Raijinken A"
command = ~D,F, x
time = 10
buffer.time = 5

[Command]
name = "Raijinken C"
command = ~D,F, y
time = 10
buffer.time = 5

[Command]
name = "Iaigeri"
command = ~D,F, a
time = 10

[Command]
name = "Iaigeri"
command = ~D,F, b
time = 10

[Command]
name = "Handou Sandan Geri B"
command = ~D,F, a
time = 10

[Command]
name = "Handou Sandan Geri D"
command = ~D,F, b
time = 10

[Command]
name = "Shinkuu Katategoma A"
command = ~D,B, a
time = 10

[Command]
name = "Shinkuu Katategoma C"
command = ~D,B, b
time = 10

[Command]
name = "Benimaru Koreda"
command = ~F, DB, x
time = 20

[Command]
name = "Benimaru Koreda"
command = ~F, DB, y
time = 20

;-| Double Tap |-----------------------------------------------------------
[Command]
name = "FF";Required (do not remove)
command = F, F
time = 10

[Command]
name = "BB";Required (do not remove)
command = B, B
time = 10

;-| 2/3 Button Combination |-----------------------------------------------

[Command]
name = "recovery";Required (do not remove)
command = x+a
time = 1

[Command]
name = "recovery";Required (do not remove)
command = z
time = 1

[Command]
name = "cd"
command = y+b
time = 1

[Command]
name = "cd"
command = c
time = 1

[Command]
name = "ay"
command = a+y
time = 1

;-| Single Button |---------------------------------------------------------

[command]
name = "fwd"
command = F
time = 1

[command]
name = "back"
command = B
time = 1

[command]
name = "up"
command = U
time = 1

[command]
name = "down"
command = D
time = 1

[Command]
name = "a"
command = a
time = 1

[Command]
name = "b"
command = b
time = 1

[Command]
name = "x"
command = x
time = 1

[Command]
name = "y"
command = y
time = 1

[Command]
name = "c"
command = c
time = 1

[Command]
name = "x"
command = x
time = 1

[Command]
name = "y"
command = y
time = 1

[Command]
name = "z"
command = z
time = 1

[Command]
name = "start"
command = s
time = 1

;-| Hold Button |----------------------------------------------------------

[Command]
name = "holdfwd";Required (do not remove)
command = /$F
time = 1

[Command]
name = "holdback";Required (do not remove)
command = /$B
time = 1

[Command]
name = "holdup";Required (do not remove)
command = /$U
time = 1

[Command]
name = "holddown";Required (do not remove)
command = /$D
time = 1

[Command]
name = "holda"
command = /a
time = 1

[Command]
name = "holdb"
command = /b
time = 1

[Command]
name = "holdc"
command = /c
time = 1

[Command]
name = "holdx"
command = /x
time = 1

[Command]
name = "holdy"
command = /y
time = 1

[Command]
name = "holdz"
command = /z
time = 1

[Command]
name = "holds"
command = /s
time = 1

;-| Dir + Button |---------------------------------------------------------

[Command]
name = "fwd_a"
command = /F,x
time = 1

[Command]
name = "fwd_b"
command = /F,a
time = 1

[Command]
name = "fwd_c"
command = /F,y
time = 1

[Command]
name = "fwd_d"
command = /F,b
time = 1

[Command]
name = "back_a"
command = /B,x
time = 1

[Command]
name = "back_b"
command = /B,a
time = 1

[Command]
name = "back_c"
command = /B,y
time = 1

[Command]
name = "back_d"
command = /B,b
time = 1

[Command]
name = "down_a"
command = /$D,x
time = 1

[Command]
name = "down_b"
command = /$D,a
time = 1

[Command]
name = "down_c"
command = /$D,y
time = 1

[Command]
name = "down_d"
command = /$D,b
time = 1

[Command]
name = "longjump"
command = ~D, $U
time = 8

[Command]
name = "longjump"
command = ~DF, $U
time = 8

[Command]
name = "longjump"
command = ~DB, $U
time = 8


;============================================================================= 
[Statedef -1]
;============================================================================= 

[State -1]
type = ChangeState
value = 1990
triggerall = !winko
triggerall = power >= 1000
triggerall = fvar(30) < 1 && statetype != A
triggerall = stateno != [800,899)
triggerall = command = "ay"
trigger1 = stateno != 1990 && (stateno = [0,999]) && movecontact

[State -1]
type = ChangeState
value = 1991
triggerall = !winko
triggerall = power >= 1000
triggerall = fvar(30) < 1 && statetype != A
triggerall = command = "ay"
trigger1 = ctrl || stateno = 100

; air(空中)
[State -1]
type = ChangeState
value = 1992
triggerall = !winko
triggerall = power >= 1000
triggerall = fvar(30) < 1 && statetype= A
triggerall = stateno != [800,899)
triggerall = command = "ay"
trigger1 = stateno != 1992 && (stateno = [0,999])

;------------------------------------------------------------------------------
[State -1, AI Helper Check]
type = ChangeState
trigger1 = IsHelper(9741)
value = 9741

[State -1, AI Helper Check 2]
type = ChangeState
trigger1 = IsHelper(9742)
value = 9742

;=========================
; COMBO VAR 
;=========================
[State -1, Combo1]
type = Varset
trigger1 = 1
var(29) = 0

[State -1, Combo2]
type = Varset
trigger1 = stateno = 200 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger2 = stateno = 205 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger3 = stateno = 210 && animelemtime(4) > 1 && animelemtime(6) < 0
trigger4 = stateno = 215 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger5 = stateno = 225 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger6 = stateno = 235 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger7 = stateno = 400 && animelemtime(2) > 1 && animelemtime(3) < 0
trigger8 = stateno = 410 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger9 = stateno = 420 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger10 = stateno = 430 && animelemtime(4) > 1 && animelemtime(6) < 0
trigger11 = stateno = 255 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger12 = stateno = 265 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger13 = stateno = 240 && animelemtime(5) > 1 && animelemtime(7) < 0
trigger14 = stateno = 703 && animelemtime(3) > 1 && animelemtime(5) < 0
ignorehitpause = 1
var(29) = var(29) | 1


;=========================
; SUPER CANCELS
;=========================
[State -1, C.Combo1]
type = Varset
trigger1 = 1
var(42) = 0

[State -1, C.Combo3]
type = Varset
triggerall = var(40) > 0 || 1
triggerall =movecontact
trigger1 = stateno = 1110 && animelemtime(5) > 1 
trigger2 = stateno = 1125 && animelemtime(5) > 1
trigger3 = stateno = 1200 && animelemtime(4) > 1 && animelemtime(17) <= 0
trigger4 = stateno = 1210 && animelemtime(4) > 1 && animelemtime(17) <= 0
ignorehitpause = 1
var(42) = var(42) | 1

[State -1, KOF2K1 Special Cancel]
type = Varset
trigger1 = var(42) = 1
ignorehitpause = 1
var(45) = var(45)|1

[State -1, KOF2K1 Special Cancel]
type = Varset
trigger1 = var(42) = 0
var(45) = 0

;===========================================================================
;SUPER ATTACKS (Chou Hissatsu Waza)
;===========================================================================

;NEO MAX
[State -1]
type = ChangeState
value = 4900
triggerall = var(55) = 0
triggerall = var(9) != 1
triggerall = power >= 2000 && command = "雷皇拳"
triggerall = statetype != A
trigger1 = fvar(30) > 0
trigger1 = ctrl
trigger2 = var(29) = 1
trigger3 = power >= 1000 && var(42) = 1

[State -1]
type = ChangeState
value = 14500
triggerall = var(55) = 1
triggerall = power >=2000
triggerall = command = "雷之箭MAX"
trigger1 = fvar(30) > 0
trigger1 = statetype != A && ctrl

[state -1]
type = changestate
value = 13500
triggerall = var(55) = 0
triggerall = power>= 2000 
triggerall = command = "雷咒术"
trigger1 = fvar(30) > 0
trigger1 = statetype != A && ctrl

[State -1, Devastation of voltage]
type = ChangeState
value = 13700
triggerall = var(55) = 1
triggerall = power >= 2000 
triggerall =  command = "夺命高压"
trigger1 = statetype != A && ctrl
trigger1 = fvar(30) > 0

;Raikouken SDM
[State -1]
type = ChangeState
value = 3500
triggerall = var(9) != 1
triggerall = power >= ifelse(fvar(30) > 0,1000,2000) && command = "RaikoukenX"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 2000 && var(42) = 1
trigger4 = stateno = 3000 && time <52 && movecontact
trigger5 = stateno = 3050 && time <52 && movecontact

;Genei Hurricane
[State -1]
type = ChangeState
value = 3600
triggerall = var(55) = 0
triggerall = power >= ifelse(fvar(30) > 0,1000,2000) && command = "Gen'ei HurricaneX"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 2000 && var(42) = 1

;ElecTrigger
[State -1]
type = ChangeState
value = 3700
triggerall = var(55) = 0
triggerall = power >= ifelse(fvar(30) > 0,1000,2000) && command = "ElecTriggerX"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 2000 && var(42) = 1

;Spark SDM
[State -1]
type = ChangeState
value = 3900
triggerall = var(55) = 1
triggerall = power >= ifelse(fvar(30) > 0,1000,2000) && command = "SparkX"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 2000 && var(42) = 1

[State -1]
type = ChangeState
value = 2900
triggerall = numhelper(2910) = 0
triggerall = var(55) = 1
triggerall = power >= ifelse(fvar(30) > 0,1000,2000)
triggerall = command = "雷之箭"
trigger1 = statetype != A && ctrl

[State -1]
type = ChangeState
value = 6200
triggerall = var(55) = 1
triggerall = power >= ifelse(fvar(30) > 0,1000,2000) && command = "Plasma Ball Attack"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 2000 && var(42) = 1
trigger4 = stateno = 1200 && movecontact
trigger5 = stateno = 1210 && movecontact
trigger6 = stateno = 1000 && movecontact
trigger7 = stateno = 1050 && movecontact
trigger8 = stateno = 1100 && movecontact
trigger9 = stateno = 1110 && movecontact

[State -1]
type = ChangeState
value = 1501
triggerall = var(55) = 0
triggerall = power >= ifelse(fvar(30) > 0,1000,2000) && command = "1501"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 2000 && var(42) = 1
trigger4 = (stateno = 245)&&(movecontact)

;===============================================================
;Spark 
[State -1]
type = ChangeState
value = 3800
triggerall = var(55) = 1
triggerall = power >= ifelse(fvar(30) > 0,0,1000) && command = "SparkA"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 1000  && var(42) = 1
trigger4 = (stateno = 245)&&(movecontact)

[State -1]
type = ChangeState
value = 3850
triggerall = var(55) = 1
triggerall = power >= ifelse(fvar(30) > 0,0,1000) && command = "SparkB"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >=1000 && var(42) = 1
trigger4 = (stateno = 245)&&(movecontact)

[State -1]
type = ChangeState
value = 9011
triggerall = var(55) = 0
triggerall = power >= ifelse(fvar(30) > 0,0,1000) && command = "9011"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 1000 && var(42) = 1
trigger4 = (stateno = 245)&&(movecontact)

[State -1]
type = ChangeState
value = 13800
triggerall = var(55) = 1
triggerall = power >= ifelse(fvar(30) > 0,0,1000) && command = "13800"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 1000 && var(42) = 1
trigger4 = (stateno = 245)&&(movecontact)

;Raikouken A
[State -1]
type = ChangeState
value = 3000
;triggerall = var(9) != 1
triggerall = power >= ifelse(fvar(30) > 0,0,1000) && command = "RaikoukenA"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 1000 && var(42) = 1
trigger4 = stateno = 1000 && time <28 && movecontact
trigger5 = stateno = 1050 && time <28 && movecontact


;Raikouken C
[State -1]
type = ChangeState
value = 3050
;triggerall = var(9) != 1
triggerall = power >= ifelse(fvar(30) > 0,0,1000) && command = "RaikoukenC"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 1000 && var(42) = 1
trigger4 = stateno = 1000 && time <28 && movecontact
trigger5 = stateno = 1050 && time <28 && movecontact


;Genei Hurricane
[State -1]
type = ChangeState
value = 3100
triggerall = var(55) = 0
triggerall = power >= ifelse(fvar(30) > 0,0,1000) && command = "Gen'ei Hurricane"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 2000 && var(42) = 1


;ElecTrigger
[State -1]
type = ChangeState
value = 3200
triggerall = var(55) = 0
triggerall = power >= ifelse(fvar(30) > 0,0,1000) && command = "ElecTrigger"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = power >= 1000 && var(42) = 1

[State -1, 红丸升击]
type = ChangeState
value = 2200
triggerall = command = "2200"
triggerall = power >= ifelse(fvar(30) > 0,0,1000) 
triggerall = statetype != A
trigger1 = ctrl
trigger2 = var(29) = 1
trigger3 = power >= 2000 && var(42) = 1
trigger4 = (stateno = 245)&&(movecontact)

[State -1, S YAMIBARAI]
type = ChangeState
value = 2000
triggerall = numhelper(2010) = 0
triggerall = Power >= ifelse(fvar(30) > 0,0,1000)
triggerall = var(55) = 1
triggerall = command = "电气附身"
triggerall = statetype != A
trigger1 = ctrl
trigger2 = var(29) = 1

;===========================================================================
;SPECIAL ATTACKS (Hissatsu Waza)
;===========================================================================

[State -1]
type = ChangeState
value = 1950-var(55)*50
triggerall = Power >= ifelse(fvar(30) > 0,0,1000)
triggerall = command = "模式转换"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

;Flip Kick A
[State -1]
type = ChangeState
value = 1600
;triggerall = var(9) != 1
triggerall = command = "flipA"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

[State -1]
type = ChangeState
value = 1500
triggerall = command = "闪电"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

;LEI
[State -1]
type = ChangeState
value = 2800
;triggerall = var(9) != 1
triggerall = command = "2800"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

;Benimaru Koreda
[State -1]
type = ChangeState
value = 1300
;triggerall = var(9) != 1
triggerall = command = "Benimaru Koreda"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

;DAO
[State -1]
type = ChangeState
value = 1800
;triggerall = var(9) != 1
triggerall = command = "DAO"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

;DAO2
[State -1]
type = ChangeState
value = 1850
;triggerall = var(9) != 1
triggerall = command = "DAO2"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

;Flip Kick B
[State -1]
type = ChangeState
value = 1650
;triggerall = var(9) != 1
triggerall = command = "flipB"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

;Iaigeri
[State -1]
type = ChangeState
value = 1100
;triggerall = var(9) != 1
triggerall = command = "Iaigeri"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1
trigger3 = stateno = 1200 && time <24 && movecontact
trigger4 = stateno = 1210 && time <24 && movecontact


;Raijinken
[State -1]
type = ChangeState
value = 1000
;triggerall = var(9) != 1
triggerall = command = "Raijinken A"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

[State -1]
type = ChangeState
value = 1050
;triggerall = var(9) != 1
triggerall = command = "Raijinken C"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

;Shinkuu Katategoma
[State -1]
type = ChangeState
value = 1200
;triggerall = var(9) != 1
triggerall = command = "Shinkuu Katategoma A"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

[State -1]
type = ChangeState
value = 1210
;triggerall = var(9) != 1
triggerall = command = "Shinkuu Katategoma C"
trigger1 = statetype != A && ctrl
trigger2 = var(29) = 1

;Air Raijinken
[State -1]
type = ChangeState
value = 1400
;;triggerall = var(9) != 1
triggerall = command = "Raijinken A"
trigger1 = statetype = A && ctrl
trigger1 = pos y <= -50

[State -1]
type = ChangeState
value = 1450
;;triggerall = var(9) != 1
triggerall = command = "Raijinken C"
trigger1 = statetype = A && ctrl
trigger1 = pos y <= -50

;===========================================================================
;DASH/BACKHOP
;===========================================================================
;RunFwd
[State -1]
type = ChangeState
value = 100
;;triggerall = var(9) != 1
trigger1 = command = "FF"
trigger1 = statetype = S && ctrl

;RunBack
[State -1]
type = ChangeState
value = 105
;;triggerall = var(9) != 1
trigger1 = command = "BB"
trigger1 = statetype = S && ctrl

;===========================================================================
;NORMAL THROWS (Nage)
;===========================================================================
;C THROW (close dir+Strong Punch)
[State -1]
type = ChangeState
value = 800
trigger1 = var(4) <= 0
trigger1 = statetype = S && ctrl && p2bodydist X < 10 ;Near P2
trigger1 = (command = "back_c" || command = "fwd_c") && stateno != 100 && (p2statetype = S || p2statetype = C) && p2movetype != H

;D THROW (close dir+Strong Kick)
[State -1]
type = ChangeState
value = 850
trigger1 = var(4) <= 0
trigger1 = statetype = S && ctrl && p2bodydist X < 10 ;Near P2
trigger1 = (command = "back_d" || command = "fwd_d") && stateno != 100 && (p2statetype = S || p2statetype = C)  && p2movetype != H

;D THROW (close dir+Strong Kick)
[State -1]
type = ChangeState
value = 900
trigger1 = statetype = A && ctrl && p2bodydist X < 20 && p2bodydist Y > -25 && p2bodydist Y < 25
trigger1 = (command = "back_d" || command = "fwd_d") && p2statetype = A && p2movetype != H

;===========================================================================
;CD ATTACKS
;===========================================================================
; Standing CD
[State -1]
type = ChangeState
value = 240
;triggerall = var(9) != 1
trigger1 = command = "cd" && statetype != A && ctrl

; CD Counter
[State -1]
type = ChangeState
value = 245
;;triggerall = var(9) != 1
trigger1 = command = "cd" && power >= 1000 && stateno = [150,153]

;===========================================================================
;ROLLS
;===========================================================================
; Guard Cancel Roll backward
[State -1]
type = ChangeState
value = 770
;triggerall = var(9) != 1
trigger1 = command = "recovery" && command = "holdback"&& power >= 1000 && stateno = [150,153]



;Roll Backward
[State -1]
type = ChangeState
value = 740
;triggerall = var(9) != 1
trigger1 = command = "recovery" && command = "holdback"&& statetype = S && ctrl

;Roll Forward
[State -1]
type = ChangeState
value = 700
;triggerall = var(9) != 1
trigger1 = command = "recovery" && statetype = S && ctrl

;===========================================================================
;COMMAND NORMAL ATTACKS
;===========================================================================
;Forward + B Normal
[State -1]
type = ChangeState
value = 250
;triggerall = var(9) != 1
triggerall = command = "fwd_b" && command != "holddown"
trigger1 = statetype = S && ctrl

;Forward + B Combo (KOF2K1 Style)
[State -1]
type = ChangeState
value = 260
;triggerall = var(9) != 1
triggerall = command = "fwd_b" && command != "holddown"
trigger1 = var(29) = 1 && stateno != 255 && stateno != 265 && stateno != 240

;Flying Drill
[State -1]
type = ChangeState
value = 650
;;triggerall = var(9) != 1
triggerall = command = "down_d" && statetype = A 
trigger1 = ctrl
trigger2 = stateno = 620 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger3 = stateno = 106

;===========================================================================
;CROUCHING NORMAL ATTACKS
;===========================================================================
;Crouching A
[State -1]
type = ChangeState
value = 400
;triggerall = var(9) != 1
triggerall = command = "x"
triggerall = command = "holddown"
trigger1 = statetype = C && ctrl
trigger2 = stateno = 200 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger3 = stateno = 205 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger4 = stateno = 210 && animelemtime(4) > 1 && animelemtime(6) < 0
trigger5 = stateno = 215 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger6 = stateno = 400 && animelemtime(2) > 1 && animelemtime(3) < 0
trigger7 = stateno = 410 && animelemtime(2) > 1 && animelemtime(4) < 0

;Crouching B
[State -1]
type = ChangeState
value = 410
;triggerall = var(9) != 1
triggerall = command = "a"
triggerall = command = "holddown"
trigger1 = statetype = C && ctrl
trigger2 = stateno = 200 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger3 = stateno = 205 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger4 = stateno = 210 && animelemtime(4) > 1 && animelemtime(6) < 0
trigger5 = stateno = 215 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger6 = stateno = 400 && animelemtime(2) > 1 && animelemtime(3) < 0
trigger7 = stateno = 410 && animelemtime(2) > 1 && animelemtime(4) < 0

;Crouching C
[State -1]
type = ChangeState
value = 420
;triggerall = var(9) != 1
triggerall = command = "y"
triggerall = command = "holddown"
trigger1 = statetype = C
trigger1 = ctrl

;Crouching D
[State -1]
type = ChangeState
value = 430
;triggerall = var(9) != 1
triggerall = command = "b"
triggerall = command = "holddown"
trigger1 = statetype = C
trigger1 = ctrl

;===========================================================================
;CLOSE STANDING NORMAL ATTACKS
;===========================================================================
;Close A
[State -1]
type = ChangeState
value = 205
;triggerall = var(9) != 1
triggerall = command = "x" && command != "holddown"
triggerall = p2bodydist x < 20
trigger1 = statetype = S && ctrl
trigger2 = stateno = 200 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger3 = stateno = 205 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger4 = stateno = 210 && animelemtime(4) > 1 && animelemtime(6) < 0
trigger5 = stateno = 215 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger6 = stateno = 400 && animelemtime(2) > 1 && animelemtime(3) < 0
trigger7 = stateno = 410 && animelemtime(2) > 1 && animelemtime(4) < 0

;Forward + B
[State -1]
type = ChangeState
value = 290
;triggerall = var(9) != 1
triggerall = command = "fwd_b"
trigger1 = statetype = S && ctrl

;Close B
[State -1]
type = ChangeState
value = 215
;triggerall = var(9) != 1
triggerall = command = "a"
triggerall = p2bodydist x < 20
triggerall = command != "holddown"
trigger1 = statetype = S && ctrl
trigger2 = stateno = 200 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger3 = stateno = 205 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger4 = stateno = 210 && animelemtime(4) > 1 && animelemtime(6) < 0
;trigger5 = stateno = 215 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger5 = stateno = 400 && animelemtime(2) > 1 && animelemtime(3) < 0
trigger6 = stateno = 410 && animelemtime(2) > 1 && animelemtime(4) < 0

;Close C
[State -1]
type = ChangeState
value = 225
;triggerall = var(9) != 1
triggerall = command = "y"
triggerall = p2bodydist x < 20
triggerall = command != "holddown"
trigger1 = statetype = S
trigger1 = ctrl

;Close D
[State -1]
type = ChangeState
value = 235
;triggerall = var(9) != 1
triggerall = command = "b"
triggerall = p2bodydist x < 20
triggerall = command != "holddown"
trigger1 = statetype = S
trigger1 = ctrl

;===========================================================================
;STANDING NORMAL ATTACKS
;===========================================================================
;Standing A
[State -1]
type = ChangeState
value = 200
;triggerall = var(9) != 1
triggerall = command = "x"
triggerall = command != "holddown"
trigger1 = statetype = S && ctrl
trigger2 = stateno = 205 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger3 = stateno = 215 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger4 = stateno = 400 && animelemtime(2) > 1 && animelemtime(3) < 0
trigger5 = stateno = 410 && animelemtime(2) > 1 && animelemtime(4) < 0

;Standing B
[State -1]
type = ChangeState
value = 210
;triggerall = var(9) != 1
triggerall = command = "a"
triggerall = command != "holddown"
trigger1 = statetype = S && ctrl
trigger2 = stateno = 205 && animelemtime(2) > 1 && animelemtime(4) < 0
trigger3 = stateno = 215 && animelemtime(3) > 1 && animelemtime(5) < 0
trigger4 = stateno = 400 && animelemtime(2) > 1 && animelemtime(3) < 0
trigger5 = stateno = 410 && animelemtime(2) > 1 && animelemtime(4) < 0

;Standing C
[State -1]
type = ChangeState
value = 220
;triggerall = var(9) != 1
triggerall = command = "y"
triggerall = command != "holddown"
trigger1 = statetype = S
trigger1 = ctrl

;Standing D
[State -1]
type = ChangeState
value = 230
;triggerall = var(9) != 1
triggerall = command = "b"
triggerall = command != "holddown"
trigger1 = statetype = S
trigger1 = ctrl

;===========================================================================
;JUMPING NORMAL ATTACKS
;===========================================================================
;Jumping CD
[State -1]
type = ChangeState
value = 640
;triggerall = var(9) != 1
triggerall = command = "cd"
trigger1 = statetype = A
trigger1 = ctrl

;Jumping Up A
[State -1]
type = ChangeState
value = 605
;triggerall = var(9) != 1
trigger1 = command = "x"
trigger1 = statetype = A
trigger1 = ctrl
trigger1 = stateno != 950 && vel x = 0

;Jumping A
[State -1]
type = ChangeState
value = 600
;triggerall = var(9) != 1
trigger1 = command = "x"
trigger1 = statetype = A
trigger1 = ctrl

;Jumping B
[State -1]
type = ChangeState
value = 610
;triggerall = var(9) != 1
trigger1 = command = "a"
trigger1 = statetype = A
trigger1 = ctrl

;Jumping C
[State -1]
type = ChangeState
value = 620
;triggerall = var(9) != 1
trigger1 = command = "y"
trigger1 = statetype = A
trigger1 = ctrl

;Jumping Up D
[State -1]
type = ChangeState
value = 635
;;triggerall = var(9) != 1
trigger1 = command = "b"
trigger1 = statetype = A
trigger1 = ctrl
trigger1 = stateno != 950 && vel x = 0

;Jumping D
[State -1]
type = ChangeState
value = 630
;triggerall = var(9) != 1
trigger1 = command = "b"
trigger1 = statetype = A
trigger1 = ctrl

;===========================================================================
;TAUNT
;===========================================================================
[State -1]
type = ChangeState
value = 195
triggerall = command = "start"
trigger1 = statetype = S
trigger1 = ctrl

;=====================================================================================
;-----[ AI MODIFICATION ]-----
;=====================================================================================
;Iaigeri
[State -1,Iaigeri]
type = ChangeState
value = 1100
triggerall = var(9) = 1
trigger1 = statetype != A
trigger1 = p2bodydist x <= 15
trigger1 = stateno = 410 && animelemtime(2) > 1 && animelemtime(4) < 0 && movecontact

;Hk/Hp close
[State -1,HK/HPClose]
type = ChangeState
value = ifelse(random<=700,225,235)
triggerall = var(9) = 1
trigger1 = (p2bodydist x = [0,19]) && p2movetype != A && p2statetype != A
trigger1 = random <= 900 && p2statetype != L
trigger1 = statetype = S && ctrl

[State -1,CrLK]
type = ChangeState
value = 410
triggerall = var(9) = 1
triggerall = (p2bodydist x = [5,27]) && random <= 1000
triggerall = p2statetype != L && p2statetype != A
trigger1 = statetype != A && ctrl
trigger2 = random <= 500 && stateno = 410 && animelemtime(2) > 1 && animelemtime(4) < 0 && moveguarded

[State -1,JHKD/JHPD]
type = ChangeState
value = ifelse(random <=200,620,630)
triggerall = var(9) = 1
triggerall = statetype = A
triggerall = p2bodydist x <= 50 
triggerall = vel x != 0
triggerall = p2bodydist Y > -85 && p2bodydist Y < 87
trigger1 = ctrl
trigger2 = stateno = 201 && ctrl

[State -1,JLK]
type = ChangeState
value = ifelse(random <=700,600,610)
triggerall = var(9) = 1
triggerall = random <= 300 && statetype = A
triggerall = p2bodydist x <= 40 && (p2movetype = A || p2statetype = A)
triggerall = p2bodydist Y > -65 && p2bodydist Y < 67
trigger1 = ctrl
trigger2 = vel y >= .43 && stateno = 201 && ctrl

;Koreda
[State -1,Koreda]
type = ChangeState
value = 1300
ctrl = 0
triggerall = var(9) = 1
triggerall = random <= 100 && p2bodydist x <= 10 && p2statetype != A && p2statetype != L
trigger1 = statetype != A && ctrl && var(5) <= 0

[State -1, RollFWD]
type = ChangeState
value = 700
triggerall = var(9) = 1
triggerall = statetype != A && ctrl 
;trigger1 = p2movetype = A && P2bodydist X >= 100 && random <= 100 && (p2stateno != [120,152])
;trigger2 = p2movetype = A && (p2bodydist x = [40,70]) && random <= 100 
trigger1 = (p2bodydist x = [-5,40]) && backedgebodydist <= 30


; Guard Cancel Roll Forward
[State -1]
type = ChangeState
value = 760
;;triggerall = var(9) != 1
trigger1 = command = "recovery" && power >= 1000 && stateno = [150,153]

[State -1,ROLL BACK]
type = ChangeState
value = 740
triggerall = var(9) = 1
triggerall = statetype != A && ctrl
trigger1 = p2bodydist x <= 40 && p2statetype = L && backedgebodydist > 60 && random <= 500
trigger2 = (p2bodydist x = [15,50]) && p2movetype = A && backedgebodydist > 60 && random <= 500


[State -1, JUMP]
type = ChangeState
value = 40
triggerall = var(9) = 1
triggerall = statetype != A && ctrl && p2movetype != H
trigger1 = (p2bodydist x = [150,180]) && p2statetype != A && random <= 100 && p2movetype != A
trigger2 = (p2bodydist x = [10,20])  && p2statetype = C && random <= 200

[State -1,RUN]
type = ChangeState
value = 100
triggerall = var(9) = 1
trigger1 = (stateno != [100,101]) && statetype = S && ctrl
trigger1 = p2bodydist x > 40 &&  p2movetype != A && random < 300

;CrHP
[State -1, CrHP]
type = ChangeState
value = 420
triggerall = var(9) = 1
trigger1 = (p2bodydist x = [15,30]) && p2statetype != A && p2movetype != A
trigger1 = random <= 900 && p2statetype != L
trigger1 = statetype != A && ctrl

[State -1,CrHK]
type = ChangeState
value = 430
triggerall = var(9) = 1
trigger1 = (p2bodydist x = [35,50]) && random <= 200
trigger1 = p2statetype = S && p2movetype != A 
trigger1 = statetype != A && ctrl

[State -1,Drill]
type = ChangeState
value = 650
triggerall = var(9) = 1
triggerall = random <= 300 && statetype = A
triggerall = p2bodydist x <= 50 && p2statetype = C
triggerall = vel x <= 0 && pos y <= -45
trigger1 = vel y < 0 && ctrl
trigger2 = vel y < .45 && stateno = 201 && ctrl

[State -1,CD counter]
type = ChangeState
value = 245
triggerall = var(9) = 1
triggerall = backedgebodydist <= 50
triggerall = power >= 1000 && life > 0 && statetype != A
trigger1 = stateno = 150 
trigger2 = stateno = 152 

;Shinkuu Katategoma
[State -1,Shinkuu]
type = ChangeState
value = 1210
triggerall = var(9) = 1
triggerall = statetype != A && p2bodydist x = [20,50] 
trigger1 = stateno = 265 && animelemtime(3) > 0 && animelemtime(4) < 0 && movecontact
trigger2 = stateno = 420 && animelemtime(3) > 1 && animelemtime(5) < 0 && movecontact

;Forward + B
[State -1,FwdB]
type = ChangeState
value = 260
triggerall = var(9) = 1
triggerall = movecontact && p2statetype != A
trigger1 = stateno = 225 && animelemtime(3) > 1 && animelemtime(5) < 0 && movecontact
trigger2 = stateno = 235 && animelemtime(3) > 1 && animelemtime(5) < 0 && movecontact
trigger3 = stateno = 420 && animelemtime(3) > 1 && animelemtime(5) < 0 && moveguarded

;Raijinken A
[State -1,Raijiken]
type = ChangeState
value = 1000
triggerall = var(9) = 1
triggerall = statetype != A && p2bodydist x = [0,20] 
trigger1 = stateno = 265 && animelemtime(3) > 0 && animelemtime(4) < 0 && movehit
trigger2 = stateno = 420 && animelemtime(3) > 1 && animelemtime(5) < 0 && movehit

;Crouch A/B
[State -1]
type = ChangeState
value = ifelse(random <= 500,400,410)
triggerall = var(9) = 1
trigger1 = statetype != A && ctrl && random <= 300
trigger1 = p2stateno != 100 && p2movetype != A && (p2bodydist x = [80,120]) && (enemy, vel x <= 0)

