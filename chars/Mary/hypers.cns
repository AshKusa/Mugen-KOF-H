;----------------------------------------
; Mary's Dynamite Swing (level 1)
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
ctrl = 0
anim = 3100+var(55)*30000
sprpriority = 2
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3100, 1]
type = PlaySnd
trigger1 = Time = 5
value = s10,2

[State 3100, Super.1A]
type = Explod
trigger1 = Time = 7
anim = f7000
scale = .5,.5
pos = 35,-45
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 3100, Super.1B]
type = Explod
trigger1 = Time = 7
anim = f7010
scale = .5,.5
pos = 35,-45
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1
ontop = 1
ownpal = 1

[State 3100, Super.1]
type = SuperPause
trigger1 = Time = 7
anim = -1
movetime = 3
time = 24
sound = f9000,0

[State 3400, 2]
type = Envcolor
trigger1 = Time = 7
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 28
under = 1
supermove = 1

[State 3000, Super.3]
type = PowerAdd
trigger1 = Time = 7
value = ifelse(fvar(30) > 0,0,-1000)

[State 3100, Super.4]
type = NotHitBy
trigger1 = Time >= 7
trigger1 = Animelem = 4, <= 0
value = SCA
time = 1

[State 3100, Super.5]
type = AfterImage
trigger1 = Animelem = 4
time = 25
TimeGap  = 1
FrameGap = 4
Trans = Add1
PalColor = 0
PalBright = 0,0,0
PalContrast = 96,128,192
PalPostBright = 32,32,48

[State 3100, 10]
type = PosAdd
Trigger1 = AnimElem = 5
x = 8

[State 3100, 10]
type = ChangeState
Trigger1 = AnimElem = 5
value = 3101

;---------------------------------------------------------------------------
;Dynamite1 (going up)
[Statedef 3101]
type    = A
movetype= A
physics = N

[State 3101, 1]
type = VelSet
trigger1 = Time = [0,5]
x = 4.9
y = -7.5

[State 3101, 1.2]
type = PlaySnd
trigger1 = Time = 0
value = f40,1 ;Need proper sound

[State 3101, 2]
type = VelMul
trigger1 = Time >= 5
x = .92

[State 3101, 3]
type = VelAdd
trigger1 = 1
y = .52

[State 3101, 4]
type = ChangeAnim
trigger1 = Vel Y > 0
persistent = 0
value = 3101+var(55)*30000

[State 3101, 5]
type = HitDef
trigger1 = Time = 0
attr = A, HA
damage    = 55,5
guardflag = MA
getpower = 0
priority = 6, Dodge
pausetime = 11,12
sparkno = 2
guard.sparkno = 42
sparkxy = -10,-75
hitsound = 5,3
guardsound = 6,2
ground.type = High
ground.slidetime = 18
ground.hittime  = 23
ground.velocity = -2.5,-7
guard.velocity = -7
air.velocity = -3,-5
airguard.velocity = -3,-3
fall = 1
fall.recover = 0
p1stateno = 3103
ID = 3100 ;For chaining into level 1 dynamite swing

[State 3101, 7] ;Chain animation
type = ChangeAnim
trigger1 = MoveHit
trigger1 = Vel Y < 0
value = 3103+var(55)*30000

[State 3101, 8]
type = AfterImageTime
trigger1 = 1
time = 2

[State 3101, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3102

;---------------------------------------------------------------------------
;Dynamite1 (land)
[Statedef 3102]
type    = S
movetype= I
physics = S
anim = 3102+var(55)*30000
velset = 0,0

[State 3102, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3102, 2]
type = PlaySnd
trigger1 = Time = 0
value = 30,2

[State 3102, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Dynamite1 (going up, try to catch)
[Statedef 3103]
type    = A
movetype= A
physics = N
anim = 3103+var(55)*30000

[State 3103, 1]
type = VelMul
trigger1 = 1
x = .92

[State 3103, 2]
type = VelAdd
trigger1 = 1
y = .52

[State 3103, 3]
type = AfterImageTime
trigger1 = 1
time = 2

[State 3103, 6] ;Chain into rest of move
type = HitDef
trigger1 = Time = 0
givepower = 70
attr = A, HT
hitflag = AF+
priority = 8, Miss
sprpriority = 1 ;In front
pausetime = 0,0
sparkno = -1
;sparkxy = -10,-75
hitsound = 800,0
p1stateno = 3110
p2stateno = 3120
p2facing = -1
fall = 1
chainID = 3100 ;Can only chain from level 1
ID = 3110      ;To keep the opponent on the target list (See state 3110,5)

[State 3103, 7] ;Chain animation
type = ChangeAnim
trigger1 = MoveHit
trigger1 = Vel Y < 0
value = 3103+var(55)*30000

[State 3103, 7]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3102

;---------------------------------------------------------------------------
;Dynamite1 (catch, coming down)
[Statedef 3110]
type    = A
movetype= A
physics = N
anim = 3110+var(55)*30000

[State 3110, 1.2]
type = GameMakeAnim
trigger1 = Time = 0
value = 9
pos = -25,-101

[State 3110, 1.3]
type = Width
trigger1 = Time = 0
edge = 40

[State 3110, 2]
type = PosFreeze
trigger1 = 1
trigger1 = AnimElem = 2, < 0

[State 3110, 3]
type = VelSet
trigger1 = AnimElem = 2, < 0
x = 0
y = 0

[State 1120, 4]
type = VelAdd
trigger1 = AnimElem = 2, > 0
y = .5

[State 3110, 5]
type = TargetDrop
trigger1 = Time = 0
excludeID = 3110

[State 3110, 6]
type = TargetBind
trigger1 = 1
trigger1 = AnimElem = 2, < 0
pos = -15, -104

[State 3110, 7]
type = TargetBind
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 0
pos = 13, -74

[State 3110, 8]
type = TargetBind
trigger1 = AnimElem = 3, >= 0
pos = 13, -74

[State 3110, 7]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3111

;---------------------------------------------------------------------------
;Dynamite1 (catch, land)
[Statedef 3111]
type    = S
movetype= A
physics = S
anim = 3111+var(55)*30000
velset = 0,0

[State 3111, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3111, 2]
type = TargetLifeAdd
trigger1 = Time = 0
value = -90
kill = 0

[State 3111, 3]
type = TargetState
trigger1 = Time = 0
value = 3121

[State 3111, 3.3]
type = PlaySnd
trigger1 = Time = 0
value = s1,7

[State 3111, 3.4] ;Ground wave (behind)
type = Explod
trigger1 = Time = 0
anim = f67
pos = 5,0
postype = p1
sprpriority = -2
supermove = 1
ownpal = 1

[State 3111, 3.4] ;Ground wave (in front)
type = Explod
trigger1 = Time = 0
anim = f66
pos = 5,0
postype = p1
sprpriority = -5
supermove = 1
ownpal = 1

[State 3111, 3.5] ;Shake
type = EnvShake
Trigger1 = Time = 0
time = 18
ampl = 10
freq = 175

[State 3111, 4]
type = TargetBind
trigger1 = 1
trigger1 = AnimElem = 3, < 0
pos = 5,0

[State 3111, 5]
type = TargetBind
trigger1 = AnimElem = 3, >= 0
trigger1 = Time < 25
pos = 45,0

[State 3111, 6]
type = TargetBind
trigger1 = Time >= 25
trigger1 = AnimElem = 15, < 0
pos = 35,0

[State 3111, 7]
type = SprPriority
trigger1 = AnimElem = 11
value = 1

[State 3111, 7]
type = PlaySnd
trigger1 = AnimElem = 12
value = s10,15 ;"Mary's"

[State 3111, 8.1]
type = TargetState
trigger1 = AnimElem = 15
value = 3123

[State 3111, 8.2]
type = Width
trigger1 = AnimElem = 15
edge = 70

[State 3111, 8.3]
type = TargetBind
trigger1 = AnimElem = 15
trigger1 = AnimElem = 17, < 0
pos = 24,-87

[State 3111, 9.1]
type = SprPriority
trigger1 = AnimElem = 16
value = -1

[State 3111, 9.2]
type = PlaySnd
trigger1 = AnimElem = 16
value = f800,0

[State 3111, 9.3]
type = GameMakeAnim
trigger1 = AnimElem = 16
value = 9
pos = 24,-82

[State 3111, 9.4] ;Piece of arm
type = Explod
trigger1 = AnimElem = 16
anim = 3116+var(55)*30000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 3111, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 3112


;Dynamite1 (catch, swing start)
[Statedef 3112]
type    = S
movetype= A
physics = S
anim = 3112+var(55)*30000

[State 3112, 1]
type = Width
trigger1 = 1
edge = 65, 15

[State 3112, 1]
type = TargetState
trigger1 = Time = 0
value = 3124

[State 3112, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10,16 ;"Dynamite Swing!"

[State 3112, 3]
type = AfterImage
trigger1 = Time = 0
time = 2
Trans = Add1
PalColor = 0
PalBright = 0,0,0
PalContrast = 96,128,192
PalPostBright = 32,32,48

[State 3112, 4]
type = AfterImageTime
trigger1 = 1
time = 40

[State 3111, 4.1] ;Piece of arm
type = Explod
trigger1 = Time = 0
anim = 3117+var(55)*30000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 3112, 4]
type = PlaySnd
trigger1 = Time = 0
trigger2 = AnimElem = 4
trigger3 = AnimElem = 8
trigger4 = AnimElem = 12
trigger5 = AnimElem = 16
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
value = s0,5 ;Whoosh noise

[State 3112, 4]
type = TargetBind
trigger1 = 1
trigger1 = AnimElem = 2, < 0
trigger2 = AnimElem = 9, >= 0
trigger2 = AnimElem = 10, < 0
trigger3 = AnimElem = 17, >= 0
trigger3 = AnimElem = 18, < 0
trigger4 = AnimElem = 25, >= 0
trigger4 = AnimElem = 26, < 0
trigger5 = AnimElem = 33, >= 0
trigger5 = AnimElem = 34, < 0
pos = 12,-81

[State 3112, 5]
type = TargetBind
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 0
trigger2 = AnimElem = 10, >= 0
trigger2 = AnimElem = 11, < 0
trigger3 = AnimElem = 18, >= 0
trigger3 = AnimElem = 19, < 0
trigger4 = AnimElem = 26, >= 0
trigger4 = AnimElem = 27, < 0
trigger5 = AnimElem = 34, >= 0
pos = 40,-75

[State 3112, 6]
type = TargetBind
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 4, < 0
trigger2 = AnimElem = 11, >= 0
trigger2 = AnimElem = 12, < 0
trigger3 = AnimElem = 19, >= 0
trigger3 = AnimElem = 20, < 0
trigger4 = AnimElem = 27, >= 0
trigger4 = AnimElem = 28, < 0
pos = 50,-75

[State 3112, 7.1]
type = TargetBind
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 5, < 0
trigger2 = AnimElem = 12, >= 0
trigger2 = AnimElem = 13, < 0
trigger3 = AnimElem = 20, >= 0
trigger3 = AnimElem = 21, < 0
trigger4 = AnimElem = 28, >= 0
trigger4 = AnimElem = 29, < 0
pos = 58,-80

[State 3112, 7.2]
type = SprPriority
trigger1 = AnimElem = 4
trigger2 = AnimElem = 12
trigger3 = AnimElem = 20
trigger4 = AnimElem = 28
value = 1

[State 3112, 8]
type = TargetBind
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 6, < 0
trigger2 = AnimElem = 13, >= 0
trigger2 = AnimElem = 14, < 0
trigger3 = AnimElem = 21, >= 0
trigger3 = AnimElem = 22, < 0
trigger4 = AnimElem = 29, >= 0
trigger4 = AnimElem = 30, < 0
pos = 55,-97

[State 3112, 9]
type = TargetBind
trigger1 = AnimElem = 6, >= 0
trigger1 = AnimElem = 7, < 0
trigger2 = AnimElem = 14, >= 0
trigger2 = AnimElem = 15, < 0
trigger3 = AnimElem = 22, >= 0
trigger3 = AnimElem = 23, < 0
trigger4 = AnimElem = 30, >= 0
trigger4 = AnimElem = 31, < 0
pos = 11,-93

[State 3112, 10]
type = TargetBind
trigger1 = AnimElem = 7, >= 0
trigger1 = AnimElem = 8, < 0
trigger2 = AnimElem = 15, >= 0
trigger2 = AnimElem = 16, < 0
trigger3 = AnimElem = 23, >= 0
trigger3 = AnimElem = 24, < 0
trigger4 = AnimElem = 31, >= 0
trigger4 = AnimElem = 32, < 0
pos = 3,-75

[State 3112, 11.1]
type = TargetBind
trigger1 = AnimElem = 8, >= 0
trigger1 = AnimElem = 9, < 0
trigger2 = AnimElem = 16, >= 0
trigger2 = AnimElem = 17, < 0
trigger3 = AnimElem = 24, >= 0
trigger3 = AnimElem = 25, < 0
trigger4 = AnimElem = 32, >= 0
trigger4 = AnimElem = 33, < 0
pos = -10,-72

[State 3112, 11.2]
type = SprPriority
trigger1 = AnimElem = 8
trigger2 = AnimElem = 16
trigger3 = AnimElem = 24
trigger4 = AnimElem = 32
value = -1

[State 3112, 11.3]
type = TargetLifeAdd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 16
trigger3 = AnimElem = 24
trigger4 = AnimElem = 32
value = -20
kill = 0

[State 3111, 12.1] ;Done
type = TargetState
trigger1 = AnimTime = 0
value = 3125

[State 3111, 12.2]
type = PlaySnd
trigger1 = AnimTime = 0
value = s10,27

[State 3111, 12.2]
type = PlaySnd
trigger1 = AnimTime = 0
value = s0,5

[State 3112, 12.3]
type = TargetBind
trigger1 = AnimTime = 0
pos = -40, -50

[State 3112, 12.4]
type = TargetLifeAdd
trigger1 = AnimTime = 0
value = -20

[State 3112, 12.4] ;Done
type = ChangeState
trigger1 = AnimTime = 0
value = 3113

;---------------------------------------------------------------------------
;Dynamite1 (catch, swing end, on ground)
[Statedef 3113]
type    = S
movetype= A
physics = S
anim = 3113+var(55)*30000

[State 3113, 1] ;Done
type = ChangeState
trigger1 = AnimElem = 3
value = 3114

;---------------------------------------------------------------------------
;Dynamite1 (catch, swing end, into air)
[Statedef 3114]
type    = A
movetype= A
physics = N
velset = 0,-8

[State 3114, 1]
type = PosAdd
trigger1 = Time = 0
x = 18

[State 3114, 2]
type = VelAdd
trigger1 = 1
y = .43

[State 3114, 3]
type = Turn
trigger1 = AnimElem = 6

[State 3114, 1] ;Done
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3115
ctrl = 1

;---------------------------------------------------------------------------
;Dynamite1 (swing, land)
[Statedef 3115]
type    = S
movetype= I
physics = S
anim = 3115+var(55)*30000
velset = 0,0

[State 3115, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3115, 2]
type = PlaySnd
trigger1 = Time = 0
value = s30,2

[State 3115, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dynamite1 (hit by, in air)
[Statedef 3120]
type    = A
movetype= H ;Get hit
physics = N
velset = 0,0
ctrl = 0

[State 3120, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3120+var(55)*30000

[State 3120, 2]
type = HitBy
Trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Dynamite1 (hit by, slammed down and get up)
[Statedef 3121]
type    = L
movetype= H ;Get hit
physics = N
velset = 0,0

[State 3121, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3121+var(55)*30000

[State 3121, 2] ;Change to get up
type = ChangeAnim
Trigger1 = Anim = 3121+var(55)*30000  ;If in action 3121
Trigger1 = AnimTime = 0
value = 5120+var(55)*30000

[State 3121, 3] ;Change to dizzy (if have)
type = ChangeAnim
Trigger1 = Anim = 5120+var(55)*30000  ;If in action 5120 (get up)
Trigger1 = AnimTime = 0
Trigger1 = AnimExist(5300+var(55)*30000)
Trigger2 = Anim = 5120+var(55)*30000  ;If in action 5120 (get up)
Trigger2 = Time = 50
Trigger2 = AnimExist(5300+var(55)*30000)
value = 5300+var(55)*30000

[State 3121, 4] ;Change to hurt (if no dizzy animation)
type = ChangeAnim2
Trigger1 = Anim = 5120+var(55)*30000  ;If in action 5120 (get up)
Trigger1 = AnimTime = 0
Trigger1 = !AnimExist(5300+var(55)*30000)
Trigger2 = Anim = 5120+var(55)*30000  ;If in action 5120 (get up)
Trigger2 = Time = 50
Trigger2 = !AnimExist(5300+var(55)*30000)
value = 3122+var(55)*30000

[State 3121, 5]
type = HitBy
Trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Dynamite1 (hit by swing, grabbed at neck)
[Statedef 3123]
type    = L
movetype= H ;Get hit
physics = N
velset = 0,0

[State 3123, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3123+var(55)*30000

;---------------------------------------------------------------------------
; Dynamite1 (hit by swing, start)
[Statedef 3124]
type    = L
movetype= H ;Get hit
physics = N
velset = 0,0

[State 3124, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3124+var(55)*30000

;---------------------------------------------------------------------------
; Dynamite1 (hit by swing, through the air)
[Statedef 3125]
type    = L
movetype= H ;Get hit
physics = N
velset = -5,-8

[State 3125, 2] ;Acceleration
type = VelAdd
Trigger1 = 1
y = .45

[State 3125, 3] ;Self's falling anim
type = ChangeAnim
Trigger1 = Time = 0
value = 5050+var(55)*30000

[State 3125, 3] ;Self's falling anim
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = AnimExist(5052+var(55)*30000)
value = 5052+var(55)*30000

[State 3125, 2] ;Coming down anim (normal fall type)
type = ChangeAnim
triggerall = anim != 5052+var(55)*30000 ;Not if in hit up anim
trigger1 = vel y >= 1
trigger1 = animexist(5060+var(55)*30000)
value = 5060+var(55)*30000
persistent = 0

[State 3125, 2] ;Coming down anim (hit up type)
type = ChangeAnim
triggerall = anim = 5052+var(55)*30000 ;Not if in hit up anim
trigger1 = vel y >= -2
trigger1 = animexist(506+var(55)*300002)
value = 5062+var(55)*30000
persistent = 0

[State 3125, 4.1] ;Shake
type = EnvShake
trigger1 = vel y > 0
trigger1 = pos y >= 0
time = 18
ampl = 10

[State 3125, 4.2]
type = LifeAdd
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = -40

[State 3125, 4.3] ;Hit ground
trigger1 = vel y > 0
trigger1 = pos y >= 0
type = SelfState
value = 5100

;---------------------------------------------------------------------------
; Mary's Dynamite Swing (level 2)
[Statedef 3200]
type    = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
ctrl = 0
anim = 3100+var(55)*30000
sprpriority = 2
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3199]) && time = 0
trigger2 = (prevstateno = [3300,3399]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3200, 1]
type = PlaySnd
trigger1 = Time = 5
value = s10,2

[State 3200, Super.1A] 
type = Explod
trigger1 = Time = 7
anim = f7100
scale = .5,.5
pos = 35,-45
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 3200, Super.1B]
type = Explod
trigger1 = Time = 7
anim = f7110
scale = .5,.5
pos = 35,-45
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1
ontop = 1
ownpal = 1

[State 3200, Super.1]
type = SuperPause
trigger1 = Time = 7
anim = -1
movetime = 3
time = 24
sound = f9000,1

[State 3200, 4]
type = Explod
trigger1 = Time = 7
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = Time = 7
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 2]
type = Envcolor
trigger1 = Time = 7
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 28
under = 1
supermove = 1

[State 3000, Super.3]
type = PowerAdd
trigger1 = Time = 7
value =  ifelse(fvar(30) > 0,-1000,-2000)

[State 3200, Super.4]
type = NotHitBy
trigger1 = Time >= 7
trigger1 = Animelem = 4, <= 0
value = SCA
time = 1

[State 3200, Super.5]
type = AfterImage
trigger1 = Animelem = 4
time = 25
;length = 20
;PalBright   =   0,  0,  0
;PalContrast = 120,120,220
;PalAdd      =  10, 10, 25
;PalMul      = .45,.45,.75
TimeGap  = 1
FrameGap = 4
Trans = Add1
PalColor = 0
PalBright = 0,0,0
PalContrast = 96,128,192
PalPostBright = 32,32,48

[State 3200, 10]
type = PosAdd
Trigger1 = AnimElem = 5
x = 8

[State 3200, 10]
type = ChangeState
Trigger1 = AnimElem = 5
value = 3201

;---------------------------------------------------------------------------
;Dynamite2 (going up)
[Statedef 3201]
type    = A
movetype= A
physics = N

[State 3201, 1]
type = VelSet
trigger1 = Time = [0,5]
x = 4.9
y = -7.5

[State 3201, 1.2]
type = PlaySnd
trigger1 = Time = 0
value = 30,0 ;Need proper sound

[State 3201, 2]
type = VelMul
trigger1 = Time >= 5
x = .92

[State 3201, 3]
type = VelAdd
trigger1 = 1
y = .52

[State 3201, 4]
type = ChangeAnim
trigger1 = Vel Y > 0
persistent = 0
value = 3101+var(55)*30000

[State 3201, 5]
type = HitDef
trigger1 = Time = 0
attr = A, HA
damage    = 60,7
getpower = 0
guardflag = MA
priority = 6, Dodge
pausetime = 11,12
sparkno = 2
guard.sparkno = 42
sparkxy = -10,-75
hitsound = 5,3
guardsound = 6,2
ground.type = High
ground.slidetime = 18
ground.hittime  = 23
ground.velocity = -2.5,-7
guard.velocity = -7
air.velocity = -3,-5
airguard.velocity = -3,-3
fall = 1
fall.recover = 0
p1stateno = 3203
ID = 3200 ;For chaining into level 2 dynamite swing

[State 3201, 7] ;Chain animation
type = ChangeAnim
trigger1 = MoveHit
trigger1 = Vel Y < 0
value = 3103+var(55)*30000

[State 3201, 8]
type = AfterImageTime
trigger1 = 1
time = 2

[State 3201, 9] ;Land
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3102

;---------------------------------------------------------------------------
;Dynamite2 (going up, try to catch)
[Statedef 3203]
type    = A
movetype= A
physics = N
anim = 3103+var(55)*30000

[State 3203, 1]
type = VelMul
trigger1 = 1
x = .92

[State 3203, 2]
type = VelAdd
trigger1 = 1
y = .52

[State 3203, 3]
type = AfterImageTime
trigger1 = 1
time = 2

[State 3203, 6] ;Chain into rest of move
type = HitDef
trigger1 = Time = 0
givepower = 70
attr = A, HT
hitflag = AF+
priority = 8, Miss
sprpriority = 1 ;In front
pausetime = 0,0
sparkno = -1
hitsound = 800,0
p1stateno = 3210
p2stateno = 3120
p2facing = -1
fall = 1
chainID = 3200 ;Can only chain from level 2
ID = 3210      ;To keep the opponent on the target list (See state 3210)

[State 3203, 7] ;Chain animation
type = ChangeAnim
trigger1 = MoveHit
trigger1 = Vel Y < 0
value = 3103+var(55)*30000

[State 3203, 7] ;Land
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3102

;---------------------------------------------------------------------------
;Dynamite2 (catch, coming down)
[Statedef 3210]
type    = A
movetype= A
physics = N
anim = 3110+var(55)*30000

[State 3210, 1.2]
type = GameMakeAnim
trigger1 = Time = 0
value = 9
pos = -25,-101

[State 3210, 1.3]
type = Width
trigger1 = Time = 0
edge = 40

[State 3210, 2]
type = PosFreeze
trigger1 = 1
trigger1 = AnimElem = 2, < 0

[State 3210, 3]
type = VelSet
trigger1 = AnimElem = 2, < 0
x = 0
y = 0

[State 1120, 4]
type = VelAdd
trigger1 = AnimElem = 2, > 0
y = .5

; Drop all targets that don't have hitID 3210 (hit by dynamite1)
; Important, in case of team battle, where one guy is guarding
; and one is being hit. You don't want to grab _both_ of them.
[State 3210, 5] 
type = TargetDrop
trigger1 = Time = 0
excludeID = 3210

[State 3210, 6]
type = TargetBind
trigger1 = 1
trigger1 = AnimElem = 2, < 0
pos = -15, -104

[State 3210, 7]
type = TargetBind
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 0
pos = 13, -74

[State 3210, 8]
type = TargetBind
trigger1 = AnimElem = 3, >= 0
pos = 13, -74

[State 3210, 7]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3211

;---------------------------------------------------------------------------
;Dynamite2 (catch, land)
[Statedef 3211]
type    = S
movetype= A
physics = S
anim = 3211+var(55)*30000
velset = 0,0

[State 3211, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3211, 2]
type = TargetLifeAdd
trigger1 = Time = 0
value = -95
kill = 0

[State 3211, 3]
type = TargetState
trigger1 = Time = 0
value = 3121

[State 3211, 3.3]
type = PlaySnd
trigger1 = Time = 0
value = s1,7

[State 3211, 3.4] ;Ground wave (behind)
type = Explod
trigger1 = Time = 0
anim = f66
pos = 5,0
postype = p1
sprpriority = -2
supermove = 1
ownpal = 1

[State 3211, 3.4] ;Ground wave (in front)
type = Explod
trigger1 = Time = 0
anim = f67
pos = 5,0
postype = p1
sprpriority = 2
supermove = 1
ownpal = 1

[State 3211, 3.5] ;Shake
type = EnvShake
Trigger1 = Time = 0
time = 18
ampl = 10
freq = 175

[State 3211, 4]
type = TargetBind
trigger1 = 1
trigger1 = AnimElem = 3, < 0
pos = 5,0

[State 3211, 5]
type = TargetBind
trigger1 = AnimElem = 3, >= 0
trigger1 = Time < 25
pos = 45,0

[State 3211, 6]
type = TargetBind
trigger1 = Time >= 25
trigger1 = AnimElem = 15, < 0
pos = 35,0

[State 3211, 7]
type = SprPriority
trigger1 = AnimElem = 11
value = 1

[State 3211, 7]
type = PlaySnd
trigger1 = AnimElem = 12
value = s10,15 ;"Mary's"

[State 3211, 8.1]
type = TargetState
trigger1 = AnimElem = 15
value = 3223

[State 3211, 8.2]
type = Width
trigger1 = AnimElem = 15
edge = 70

[State 3211, 8.3]
type = TargetBind
trigger1 = AnimElem = 15
trigger1 = AnimElem = 17, < 0
pos = 24,-87

[State 3211, 9.1]
type = SprPriority
trigger1 = AnimElem = 16
value = -1

[State 3211, 9.2]
type = PlaySnd
trigger1 = AnimElem = 16
value = f800,0

[State 3211, 9.3]
type = GameMakeAnim
trigger1 = AnimElem = 16
value = 9
pos = 24,-82

[State 3211, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 3216

;---------------------------------------------------------------------------
;Dynamite2 (catch, first dunk)
[Statedef 3216]
type    = S
movetype= A
physics = N
anim = 3216+var(55)*30000

[State 3216, 1.1]
type = Turn
trigger1 = Time = 0

[State 3216, 1.2]
type = AfterImage
trigger1 = Time = 0
time = 2
Trans = Add1
PalColor = 0
PalBright = 0,0,0
PalContrast = 96,128,192
PalPostBright = 32,32,48

[State 3216, 1.3]
type = AfterImageTime
trigger1 = 1
time = 2

[State 3216, 1]
type = TargetState
trigger1 = Time = 0
value = 3222

[State 3216, 2.1]
type = PlaySnd
trigger1 = AnimElem = 2
value = f800,0

[State 3216, 2.2]
type = GameMakeAnim
trigger1 = AnimElem = 2
value = 9
pos = -30,-60

[State 3216, 3]
type = PlayerPush
trigger1 = 1
value = 0

[State 3216, 4]
type = VelSet
trigger1 = 1
x = 0

[State 3216, 5.1]
type = Width
trigger1 = AnimElem = 7, >= 0
trigger1 = AnimElem = 27, < 0
edge = 35

[State 3216, 5.2]
type = Width
trigger1 = AnimElem = 27, >= 0
edge = 45

[State 3216, 7.2]
type = TargetBind
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 2, < 0
pos = -51, 0

[State 3216, 7.?]
type = PosAdd
trigger1 = AnimElem = 20
x = 5

[State 3216, 7.3] ;Be drawn in front
type = SprPriority
trigger1 = AnimElem = 1
trigger2 = AnimElem = 20
value = 1

[State 3216, 8.2]
type = TargetBind
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 0
trigger2 = AnimElem = 20, >= 0
trigger2 = AnimElem = 21, < 0
pos = -45, 0

[State 3216, 9]
type = TargetBind
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 4, < 0
trigger2 = AnimElem = 21, >= 0
trigger2 = AnimElem = 22, < 0
pos = -30, -58

[State 3216, 10]
type = TargetBind
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 5, < 0
trigger2 = AnimElem = 22, >= 0
trigger2 = AnimElem = 23, < 0
pos = -25, -66

[State 3216, 11]
type = TargetBind
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 6, < 0
trigger2 = AnimElem = 23, >= 0
trigger2 = AnimElem = 24, < 0
pos = -25, -68

[State 3216, 12]
type = TargetBind
trigger1 = AnimElem = 6, >= 0
trigger1 = AnimElem = 7, < 0
trigger2 = AnimElem = 24, >= 0
trigger2 = AnimElem = 25, < 0
pos = -24, -83

[State 3216, 12]
type = TargetBind
trigger1 = AnimElem = 7, >= 0
trigger1 = AnimElem = 8, < 0
trigger2 = AnimElem = 25, >= 0
trigger2 = AnimElem = 26, < 0
pos = -15, -88

[State 3216, 13]
type = TargetBind
trigger1 = AnimElem = 8, >= 0
trigger1 = AnimElem = 9, < 0
trigger2 = AnimElem = 26, >= 0
trigger2 = AnimElem = 27, < 0
pos = 0, -88

[State 3216, 14]
type = TargetBind
trigger1 = AnimElem = 9, >= 0
trigger1 = AnimElem = 10, < 0
trigger2 = AnimElem = 27, >= 0
trigger2 = AnimElem = 28, < 0
pos = 8, -77

[State 3216, 15]
type = TargetBind
trigger1 = AnimElem = 10, >= 0
trigger1 = AnimElem = 11, < 0
trigger2 = AnimElem = 28, >= 0
trigger2 = AnimElem = 29, < 0
pos = 15, -67

[State 3216, 16]
type = TargetBind
trigger1 = AnimElem = 11, >= 0
trigger1 = AnimElem = 12, < 0
trigger2 = AnimElem = 29, >= 0
trigger2 = AnimElem = 30, < 0
pos = 38, -49

[State 3216, 17.1]
type = TargetBind
trigger1 = AnimElem = 12, >= 0
trigger1 = AnimElem = 13, < 0
trigger2 = AnimElem = 30, >= 0
trigger2 = AnimElem = 31, < 0
pos = 45, 0

[State 3216, 17.2] ;Ground wave (behind)
type = Explod
trigger1 = AnimElem = 12
trigger2 = AnimElem = 30
anim = f66
pos = 35,0
postype = p1
sprpriority = -2
supermove = 1
ownpal = 1

[State 3216, 17.2] ;Ground wave (in front)
type = Explod
trigger1 = AnimElem = 12
trigger2 = AnimElem = 30
anim = f67
pos = 35,0
postype = p1
sprpriority = 2
supermove = 1
ownpal = 1

[State 3216, 17.3] ;Shake
type = EnvShake
Trigger1 = AnimElem = 12
trigger2 = AnimElem = 30
time = 18
ampl = 8
freq = 175

[State 3216, 17.4b] ;Crunch
type = PlaySnd
Trigger1 = AnimElem = 12
trigger2 = AnimElem = 30
value = s0,5

[State 3216, 17.4c] ;Crunch
type = PlaySnd
Trigger1 = AnimElem = 12
trigger2 = AnimElem = 30
value = 1,7

[State 3216, 17.5]
type = TargetLifeAdd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 30
value = -55
kill = 0

[State 3216, 18]
type = TargetBind
trigger1 = AnimElem = 13, >= 0
trigger1 = AnimElem = 14, < 0
pos = 45, 0

[State 3216, 18]
type = PosAdd
trigger1 = AnimElem = 14
x = 25

[State 3216, 18]
type = TargetBind
trigger1 = AnimElem = 14, >= 0
trigger1 = AnimElem = 15, < 0
pos = 20, 0

[State 3216, 19]
type = TargetBind
trigger1 = AnimElem = 15, >= 0
trigger1 = AnimElem = 16, < 0
pos = 12, 0

[State 3216, 20]
type = TargetBind
trigger1 = AnimElem = 16, >= 0
trigger1 = AnimElem = 17, < 0
pos = 3, 0

[State 3216, 21]
type = TargetBind
trigger1 = AnimElem = 17, >= 0
trigger1 = AnimElem = 18, < 0
pos = -5, 0

[State 3216, 22]
type = TargetBind
trigger1 = AnimElem = 18, >= 0
trigger1 = AnimElem = 20, < 0
pos = -14, 0

[State 3216, 23]
type = TargetBind
trigger1 = AnimElem = 34, >= 0
trigger1 = AnimElem = 35, < 0
pos = 20, -24

[State 3216, 23]
type = TargetBind
trigger1 = AnimElem = 35, >= 0
trigger1 = AnimTime <= 0
pos = 40, 0

[State 3216, 15]
type = ChangeState
trigger1 = AnimTime = 0
value = 3217

;---------------------------------------------------------------------------
;Dynamite2 (catch, neck break)
[Statedef 3217]
type    = S
movetype= A
physics = N
anim = 3217+var(55)*30000

[State 3217, 1]
type = Width
trigger1 = 1
edge = 65, 15

[State 3217, 2]
type = TargetBind
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 2, < 0
pos = 51, 0

[State 3217, 3]
type = TargetBind
trigger1 = AnimElem = 2
trigger1 = AnimElem = 4, < 0
pos = 24,-87

[State 3217, 4.1]
type = SprPriority
trigger1 = AnimElem = 3
value = -1

[State 3217, 4.2]
type = PlaySnd
trigger1 = AnimElem = 3
value = f800,0

[State 3217, 4.3]
type = GameMakeAnim
trigger1 = AnimElem = 3
value = 9
pos = 24,-82

[State 3217, 4.4] ;Piece of arm
type = Explod
trigger1 = AnimElem = 3
anim = 3116+var(55)*30000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 3217, 15]
type = ChangeState
trigger1 = AnimTime = 0
value = 3212

;---------------------------------------------------------------------------
;Dynamite2 (catch, swing start)
[Statedef 3212]
type    = S
movetype= A
physics = S
anim = 3212+var(55)*30000

[State 3212, 1]
type = Width
trigger1 = 1
edge = 65, 15

[State 3212, 1]
type = TargetState
trigger1 = Time = 0
value = 3224

[State 3212, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10,16 ;"Dynamite Swing!"

[State 3212, 3]
type = AfterImage
trigger1 = Time = 0
time = 2
Trans = Add1
PalColor = 0
PalBright = 0,0,0
PalContrast = 96,128,192
PalPostBright = 32,32,48

[State 3212, 4]
type = AfterImageTime
trigger1 = 1
time = 40

[State 3212, 4.1] ;Piece of arm
type = Explod
trigger1 = Time = 0
anim = 3218+var(55)*30000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 3212, 4]
type = PlaySnd
trigger1 = Time = 0
trigger2 = AnimElem = 4
trigger3 = AnimElem = 8
trigger4 = AnimElem = 12
trigger5 = AnimElem = 16
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
trigger10 = AnimElem = 36
trigger11 = AnimElem = 40
trigger12 = AnimElem = 44
trigger13 = AnimElem = 48
trigger14 = AnimElem = 52
trigger15 = AnimElem = 56
trigger16 = AnimElem = 60
trigger17 = AnimElem = 64
value = s0,5 ;Whoosh noise

[State 3212, 4]
type = TargetBind
trigger1 = 1
trigger1 = AnimElem = 2, < 0
trigger2 = AnimElem = 9, >= 0
trigger2 = AnimElem = 10, < 0
trigger3 = AnimElem = 17, >= 0
trigger3 = AnimElem = 18, < 0
trigger4 = AnimElem = 25, >= 0
trigger4 = AnimElem = 26, < 0
trigger5 = AnimElem = 33, >= 0
trigger5 = AnimElem = 34, < 0
trigger6 = AnimElem = 41, >= 0
trigger6 = AnimElem = 42, < 0
trigger7 = AnimElem = 49, >= 0
trigger7 = AnimElem = 50, < 0
trigger8 = AnimElem = 57, >= 0
trigger8 = AnimElem = 58, < 0
trigger9 = AnimElem = 63, >= 0
trigger9 = AnimElem = 64, < 0
pos = 12,-81

[State 3212, 5]
type = TargetBind
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 0
trigger2 = AnimElem = 10, >= 0
trigger2 = AnimElem = 11, < 0
trigger3 = AnimElem = 18, >= 0
trigger3 = AnimElem = 19, < 0
trigger4 = AnimElem = 26, >= 0
trigger4 = AnimElem = 27, < 0
trigger5 = AnimElem = 34, >= 0
trigger5 = AnimElem = 35, < 0
trigger6 = AnimElem = 42, >= 0
trigger6 = AnimElem = 43, < 0
trigger7 = AnimElem = 50, >= 0
trigger7 = AnimElem = 51, < 0
trigger8 = AnimElem = 58, >= 0
trigger8 = AnimElem = 59, < 0
trigger9 = AnimElem = 64, >= 0
pos = 40,-75

[State 3212, 6]
type = TargetBind
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 4, < 0
trigger2 = AnimElem = 11, >= 0
trigger2 = AnimElem = 12, < 0
trigger3 = AnimElem = 19, >= 0
trigger3 = AnimElem = 20, < 0
trigger4 = AnimElem = 27, >= 0
trigger4 = AnimElem = 28, < 0
trigger5 = AnimElem = 35, >= 0
trigger5 = AnimElem = 36, < 0
trigger6 = AnimElem = 43, >= 0
trigger6 = AnimElem = 44, < 0
trigger7 = AnimElem = 51, >= 0
trigger7 = AnimElem = 52, < 0
trigger8 = AnimElem = 59, >= 0
trigger8 = AnimElem = 60, < 0
pos = 50,-75

[State 3212, 7.1]
type = TargetBind
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 5, < 0
trigger2 = AnimElem = 12, >= 0
trigger2 = AnimElem = 13, < 0
trigger3 = AnimElem = 20, >= 0
trigger3 = AnimElem = 21, < 0
trigger4 = AnimElem = 28, >= 0
trigger4 = AnimElem = 29, < 0
trigger5 = AnimElem = 36, >= 0
trigger5 = AnimElem = 37, < 0
trigger6 = AnimElem = 44, >= 0
trigger6 = AnimElem = 45, < 0
trigger7 = AnimElem = 52, >= 0
trigger7 = AnimElem = 53, < 0
trigger8 = AnimElem = 60, >= 0
trigger8 = AnimElem = 61, < 0
pos = 58,-80

[State 3212, 7.2]
type = SprPriority
trigger1 = AnimElem = 4
trigger2 = AnimElem = 12
trigger3 = AnimElem = 20
trigger4 = AnimElem = 28
trigger5 = AnimElem = 36
trigger6 = AnimElem = 44
trigger7 = AnimElem = 52
trigger8 = AnimElem = 60
value = 1

[State 3212, 8]
type = TargetBind
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 6, < 0
trigger2 = AnimElem = 13, >= 0
trigger2 = AnimElem = 14, < 0
trigger3 = AnimElem = 21, >= 0
trigger3 = AnimElem = 22, < 0
trigger4 = AnimElem = 29, >= 0
trigger4 = AnimElem = 30, < 0
trigger5 = AnimElem = 37, >= 0
trigger5 = AnimElem = 38, < 0
trigger6 = AnimElem = 45, >= 0
trigger6 = AnimElem = 46, < 0
trigger7 = AnimElem = 53, >= 0
trigger7 = AnimElem = 54, < 0
trigger8 = AnimElem = 61, >= 0
trigger8 = AnimElem = 62, < 0
pos = 55,-97

[State 3212, 9]
type = TargetBind
trigger1 = AnimElem = 6, >= 0
trigger1 = AnimElem = 7, < 0
trigger2 = AnimElem = 14, >= 0
trigger2 = AnimElem = 15, < 0
trigger3 = AnimElem = 22, >= 0
trigger3 = AnimElem = 23, < 0
trigger4 = AnimElem = 30, >= 0
trigger4 = AnimElem = 31, < 0
trigger5 = AnimElem = 38, >= 0
trigger5 = AnimElem = 39, < 0
trigger6 = AnimElem = 46, >= 0
trigger6 = AnimElem = 47, < 0
trigger7 = AnimElem = 54, >= 0
trigger7 = AnimElem = 55, < 0
trigger8 = AnimElem = 62, >= 0
trigger8 = AnimElem = 63, < 0
pos = 11,-93

[State 3212, 10]
type = TargetBind
trigger1 = AnimElem = 7, >= 0
trigger1 = AnimElem = 8, < 0
trigger2 = AnimElem = 15, >= 0
trigger2 = AnimElem = 16, < 0
trigger3 = AnimElem = 23, >= 0
trigger3 = AnimElem = 24, < 0
trigger4 = AnimElem = 31, >= 0
trigger4 = AnimElem = 32, < 0
trigger5 = AnimElem = 39, >= 0
trigger5 = AnimElem = 40, < 0
trigger6 = AnimElem = 47, >= 0
trigger6 = AnimElem = 48, < 0
trigger7 = AnimElem = 55, >= 0
trigger7 = AnimElem = 56, < 0
trigger8 = AnimElem = 63, >= 0
trigger8 = AnimElem = 64, < 0
pos = 3,-75

[State 3212, 11.1]
type = TargetBind
trigger1 = AnimElem = 8, >= 0
trigger1 = AnimElem = 9, < 0
trigger2 = AnimElem = 16, >= 0
trigger2 = AnimElem = 17, < 0
trigger3 = AnimElem = 24, >= 0
trigger3 = AnimElem = 25, < 0
trigger4 = AnimElem = 32, >= 0
trigger4 = AnimElem = 33, < 0
trigger5 = AnimElem = 40, >= 0
trigger5 = AnimElem = 41, < 0
trigger6 = AnimElem = 48, >= 0
trigger6 = AnimElem = 49, < 0
trigger7 = AnimElem = 56, >= 0
trigger7 = AnimElem = 57, < 0
trigger8 = AnimElem = 64, >= 0
pos = -10,-72

[State 3212, 11.2]
type = SprPriority
trigger1 = AnimElem = 8
trigger2 = AnimElem = 16
trigger3 = AnimElem = 24
trigger4 = AnimElem = 32
trigger5 = AnimElem = 40
trigger6 = AnimElem = 48
trigger7 = AnimElem = 56
trigger8 = AnimElem = 64
value = -1

[State 3212, 11.3]
type = TargetLifeAdd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 16
trigger3 = AnimElem = 24
trigger4 = AnimElem = 32
trigger5 = AnimElem = 40
trigger6 = AnimElem = 48
trigger7 = AnimElem = 56
trigger8 = AnimElem = 64
value = -20
kill = 0

[State 3212, 12.1] ;Done
type = TargetState
trigger1 = AnimTime = 0
value = 3225

[State 3212, 12.2]
type = PlaySnd
trigger1 = AnimTime = 0
value = s10,27

[State 3212, 12.2]
type = PlaySnd
trigger1 = AnimTime = 0
value = s0,5

[State 3212, 12.3]
type = TargetBind
trigger1 = AnimTime = 0
pos = -40, -50

[State 3212, 12.4]
type = TargetLifeAdd
trigger1 = AnimTime = 0
value = -20

[State 3212, 12.4] ;Done
type = ChangeState
trigger1 = AnimTime = 0
value = 3213

;---------------------------------------------------------------------------
;Dynamite2 (catch, swing end, on ground)
[Statedef 3213]
type    = S
movetype= A
physics = S
anim = 3213+var(55)*30000

[State 3213, 1] ;Done
type = ChangeState
trigger1 = AnimElem = 3
value = 3214

;---------------------------------------------------------------------------
;Dynamite2 (catch, swing end, into air)
[Statedef 3214]
type    = A
movetype= A
physics = N
velset = 0,-8

[State 3214, 1]
type = PosAdd
trigger1 = Time = 0
x = 18

[State 3214, 2] 
type = VelAdd
trigger1 = 1
y = .43

[State 3214, 3]
type = Turn
trigger1 = AnimElem = 6

[State 3214, 1] ;Done
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3215
ctrl = 1

;---------------------------------------------------------------------------
;Dynamite2 (swing, land)
[Statedef 3215]
type    = S
movetype= I
physics = S
anim = 3115+var(55)*30000
velset = 0,0

[State 3215, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3215, 2]
type = PlaySnd
trigger1 = Time = 0
value = s30,2

[State 3215, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Dynamite2 (hit by swing, dunked on)
[Statedef 3222]
type    = L
movetype= H ;Get hit
physics = N
velset = 0,0

[State 3222, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3222+var(55)*30000

[State 3222, 2]
type = Turn
trigger1 = AnimElem = 37

;---------------------------------------------------------------------------
; Dynamite2 (hit by swing, grabbed at neck)
[Statedef 3223]
type    = L
movetype= H ;Get hit
physics = N
velset = 0,0

[State 3223, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3223+var(55)*30000

;---------------------------------------------------------------------------
; Dynamite2 (hit by swing, start)
[Statedef 3224]
type    = L
movetype= H ;Get hit
physics = N
velset = 0,0

[State 3224, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3224+var(55)*30000

;---------------------------------------------------------------------------
; Dynamite1 (hit by swing, through the air)
[Statedef 3225]
type    = L
movetype= H ;Get hit
physics = N
velset = -5,-8

[State 3225, 2] ;Acceleration
type = VelAdd
Trigger1 = 1
y = .45

[State 3225, 3] ;Self's falling anim
type = ChangeAnim
Trigger1 = Time = 0
value = 5050+var(55)*30000

[State 3225, 3] ;Self's falling anim
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = AnimExist(5052+var(55)*30000)
value = 5052+var(55)*30000

[State 3225, 2] ;Coming down anim (normal fall type)
type = ChangeAnim
triggerall = anim != 5052+var(55)*30000 ;Not if in hit up anim
trigger1 = vel y >= 1
trigger1 = animexist(5060+var(55)*30000)
value = 5060+var(55)*30000
persistent = 0

[State 3225, 2] ;Coming down anim (hit up type)
type = ChangeAnim
triggerall = anim = 5052+var(55)*30000 ;Not if in hit up anim
trigger1 = vel y >= -2
trigger1 = animexist(5062+var(55)*30000)
value = 5062+var(55)*30000
persistent = 0

[State 3225, 4.1] ;Shake
type = EnvShake
trigger1 = vel y > 0
trigger1 = pos y >= 0
time = 18
ampl = 10

[State 3225, 4.2]
type = LifeAdd
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = -50

[State 3225, 4.3] ;Hit ground
trigger1 = vel y > 0
trigger1 = pos y >= 0
type = SelfState
value = 5100

;---------------------------------------------------------------------------
; Splash Rose (before run)
[Statedef 3300]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 3300+var(55)*30000
sprpriority = 2
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3199]) && time = 0
trigger2 = (prevstateno = [3300,3399]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3300, 1]
type = PlaySnd
trigger1 = Time = 1
value = s10,2 ;"Hey"

[State 3300, Super.1C]
type = SuperPause
trigger1 = AnimElem = 2
anim = -1
time = 24
sound = f9000,0

[State 3300, 2]
type = Envcolor
trigger1 = AnimElem = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 28
under = 1
supermove = 1

[State 3300, Super.1A] 
type = Explod
trigger1 = AnimElem = 2
anim = f7000
scale = .5,.5
pos = -10,-75
postype = p1
sprpriority = -2
supermove = 1
ownpal = 1

[State 3300, Super.1B]
type = Explod
trigger1 = AnimElem = 2
anim = f7010
scale = .5,.5
pos = -10,-75
postype = p1
sprpriority = 7
supermove = 1
ontop = 1
ownpal = 1

[State 3300, Super.1E]
type = PowerAdd
trigger1 = AnimElem = 2
value = ifelse(fvar(30) > 0,0,-1000)

[State 3300, Super.1F]
type = NotHitBy
Trigger1 = AnimElem = 2
value = SCA
time = 1

[State 3300, 2]
type = VarSet
Trigger1 = Time = 0
var(2) = 4 ;Use v2 to mean number of hits

[State 3300, 2]
type = VarSet
Trigger1 = Time = 0
var(3) = 0 ;Use v3 to count time Mary has been pushing opponent

[State 3301, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 3301

;---------------------------------------------------------------------------
; Splash Rose (running)
[Statedef 3301]
type    = S
movetype= A
physics = N
anim = 3301+var(55)*30000

[State 3301, 1]
type = VelSet
Trigger1 = 1
x = 8

[State 3301, 2]
type = AfterImageTime
Trigger1 = 1
time = 2

[State 3301, 4]
type = HitDef
trigger1 = Time = 0
attr = S, HA
damage    = 50,5
getpower = 0
guardflag = MA
priority = 6, Dodge
pausetime = 1,12
sparkxy = -15,-42
sparkno = 2
guard.sparkno = 40
hitsound = S1,3
guardsound = S2,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = 6
guard.velocity = -7
air.velocity = 6
airguard.velocity = -3.5,-3
mindist = 60
maxdist = 65
p2stateno = 3320
ID = 3300 ;For chaining into level 1 Splash Rose success
kill = 0

[State 3301, 4.2] ;Flash
type = EnvColor
Trigger1 = MoveHit
ignorehitpause = 1
persistent = 0
value = 255,255,255
under = 1

[State 3301, 4.3]
type = ChangeState
Trigger1 = MoveHit
value = 3310

[State 3301, 5]
type = VarAdd
Trigger1 = P2BodyDist X < 2
var(3) = 1

[State 3301, 6]
type = ChangeState
Trigger1 = AnimTime = 0
Trigger2 = MoveGuarded = 1
Trigger3 = var(3) > 5
value = 3302

;---------------------------------------------------------------------------
; Splash Rose (miss, stop)
[Statedef 3302]
type    = S
movetype= A
physics = N
anim = 3302+var(55)*30000

[State 3302, 2] ;Friction
type = VelMul
Trigger1 = 1
x = .9

[State 3301, 3]
type = AfterImageTime
Trigger1 = 1
Trigger1 = AnimTime < -1
time = 2

[State 3302, 4]
type = VelSet
Trigger1 = AnimTime = 0
x = 0

[State 3302, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Splash Rose (success, turn)
[Statedef 3310]
type    = S
movetype= A
physics = N
anim = 3310+var(55)*30000

[State 3310, 2]
type = AfterImageTime
Trigger1 = 1
time = 2

[State 3310, 3]
type = PlayerPush
Trigger1 = 1
value = 0

[State 3310, 4.1]
type = Turn
Trigger1 = AnimElem = 6

[State 3310, 4.2]
type = VelSet
Trigger1 = AnimElem = 6, > 0
x = 8

[State 3310, 4.3]
type = PlaySnd
trigger1 = AnimElem = 6
value = s10,2 ;"Hey"
channel = 0

[State 3310, 5.1]
type = PosAdd
Trigger1 = AnimElem = 7
x = -20

[State 3101, 5.2]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
damage    = 30
guardflag = MA
priority = 6, Dodge
pausetime = 1,12
sparkxy = -10,-48
sparkno = 2
guard.sparkno = 40
hitsound = S1,3;S35,4
guardsound = S2,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = 6
guard.velocity = -7
air.velocity = 6
airguard.velocity = -3.5,-3
mindist = 60
maxdist = 65
p2stateno = 3320
ID = 3300 ;For chaining into level 1 Splash Rose success
chainID = 3300 ;Chaining from level 1 Splash Rose success
kill = 0

[State 3310, 5.3] ;Flash
type = EnvColor
Trigger1 = Animelem = 7, >= 0
Trigger1 = MoveHit
ignorehitpause = 1
persistent = 0
value = 255,255,255
under = 1
time = 1

[State 3101, 5.4]
type = ChangeState
Trigger1 = Animelem = 7, >= 0
Trigger1 = MoveHit
value = 3310

[State 3310, 5]
type = VarAdd
trigger1 = Time = 0
var(2) = -1

[State 3310, 5] ;Quit
type = ChangeState
Trigger1 = AnimTime = 0
Trigger2 = Var(2) = 0
value = 3311

[State 3310, 5]
type = ChangeState
Trigger1 = stateno = 3800
value = 0
ctrl = 1

[State 3310, 5]
type = ChangeState
Trigger1 = AnimTime = 0
value = 3310

;---------------------------------------------------------------------------
; Splash Rose (success, last ground hit)
[Statedef 3311]
type    = S
movetype= A
physics = N
anim = 3311+var(55)*30000

[State 3311, 1]
type = EnvColor
Trigger1 = Time = 0
Trigger2 = AnimElem = 10
Trigger3 = AnimElem = 17
value = 255,255,255
under = 1

[State 3311, 2]
type = AfterImageTime
Trigger1 = 1
time = 2

[State 3311, 4.1]
type = Turn
Trigger1 = AnimElem = 6

[State 3311, 4.2]
type = VelSet
Trigger1 = AnimElem = 6, > 0
Trigger1 = AnimElem = 13, < 0
x = 8

[State 3311, 4.3]
type = PlaySnd
trigger1 = AnimElem = 6
value = s10,2 ;"Hey"
channel = 0

[State 3311, 5]
type = PosAdd
Trigger1 = AnimElem = 7
x = -20

[State 3311, 6.1] ;Friction
type = VelMul
Trigger1 = AnimElem = 13, >= 0
x = .8

[State 3311, 6.2] ;Friction
type = VelMul
Trigger1 = AnimElem = 13
x = .5

[State 3311, 7] ;Kick
type = HitDef
trigger1 = AnimElem = 10
attr = S, HA
damage    = 60
getpower = 0
guardflag = MA
priority = 6
pausetime = 8,8
sparkxy = -10,-48
hitsound = S1,3
sparkno = 2
guard.sparkno = 41
guardsound = S2,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -9
guard.velocity = -7
air.velocity = -6
airguard.velocity = -3.5,-3
mindist = 60
maxdist = 65
p2stateno = 3320
ID = 3300 ;For chaining into level 1 Splash Rose success
chainID = 3300 ;Chaining from level 1 Splash Rose success
kill = 0

[State 3311, 8]
type = HitDef
trigger1 = AnimElem = 17
attr = S, HA
damage    = 50
getpower = 0
guardflag = MA
priority = 6
pausetime = 10,10
sparkxy = -10,-60
sparkno = 2
guard.sparkno = 41
hitsound = S1,3
guardsound = S2,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -7,-8
guard.velocity = -7
air.type = Low
air.velocity = -7,-8
airguard.velocity = -3.5,-3
mindist = 60
maxdist = 65
ID = 3300 ;For chaining into level 1 Splash Rose success
chainID = 3300 ;Chaining from level 1 Splash Rose success
kill = 0
fall = 1
fall.animtype = Hard

[State 3311, 9] ;Circle
type = Explod
trigger1 = AnimElem = 16
anim = 3313
pos = -5,-60
postype = p1
bindtime = -1
sprpriority = 2
ownpal = 1

[State 3311, 10]
type = ChangeState
Trigger1 = AnimTime = 0
value = 3312

;---------------------------------------------------------------------------
; Splash Rose (success, into air)
[Statedef 3312]
type    = A
movetype= A
physics = N
anim = 3312+var(55)*30000
velset = 7,-8

[State 3312, 1]
type = EnvColor
Trigger1 = Time = 0
Trigger2 = AnimElem = 4
Trigger3 = AnimElem = 6
value = 255,255,255
under = 1

[State 3312, 1]
type = PlaySnd
Trigger1 = Time = 0
value = s10,24 ;"Finish!"
channel = 0

[State 3312, 2]
type = VelAdd
Trigger1 = 1
y = .42

[State 3312, 3]
type = VelMul
Trigger1 = Time >= 1
x = .9

[State 3312, 4]
type = HitDef
trigger1 = Time = 0
attr = A, HA
damage    = 25
getpower = 0
guardflag = MA
priority = 6
pausetime = 4,4
sparkxy = -10,-60
sparkno = 2
guard.sparkno = 40
hitsound = S1,1
guardsound = S2,1
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -7,-8
guard.velocity = -7
air.velocity = -1,-12
airguard.velocity = -3.5,-3
mindist = 60
maxdist = 65
ID = 3300 ;For chaining into level 1 Splash Rose success
chainID = 3300 ;Chaining from level 1 Splash Rose success
kill = 0
fall = 1
fall.recover = 0

[State 3312, 5]
type = HitDef
trigger1 = AnimElem = 4
attr = A, HA
damage    = 20
getpower = 0
guardflag = MA
priority = 6
pausetime = 4,4
sparkxy = -10,-80
sparkno = 2
guard.sparkno = 40
hitsound = S1,1
guardsound = S2,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -1,-8
guard.velocity = -7
air.velocity = -1,-12
airguard.velocity = -3.5,-3
ID = 3300 ;For chaining into level 1 Splash Rose success
chainID = 3300 ;Chaining from level 1 Splash Rose success
kill = 0
fall = 1
fall.recover = 0

[State 3312, 6]
type = HitDef
trigger1 = AnimElem = 6
attr = A, HA
damage = 15
getpower = 0
guardflag = MA
priority = 6
pausetime = 2,2
sparkxy = -10,-100
sparkno = 2
guard.sparkno = 40
hitsound = S1,1
guardsound = S2,0
animtype = DiagUp
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -1,-13
guard.velocity = -7
air.velocity = -1.5,-13
airguard.velocity = -4,-3.5
chainID = 3300 ;Chaining from level 1 Splash Rose success
fall = 1
fall.recover = 0
yaccel = .47

[State 3312, 5]
type = PosAdd
Trigger1 = AnimElem = 9
y = -10

[State 3312, 6.1] ;Circle
type = Explod
trigger1 = AnimElem = 2
anim = 3313
pos = 16,-75
postype = p1
bindtime = -1
sprpriority = 2
ownpal = 1

[State 3312, 6.2] ;Circle
type = Explod
trigger1 = AnimElem = 5
anim = 3313
pos = 10,-73
postype = p1
bindtime = -1
sprpriority = 2
ownpal = 1

[State 3312, 5]
type = ChangeState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
value = 3315

;---------------------------------------------------------------------------
; Splash Rose (land)
[Statedef 3315]
type    = S
movetype= A
physics = S
anim = 3315+var(55)*30000
velset = 0,0

[State 3315, 1]
type = PosSet
Trigger1 = Time = 0
y = 0

[State 3315, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Splash Rose (hit by - no push check)
[Statedef 3320]
type    = S
movetype= H ;Get hit
physics = N
velset = 0,0

[State 3320, 1]
type = ChangeAnim2
trigger1 = 1
value = 3320+var(55)*30000

[State 3320, 2]
type = PlayerPush
trigger1 = 1
value = 0

;[State 3320, 2.2]
;type = NotHitBy
;trigger1 = 1
;value = CA, AT, NA, SA, AP

[State 3320, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3320, 4]
type = ChangeState
trigger1 = HitShakeOver
;trigger1 = HitVel Y = 0
value = 3321 ;Slide

[State 3320, 3]
type = ForceFeedback
trigger1 = Time = 0
time = 15
waveform = sinesquare
ampl = 130

;---------------------------------------------------------------------------
; Splash Rose (hit by, slide - no push check)
[Statedef 3321]
type    = S
movetype= H
physics = N

[State 3321, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 3321, 2]
type = VelMul
trigger1 = 1
x = .85

;[State 3320, 2.2]
;type = NotHitBy
;trigger1 = 1
;value = CA, AT, NA, SA, AP

[State 3320, 3]
type = PlayerPush
trigger1 = 1
value = 0

[State 3321, 4]
type = SelfState
trigger1 = HitOver = 1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Splash Rose (hit by - push check)
[Statedef 3325]
type    = S
movetype= H ;Get hit
physics = N
velset = 0,0

[State 3325, 1]
type = ChangeAnim2
trigger1 = 1
value = 3320+var(55)*30000

[State 3325, 2.2]
type = NotHitBy
trigger1 = 1
value = CA, AT, NA, SA, AP

[State 3325, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3325, 4]
type = ChangeState
trigger1 = HitShakeOver
;trigger1 = HitVel Y = 0
value = 3326 ;Slide

[State 3325, 3]
type = ForceFeedback
trigger1 = Time = 0
time = 15
waveform = sinesquare
ampl = 130

;---------------------------------------------------------------------------
; Splash Rose (hit by, slide - push check)
[Statedef 3326]
type    = S
movetype= H
physics = N

[State 3326, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 3326, 2]
type = VelMul
trigger1 = 1
x = .85

[State 3326, 2.2]
type = NotHitBy
trigger1 = 1
value = CA, AT, NA, SA, AP

[State 3326, 4]
type = SelfState
trigger1 = HitOver = 1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Splash Rose Level 2 (before run)
[Statedef 3400]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 3300+var(55)*30000
sprpriority = 2
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3199]) && time = 0
trigger2 = (prevstateno = [3300,3399]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3400, 1]
type = PlaySnd
trigger1 = Time = 1
value = s10,2 ;"Hey"

[State 3400, 1]
type = SuperPause
trigger1 = AnimElem = 2
time = 24
p2defmul = 1
darken = 0
anim = -1
sound = f9000,1

[State 3400, 2]
type = Envcolor
trigger1 = AnimElem = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 28
under = 1
supermove = 1

[State 3400, Super.1A] 
type = Explod
trigger1 = AnimElem = 2
anim = f7100
scale = .5,.5
pos = -10,-75
postype = p1
sprpriority = -2
supermove = 1
ownpal = 1

[State 3400, Super.1B]
type = Explod
trigger1 = AnimElem = 2
anim = f7110
scale = .5,.5
pos = -10,-75
postype = p1
sprpriority = 2
supermove = 1
ontop = 1
ownpal = 1

[State 3400, Super.1C]
type = SuperPause
trigger1 = AnimElem = 2
anim = -1
time = 24

[State 3200, 4]
type = Explod
trigger1 = AnimElem = 2
anim = f996
scale = .5,.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = AnimElem = 2
anim = f995
scale = .5,.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3400, Super.1E]
type = PowerAdd
trigger1 = AnimElem = 2
value = ifelse(fvar(30) > 0,-1000,-2000)

[State 3400, Super.1F]
type = NotHitBy
Trigger1 = AnimElem = 2
value = SCA
time = 1

[State 3400, Super.1G]
type = AfterImage
trigger1 = AnimElem = 2
time = 5
length = 20
FrameGap = 5
Trans = Add1
PalColor = 0
PalBright = 0,0,0
PalContrast = 96,128,192
PalPostBright = 32,32,48

[State 3400, 2]
type = VarSet
Trigger1 = Time = 0
var(2) = 6 ;Use v2 to mean number of hits

[State 3400, 2]
type = VarSet
Trigger1 = Time = 0
var(3) = 0 ;Use v3 to count time Mary has been pushing opponent

[State 3400, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 3401

;---------------------------------------------------------------------------
; Splash Rose Level 2 (running)
[Statedef 3401]
type    = S
movetype= A
physics = N
anim = 3301+var(55)*30000

[State 3401, 1]
type = VelSet
Trigger1 = 1
x = 8

[State 3401, 2]
type = AfterImageTime
Trigger1 = 1
time = 2

[State 3401, 4]
type = HitDef
trigger1 = Time = 0
attr = S, HA
damage    = 55,7
getpower = 0
guardflag = MA
priority = 6, Dodge
pausetime = 1,12
sparkxy = -15,-42
sparkno = 2
guard.sparkno = 41
hitsound = S1,3
guardsound = S2,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = 6
guard.velocity = -7
air.velocity = 6
airguard.velocity = -3.5,-3
mindist = 60
maxdist = 65
;p1stateno = 3410
p2stateno = 3320
ID = 3400 ;For chaining into level 2 Splash Rose success
kill = 0

[State 3401, 4.2] ;Flash
type = EnvColor
Trigger1 = MoveHit
ignorehitpause = 1
persistent = 0
value = 255,255,255
under = 1

[State 3401, 4.3]
type = ChangeState
Trigger1 = MoveHit
value = 3410

[State 3401, 5]
type = VarAdd
Trigger1 = P2BodyDist X < 2
var(3) = 1

[State 3401, 6]
type = ChangeState
Trigger1 = AnimTime = 0
Trigger2 = MoveGuarded = 1
Trigger3 = var(3) > 5
value = 3302

;---------------------------------------------------------------------------
; Splash Rose Level 2(success, turn)
[Statedef 3410]
type    = S
movetype= A
physics = N
anim = 3410+var(55)*30000

[State 3410, 1]
type = EnvColor
Trigger1 = Time = 0
Trigger2 = Time = 2
Trigger3 = Time = 4
value = 255,255,255
under = 1

[State 3410, 2]
type = AfterImageTime
Trigger1 = 1
time = 2

[State 3410, 3]
type = PlayerPush
Trigger1 = 1
value = 0

[State 3410, 4.1]
type = Turn
Trigger1 = AnimElem = 6

[State 3410, 4.2]
type = VelSet
Trigger1 = AnimElem = 6, > 0
x = 8

[State 3410, 4.3]
type = PlaySnd
trigger1 = AnimElem = 6
value = s10,2 ;"Hey"
channel = 0

[State 3410, 5.1]
type = PosAdd
Trigger1 = AnimElem = 7
x = -20

[State 3410, 5.2]
type = HitDef
trigger1 = Time = 2
attr = S, HA
damage   = 20
getpower = 0
pausetime = 2,13
sparkxy = -10,-68
sparkno = 2
guard.sparkno = 41
hitsound   = -1
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = 6
p2stateno = 3320
ID = 3400 ;For chaining into level 2 Splash Rose success
chainID = 3400 ;Chaining from level 2 Splash Rose success
kill = 0

[State 3410, 5.3]
type = HitDef
trigger1 = Time = 4
attr = S, HA
damage   = 10
getpower = 0
pausetime = 2,13
sparkxy = -10,-48
sparkno = 2
guard.sparkno = 41
hitsound = S1,3
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = 6
p2stateno = 3320
ID = 3400 ;For chaining into level 2 Splash Rose success
chainID = 3400 ;Chaining from level 2 Splash Rose success
kill = 0

[State 3410, 5.4]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
damage   = 5
getpower = 0
pausetime = 2,13
sparkxy = -10,-58
sparkno = 2
guard.sparkno = 41
hitsound = S1,3
guardsound = S2,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = 6
mindist = 60
maxdist = 65
p1stateno = 3410
p2stateno = 3320
ID = 3400 ;For chaining into level 2 Splash Rose success
chainID = 3400 ;Chaining from level 2 Splash Rose success
kill = 0

[State 3410, 5]
type = VarAdd
trigger1 = Time = 0
var(2) = -1

[State 3410, 5] ;Quit
type = ChangeState
Trigger1 = AnimTime = 0
Trigger2 = Var(2) = 0
value = 3411

[State 3410, 5]
type = ChangeState
Trigger1 = AnimTime = 0
value = 3410

;---------------------------------------------------------------------------
; Splash Rose Level 2 (success, first ground hit)
[Statedef 3411]
type    = S
movetype= A
physics = N
anim = 3411+var(55)*30000

[State 3410, 5.2]
type = HitDef
trigger1 = Time = 2
attr = S, HA
damage   = 25
getpower = 0
pausetime = 2,13
sparkxy = -10,-68
sparkno = 2
guard.sparkno = 41
hitsound   = -1
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = 6
p2stateno = 3325
ID = 3400 ;For chaining into level 2 Splash Rose success
chainID = 3400 ;Chaining from level 2 Splash Rose success
kill = 0

[State 3410, 5.3]
type = HitDef
trigger1 = Time = 4
attr = S, HA
damage   = 15
getpower = 0
pausetime = 2,13
sparkxy = -10,-48
sparkno = 2
guard.sparkno = 41
hitsound = S1,3
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = 6
p2stateno = 3325
ID = 3400 ;For chaining into level 2 Splash Rose success
chainID = 3400 ;Chaining from level 2 Splash Rose success
kill = 0

[State 3411, 1]
type = EnvColor
Trigger1 = Time = 0
Trigger2 = Time = 2
Trigger3 = Time = 4
Trigger4 = AnimElem = 10
Trigger5 = AnimElem = 11
Trigger6 = AnimElem = 18
Trigger7 = AnimElem = 19
Trigger8 = AnimElem = 23
value = 255,255,255
under = 1

[State 3411, 2]
type = AfterImageTime
Trigger1 = 1
time = 2

[State 3411, 4.1]
type = Turn
Trigger1 = AnimElem = 6

[State 3411, 4.2]
type = VelSet
Trigger1 = AnimElem = 6, > 0
;Trigger1 = AnimElem = 13, < 0
x = 8

[State 3411, 4.3]
type = PlaySnd
trigger1 = AnimElem = 6
value = s10,2 ;"Hey"
channel = 0

[State 3411, 5]
type = PosAdd
Trigger1 = AnimElem = 7
x = -20

[State 3411, 6.1] ;Friction
type = VelMul
Trigger1 = AnimElem = 13, >= 0
x = .8

[State 3411, 6.2] ;Friction
type = VelMul
Trigger1 = AnimElem = 13
x = .5

[State 3411, 7] ;Hits
type = HitDef
trigger1 = AnimElem = 10
trigger2 = AnimElem = 11
trigger3 = AnimElem = 18
trigger4 = AnimElem = 19
attr = S, HA
damage    = 25
getpower = 0
guardflag = MA
priority = 6
pausetime = 7,7
sparkxy = -10,-58
sparkno = 2
guard.sparkno = 41
hitsound = S1,3
guardsound = S2,1
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -9
guard.velocity = -7
air.velocity = -6
airguard.velocity = -3.5,-3
mindist = 35
maxdist = 55
p2stateno = 3325
ID = 3400 ;For chaining into level 2 Splash Rose success
chainID = 3400 ;Chaining from level 2 Splash Rose success
kill = 0

[State 3411, 8]
type = HitDef
trigger1 = AnimElem = 23
attr = S, HA
damage  = 40
getpower = 0
guardflag = MA
priority = 6
pausetime = 7,7
sparkxy = -10,-60
sparkno = 2
guard.sparkno = 41
hitsound = S1,3
guardsound = S2,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -7,-8
guard.velocity = -7
air.type = Low
air.velocity = -7,-8
airguard.velocity = -3.5,-3
mindist = 30
maxdist = 45
ID = 3400 ;For chaining into level 1 Splash Rose success
chainID = 3400 ;Chaining from level 1 Splash Rose success
kill = 0
fall = 1
fall.animtype = Hard

[State 3411, 9] ;Circle
type = Explod
trigger1 = AnimElem = 22
anim = 3313
pos = -5,-60
postype = p1
bindtime = -1
sprpriority = 2
ownpal = 1

[State 3411, 10]
type = ChangeState
Trigger1 = AnimTime = 0
value = 3412

;---------------------------------------------------------------------------
; Splash Rose Level 2 (success, into air)
[Statedef 3412]
type    = A
movetype= A
physics = N
anim = 3412+var(55)*30000
velset = 7,-6

[State 3412, 1]
type = EnvColor
Trigger1 = Time = 0
value = 255,255,255
under = 1

[State 3412, 2]
type = VelAdd
Trigger1 = 1
y = .5

[State 3412, 3]
type = VelMul
Trigger1 = Time >= 1
x = .9

[State 3412, 4]
type = HitDef
trigger1 = Time = 0
attr = A, HA
damage    = 25
getpower = 0
guardflag = MA
priority = 6
pausetime = 4,3
sparkxy = -10,-60
sparkno = 2
guard.sparkno = 41
hitsound = S1,1
guardsound = S2,1
animtype = DiagUp
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -7,-7.5
guard.velocity = -7
air.velocity = -1,-11.5
airguard.velocity = -3.5,-3
mindist = 60
maxdist = 65
ID = 3400 ;For chaining into level 2 Splash Rose success
chainID = 3400 ;Chaining from level 2 Splash Rose success
fall = 1
fall.recover = 0
yaccel = .47

[State 3412, 5]
type = PosAdd
Trigger1 = AnimElem = 9
y = -10

[State 3412, 6.1] ;Circle
type = Explod
trigger1 = AnimElem = 3
anim = 3313
pos = 16,-75
postype = p1
bindtime = -1
sprpriority = 2
ownpal = 1

[State 3412, 5]
type = ChangeState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
value = 3413

;---------------------------------------------------------------------------
; Splash Rose Level 2 (land from air first time)
[Statedef 3413]
type    = S
movetype= A
physics = S
anim = 3413+var(55)*30000
velset = 0,0

[State 3413, 1]
type = PosSet
Trigger1 = Time = 0
y = 0

[State 3413, 1]
type = Width
Trigger1 = 1
edge = 20

[State 3413, 2] ;Circle
type = Explod
trigger1 = AnimElem = 6
anim = 3313
pos = -5,-60
postype = p1
bindtime = -1
sprpriority = 2
ownpal = 1

[State 3413, 3]
type = HitDef
trigger1 = AnimTime = -1
attr = S, HA
damage  = 45
getpower = 0
guardflag = MA
priority = 6
pausetime = 3,3
sparkxy = -10,-60
sparkno = 2
guard.sparkno = 41
hitsound = S1,1
guardsound = S2,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -7,-8
guard.velocity = -7
air.type = Low
air.velocity = -7,-8
airguard.velocity = -3.5,-3
mindist = 30
maxdist = 45
ID = 3400 ;For chaining into level 1 Splash Rose success
chainID = 3400 ;Chaining from level 1 Splash Rose success
kill = 0
fall = 1
fall.animtype = Hard

[State 3413, 4]
type = ChangeState
Trigger1 = AnimTime = 0
value = 3415

;---------------------------------------------------------------------------
; Splash Rose Level 2 (success, into air 2nd time)
[Statedef 3415]
type    = A
movetype= A
physics = N
anim = 3415+var(55)*30000
velset = 7,-8

[State 3415, 1]
type = EnvColor
Trigger1 = Time = 0
Trigger2 = AnimElem = 4
Trigger3 = AnimElem = 6
value = 255,255,255
under = 1

[State 3415, 1]
type = EnvShake
Trigger1 = AnimElem = 6
time = 15
ampl = 5
freq = 178

[State 3415, 1]
type = PlaySnd
Trigger1 = AnimElem = 2
value = s10,24 ;"Finish!"
channel = 0

[State 3415, 2]
type = VelAdd
Trigger1 = 1
y = .42

[State 3415, 3]
type = VelMul
Trigger1 = Time >= 1
x = .9

[State 3415, 4]
type = HitDef
trigger1 = Time = 0
attr = A, HA
damage    = 20
getpower = 0
guardflag = MA
priority = 6
pausetime = 4,4
sparkxy = -10,-60
sparkno = 2
guard.sparkno = 41
hitsound = S1,1
guardsound = S2,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -7,-8
guard.velocity = -7
air.velocity = -1,-12
airguard.velocity = -3.5,-3
mindist = 60
maxdist = 65
ID = 3400 ;For chaining into level 2 Splash Rose success
chainID = 3400 ;Chaining from level 2 Splash Rose success
kill = 0
fall = 1
fall.recover = 0

[State 3415, 5]
type = HitDef
trigger1 = AnimElem = 4
attr = A, HA
damage    = 15
getpower = 0
guardflag = MA
priority = 6
pausetime = 4,4
sparkxy = -10,-80
sparkno = 2
guard.sparkno = 41
hitsound = S1,1
guardsound = S2,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -1,-8
guard.velocity = -7
air.velocity = -1,-12
airguard.velocity = -3.5,-3
ID = 3400 ;For chaining into level 2 Splash Rose success
chainID = 3400 ;Chaining from level 2 Splash Rose success
kill = 0
fall = 1
fall.recover = 0

[State 3415, 6]
type = HitDef
trigger1 = AnimElem = 6
attr = A, HA
damage    = 25
getpower = 0
guardflag = MA
priority = 6
pausetime = 25,25
sparkxy = -10,-100
sparkno = 2
guard.sparkno = 41
hitsound = S1,1
guardsound = S2,0
animtype = DiagUp
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -1,-13
guard.velocity = -7
air.velocity = -1.5,-13
airguard.velocity = -4,-3.5
ID = 3400 ;For chaining into level 2 Splash Rose success
chainID = 3400 ;Chaining from level 2 Splash Rose success
fall = 1
fall.recover = 0
yaccel = .47

[State 3415, 5]
type = PosAdd
Trigger1 = AnimElem = 9
y = -10

[State 3415, 6.1] ;Circle
type = Explod
trigger1 = AnimElem = 2
anim = 3313
pos = 16,-75
postype = p1
bindtime = -1
sprpriority = 2
ownpal = 1

[State 3415, 6.2] ;Circle
type = Explod
trigger1 = AnimElem = 5
anim = 3313
pos = 10,-73
postype = p1
bindtime = -1
sprpriority = 2
ownpal = 1

[State 3415, 5]
type = ChangeState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
value = 3315

;-----------------------------------------------------------------------------
; Mary's Typhoon (level 1)
[Statedef 3800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 3800+var(55)*30000
sprpriority = 2
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,3199]) && time = 0
trigger2 = (prevstateno = [3300,3399]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3800, Super.1A]
type = Explod
trigger1 = Time = 1
anim = f7100
scale = .5,.5
pos = 5,-60
postype = p1
sprpriority = -1
bindtime = 1
supermove = 1
ownpal = 1

[State 3800, Super.1B]
type = Explod
trigger1 = Time = 1
anim = f7110
scale = .5,.5
pos = 5,-60
postype = p1
sprpriority = 7
bindtime = 1
supermove = 1
ownpal = 1

[State 3800, Super.1]
type = SuperPause
trigger1 = Time = 1
anim = -1
time = 40
sound = f9000,1

[State 3400, 2]
type = Envcolor
trigger1 = Time = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 40
under = 1
supermove = 1

[State 3800, Super.3]
type = PowerAdd
trigger1 = Time = 1
value = ifelse(fvar(30) > 0,-1000,-2000)

[State 3200, 4]
type = Explod
trigger1 = time=1
anim = f996
scale = .5,.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=1
anim = f995
scale = .5,.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3802, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 3801
ctrl = 1

;-----------------------------------------------------------------------------
[Statedef 3801]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 3801+var(55)*30000
sprpriority = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = 10

[State 3400, Super.1G]
type = AfterImage
trigger1 = AnimElem = 1
time = 5
length = 20
FrameGap = 5
Trans = Add1
PalColor = 0
PalBright = 0,0,0
PalContrast = 96,128,192
PalPostBright = 32,32,48

[State 3800, 1]
type = HitDef
trigger1 = animelem = 1
attr = S, HT
hitflag = MAF
guardflag = 
priority = 2, Miss    ;Throw has low priority, should be miss or dodge type.
hitsound = -1
guardsound = 6,2
sparkno = -1
guard.sparkno = 42
sparkxy = -10,-70
p2facing = 1
p1stateno = 3810
p2stateno = 3820
fall.yvelocity = -3.5
fall = 0

[State 3301, 6]
type = ChangeState
Trigger1 = AnimTime = 0
Trigger2 = MoveGuarded
value = 3802

;--------------------------
; Mary's Typhoon (level 1, miss, land)
[Statedef 3802]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 3803+var(55)*30000

[State 3401, 2]
type = AfterImageTime
Trigger1 = 1
time = 2

[State 3802, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
; Typhoon1 Success (grab)
[Statedef 3810]
type    = A
movetype= A
physics = N
anim = 3810+var(55)*30000

[State 3810, 1]
type = AfterImageTime
trigger1 = 1
time = 2

[State 3810, 2]
type = PlaySnd
trigger1 = Animelem = 2
value = s10,15 ;"Mary's"

[State 3800, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3810, Grab 1]
type = BindToTarget
trigger1 = AnimElemTime (2) >= 0
trigger1 = AnimElemTime (3) < 0
pos = 35, -10, foot

[State 3810, Grab 3]
type = BindToTarget
trigger1 = AnimElemTime (3) >= 0
trigger1 = AnimElemTime (4) < 0
pos = 15, -30, foot

[State 3810, Grab 4]
type = BindToTarget
trigger1 = AnimElemTime (4) >= 0
trigger1 = AnimElemTime (5) < 0
pos = 7, 2, mid

[State 3810, Grab 5]
type = BindToTarget
trigger1 = AnimElemTime (5) >= 0
trigger1 = AnimElemTime (6) < 0
pos = 0, -2, mid

[State 3810, Grab 6]
type = BindToTarget
trigger1 = AnimElemTime (6) >= 0
trigger1 = AnimElemTime (7) < 0
pos = 0, 20, head

[State 3810, Grab 7.1]
type = PlaySnd
trigger1 = AnimElem = 7
value = f800,0

[State 3810, Grab 7.2]
type = Explod
trigger1 = AnimElem = 7
anim = f9
pos = -10,-20
postype = p1
sprpriority = 1

[State 3810, Grab 7.3]
type = TargetBind
trigger1 = AnimElemTime (7) >= 0
trigger1 = AnimElemTime (8) < 0
pos = -10,-23

[State 3810, Grab 8]
type = TargetBind
trigger1 = AnimElemTime (8) >= 0
trigger1 = AnimElemTime (9) < 0
pos = -42,-25

[State 3810, Grab 9]
type = TargetBind
trigger1 = AnimElemTime (9) >= 0
trigger1 = AnimElemTime (10) < 0
pos = -44,-67

[State 3810, Grab 10]
type = TargetBind
trigger1 = AnimElemTime (10) >= 0
trigger1 = AnimElemTime (11) < 0
pos = -45,-85

[State 3810, Grab 11]
type = TargetBind
trigger1 = AnimElemTime (11) >= 0
trigger1 = AnimElemTime (12) < 0
pos = 10,-100

[State 3810, Grab 12.1]
type = Width
trigger1 = AnimElemTime (12) >= 0
edge = 60

[State 3810, Grab 12.2]
type = TargetBind
trigger1 = AnimElemTime (12) >= 0
trigger1 = AnimElemTime (13) < 0
pos = 53,-45

[State 3810, Grab 13.1]
type = PosSet
trigger1 = AnimElem = 13
y = 0

[State 3810, Grab 13.2]
type = TargetBind
trigger1 = AnimElemTime (13) >= 0
pos = 53,-26

[State 3810, 23]
type = ChangeState
trigger1 = AnimElem = 8
;trigger1 = var(2)
value = 3910

;------------------------
; Typhoon1 Success (slam on ground)
[Statedef 3811]
type    = C
movetype= A
physics = N
anim = 3811+var(55)*30000

[State 3810, Grab 3]
type = PlaySnd
trigger1 = time = 0
value = s10,17 ;"Typhoon!"

[State 3811, 1]
type = AfterImageTime
trigger1 = AnimElemTime(7) < 0
time = 2

[State 3811, 2]
type = NotHitBy
trigger1 = AnimElemTime(7) < 0
value = SCA

[State 3811, Width]
type = Width
trigger1 = AnimElemTime (2) < 0
edge = 60

[State 3811, Grab 14.1] ;Ground wave (behind)
type = Explod
trigger1 = AnimElem = 1
anim = F67
pos = 55,0
postype = p1
sprpriority = -2
supermove = 1
bindtime = -1
ownpal = 1

[State 3811, Grab 14.2] ;Ground wave (in front)
type = Explod
trigger1 = AnimElem = 1
anim = F66
pos = 55,0
postype = p1
sprpriority = 2
supermove = 1
bindtime = -1
ownpal = 1

[State 3811, Grab 14.3] ;Shake
type = EnvShake
Trigger1 = AnimElem = 1
time = 24
ampl = 10
freq = 179

[State 3811, Grab 14.4]
type = PlaySnd
Trigger1 = AnimElem = 1
value = s10,28 ;Hit sound

[State 3811, Grab 14.5]
type = TargetLifeAdd
Trigger1 = AnimElem = 1
value = -400

[State 3811, Grab 14.6]
type = TargetBind
trigger1 = AnimElemTime (1) >= 0
trigger1 = AnimElemTime (1) < 5
pos = 53,0

[State 3811, Grab 14.7]
type = TargetState
trigger1 = AnimElemTime (1) = 5
value = 3821

[State 3811, Grab 14.8] ;Rose
type = Explod
trigger1 = AnimElem = 1
anim = 3890
pos = 52,10
postype = p1
ontop = 1
ownpal = 1

[State 3811, 16]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 6
x = -15

[State 3811, 20]
type = PosAdd
trigger1 = AnimElem = 7
x = -20

[State 3811, 21]
type = PosAdd
trigger1 = AnimElem = 8
x = -5

[State 3811, 23]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
; Typhoon1 (hit by)
[Statedef 3819]
type    = A
movetype= H ;Get hit
physics = N
velset = 0,0
ctrl = 0

[State 3820, 1]
type = Width
trigger1 = 1
edge = 0,10

[State 3820, 2]
type = PosSet
Trigger1 = Time = 0
y = 0

[State 3820, 3]
type = ChangeAnim2
Trigger1 = Time = 0
Trigger1 = p1name != "Blue Mary"
value = 3820+var(55)*30000

[State 3820, 3.Mary]
type = ChangeAnim2
Trigger1 = movecontact
Trigger1 = Animelem = 1
value = 0

[State 3820, 3.Mary]
type = ChangeAnim2
Trigger1 = p1name = "Blue Mary"
value = 3830+var(55)*30000

[State 3820, 4]
type = HitBy
Trigger1 = 1
value = SCA
time = 1

;----------------------------
; Typhoon1 (hit by)
[Statedef 3820]
type    = A
movetype= H ;Get hit
physics = N
velset = 0,0
ctrl = 0

[State 3820, 1]
type = Width
trigger1 = 1
edge = 0,10

[State 3820, 2]
type = PosSet
Trigger1 = Time = 0
y = 0

[State 3820, 3]
type = ChangeAnim2
Trigger1 = Time = 0
Trigger1 = p1name != "Blue Mary"
value = 3820+var(55)*30000

[State 3820, 3.Mary]
type = ChangeAnim2
Trigger1 = Time = 0
Trigger1 = p1name = "Blue Mary"
value = 3830+var(55)*30000

[State 3820, 4]
type = HitBy
Trigger1 = 1
value = SCA
time = 1

;-----------------------
; Typhoon1 (hit by, into air)
[Statedef 3821]
type    = A
movetype= H ;Get hit
physics = N
velset = -4,-5

[State 3821, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5160+var(55)*30000

[State 3821, 2]
type = ChangeAnim2
Trigger1 = Time = 0
Trigger1 = p1name = "Blue Mary"
value = 3840+var(55)*30000

[State 3821, 2]
type = ChangeAnim2
Trigger1 = Time = 0
Trigger1 = p1name = "Yuri C-Type"
value = 3841+var(55)*30000

[State 3821, 3] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 3821, 4] ;Mary only
type = ChangeState
triggerall = (Vel Y > 0) && (Pos Y >= 0)
trigger1 = p1name = "Blue Mary"
trigger2 = p1name = "Yuri C-Type"
value = 3822

[State 3821, 5] ;Hit ground
type = SelfState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 5100 ;Hit ground

;------------------------
; Typhoon1 (hit by, hit ground - Mary only)
[Statedef 3822]
type    = L
movetype= H
physics = N

[State 3822, 1]
type = ChangeAnim2
Trigger1 = Time = 0
Trigger1 = p1name = "Blue Mary"
value = 3850+var(55)*30000

[State 3822, 1]
type = ChangeAnim2
Trigger1 = Time = 0
Trigger1 = p1name = "Yuri C-Type"
value = 3851+var(55)*30000

[State 3822, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3822, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 3822, 3] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 3822, 4]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

[State 3822, 5]
type = PlaySnd
trigger1 = Time = 1
value = F7, 1 ;Hit ground

[State 3822, 6]
type = PosFreeze
trigger1 = 1

[State 3822, 7]
type = ChangeState
trigger1 = Time = 4
value = 3823

[State 3822, 8]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 100,-3,-.2,.005
time = 15

;------------------------
; Typhoon1 (hit by, bounce into air - Mary only)
[Statedef 3823]
type    = L
movetype= H
physics = N

[State 3823, 0]
type = HitFallVel
trigger1 = Time = 0

[State 3823, 0]
type = VelSet
trigger1 = Time = 0
y = -2.6

[State 3823, 1]
type = PosSet
trigger1 = Time = 0
y = 20

[State 3823, 3] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 3823, 4] ;Hit ground
type = SelfState
trigger1 = vel y > 0
trigger1 = pos y >= 18
value = 5110
anim = 5161+var(55)*30000

;------------------------
; Typhoon2 Success (through air)
[Statedef 3910]
type    = A
movetype= A
physics = N
anim = 3910+var(55)*30000
velset = 1,-13

[State 3910, 1]
type = AfterImageTime
trigger1 = 1
time = 2

[State 3910, Snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10,27 ;Whoosh noise

[State 3910, Gravity]
type = VelAdd
trigger1 = 1
y = .6

[State 3910, Pos]
type = PosAdd
trigger1 = Time = 0
y = -10

[State 3910, Grab 1.1]
type = TargetState
trigger1 = AnimElemTime (1) = 0
value = 3920

[State 3910, Grab 1.2]
type = TargetBind
trigger1 = AnimElemTime (1) >= 0
trigger1 = AnimElemTime (2) < 0
pos = -42,-25

[State 3910, Grab 2]
type = TargetBind
trigger1 = AnimElemTime (2) >= 0
trigger1 = AnimElemTime (3) < 0
pos = -44,-67

[State 3910, Grab 3]
type = TargetBind
trigger1 = AnimElemTime (3) >= 0
trigger1 = AnimElemTime (4) < 0
pos = -45,-85

[State 3910, Grab 4]
type = TargetBind
trigger1 = AnimElemTime (4) >= 0
trigger1 = AnimElemTime (5) < 0
pos = 10,-100

[State 3910, Grab 5.1]
type = Width
trigger1 = AnimElemTime (5) >= 0
edge = 60

[State 3910, Grab 5.2]
type = TargetBind
trigger1 = AnimElemTime (5) >= 0
pos = 53,-45

[State 3910, Slam]
type = ChangeState
trigger1 = vel y > 0 && pos y > 0
value = 3911

;----------------------------
; Typhoon2 (success, slam onto ground)
[Statedef 3911]
type    = A
movetype= H ;Get hit
physics = N
velset = 0,0

[State 3911, 1]
type = PosSet
trigger1 = 1
y = 0

[State 3911, 2]
type = TargetBind
trigger1 = 1
pos = 53,-26

[State 3911, 3]
type = ChangeState
trigger1 = 1
value = 3811

;----------------------------
; Typhoon2 (success, finish)
[Statedef 3912]
type    = C
movetype= H ;Get hit
physics = N
anim = 3912+var(55)*30000

[State 3912, 1]
type = AfterImageTime
trigger1 = 1
time = 2

[State 3912, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
; Typhoon2 (hit by)
[Statedef 3920]
type    = A
movetype= H ;Get hit
physics = N

[State 3920, 3]
type = ChangeAnim2
Trigger1 = Time = 0
Trigger1 = p1name != "Blue Mary"
value = 3920+var(55)*30000

[State 3920, 3.Mary]
type = ChangeAnim2
Trigger1 = Time = 0
Trigger1 = p1name = "Blue Mary"
value = 3930+var(55)*30000

[State 3920, 3.Yuri C-Type]
type = ChangeAnim2
Trigger1 = Time = 0
Trigger1 = p1name = "Yuri C-Type"
value = 3931+var(55)*30000

[State 3920, 4]
type = HitBy
Trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Infinity Rose
[Statedef 3600]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 3600+var(55)*30000
sprpriority = 2
poweradd = -2000
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
;--------------------------------------

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 15
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;---------------------------------------------------------
[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = time = 15
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;---------------------------------------------------------------

[State 2200, 8]
type = SuperPause
trigger1 = AnimElem = 2
time = 33
movetime = 33
anim = -1
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = AnimElem = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 4000, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = f7300
pos = -10,-75
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 4000, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = f7310
pos = -10,-75
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9

[State 3500, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = f9000, 2

[State 4000, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = s10,2 ;"Hey"

[State 4000, NotHitBy]
type = NotHitBy
Trigger1 = AnimElem = 2
value = SCA
time = 1

[State 4000, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 3601

;---------------------------------------------------------------------------
[Statedef 3601]
type    = S
movetype= A
physics = N
anim = 3601+var(55)*30000

[State 4001, VelSet]
type = VelSet
Trigger1 = 1
x = 8

[State 4001, AfterImageTime]
type = AfterImageTime
Trigger1 = 1
time = 2

[State 4001, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, HA
damage = 60
guardflag = 
priority = 6, Dodge
pausetime = 1,12
sparkxy = -15,-42
sparkno = 2
guard.sparkno = 42
hitsound = S1,3
guardsound = S2,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = 0;6
guard.velocity = 0;-7
air.velocity = 6
airguard.velocity = -3.5,-3
mindist = 10
maxdist = 65
p1facing = 1
p2facing = 1
p1stateno = 3610
p2stateno = 3320
ID = 3300
kill = 0

[State 4001, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
Trigger2 = MoveGuarded = 1
value = 3650

;------------------------------------------------------------------------------
[Statedef 3650]
type    = S
movetype= A
physics = N
anim = 3302+var(55)*30000

[State 4100, VelMul];Friction
type = VelMul
Trigger1 = 1
x = .9

[State 4100, AfterImageTime]
type = AfterImageTime
Trigger1 = 1
Trigger1 = AnimTime < -1
time = 2

[State 4100, VelSet]
type = VelSet
Trigger1 = AnimTime = 0
x = 0

[State 4100, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------
[Statedef 3610]
type    = S
movetype= A
physics = S
velset = 0
ctrl = 0
anim = 3610+var(55)*30000
juggle = 4
sprpriority = 2

[State 4010, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10,15

[State 4010, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage = 35
guardflag = MA
priority = 5
pausetime = 10,10
sparkno = 2
guard.sparkno = 42
sparkxy = -10,-65
hitsound = S1,3
guardsound = S2,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 23
ground.velocity = 0,0
guard.velocity = -7
air.velocity = 0,0
fall = 1
fall.recovertime = 10
ID = 1100
kill = 0

[State 4010, ChangeState]
type = ChangeState
trigger1 = AnimElem = 4
value = 3611

;---------------------------------------------------------------------------
[Statedef 3611]
type    = A
movetype= A
physics = N

[State 4011, VelSet]
type = VelSet
trigger1 = Time = [0,5]
x = 4.7
y = -7.5

[State 4011, VelMul]
type = VelMul
trigger1 = 1
x = .92

[State 4011, VelAdd]
type = VelAdd
trigger1 = 1
y = .52

[State 4011, HitDef] ;Snatch
type = HitDef
trigger1 = Time = 0
attr = A, ST
hitflag = AF
priority = 8, Miss
sprpriority = 5
pausetime = 0,0
sparkno = 9
sparkxy = 0,-60
hitsound   = 800,0
p1stateno = 3620
p2stateno = 3640
p2facing = -1
fall = 1
fall.yvel = -2
chainID = 1100 ;Can only chain from vertical arrow
ID = 1120      ;To keep the opponent on the target list (See state 1120,5)
kill = 0

[State 4032, Explod]
type = Explod
trigger1 = Time = 0
anim = 3505
pos = 0,-60
postype = p1
ontop = 1
ownpal = 1

[State 4011, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1112

;------------------------------------------------------------------------------
[Statedef 3620]
type    = A
movetype= A
physics = N
anim = 1120+var(55)*30000

[State 4020, PosFreeze]
type = PosFreeze
trigger1 = 1
trigger1 = AnimElem = 2, < 0

[State 4020, VelSet]
type = VelSet
trigger1 = AnimElem = 2, < 0
y = 0

[State 4020, Explod] ;Piece of leg
type = Explod
trigger1 = AnimElem = 2
anim = 1125+var(55)*30000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 4020, Explod] ;Piece of leg
type = Explod
trigger1 = AnimElem = 3, >= 0
trigger1 = Pos Y < 0
anim = 1126+var(55)*30000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 4020, type = VelMul]
type = VelMul
trigger1 = Time = 0
x = .5

[State 4020, VelAdd]
type = VelAdd
trigger1 = 1
y = .6

[State 4020, TargetBind]
type = TargetDrop
trigger1 = Time = 0
excludeID = 1120

[State 4020, TargetBind]
type = TargetBind
trigger1 = AnimElem = 2, < 0
pos = 0, -60

[State 4020, TargetBind]
type = TargetBind
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 0
pos = 0, -55

[State 4020, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3, >= 0
pos = 5, -48

[State 4020, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3621

;------------------------------------------------------------------------------
[Statedef 3621]
type    = S
movetype= A
physics = S
anim = 1121+var(55)*30000
velset = 0,0

[State 4021, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 4021, Explod] ;Piece of leg
type = Explod
trigger1 = Time = 0
anim = 1127+var(55)*30000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 4021, TargetBind]
type = TargetBind
trigger1 = Time = 0
pos = 30,0

[State 4021,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = s1,7

[State 4021, Explod] ;Ground wave (behind)
type = Explod
trigger1 = Time = 0
anim = f67
pos = 15,0
postype = p1
sprpriority = -2
supermove = 1
bindtime = -1
ownpal = 1

[State 4021, Explod];Ground wave (in front)
type = Explod
trigger1 = Time = 0
anim = f66
pos = 15,0
postype = p1
sprpriority = 2
supermove = 1
bindtime = -1
ownpal = 1

[State 4021, EnvShake] ;Shake
type = EnvShake
Trigger1 = Time = 0
time = 15

[State 4021, EnvShake]
type = targetlifeadd
Trigger1 = Time = 0
value = -85

[State 4021, TargetState] ;P2
type = TargetState
trigger1 = Time = 0
value = 3641

[State 4021, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3622

;---------------------------------------------------------------------------
[Statedef 3622]
type    = A
movetype= I
physics = N
anim = 1122+var(55)*30000
velset = 0,0

[State 4022, VelAdd]
type = VelAdd
trigger1 = 1
y = .4

[State 4022, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3623

;---------------------------------------------------------------------------
[Statedef 3623]
type    = S
movetype= I
physics = S
anim = 1123+var(55)*30000
velset = 0,0

[State 4023, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 4023, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3624
ctrl = 1

;------------------------------------------------------------------------------
[Statedef 3624]
type    = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
ctrl = 0
anim = 3100+var(55)*30000
sprpriority = 2

[State 4024, NotHitBy]
type = NotHitBy
trigger1 = Time >= 7
trigger1 = Animelem = 4, <= 0
value = SCA
time = 1

[State 4024, PosAdd]
type = PosAdd
Trigger1 = AnimElem = 5
x = 8

[State 4024, ChangeState]
type = ChangeState
Trigger1 = AnimElem = 5
value = 3625

;------------------------------------------------------------------------------
[Statedef 3625]
type    = A
movetype= A
physics = N

[State 4025, VelSet]
type = VelSet
trigger1 = Time = [0,5]
x = 4.9
y = -7.5

[State 4025, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 30,0

[State 4025, VelMul]
type = VelMul
trigger1 = Time >= 5
x = .92

[State 4025, VelAdd]
type = VelAdd
trigger1 = 1
y = .52

[State 4025, ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > 0
persistent = 0
value = 3101+var(55)*30000

[State 4025, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, HA
damage = 25
guardflag = MA
priority = 6, Dodge
pausetime = 11,12
sparkno = 9
guard.sparkno = 42
sparkxy = -10,-75
hitsound = 800,0
guardsound = 6,2
ground.type = High
ground.slidetime = 18
ground.hittime  = 23
ground.velocity = -2.5,-7
guard.velocity = -7
air.velocity = -3,-5
airguard.velocity = -3,-3
fall = 1
fall.recover = 0
p1stateno = 3626
ID = 3100
kill = 0

[State 4032, Explod]
type = Explod
trigger1 = Time = 0
anim = 3505
pos = -10,-75
postype = p1
ontop = 1
ownpal = 1

[State 4025, ChangeAnim] ;Chain animation
type = ChangeAnim
trigger1 = MoveHit
trigger1 = Vel Y < 0
value = 3103

[State 4025, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 4025, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3102

;---------------------------------------------------------------------------
[Statedef 3626]
type    = A
movetype= A
physics = N
anim = 3103+var(55)*30000

[State 4026, VelMul]
type = VelMul
trigger1 = 1
x = .92

[State 4026, VelAdd]
type = VelAdd
trigger1 = 1
y = .52

[State 4026, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 4026, 6] ;Chain into rest of move
type = HitDef
trigger1 = Time = 0
attr = A, HT
hitflag = AF
priority = 8, Miss
sprpriority = 1 ;In front
pausetime = 0,0
sparkno = -1
hitsound = 800,0
p1stateno = 3627
p2stateno = 3120
p2facing = -1
fall = 1
chainID = 3100 ;Can only chain from level 1
ID = 3110      ;To keep the opponent on the target list (See state 3110,5)
kill = 0

[State 4026, ChangeAnim] ;Chain animation
type = ChangeAnim
trigger1 = MoveHit
trigger1 = Vel Y < 0
value = 3103+var(55)*30000

[State 4026, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3102

;---------------------------------------------------------------------------
[Statedef 3627]
type    = A
movetype= A
physics = N
anim = 3110+var(55)*30000

[State 4027, GameMakeAnim]
type = GameMakeAnim
trigger1 = Time = 0
value = 9
pos = -25,-101

[State 4032, Explod]
type = Explod
trigger1 = Time = 0
anim = 3505
pos = -25,-101
postype = p1
ontop = 1
ownpal = 1

[State 4027, Width]
type = Width
trigger1 = Time = 0
edge = 40

[State 4027, PosFreeze]
type = PosFreeze
trigger1 = 1
trigger1 = AnimElem = 2, < 0

[State 4027, VelSet]
type = VelSet
trigger1 = AnimElem = 2, < 0
x = 0
y = 0

[State 4027, VelAdd]
type = VelAdd
trigger1 = AnimElem = 2, > 0
y = .5

[State 4027, TargetDrop]
type = TargetDrop
trigger1 = Time = 0
excludeID = 3110

[State 4027, TargetBind]
type = TargetBind
trigger1 = 1
trigger1 = AnimElem = 2, < 0
pos = -15, -104

[State 4027, TargetBind]
type = TargetBind
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 0
pos = 13, -74

[State 4027, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3, >= 0
pos = 13, -74

[State 4027, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3628

;------------------------------------------------------------------------------
[Statedef 3628]
type    = S
movetype= A
physics = S
anim = 3651+var(55)*30000
velset = 0,0

[State 4028, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 4028, TargetState]
type = TargetState
trigger1 = Time = 0
value = 3121

[State 4028, 3.3]
type = PlaySnd
trigger1 = Time = 0
value = s1,7

[State 4028, Explod] ;Ground wave (behind)
type = Explod
trigger1 = Time = 0
anim = f67
pos = 5,0
postype = p1
sprpriority = -2
supermove = 1
ownpal = 1

[State 4028, Explod] ;Ground wave (in front)
type = Explod
trigger1 = Time = 0
anim = f66
pos = 5,0
postype = p1
sprpriority = -5
supermove = 1
ownpal = 1

[State 4028, EnvShake] ;Shake
type = EnvShake
Trigger1 = Time = 0
time = 18
ampl = 10
freq = 175

[State 4028, TargetBind]
type = TargetBind
trigger1 = 1
trigger1 = AnimElem = 3, < 0
pos = 5,0

[State 4028, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3, >= 0
trigger1 = Time < 25
pos = 45,0

[State 4028, TargetBind]
type = TargetBind
trigger1 = Time >= 25
trigger1 = AnimElem = 13, < 0
pos = 35,0

[State 4028, SprPriority]
type = SprPriority
trigger1 = AnimElem = 11
value = 1

[State 4028, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = s181,0
channel = 0

[State 4028, TargetState]
type = TargetState
trigger1 = AnimElem = 15
value = 3642;p2

[State 4028, TargetState]
type = Targetlifeadd
trigger1 = time = 0
value = -90

[State 4028, SprPriority]
type = SprPriority
trigger1 = AnimElem = 13
value = -1

[State 4028, SprPriority]
type = SprPriority
trigger1 = AnimElem = 15
value = 6

[State 4028, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3629

;------------------------------------------------------------------------------
[Statedef 3629]
type    = A
movetype= A
physics = N
anim = 3660+var(55)*30000
sprpriority = 6

[State 4029, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 4029, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 4029, BindToTarget]
type = BindToTarget
trigger1 = AnimElemTime (2) >= 0
trigger1 = AnimElemTime (3) < 0
pos = 0,-10, foot

[State 4029, BindToTarget]
type = BindToTarget
trigger1 = AnimElemTime (3) >= 0
trigger1 = AnimElemTime (4) < 0
pos = 0,-10, foot

[State 4029, BindToTarget]
type = BindToTarget
trigger1 = AnimElemTime (4) >= 0
trigger1 = AnimElemTime (5) < 0
pos = 0,-10, foot

[State 4029, BindToTarget]
type = BindToTarget
trigger1 = AnimElemTime (5) >= 0
trigger1 = AnimElemTime (6) < 0
pos = 15, -30, foot

[State 4029, BindToTarget]
type = BindToTarget
trigger1 = AnimElemTime (6) >= 0
trigger1 = AnimElemTime (7) < 0
pos = 7, 2, mid

[State 4029, BindToTarget]
type = BindToTarget
trigger1 = AnimElemTime (7) >= 0
trigger1 = AnimElemTime (8) < 0
pos = 0, -2, mid

[State 4029, BindToTarget]
type = BindToTarget
trigger1 = AnimElemTime (8) >= 0
trigger1 = AnimElemTime (9) < 0
pos = 0, 20, head

[State 4029, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = f800,0

[State 4029, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = f9
pos = -10,-20
postype = p1
sprpriority = 1

[State 4032, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 3505
pos = -10,-20
postype = p1
ontop = 1
ownpal = 1

[State 4029, ChangeState]
type = ChangeState
trigger1 = AnimElem = 10
value = 3630

;------------------------------------------------------------------------------
[Statedef 3630]
type    = A
movetype= A
physics = N
anim = 3661+var(55)*30000
velset = -3,-13

[State 4030, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 4030, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10,18

[State 4030, VelAdd]
type = VelAdd
trigger1 = 1
y = .6

[State 4030, PosAdd]
type = PosAdd
trigger1 = Time = 0
y = 10

[State 4030, TargetState]
type = TargetState
trigger1 = AnimElemTime (1) = 0
value = 3643

[State 4030, TargetBind]
type = TargetBind
trigger1 = AnimElemTime (1) >= 0
trigger1 = AnimElemTime (2) < 0
pos = 42,-25

[State 4030, TargetBind]
type = TargetBind
trigger1 = AnimElemTime (2) >= 0
trigger1 = AnimElemTime (3) < 0
pos = 44,-67

[State 4030, TargetBind]
type = TargetBind
trigger1 = AnimElemTime (3) >= 0
trigger1 = AnimElemTime (4) < 0
pos = 45,-85

[State 4030, TargetBind]
type = TargetBind
trigger1 = AnimElemTime (4) >= 0
trigger1 = AnimElemTime (5) < 0
pos = 20,-100

[State 4030, Width]
type = Width
trigger1 = AnimElemTime (5) >= 0
edge = 60

[State 4030, TargetBind]
type = TargetBind
trigger1 = AnimElemTime (5) >= 0
pos = -43,-45

[State 4030, ChangeState]
type = ChangeState
trigger1 = vel y > 0 && pos y > 0
value = 3631

;------------------------------------------------------------------------------
[Statedef 3631]
type    = A
movetype= H ;Get hit
physics = N
velset = 0,0

[State 4031, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 4031, TargetBind]
type = TargetBind
trigger1 = 1
pos = 53,-26

[State 4031, ChangeState]
type = ChangeState
trigger1 = 1
value = 3632

;------------------------------------------------------------------------------
[Statedef 3632]
type    = C
movetype= A
physics = N
anim = 3632+var(55)*30000

[State 4032, AfterImageTime]
type = AfterImageTime
trigger1 = AnimElemTime(7) < 0
time = 2

[State 4032, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(7) < 0
value = SCA

[State 4032, Width]
type = Width
trigger1 = AnimElemTime (2) < 0
edge = 60

[State 4032, Explod] ;Ground wave (behind)
type = Explod
trigger1 = AnimElem = 1
anim = f67
pos = -55,0
postype = p1
sprpriority = -2
supermove = 1
bindtime = -1
ownpal = 1

[State 4032, Explod] ;Ground wave (in front)
type = Explod
trigger1 = AnimElem = 1
anim = f66
pos = -55,0
postype = p1
sprpriority = 2
supermove = 1
bindtime = -1
ownpal = 1

[State 4032, EnvShake]
type = EnvShake
Trigger1 = AnimElem = 1
time = 10
ampl = 10
freq = 90

[State 4032, PlaySnd]
type = PlaySnd
Trigger1 = AnimElem = 1
value = s10,28 ;Hit sound

[State 4032, TargetLifeAdd]
type = TargetLifeAdd
Trigger1 = AnimElem = 1
value = -270

[State 4032, TargetBind]
type = TargetBind
trigger1 = AnimElemTime (1) >= 0
trigger1 = AnimElemTime (1) < 5
pos = -43,0

[State 4032, TargetState]
type = TargetState
trigger1 = AnimElemTime (1) = 5
value = 3821

[State 4032, Explod] ;Rose
type = Explod
trigger1 = AnimElem = 1
anim = 3890
pos = -42,10
postype = p1
ontop = 1
ownpal = 1

[State 4032, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 6
x = 15

[State 4032, PosAdd]
type = PosAdd
trigger1 = AnimElem = 7
x = 20

[State 4032, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8
x = 5

[State 4032, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
[Statedef 3640] ;p2
type    = A
movetype= H ;Get hit
physics = N
velset = 0,0
ctrl = 0

[State 4040, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1130+var(55)*30000

[State 4040, HitBy]
type = HitBy
Trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
[Statedef 3641]
type    = A
movetype= H
physics = N
velset = 0,0

[State 4041, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1131+var(55)*30000

[State 4041, ChangeAnim]
type = ChangeAnim
trigger1 = Time = [14,16]
value = 5100+var(55)*30000

[State 4041, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 17
value = 5160+var(55)*30000

[State 4041, VelSet]
type = VelSet
Trigger1 = Time = 17
x = 0
y = -5

[State 4041, VelAdd] ;Gravity
type = VelAdd
Trigger1 = Time > 17
y = .35

[State 4041, SelfState] ;Hit ground
type = SelfState
trigger1 = Time > 3
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;------------------------------------------------------------------------------
[Statedef 3642]
type    = L
movetype= H ;Get hit
physics = N
velset = 0,0

[State 4042, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3642+var(55)*30000

;------------------------------------------------------------------------------
[Statedef 3643]
type    = A
movetype= H ;Get hit
physics = N

[State 4043, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3920+var(55)*30000

[State 4043, HitBy]
type = HitBy
Trigger1 = 1
value = SCA
time = 1

;------------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Infinity Rose2
;---------------------------------------------------------------------------
[Statedef 3060]
type = S                    
movetype= A                    
physics = N                     
juggle  = 10                             
ctrl = 0                       
anim = 3060+var(55)*30000                       
sprpriority = 2
facep2 = 1
velset = 0,0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
;--------------------------------------

;------------------------------------------------------------------
[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 0
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 27
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;------------------------------------------------------------------

[State 2000, 0]
type = NotHitBy
trigger1 = (animelemno(0) = [1, 4])
value = SCA

[State 200, snd]
type=playsnd
trigger1= animelem=1 
value=10,2

[State 1601, 2]
type = PlaySnd
trigger1= animelem=6
value = s10,25

[State 2010, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,28]
flag = noBG
flag2 = noFG

[State 13000, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2010, Pause]
Type = SuperPause
Trigger1 = time = 1
Time = 33
movetime = 33
anim = -1
sound = f9000,2
Pos = 14, -88
Darken = 0
UnHittAble = 1
poweradd = -2000
p2defmul = 1

[State 4000, Super.1A] 
type = Explod
trigger1 = Time = 1
anim = f7300
Pos = -14, -78
postype = p1
sprpriority = -1
bindtime = 1
supermove = 1
ownpal = 1

[State 4000, Super.1B]
type = Explod
trigger1 = Time = 1
anim = f7310
Pos = -14, -78
postype = p1
sprpriority = 9
bindtime = 1
ontop = 1
supermove = 1
ownpal = 1

[State 3035, 1]
type = AfterImage
trigger1 = AnimElem = 5
time = -1
length = 9
framegap = 4
palcolor = 0
trans = add1
palbright = 96,96,128
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3200, AfterImageTime]
type = AfterImageTime
trigger1 = movetype = I
time = 1

[State 210, 1]
type = HitDef
trigger1 = time = 0
attr = A, HA
damage = 0,0
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = L
hitflag = MAF
priority = 5, Hit
sparkno = 2
sparkxy = -15, -12
hitsound = 5,1
guardsound = 6,2
guard.sparkno = 42
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
kill = 0
getpower = 0
givepower = 31, 31   
p1stateno = 3065
id = 3060

[State 1001, 0]
type = PosSet
trigger1 = !time
y = 0

[State 280, go]
type = VelSet
trigger1 = animelem = 6
x = 10
y = -3.4375 

[State a]
type = helper
trigger1 = var(55) = 1
trigger1 = AnimElem = 9
name = "shadow"
helpertype = normal
ID = 1635
pos = 0,0
postype = p1
stateno = 1635
keyctrl = 0
ownpal = 1

[State 1030, 1]
type = StateTypeSet
trigger1 = animelem = 6
statetype = A

[State 1010, 1]
type = VelAdd
trigger1 = animelemtime(6) > 0 
Y = 0.4375

[State 1000, 7]
type = ChangeState
Triggerall = animelemtime(6) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 3061
ctrl = 1  

;-------------------------------------------------------------------------
;未打中结束动作
;-------------------------------------------------------------------------
[Statedef 3061]
type = S                    
movetype= A                    
physics = N                     
juggle  = 10                             
ctrl = 0                                              
sprpriority = 2
velset = 13.299957275390625,0
hitdefpersist = 1

[State 2010, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 1010, 1]
type = VelSet
trigger1 = time = 1 
x= 6.299951020496038580778504994831

[State 1010, 1]
type = Velmul
trigger1 = time > 1 
x= 0.89999300292800551153978642783328

[State 1001, 0]
type = PosSet
trigger1 = !time
y = 0

[State 280, go]
type = VelSet
trigger1 = animelem = 18
x = 0

[State 3035, 1]
type = AfterImage
trigger1 = AnimTime = 0
time = 0

[State 1001, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 

;---------------------------------------------------------------------------
[StateDef 3065]
MoveType = A
VelSet = 0,0
Anim = 3061+var(55)*30000
SprPriority = 2
ctrl = 0

[State 1001, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1034, left]
type = TargetFacing
trigger1 = animelem = 1
value = -1

[State 2010, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 3035, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = -1
length = 9
framegap = 4
palcolor = 0
trans = add1
palbright = 96,96,128
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1
[State 3200, AfterImageTime]
type = AfterImageTime
trigger1 = movetype = I
time = 1

[State 1034, left]
type = TargetFacing
trigger1 = animelem = 1
value = -1

[State 801, fly p2]
type = TargetState
trigger1 = animelem = 1
value = 3160
ignorehitpause = 1
ID = 3060

[State 811]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 805, hitspark];必杀抓人火花
type = Explod
trigger1 = animelem = 3
anim = f9
pos = 39, -27
postype = p1
SprPriority = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 5100, 10];抓人声效
type = PlaySnd
trigger1 = animelem = 1
value = f800,0

[State 801, fat]
type = Width
trigger1 = 1
edge = 64

[State 810, bind]
type = TargetBind
trigger1 = animelem = 1
trigger2 = animelemtime(1) >= 0 && animelemtime(5) < 0
ID = 3060
pos = 40, 0

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
ID = 3060
pos = 68, -65

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
ID = 3060
pos = 22, -76

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(7) >= 0 && animelemtime(8) < 0
ID = 3060
pos = -9, -66

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(8) >= 0 && animelemtime(9) < 0
ID = 3060
pos = -15, -38

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(9) >= 0 && animelemtime(10) < 0
ID = 3060
pos = 24, 6

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(10) >= 0 && animelemtime(18) < 0
ID = 3060
pos = 64, 0

[State 1620, 11.1] ;抓人前端手臂
type = Explod
trigger1 = AnimElem = 10
anim = 1621+var(55)*30000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5

[State 0, Explod];折断骨头火花
type = Explod
trigger1 = animelem = 15
anim = f2
pos = -9,-18
postype = p1  ;p2,front,back,left,right
sprpriority = 3

[State 0, Explod];小小的玫瑰花
type = Explod
trigger1 = animelem = 15
anim = 3068
pos = -9,-18
postype = p1  ;p2,front,back,left,right
sprpriority = 6

[State 200, snd];折断骨头的声音
type=playsnd
trigger1= animelem=15 
value=1,7

[State 801, Damage]
Type = TargetLifeAdd
Trigger1 = animelem = 15
value = -50
ID = 3060
kill = 0
absolute = 1

[State 801, LEGS p2]
type = TargetState
trigger1 = animelem = 10
value = 3161
ignorehitpause = 1
ID = 3060

;--------------------------------------------------------------
[State 801, FACE p2]
type = TargetState
trigger1 = animelem = 18
value = 3162
ignorehitpause = 1
ID = 3060

[State 1401, bind]
type = TargetBind
trigger1 = animelemtime(18) >= 0 && animelemtime(19) < 0
ID = 3060
pos = 2, -7

[State 1401, bind]
type = TargetBind
trigger1 = animelemtime(19) >= 0 && animelemtime(27) < 0
ID = 3060
pos = -20, 0

[State 1401, bind]
type = BindToTarget
trigger1 = animelemtime(20) >= 0 && animelemtime(27) < 0
ID = 3060
pos = -30, 0

[State 3303, Explod];地面火花后
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = animelem = 18
anim = f66
pos = 0,0
id = 12001
postype = p1  ;p2,front,back,left,right
sprpriority = 2
ownpal = 1
persistent = 0

[State 3303, Explod];地面火花前
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = animelem = 18
anim = f67
pos = 0,0
id = 12001
postype = p1  ;p2,front,back,left,right
sprpriority = 0
ownpal = 1
persistent = 0

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 1
anim = f24
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 1
anim = f24
facing = -1
pos = 10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 300, Land];撞地声效
type = PlaySnd
trigger1 = animelem = 18
value = f5000,ifelse(StageVar(info.author) = "water",10,1)

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 18
time = 17
ampl = -5
freq = 180

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 24
value = -50
kill = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 24
anim = f2
pos = 8,-38
postype = p1  ;p2,front,back,left,right
sprpriority = 3

[State 0, Explod]
type = Explod
trigger1 = animelem = 24
anim = 3068
pos = -9,-18
postype = p1  ;p2,front,back,left,right
sprpriority = 6

[State 200, snd]
type=playsnd
trigger1= animelem=24 
value=1,7

[State 1034, front]
type = SprPriority
trigger1 = animelem = 19
value = 2

;----------------------------------------------------------------------
[State 801, ARMS p2]
type = TargetState
trigger1 = animelem = 28
value = 3163
ignorehitpause = 1
ID = 3060

[State 1000, Arms];手臂前端
type=explod
trigger1 = animelem = 28
anim=1221+var(55)*30000
sprpriority = 7
bindtime = -1
postype=p1
pos= 0, 0
ownpal = 1
removeongethit=1
ignorehitpause = 0

[State 801, Damage]
Type = TargetLifeAdd
Trigger1 = animelem = 33
value = -50
kill = 0
ID = 3060
absolute = 1

[State 200, snd]
type=playsnd
trigger1= animelem=33 
value=1,7

[State 0, Explod];火花
type = Explod
trigger1 = animelem = 33
anim = f2
pos = 1,-21
postype = p1  ;p2,front,back,left,right
sprpriority = 3

[State 0, Explod];玫瑰
type = Explod
trigger1 = animelem = 33
anim = 3068
pos = -9,-18
postype = p1  ;p2,front,back,left,right
sprpriority = 6

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(28) >= 0 && animelemtime(35) < 0
ID = 3060
pos = -36, 0

;----------------------------------------------------------------------
[State 801, THROW p2]
type = TargetState
trigger1 = animelem = 35
value = 3164
ignorehitpause = 1
ID = 3060

[State 1401, bind]
type = TargetBind
trigger1 = animelemtime(35) >= 0 && animelemtime(36) < 0
ID = 3060
pos = 17, -62

[State 1401, bind]
type = TargetBind
trigger1 = animelemtime(36) >= 0 && animelemtime(37) < 0
ID = 3060
pos = 16, -54

[State 1401, bind]
type = TargetBind
trigger1 = animelemtime(37) >= 0 && animelemtime(38) < 0
ID = 3060
pos = 39, -79

[State 5100, 10];蹬人
type = PlaySnd
trigger1 = animelem = 39
value = 2,2

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 38
value = -50
kill = 0

[State 1401, FALL p2]
type = TargetState
trigger1 = animelem = 39
value = 3165
ignorehitpause = 1
ID = 3060

;----------------------------------------------------------------------
[State 1001, 0]
type = PosSet
trigger1 = animelem = 44
y = 0

[State 280, go]
type = VelSet
trigger1 = animelem = 49
x = 8

[State 280, go]
type = VelSet
trigger1 = animelemtime(49) = 19
x = 15.199951171875

[State 280, go]
type = VelSet
trigger1 = animelem = 50
x = 6.47991943359375

[State 280, go]
type = Velmul
trigger1 = animelemtime(50) > 0
x = 0.8999948194825133987020448915388

[State 210, 1]
type = hitdef
trigger1 = animelem = 49
attr = S, NA
damage = 25
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = 2
sparkxy = -15, -60
hitsound = 5,1
guardsound = 6,2
guard.sparkno = 42
pausetime = 4,0
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = 0
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
p1stateno = 3066
p2stateno = 3131
p2facing = 1 
getpower = 0
givepower = 31, 31    
snap = 0
kill = 0
id = 3060

[State 220, Explod]
type = Explod
trigger1 = animelem = 40,>=0
trigger1 = movehit = 1
anim = 3068
pos = -15,-47
postype = p2  ;p2,front,back,left,right
facing = -1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 1

[State 801, 10]
type = ChangeState
Trigger1 = animtime = 0
value = 0
ctrl = 1 

;-------------------------------------------------------------------------
[Statedef 3066]
type = S                    
movetype= A                    
physics = N                     
juggle  = 0                             
ctrl = 0                       
anim = 3062+var(55)*30000                   
sprpriority = 2
velset = 8,0

[State 2010, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 1060]
type = PosAdd
trigger1 = animelem = 1
x = (P2dist X)-5

[State 1034, left]
type = TargetFacing
trigger1 = animelem = 1
value = -1

[State 200, snd];HEY来HEY去的
type=playsnd
trigger1= animelem=2 
trigger2 = animelemtime(6) = 4
trigger3 = animelemtime(12) = 4
trigger4 = animelemtime(18) = 4
value=10,2

[State 200, snd];什么BILIS
type=playsnd
trigger1= animelem=37
value=2,2

[State 3035, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = -1
length = 9
framegap = 4
palcolor = 0
trans = add1
palbright = 96,96,128
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3200, AfterImageTime]
type = AfterImageTime
trigger1 = movetype = I
time = 1

[State 4100,4]
type = PlayerPush
trigger1 = animelemtime(24) < 0
value = 0

[State 1001, 0]
type = PosSet
trigger1 = !time
y = 0

[State 280, go]
type = VelSet
trigger1 = animelem = 5
trigger2 = animelem = 17
x = -8

[State 280, go]
type = VelSet
trigger1 = animelem = 11
trigger2 = animelem = 23
x = 8

[State 280, go]
type = VelSet
trigger1 = animelem = 28
x = 1

[State 1030, 1]
type = StateTypeSet
trigger1 = animelem = 37
statetype = A

[State 280, go]
type = VelSet
trigger1 = animelem = 37
x = 7.8749542236328125;  
y = -8.5625 

[State 1030, 1]
type = Velmul
trigger1 = animelemtime(37) > 0 
x= 0.89999476838476786160633839249903

[State 1030, 1]
type = VelAdd
trigger1 = animelemtime(37) > 0 
Y = 0.4375

[State 0, Explod];打击火花
type = Explod
trigger1 = animelemtime(12) = 4
anim = f2
pos = 47,-47
postype = p1  ;p2,front,back,left,right
sprpriority = 3

[State 0, Explod];玫瑰
type = Explod
trigger1 = animelemtime(12) = 4
anim = 3068
pos = 47,-47
postype = p1  ;p2,front,back,left,right
sprpriority = 3

[State 0, Explod];打击火花
type = Explod
trigger1 = animelemtime(6) = 4
trigger2 = animelemtime(18) = 4
anim = f2
pos = -47,-47
postype = p1  ;p2,front,back,left,right
sprpriority = 3

[State 0, Explod];玫瑰
type = Explod
trigger1 = animelemtime(6) = 4
trigger2 = animelemtime(18) = 4
anim = 3068
pos = -47,-47
postype = p1  ;p2,front,back,left,right
sprpriority = 3

[State 1201, HitAdd]
type = HitAdd
trigger1 = animelemtime(6) = 4
trigger2 = animelemtime(12) = 4
trigger3 = animelemtime(18) = 4
value = 1

[State 1201, HitAdd]
type = TargetLifeAdd
trigger1 = animelemtime(6) = 4
trigger2 = animelemtime(12) = 4
trigger3 = animelemtime(18) = 4
value = -20
kill = 0
ID = 3060

[State 5100, 10]
type = PlaySnd
trigger1 = animelemtime(6) = 4
trigger2 = animelemtime(12) = 4
trigger3 = animelemtime(18) = 4
value = F5,1

[State 13000, EnvColor]
type = EnvColor
trigger1 = animelemtime(6) = 4
trigger2 = animelemtime(12) = 4
trigger3 = animelemtime(18) = 4
trigger4 = Animelem = 27
trigger5 = Animelem = 36
trigger6 = Animelem = 37
trigger7 = Animelem = 40
trigger8 = Animelem = 42
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 1

[State 900, hits forward]
type = TargetState
trigger1 = animelemtime(6) = 4
trigger2 = animelemtime(18) = 4
value = 3166
ignorehitpause = 1
ID = 3060

[State 900, hits back]
type = TargetState
trigger1 = animelemtime(12) = 4
value = 3167
ignorehitpause = 1
ID = 3060

[State 1000, fx];环状闪光
type = Explod
trigger1 = animelem = 35
anim = 3313
pos = 20,-80
postype = p1
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 0
id = 1000

[State 230, 1]
type = HitDef
trigger1 = Animelem = 27
trigger2 = Animelem = 36
attr = S, HA  
guardflag = M                  
hitflag = MAF    
animtype = hard
ground.type = low
damage = 30, 0   
hitsound = 5,1
guardsound = 6,2
sparkno = 2
sparkxy = -10, -55    
guard.sparkno = 42
guard.sparkxy = 0, -55             
priority = 4, Hit
pausetime = 3,13
ground.slidetime = 30
ground.hittime = 30
ground.velocity = -8.6953125
air.velocity = -3.5,-6
guard.velocity = -12
guard.pausetime = 11,11
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .5  
kill = 0
ID = 3060

[State 240, 9]
type = HitDef
trigger1 = Animelem = 37
trigger2 = Animelem = 40
damage = 50, 0   
hitsound = 5,4
guardsound = 6,2 
sparkno = 2
sparkxy = -10, -75    
guard.sparkno = 42
guard.sparkxy = 0, -75         
attr = A, HA  
guardflag = M                  
hitflag = MAF  
priority = 5, Hit                                          
pausetime = 3,5                                                                   
ground.velocity = -1,-8                            
air.velocity = -1,-7                              
guard.velocity = -12                                  
guard.pausetime = 0,11                            
guard.slidetime = 22                               
guard.hittime = 22                             
guard.ctrltime = 22                                
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0                  
yaccel = .5                                                
fall = 1
fall.recover = 1
fall.recovertime = 120
kill = 0
ID = 3060

[State 240, 9]
type = HitDef
trigger1 = Animelem = 42
animtype = up
air.animtype = up
guardflag = MA
damage = 50, 0   
hitsound = 5,4
guardsound = 6,2 
sparkno = 2
sparkxy = -10, -75    
guard.sparkno = 42
guard.sparkxy = 0, -75         
attr = A, HA  
guardflag = M                  
hitflag = MAF  
priority = 5, Hit                                          
pausetime = 3,12                                                                   
ground.velocity = -1,-1                            
air.velocity = -1,-1                              
guard.velocity = -12                                  
guard.pausetime = 0,11                            
guard.slidetime = 22                               
guard.hittime = 22                             
guard.ctrltime = 22                                
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0                  
yaccel = .5 
p1stateno = 3067
kill = 0                                               
fall = 1
fall.recover = 1
fall.recovertime = 120
ID = 3060

[State 220, Explod]
type = Explod
trigger1 = movehit = 1
anim = 3068
pos = -10,-55
postype = p2  ;p2,front,back,left,right
facing = -1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 1

[State 1000, 7]
type = ChangeState
Triggerall = animelemtime(37) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 3070
ctrl = 1 

;-------------------------------------------------------------------------
[StateDef 3067]
MoveType = A
physics = N
VelSet = 0,0
Anim = 1120+var(55)*30000
SprPriority = 2
ctrl = 0

[State 2010, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 1034, left]
type = TargetFacing
trigger1 = animelem = 1
value = -1

[State 801, fly p2]
type = TargetState
trigger1 = animelem = 1
value = 1130
ignorehitpause = 1
ID = 3060

[State 805, hitspark];抓人火花
type = Explod
trigger1 = animelem = 1
anim = f9
pos = 17, -16
postype = p1
SprPriority = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 1120, 3.1] ;Piece of leg
type = Explod
trigger1 = AnimElem = 2
anim = 1125+var(55)*30000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 1120, 3.1] ;Piece of leg
type = Explod
trigger1 = AnimElem = 3, >= 0
trigger1 = Pos Y < 0
anim = 1126+var(55)*30000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = f800,0

[State 801, fat]
type = Width
trigger1 = 1
edge = 64

[State 810, bind]
type = TargetBind
trigger1 = animelem = 1
trigger2 = animelemtime(1) >= 0 && animelemtime(2) < 0
ID = 3060
pos = 0, -61

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(2) >= 0 
ID = 3060
pos = 7, -47

[State 1040, go]
type = VelSet
trigger1 = animelem = 3
y = 2.5

[State 1040, go]
type = VelAdd
trigger1 = time > 0
y = 0.1

[State 1000, 7]
type = ChangeState
Triggerall = animelemtime(3) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 3068
ctrl = 1 

;-------------------------------------------------------------------------
[StateDef 3068]
type    = S
movetype= A
physics = S
anim = 1121+var(55)*30000
velset = 0,0

[State 1121, 1]
type = width
trigger1 = Time = 0
edge = 35,0

[State 1121, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1121, 1.1] ;Piece of leg
type = Explod
trigger1 = Time = 0
anim = 1127+var(55)*30000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 1000, remove fx]
type = RemoveExplod
trigger1 = !time
ID = 1029

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 3890
pos = 5,10
postype = p1  ;p2,front,back,left,right
sprpriority = 7

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = f5000,ifelse(StageVar(info.author) = "water",10,2)

[State 3303, Explod]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = animelem = 1
anim = f62
pos = 00,0
id = 12001
postype = p1  ;p2,front,back,left,right
sprpriority = 2
ownpal = 1
persistent = 0

[State 3303, Explod]
type = null;Explod
triggerall = StageVar(info.author) != "water"
trigger1 = animelem = 1
anim = f67
pos = 0,0
id = 12001
postype = p1  ;p2,front,back,left,right
sprpriority = 0
ownpal = 1
persistent = 0

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 1
anim = f24
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 1
anim = f24
facing = -1
pos = 10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 1
anim = f25
pos = -15,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 1
anim = f25
facing = -1
pos = 15,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 1
time = 12
ampl = -5
freq = 180

[State 1011, 0]
type = PosSet
trigger1 = !time
y = 0

[State 801, fat]
type = Width
trigger1 = animelem = 2, < 0
edge = 64

[State 1121, 7] ;Shake
type = EnvShake
Trigger1 = Time = 0
time = 15

[State 1121, 8]
type = TargetState
trigger1 = Time = 0
value = 1131
ignorehitpause = 1
ID = 3060

[State 801, Damage]
Type = TargetLifeAdd
Trigger1 = animelem = 1 
value = -60
ID = 3060
absolute = 1

[State 810, bind]
type = TargetBind
trigger1 = animelem = 1
ID = 3060
pos = 10, 0

[State 1121, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 3069

;---------------------------------------------------------------------------
;Snatch (jump back)
[Statedef 3069]
type    = A
movetype= I
physics = N
anim = 1122+var(55)*30000
velset = -4,-7.5

[State 1040, go]
type = VelMul
trigger1 = 1
x = 1

[State 1122, 1]
type = VelAdd
trigger1 = 1
y = 0.5

[State 1122, 2]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3070

;-------------------------------------------------------------------------
[StateDef 3070]
type = s
MoveType = I
VelSet = 0, 0
Anim = 3063+var(55)*30000
SprPriority = 2 
ctrl=0

[State 3035, 1]
type = AfterImage
trigger1 = time = 0
time = 0

[State 1001, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1001, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 

;-------------------------------------------------------------------------
[StateDef 3160]
MoveType =  H
VelSet = 0, 0
sprpriority = 1 
Ctrl = 0

[State 811]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 811, Anim]
Type = ChangeAnim2
Trigger1 = !Time
Value = 3064+var(55)*30000

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

[StateDef 3161]
MoveType =  H
VelSet = 0, 0
sprpriority = 4 
Ctrl = 0

[State 811]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1505, Anim 5050] 
type = sprpriority
Trigger1 = !Time
trigger1 = !SelfAnimExist(5975+var(55)*30000)
value = -4

[State 1505, Anim 5050] 
type = ChangeAnim
Trigger1 = !Time
trigger1 = SelfAnimExist(5975+var(55)*30000)
value = 5975+var(55)*30000

[State 700,0]
type = ChangeAnim
triggerall = anim  = 5975+var(55)*30000
trigger1 = animtime = 0
value = anim+var(55)*30000
elem = 3

[State 1505, Anim 5050] 
type = ChangeAnim2
Trigger1 = !Time
trigger1 = !SelfAnimExist(5975+var(55)*30000)
value = 1014+var(55)*30000

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;-------------------------------------------------------------------------
[StateDef 3162]
MoveType =  H
VelSet = 0, 0
sprpriority = 1 
Ctrl = 0

[State 811]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 811, Anim]
Type = ChangeAnim2
Trigger1 = !Time
Value = 3065+var(55)*30000

[State 820, 2]
type = SelfState
trigger1 = Time = 500
value = 5050

[StateDef 3163]
MoveType =  H
VelSet = 0, 0
sprpriority = 4 
Ctrl = 0

[State 811]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1505, Anim 5050] 
type = ChangeAnim
Trigger1 = !Time
trigger1 = SelfAnimExist(5970+var(55)*30000)
value = 5970+var(55)*30000

[State 1505, Anim 5050] 
type = sprpriority
Trigger1 = !Time
trigger1 = !SelfAnimExist(5970+var(55)*30000)
value = -4

[State 700,0]
type = ChangeAnim
triggerall = anim  = 5970+var(55)*30000
trigger1 = animtime = 0
value = anim+var(55)*30000
elem = 3

[State 1505, Anim 5050] 
type = ChangeAnim2
Trigger1 = !Time
trigger1 = !SelfAnimExist(5970+var(55)*30000)
value = 1006+var(55)*30000

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;-------------------------------------------------------------------------
[StateDef 3164]
MoveType =  H
VelSet = 0, 0
sprpriority = 1 
Ctrl = 0

[State 811]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 811, Anim]
Type = ChangeAnim2
Trigger1 = !Time
Value = 3067+var(55)*30000

[State 820, 2]
type = SelfState
trigger1 = Time = 500
value = 5050

[StateDef 3165]
Type = A
MoveType =  H
VelSet = -0.5, -12
sprpriority = 1 
Ctrl = 0

[State 1040, go]
type = VelAdd
trigger1 = time > 0
y = 0.5

[State 811, Anim]
Type = ChangeAnim
Trigger1 = Time = 10
Value = 5160+var(55)*30000

[State 811, 2]
type = SelfState
Triggerall = time > 1
Trigger1 = vel y > 0 && pos y >= 0
value = 5100

;-------------------------------------------------------------------------
[Statedef 3166]
type = S
physics = N
movetype = H
ctrl = 0
velset = 0,0
facep2 = 0

[State 1401, width]
type = Width
trigger1 = 1
edge = 64,64

[State 700,0]
type = ChangeAnim
triggerall = time < 11
trigger1 = time = 1
value = anim
elem = AnimElemNo(0)

[State 700,2]
type = PosAdd
triggerall = time < 11
trigger1 = Time%2=0
x = -1

[State 700,2]
type = PosAdd
triggerall = time < 11
trigger1 = Time%2=1
x = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 0, PosSet]
type = posset
trigger1 = time = 0
y = 0

[State 3100, 2]
type = Velset
trigger1 = time = 11
x = 2.1796875

[State 3100, 2]
type = Velset
trigger1 = time = 30
x = 0

[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = time = 0
value = 5012+var(55)*30000

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 5012 +var(55)*30000&& !animtime
value = 5017+var(55)*30000

[State 0, ChangeAnim2]
type = SelfState
trigger1 = time = 100
value = 0

;-------------------------------------------------------------------------
[Statedef 3167]
type = S
physics = N
movetype = H
ctrl = 0
velset = 0,0
facep2 = 0

[State 1401, width]
type = Width
trigger1 = 1
edge = 64,64

[State 700,0]
type = ChangeAnim
triggerall = time < 11
trigger1 = time = 1
value = anim
elem = AnimElemNo(0)

[State 700,2]
type = PosAdd
triggerall = time < 11
trigger1 = Time%2=0
x = -1

[State 700,2]
type = PosAdd
triggerall = time < 11
trigger1 = Time%2=1
x = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 0, PosSet]
type = posset
trigger1 = time = 0
y = 0

[State 3100, 2]
type = Velset
trigger1 = time = 11
x = -2.1796875 

[State 3100, 2]
type = Velset
trigger1 = time = 30
x = 0

[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = time = 0
value = 5012+var(55)*30000

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 5012 +var(55)*30000&& !animtime
value = 5017+var(55)*30000

[State 0, ChangeAnim2]
type = SelfState
trigger1 = time = 100
value = 0
;---------------------------------------------------------------------------
[Statedef 3131]
type = S
physics = N
movetype = H
ctrl = 0
velset = 0,0
facep2 = 0

[State 1401, width]
type = Width
trigger1 = 1
edge = 64,64

[State 700,0]
type = ChangeAnim
triggerall = time < 11
trigger1 = time = 1
value = anim
elem = AnimElemNo(0)

[State 700,2]
type = PosAdd
triggerall = time < 11
trigger1 = Time%2=0
x = -1

[State 700,2]
type = PosAdd
triggerall = time < 11
trigger1 = Time%2=1
x = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 0, PosSet]
type = posset
trigger1 = time = 0
y = 0

[State 3100, 2]
type = Velset
trigger1 = time = 11
x = -2.1796875 

[State 3100, 2]
type = Velset
trigger1 = time = 30
x = 0

[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = time = 0
value = 5012+var(55)*30000

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 5012 +var(55)*30000&& !animtime
value = 5017+var(55)*30000

[State 0, ChangeAnim2]
type = SelfState
trigger1 = time = 100
value = 0

;-------------------------------------------------------------------------
;============================================================
[Statedef 24300]
type = A
movetype = I
physics = N
anim = 99999
velset = 0, 0
ctrl = 0

[State 3020, 1]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28001)
triggerall = teamside = 1
trigger1 = !time
anim = F28001
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28001)
triggerall = teamside = 1
trigger1 = !time
anim = F28001
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28002)
triggerall = teamside = 1
trigger1 = !time
anim = F28002
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28002)
triggerall = teamside = 1
trigger1 = !time
anim = F28002
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28003)
triggerall = teamside = 1
trigger1 = !time
anim = F28003
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28003)
triggerall = teamside = 1
trigger1 = !time
anim = F28003
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28004)
triggerall = teamside = 1
trigger1 = !time
anim = F28004
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28004)
triggerall = teamside = 1
trigger1 = !time
anim = F28004
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28005)
triggerall = teamside = 1
trigger1 = !time
anim = F28005
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28005)
triggerall = teamside = 1
trigger1 = !time
anim = F28005
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28006)
triggerall = teamside = 1
trigger1 = !time
anim = F28006
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28006)
triggerall = teamside = 1
trigger1 = !time
anim = F28006
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28007)
triggerall = teamside = 1
trigger1 = !time
anim = F28007
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28007)
triggerall = teamside = 1
trigger1 = !time
anim = F28007
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28011)
triggerall = teamside = 2
trigger1 = !time
anim = F28011
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28011)
triggerall = teamside = 2
trigger1 = !time
anim = F28011
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28012)
triggerall = teamside = 2
trigger1 = !time
anim = F28012
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28012)
triggerall = teamside = 2
trigger1 = !time
anim = F28012
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28013)
triggerall = teamside = 2
trigger1 = !time
anim = F28013
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28013)
triggerall = teamside = 2
trigger1 = !time
anim = F28013
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28014)
triggerall = teamside = 2
trigger1 = !time
anim = F28014
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28014)
triggerall = teamside = 2
trigger1 = !time
anim = F28014
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28015)
triggerall = teamside = 2
trigger1 = !time
anim = F28015
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28015)
triggerall = teamside = 2
trigger1 = !time
anim = F28015
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28016)
triggerall = teamside = 2
trigger1 = !time
anim = F28016
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28016)
triggerall = teamside = 2
trigger1 = !time
anim = F28016
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28017)
triggerall = teamside = 2
trigger1 = !time
anim = F28017
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28017)
triggerall = teamside = 2
trigger1 = !time
anim = F28017
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 4300]
type = RemoveExplod
trigger1 = root,StateNo != [3600,3632]
trigger1 = root,stateno != [3060,3068]
id = 8000

[State Snd]
type = PlaySnd
trigger1 = root,StateNo != [3600,3632]
trigger1 = root,stateno != [3060,3068]
value = F23997,3
persistent = 0

[State 4300]
type = Explod
triggerall = !NumExplod(4291)
triggerall = teamside = 1
trigger1 = root,StateNo != [3600,3632]
trigger1 = root,stateno != [3060,3068]
anim = F24293
id = 4291
postype = back
pos = 0, 0
bindtime = -1
scale = 1,1
sprpriority = -11
ownpal = 1
persistent = 0
supermovetime = 99999
pausemovetime = 99999

[State 4300]
type = Explod
triggerall = !NumExplod(4291)
triggerall = teamside = 2
trigger1 = root,StateNo != [3600,3632]
trigger1 = root,stateno != [3060,3068]
anim = F24294
id = 4291
postype = back
pos = 0, 0
bindtime = -1
scale = 1,1
sprpriority = -11
ownpal = 1
persistent = 0
supermovetime = 99999
pausemovetime = 99999

[State 4300]
type = DestroySelf
triggerall = Time > 0
trigger1 = root,StateNo != [3600,3632]
trigger1 = root,stateno != [3060,3068]

;============================================================
[Statedef 11111]
type    = S
movetype= A
physics = S
poweradd= 100
velset = 0
ctrl = 0
anim = 1110+var(55)*30000
juggle = 4
sprpriority = 2

[State 1100, 1]
type = PlaySnd
trigger1 = Time = 2
value = s10,5 ;"Vertical Arrow!"

[State 1100, 2]
type = PlaySnd
trigger1 = Time = 5
value = s10,26

[State 1100, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage    = 50,2
guardflag = MA
priority = 5
pausetime = 12,12
sparkxy = -10,-65
sparkno = 2
guard.sparkno = 42
hitsound = S1,3
guardsound = S2,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 23
ground.velocity = -2.5,-7
guard.velocity = -7
air.velocity = -3,-5
airguard.velocity = -3,-3
fall = 1
fall.recovertime = 10
ID = 1100 ;For chaining into snatch

[State a]
type = helper
trigger1 = var(55) = 1
trigger1 = AnimElem = 4
name = "shadow"
helpertype = normal
ID = 1135
pos = 0,0
postype = p1
stateno = 1135
keyctrl = 0
ownpal = 1

[State 1100, 4]
type = ChangeState
trigger1 = AnimElem = 5
value = 1101

;---------------------------------------------------------------------------
[Statedef 22222]
type    = A
movetype= A
physics = N
juggle  = 0
anim = 1205+var(55)*30000
ctrl = 0

[State 1205, 1]
type = HitDef
Trigger1 = Time = 0
attr = A, ST
getpower  = 70
givepower = 70
hitflag = M ;+
priority = 2, Miss    ;Throw has low priority, should be miss or dodge type.
sprpriority = -2
sparkno = -1
p2facing = 1
p1stateno = 1220
p2stateno = 1230
fall = 1
ChainID = 1150        ;Chain from Spinfall
ID = 1200

[State 1205, 2]
type = VelAdd
trigger1 = 1
y = .45

[State 1205, 3]
type = ChangeState
trigger1 = Vel y > 0
trigger1 = Pos y >= 0
value = 52

;---------------------------------------------------------------------------
[Statedef 21111]
type    = A
movetype= A
physics = N
juggle  = 0
anim = 1205+var(55)*30000
ctrl = 0

[State 1205, 1]
type = HitDef
Trigger1 = Time = 0
attr = A, ST
getpower  = 70
givepower = 70
hitflag = M ;+
priority = 2, Miss    ;Throw has low priority, should be miss or dodge type.
sprpriority = -2
sparkno = -1
p2facing = 1
p1stateno = 1220
p2stateno = 1230
fall = 1
ChainID = 1150        ;Chain from Spinfall
ID = 1200

[State 1205, 2]
type = VelAdd
trigger1 = 1
y = .45

[State 1205, 3]
type = ChangeState
trigger1 = Vel y > 0
trigger1 = Pos y >= 0
value = 52

;-------------------------------------------------------------------------------------------
[Statedef 32222]
type    = S
movetype= A
physics = S
poweradd= 100
velset = 0
ctrl = 0
anim = 1110+var(55)*30000
juggle = 4
sprpriority = 2

[State 1100, 1]
type = PlaySnd
trigger1 = Time = 2
value = s10,5 ;"Vertical Arrow!"

[State 1100, 2]
type = PlaySnd
trigger1 = Time = 5
value = s10,26

[State 1100, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage    = 50,2
guardflag = MA
priority = 5
pausetime = 12,12
sparkxy = -10,-65
sparkno = 2
guard.sparkno = 42
hitsound = S1,3
guardsound = S2,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 23
ground.velocity = -2.5,-7
guard.velocity = -7
air.velocity = -3,-5
airguard.velocity = -3,-3
fall = 1
fall.recovertime = 10
ID = 1100 ;For chaining into snatch

[State a]
type = helper
trigger1 = var(55) = 1
trigger1 = AnimElem = 4
name = "shadow"
helpertype = normal
ID = 1135
pos = 0,0
postype = p1
stateno = 1135
keyctrl = 0
ownpal = 1

[State 1100, 4]
type = ChangeState
trigger1 = AnimElem = 5
value = 1101
