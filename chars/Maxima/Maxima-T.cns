;-----------------------------------------------------------------------
;超必杀技
;-----------------------------------------------------------------------
[Statedef 3000]
type = S
movetype = A
physics = S
anim = ifelse (Command = "buster2", 3001, 3000)
sprpriority = 2
juggle = 7
velset = 0,0
ctrl = 0

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1
[State 3000, PowerSet]
type = VarSet
trigger1 = Time = 0
var(5) = ifelse (Command = "buster2", 1, 0)

[State 3000, EnvColor]
type = EnvColor
trigger1 = Time < 29
value = ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0)
time = 1
under = 1

[State 3000, PalFX]
type = PalFX
trigger1 = (PrevStateNo = [1000, 1070]) && Time < 31
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1

[State 3000, Pause]
type = SuperPause
trigger1 = Time = 1
anim = -1
sound = f9000,0
time = 28
movetime = 28
poweradd = ifelse(fvar(30) > 0,0,-1000)
darken = 0

[State 3000, BG Cleaner]
type = AssertSpecial
trigger1 = Time < 29
flag= noFG

[State 3000, Spark Back]
type = Explod
trigger1 = Time = 3
anim = f7000
scale = 0.5,0.5
postype = p1
pos = -21, -8
sprpriority = -2
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3000, Spark Front]
type = Explod
trigger1 = Time = 3
anim = f7010
scale = 0.5,0.5
postype = p1
sprpriority = 10
pos = -21, -8
ontop = 1
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3000, Muteki]
type = NotHitBy
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(8) < 1 
value = SCA

[State 3000, EnvShake]
type = EnvShake
trigger1 = AnimElem = 6
time = 20
ampl = -9

[State 3000, Velocity]
type = VelSet
trigger1 = (Time = ifelse (Var(5), 61, 51)) || (Time = ifelse (Var(5), 81, 71))
y = ifelse (Time = 61 || Time = 51, -30, 30)

[State 3000, StateTypeSet]
type = StateTypeSet
trigger1 = Time = ifelse (Var(5), 61, 51)
StateType = A
Physics = N

[State 3000, Gravity]
type = Gravity
trigger1 = Vel Y

[State 3000, Velocity]
type = VelSet
trigger1 = (Time = ifelse (Var(5), 68, 58)) || (Time = ifelse (Var(5), 88, 78))
x = ifelse (Time = 68 || Time = 58, ifelse (Var(5), 9, 4), 0)

[state 3000, Anim]
type = ChangeAnim
trigger1 = Vel Y > 0
value = 3010
elem = AnimElemNo(0) - 7
persistent = 0

[State 3000, Smog]
type = Explod
trigger1 = AnimElemTime(6) = 1
anim = 898
pos = -22,3
postype = p1
supermove = 1
bindtime = 1
sprpriority = 3
ownpal = 1

[State 3121, 1]
type = Helper
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElemTime(6) = 1
id = 8882
postype = p1
pos = -22,3
sprpriority = 10
stateno = 11492
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State 3000, Reversal]
type = ReversalDef
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(8) < 0
reversal.attr = SCA, AA, AP
numhits = 0
pausetime = 0,12
sparkno = 42
hitsound = 6,1
persistent = 0

[state 3000, Voice]
type = PlaySnd
trigger1 = Anim != 3010 && AnimElem = 3
value = 0, 21
channel = 0

[state 3000, Voice]
type = PlaySnd
trigger1 = Anim != 3010 && AnimElem = 6
value = 0, 22
channel = 0

[state 3000, Effect]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1, 33
channel = 1

[State 3000, 8]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HP
damage = 120,30
animtype = Heavy
air.animtype = Up
priority = 7,Hit
hitflag = MAFD
guardflag = M
pausetime = 6,8
guard.pausetime = 7,7
sparkno = 3
guard.sparkno = 42
sparkxy = -8,-30
hitsound   = 5,1
guardsound = 6,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 15
ground.velocity = 0,-12
guard.velocity = -7
air.velocity = 0,-10
down.velocity = 0,-12
fall = 1
fall.recover = 0
air.recover = 0
recover = 0
persistent = 0

[State 3000, 8]
type = HitDef
trigger1 = Vel Y < 0
attr = A, HA
damage = 120,30
animtype = Heavy
air.animtype = Up
priority = 7,Hit
hitflag = -MAF
guardflag = M
pausetime = 1,1
guard.pausetime = 2,1
sparkno = 3
guard.sparkno = 42
sparkxy = -8,-50
hitsound   = 5,1
guardsound = 6,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 15
ground.velocity = 1,16
guard.velocity = -7
air.velocity = -8,16
airguard.velocity = -6,-3
down.velocity = 0,-12
fall = 1
fall.recover = 0
air.recover = 0
recover = 0
persistent = 0

[State 3000, 8]
type = HitDef
trigger1 = Vel Y > 0  
attr = A, HA
damage = 120,30
animtype = Heavy
air.animtype = Up
priority = 5,Hit
hitflag = MAF
guardflag = M
pausetime = 1,1
guard.pausetime = 2,1
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-50
hitsound   = 5,1
guardsound = 6,1
ground.type = High
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = 1,16
guard.velocity = -7
air.velocity = -8,16
airguard.velocity = -6,-3
down.velocity = -1,-12
fall = 1
fall.recover = 0
air.recover = 0
recover = 0
persistent = 0

[State 3000, EnvColor]
type = EnvColor
trigger1 = MoveHit
value = 255, 255, 255
time = 2
under = 1
ignorehitpause = 1

[State 3000, MoveHitReSet]
type = MoveHitReSet
trigger1 = MoveHit
ignorehitpause = 1

[State 3000, StateChange]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -1
value = 3005
ctrl = 0

;-----------------------------------------------------------------------
[Statedef 3005]
type = C
movetype = A
physics = C
sprpriority = 2
juggle = 15
velset = 0,0
ctrl = 0

[state 3005, Anim]
type = ChangeAnim
trigger1 = Time = 2
value = 3005

[state 3005, Position]
type = PosSet
trigger1 = Time = 2
y = 0

[State 3005, Reversal]
type = ReversalDef
trigger1 = AnimElemTime(5) < 0
reversal.attr = SCA, AA, AP
numhits = 0
pausetime = 0,0
sparkno = 42
hitsound = 6,1

[State 3005, Push]
type = PlayerPush
trigger1 = AnimElemTime(3) < 0
value = 0

[State 3121, 1]
type = Helper
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
id = 8882
postype = p1
pos = 0,10
sprpriority = 10
stateno = 11492
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State 3005, Smog]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f63
pos = 0, 0
postype = p1
supermove = 1
bindtime = 1
sprpriority = 3
ownpal = 1

[State 3005, Smog]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = Time = 0
anim = f23
pos = 0, 0
postype = p1
supermove = 1
bindtime = 1
sprpriority = 3
ownpal = 1

[State 3005, Smog]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = Time = 0
anim = f25
pos = -10, 0
postype = p1
supermove = 1
bindtime = 1
sprpriority = 3
ownpal = 1

[State 3005, Smog]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = Time = 0
anim = f25
facing = -1
pos = 20, 0
postype = p1
supermove = 1
bindtime = 1
sprpriority = 3
ownpal = 1

[state 3005, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 1, 32
channel = 1

[State 3005, 2]
type = HitDef
trigger1 = Time > 1 && Time < 4
attr = C, HA
damage = 200,50
animtype = up
hitflag = MAD
guardflag = M
pausetime = 0,12
sparkno = 3
guard.sparkno = 42
sparkxy = -8,-22
hitsound   = 5,1
guardsound = 6,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 15
ground.velocity = -1,-10
guard.velocity = -7
air.velocity = -1,-8
airguard.velocity = -6,-3
down.velocity = -1,-10
ground.cornerpush.veloff = 0
fall = 1
fall.recover = 0
recover = 0
persistent = 0

[state 3005, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 3050]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 3000
sprpriority = 2
poweradd = ifelse(fvar(30) > 0,-1000,-2000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [3000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1
;-------------------------------------------------------------------------------------

[State 3400,SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
time = 30
movetime = 30
anim = -1
darken = 0
sound = f9000,1

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3400,Explod]
type = Explod
trigger1 = time=3
anim = f7100
scale = .5,.5
postype = p1
pos = -22,-5
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ownpal = 1

[State 3400,Explod]
type = Explod
trigger1 = time=3
anim = f7110
scale = .5,.5
postype = p1
pos = -22,-5
sprpriority = 3
supermove = 1
supermovetime = 9999
bindtime = 1
ownpal = 1

[State 3200, 4]
type = Explod
trigger1 = time=3
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=3
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3000, Reversal]
type = ReversalDef
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(8) < 0
reversal.attr = SCA, AA, AP
numhits = 0
pausetime = 0,12
sparkno = 42
hitsound = 6,1
persistent = 0

[State 3400,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S,NA
animtype  = Up
damage = 100,15
hitflag = MA
guardflag = M
pausetime = 0,3
sparkno = 2
guard.sparkno = 42
sparkxy = -25,-80
hitsound = 5,3
guardsound = 6,1
ground.type = High
ground.slidetime = 20
ground.hittime = 15
ground.velocity = 0,-12
ground.cornerpush.veloff = 0
air.velocity = 0,-10
air.cornerpush.veloff = 0
getpower = 0
yaccel = .5
fall = 1
fall.recover = 0

[State 3400,EnvColor]
type = EnvColor
trigger1 = Movehit
time = 1
under = 1
value = 255,255,255
ignorehitpause = 1
persistent = 0

[State 3400,PlaySnd]
type = PlaySnd
trigger1 = Time = 5
value = s0, 21

[State 3000, Smog]
type = Explod
trigger1 = AnimElemTime(6) = 1
anim = 898
pos = -22,3
postype = p1
supermove = 1
bindtime = 1
sprpriority = 3
ownpal = 1

[State 3121, 1]
type = Helper
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElemTime(6) = 1
id = 8882
postype = p1
pos = -22,3
sprpriority = 10
stateno = 11492
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State 3400,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3410
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 3410]
type    = A
movetype= A
physics = S
ctrl = 0
anim = 3410
sprpriority = 2

[State 3410,VarSet]
type = VarSet
trigger1 = Time = 0
var(19) = 0

[State 3410,AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 15
palmul = 1,1,1
palcontrast = 160,160,160
palbright = 0,0,0
PalAdd = 1,1,1
length = 5
framegap = 10
trans = add1

[State 3410,VelSet]
type = VelSet
trigger1 = 1
x = 13
y = -17

[State 3410,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = s0, 22

[State 3410,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = s1, 33

[State 3410,HitDef]
type = HitDef
trigger1 = Time = 0 && Var(10) = 0
attr = S, HA
animtype  = Hard
damage = 50,4
hitflag = MAF
guardflag = M
pausetime = 0,12
sparkno = 2
guard.sparkno = 42
sparkxy = -25,-80
hitsound = 5,1
guardsound = 6,1
ground.type = High
getpower = 0
yaccel = .5
guard.dist = 100
p2stateno = 3415
p2facing = 1

[State 3410,EnvColor]
type = EnvColor
trigger1 = Movehit
time = 1
under = 1
value = 255,255,255
ignorehitpause = 1
persistent = 0

[State 3410,ChangeState]
type = ChangeState
trigger1 = Pos Y < -200
value = 3412

[State 3410,ChangeState]
type = ChangeState
trigger1 = FrontEdgeDist < 5
value = 3414

[State 3410,ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;---------------------------------------------------------------------------
[Statedef 3411]
type    = A
movetype= A
physics = S
ctrl = 0
anim = 3410
sprpriority = 2

[State 3411,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = s3400,0

[State 3411,HitDef]
type = HitDef
trigger1 = Time = 0 && Var(10) = 0
attr = S, HA
animtype  = Hard
damage = 100,4
hitflag = MAF
guardflag = M
pausetime = 0,12
sparkno = 2
guard.sparkno = 42
sparkxy = -25,-80
hitsound = 5,1
guardsound = 6,1
ground.type = High
getpower = 0
yaccel = .5
guard.dist = 100
p2stateno = 3415
p2facing = 1

[State 3411,EnvColor]
type = EnvColor
trigger1 = Movehit
time = 1
under = 1
value = 255,255,255
ignorehitpause = 1
persistent = 0

[State 3411,VelSet]
type = VelSet
trigger1 = 1
x = 12
y = -12

[State 3411,AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 15
palmul = 1,1,1
palcontrast = 160,160,160
palbright = 0,0,0
PalAdd = 1,1,1
length = 5
framegap = 10
trans = add1

[State 3411,EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 15
freq = 90
ampl = 4
phase = 0

[State 1100, 1]
type = Helper
trigger1 = Time = 0
id = 1111
sprpriority = 3
postype = P1
pos = 0,30
stateno = 1003
helpertype = normal
keyctrl = 0 
ownpal = 1
Size.xscale = .7
Size.yscale = .7

[State 3411,ChangeState]
type = ChangeState
trigger1 = Pos Y < -200
value = 3412

[State 3411,ChangeState]
type = ChangeState
trigger1 = FrontEdgeDist < 5
value = 3414

[State 3411,ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;---------------------------------------------------------------------------
[Statedef 3412]
type    = A
movetype= A
physics = S
ctrl = 0
anim = 3410
sprpriority = 2

[State 3412,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = s3400,0

[State 3412,HitDef]
type = HitDef
trigger1 = Time = 0 && Var(10) = 0
attr = S, HA
animtype  = Hard
damage = 100,4
hitflag = MAF
guardflag = M
pausetime = 0,12
sparkno = 2
guard.sparkno =42
sparkxy = -25,-80
hitsound = 5,1
guardsound = 6,1
ground.type = High
getpower = 0
yaccel = .5
guard.dist = 100
p2stateno = 3415
p2facing = 1

[State 3412,EnvColor]
type = EnvColor
trigger1 = Movehit
time = 1
under = 1
value = 255,255,255
ignorehitpause = 1
persistent = 0

[State 3412,VelSet]
type = VelSet
trigger1 = 1
x = 12
y = 12

[State 3412,AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 15
palmul = 1,1,1
palcontrast = 160,160,160
palbright = 0,0,0
PalAdd = 1,1,1
length = 5
framegap = 10
trans = add1

[State 3412,EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 15
freq = 90
ampl = 4
phase = 0

[State 1100, 1]
type = Helper
trigger1 = Time = 0
id = 1111
sprpriority = 3
postype = P1
pos = 0,30
stateno = 1003
helpertype = normal
keyctrl = 0 
ownpal = 1
Size.xscale = .7
Size.yscale = .7

[State 3412,ChangeState]
type = ChangeState
trigger1 = Pos Y > -10
value = ifelse(Var(19) > 100,3005,3411)

[State 3412,ChangeState]
type = ChangeState
trigger1 = FrontEdgeDist < 5
value = 3413

[State 3412,ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;---------------------------------------------------------------------------
[Statedef 3413]
type    = A
movetype= A
physics = S
ctrl = 0
anim = 3410
sprpriority = 2

[State 3413,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = s3400,0

[State 3413,HitDef]
type = HitDef
trigger1 = Time = 0 && Var(10) = 0
attr = S, HA
animtype  = Hard
damage = 100,4
hitflag = MAF
guardflag = M
pausetime = 0,12
sparkno = 2
guard.sparkno = 42
sparkxy = -25,-80
hitsound = 5,1
guardsound = 6,1
ground.type = High
getpower = 0
yaccel = .5
guard.dist = 100
p2stateno = 3415
p2facing = 1

[State 3413,EnvColor]
type = EnvColor
trigger1 = Movehit
time = 1
under = 1
value = 255,255,255
ignorehitpause = 1
persistent = 0

[State 3413,VelSet]
type = VelSet
trigger1 = 1
x = -12
y = 12

[State 3413,AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 15
palmul = 1,1,1
palcontrast = 160,160,160
palbright = 0,0,0
PalAdd = 1,1,1
length = 5
framegap = 10
trans = add1

[State 3413,EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 15
freq = 90
ampl = 4
phase = 0

[State 1100, 1]
type = Helper
trigger1 = Time = 0
id = 1111
sprpriority = 3
postype = P1
pos = 0,30
stateno = 1003
helpertype = normal
keyctrl = 0 
ownpal = 1
Size.xscale = .7
Size.yscale = .7

[State 3413,ChangeState]
type = ChangeState
trigger1 = Pos Y > -10
value = ifelse(Var(19) > 100,3005,3414)

[State 3413,ChangeState]
type = ChangeState
trigger1 = BackEdgeDist < 5
value = 3412

[State 3413,ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;---------------------------------------------------------------------------
[Statedef 3414]
type    = A
movetype= A
physics = S
ctrl = 0
anim = 3410
sprpriority = 2

[State 3414,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = s3400,0

[State 3414,HitDef]
type = HitDef
trigger1 = Time = 0 && Var(10) = 0
attr = S, HA
animtype  = Hard
damage = 100,4
hitflag = MAF
guardflag = M
pausetime = 0,12
sparkno = 2
guard.sparkno = 42
sparkxy = -25,-80
hitsound = 5,1
guardsound = 6,1
ground.type = High
getpower = 0
yaccel = .5
guard.dist = 100
p2stateno = 3415
p2facing = 1

[State 3414,EnvColor]
type = EnvColor
trigger1 = Movehit
time = 1
under = 1
value = 255,255,255
ignorehitpause = 1
persistent = 0

[State 3414,VelSet]
type = VelSet
trigger1 = 1
x = -12
y = -12

[State 3414,AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 15
palmul = 1,1,1
palcontrast = 160,160,160
palbright = 0,0,0
PalAdd = 1,1,1
length = 5
framegap = 10
trans = add1

[State 3414,EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 15
freq = 90
ampl = 4
phase = 0

[State 1100, 1]
type = Helper
trigger1 = Time = 0
id = 1111
sprpriority = 3
postype = P1
pos = 0,30
stateno = 1003
helpertype = normal
keyctrl = 0 
ownpal = 1
Size.xscale = .7
Size.yscale = .7

[State 3414,ChangeState]
type = ChangeState
trigger1 = Pos Y < -200
value = 3413

[State 3414,ChangeState]
type = ChangeState
trigger1 = BackEdgeDist < 5
value = 3411

[State 3414,ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;---------------------------------------------------------------------------
[Statedef 3415]
type    = A
movetype= H
physics = N
velset = 0,0

[State 3415,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 3415+Var(55)*30000

[State 3415,VelSet]
type = VelSet
trigger1 = Time = 14
x = -2
y = -12

[State 3415,VelAdd]
type = VelAdd
trigger1 = Time > 14
y = .55

[State 3415,SelfState]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100
ctrl = 0

;-----------------------------------------------------------------------
[Statedef 3050]
type = S
movetype = A
physics = S
anim = 3050
sprpriority = 2
juggle = 7
velset = 0,0
ctrl = 0

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [3000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

[State 3050, EnvColor]
type = EnvColor
trigger1 = Time < 29
value = ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0)
time = 1
under = 1

[State 3050, PalFX]
type = PalFX
trigger1 = (PrevStateNo = [1000, 1070]) && Time < 31
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1

[State 3050, Pause]
type = SuperPause
trigger1 = Time = 1
anim = -1
sound = f9000,1
time = 28
movetime = 28
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
darken = 0

[State 3050, BG Cleaner]
type = AssertSpecial
trigger1 = Time < 29
flag= noFG

[State 3050, Spark Back]
type = Explod
trigger1 = Time = 3
anim = f7100
scale = 0.5,0.5
postype = p1
pos = -21, -8
sprpriority = -2
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3200, 4]
type = Explod
trigger1 = time=3
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=3
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3050, Spark Front]
type = Explod
trigger1 = Time = 3;Anim != 3010 && AnimElem =5
anim = f7110
scale = 0.5,0.5
postype = p1
pos = -21, -8
sprpriority = 10
ontop = 1
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3050, Muteki]
type = NotHitBy
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(8) < 1 
value = SCA

[State 3050, EnvShake]
type = EnvShake
trigger1 = AnimElem = 6
time = 20
ampl = -9

[State 3050, Velocity]
type = VelSet
trigger1 = (Time = 42) || (Time = 62)
y = ifelse (Time = 42, -30, 30)

[State 3050, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 42
StateType = A
Physics = N

[State 3050, Gravity]
type = Gravity
trigger1 = Vel Y

[State 3050, Velocity]
type = VelSet
trigger1 = (Time = 49) || (Time = 69)
x = ifelse (Time = 49, (P2Dist X + 20)/20, 0)

[state 3050, Anim]
type = ChangeAnim
trigger1 = Vel Y > 0
value = 3010
elem = AnimElemNo(0) - 7
persistent = 0

[State 3050, Smog]
type = Explod
trigger1 = AnimElemTime(6) = 1
anim = 898
pos = -22,3
postype = p1
supermove = 1
bindtime = 1
sprpriority = 3
ownpal = 1

[State 3050, Reversal]
type = ReversalDef
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(8) < 0
reversal.attr = SCA, AA, AP
numhits = 0
pausetime = 0,12
sparkno = 42
hitsound = 6,1
persistent = 0

[state 3050, Voice]
type = PlaySnd
trigger1 = Anim != 3010 && AnimElem = 3
value = 0, 21
channel = 0

[state 3050, Voice]
type = PlaySnd
trigger1 = Anim != 3010 && AnimElem = 6
value = 0, 22
channel = 0

[state 3050, Effect]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1, 33
channel = 1

[State 3050, 8]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HP
damage = 200,50
animtype = Heavy
air.animtype = Up
priority = 7,Hit
hitflag = HAFD
guardflag = L
pausetime = 12,6
guard.pausetime = 7,7
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-30
hitsound   = 5,1
guardsound = 6,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 15
ground.velocity = 0,-12
guard.velocity = -7
air.velocity = 0,-10
down.velocity = 0,-12
fall = 1
fall.recover = 0
air.recover = 0
recover = 0
persistent = 0

[State 3050, 8]
type = HitDef
trigger1 = Vel Y < 0
attr = A, HA
damage = 200,50
animtype = Heavy
air.animtype = Up
priority = 7,Hit
hitflag = MAF
guardflag = M
pausetime = 1,1
guard.pausetime = 2,1
sparkno = 3
guard.sparkno = 42
sparkxy = -8,-50
hitsound   = 5,1
guardsound = 6,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 15
ground.velocity = -1,-16
guard.velocity = -7
air.velocity = -1,-16
airguard.velocity = -6,-3
down.velocity = 0,-12
fall = 1
fall.recover = 0
air.recover = 0
recover = 0
persistent = 0

[State 3050, 8]
type = HitDef
trigger1 = Vel Y > 0  
attr = A, HA
damage = 200,50
animtype = Heavy
air.animtype = Up
priority = 5,Hit
hitflag = MAF
guardflag = M
pausetime = 1,1
guard.pausetime = 2,1
sparkno = 3
guard.sparkno = 42
sparkxy = -8,-50
hitsound   = 5,1
guardsound = 6,1
ground.type = High
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = 1,16
guard.velocity = -7
air.velocity = -8,16
airguard.velocity = -6,-3
down.velocity = -1,-12
fall = 1
fall.recover = 0
air.recover = 0
recover = 0
persistent = 0

[State 3050, EnvColor]
type = EnvColor
trigger1 = MoveHit
value = 255, 255, 255
time = 2
under = 1
ignorehitpause = 1

[State 3050, MoveHitReSet]
type = MoveHitReSet
trigger1 = MoveHit
ignorehitpause = 1

[State 3050, StateChange]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -1
value = 3005
ctrl = 0

;-----------------------------------------------------------------------
[Statedef 3100]
type    = S
movetype= A
physics = S
anim = 3100
sprpriority = 2
velset = 0,0
ctrl = 0

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1


;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1
[State 3100, S-CancelFx]
type = VarSet
trigger1 = Time = 0
var(16) = ifelse ((PrevStateNo = [1000, 1080]), 1, 0)

[State 3100, EnvColor]
type = EnvColor
trigger1 = Time < 29
value = ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0)
time = 1
under = 1

[State 3100, PalFX]
type = PalFX
trigger1 = Time < 30 && PrevStateNo = [1000,1080]
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1

[State 3100, Pause]
type = SuperPause
trigger1 = Time = 1
anim = -1
sound = f9000,0
time = 27
movetime = 27
poweradd = ifelse(fvar(30) > 0,0,-1000)
darken = 0

[State 3100, BG Cleaner]
type = AssertSpecial
trigger1 = Time < 29
flag= noFG

[State 3100, Spark Back]
type = Explod
trigger1 = Time = 1
anim = f7000
scale = 0.5,0.5
postype = p1
pos = 21, -70
sprpriority = -2
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3100, Spark Front]
type = Explod
trigger1 = Time = 1
anim = f7010
scale = 0.5,0.5
postype = p1
pos = 21, -70
sprpriority = 10
ontop = 1
bindtime = 1
sprpriority = 10
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3100, 1]
type = HitDef
trigger1 = Time = 0 && P2StateNo != [130,153]
attr = S, HT
hitflag = M
priority = 7, Miss
sparkno = -1
p2facing = 1
p1stateno = 3101
p2stateno = 3105
getpower = 250
givepower = 200
numhits = 0
kill = 0

[State 3100, S-CancelFx]
type = VarSet
trigger1 = AnimTime = 0
var(16) = 0

[State 3100, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
[Statedef 3101]
type    = S
movetype= A
physics = S
anim = 3101
velset = 0,0
ctrl = 0
facep2 = 1

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1
[State 3101, EnvColor]
type = EnvColor
trigger1 = Time < 29
value = ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0)
time = 1
under = 1

[State 3101, PalFX]
type = PalFX
trigger1 = Time < 30 && Var(16)
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1

[State 3101, Pause]
type = SuperPause
trigger1 = Time = 0
anim = -1
sound = f9000,0
time = 28
movetime = 28
poweradd = ifelse(fvar(30) > 0,0,-1000)
darken = 0

[State 3101, BG Cleaner]
type = AssertSpecial
trigger1 = Time < 29
flag= noFG

[State 3101, Spark Back]
type = Explod
trigger1 = Time = 2
anim = f7000
scale = 0.5,0.5
postype = p1
pos = 43, -116
sprpriority = -2
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3101, Spark Front]
type = Explod
trigger1 = Time = 2
anim = f7010
scale = 0.5,0.5
postype = p1
pos = 43, -116
sprpriority = 10
ontop = 1
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3101, Voice]
type = PlaySnd
trigger1 = Time = 0
value = 0, 23
channel = 0

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 38, -136

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 45, -128

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
pos = 44, -91

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
pos = 44, -64

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = 42, -9

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
pos = 17, -54

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
pos = 34, -74

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(8) >= 0 && AnimElemTime(9) < 0
pos = 28, -75

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
pos = 41, -96

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
pos = 31, -136

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
pos = 28, -113

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(12) >= 0 && AnimElemTime(13) < 0
pos = 22, -120

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(13) >= 0 && AnimElemTime(14) < 0
pos = 14, -124

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(14) >= 0 && AnimElemTime(15) < 0
pos = 32, -126

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(15) >= 0 && AnimElemTime(17) < 0
pos = 56, -54

[state 3101, Bind]
type = TargetBind
trigger1 = AnimElemTime(17) >= 0 && AnimElemTime(18) < 0
pos = 31, -125

[state 3101, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 2 || AnimElem = 5 || AnimElem = 15 || AnimElem = 18
value = ifelse ((AnimElem = 18), -20, -30)
kill = ifelse ((AnimElem = 18), 1, 0)
absolute = 1

[state 3101, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemTime(25) = 2
value = -200
absolute = 1

[State 3101, Layer]
type = SprPriority
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(8) <= 0
value = ifelse (AnimElemTime(8) = 0, 2, 1)

[State 3101, Position]
type = PosAdd
trigger1 = AnimElem = 8
x = 52

[State 3101, Position]
type = PosAdd
trigger1 = AnimElem = 17
x = 27

[State 3101, Position]
type = PosAdd
trigger1 = AnimElem = 19
x = 11

[State 3101, Position]
type = PosAdd
trigger1 = AnimElem = 20
x = 44

[state 3101, Width]
type = Width
trigger1 = 1
edge = ifelse (AnimElemTime(17) < 0, 60, 20),30

[State 3101, EnvShake]
type = EnvShake
trigger1 = AnimElem = 5 || AnimElem = 15 || AnimElemTime(25) = 2
time = 20

[state 3101, EnvColor]
type = EnvColor
trigger1 = AnimElem = 5 || AnimElem = 15 || AnimElemTime(25) = 2
value = 248,248,248
time = 2
under = 1

[State 3101, HitSpark]
type = Explod
trigger1 = AnimElem = 15 || AnimElemTime(25) = 2
anim = f2
pos = ifelse (AnimElemTime(25) = 2, -2, 52), ifelse (AnimElemTime(25) = 2, -90, -47)
postype = p1
bindtime = 1
ontop = 1
ownpal = 1

[state 3101, ShockWave]
type = Explod
trigger1 = AnimElem = 5
postype = p1
anim = Fifelse(StageVar(info.author) = "water",25,66)
pos = ifelse(StageVar(info.author) = "water",32,42)
sprpriority = ifelse(StageVar(info.author) = "water",10,-2)
ownpal = 1

[state 3101, ShockWave]
type = Explod
trigger1 = AnimElem = 5
postype = p1
anim = Fifelse(StageVar(info.author) = "water",25,67)
facing = ifelse(StageVar(info.author) = "water",-1,1)
pos = ifelse(StageVar(info.author) = "water",52,42)
ontop = 1
ownpal = 1

[state 3101, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1, 18
channel = 1

[state 3101, Effect]
type = PlaySnd
trigger1 = AnimElem = 15
value = 1,13
channel = 1

[state 3101, Effect]
type = PlaySnd
trigger1 = AnimElem = 15
value = 1,15
channel = 2

[State 3101, Effect]
type = PlaySnd
trigger1 = AnimElem = 17
value = 1, 11
channel = 1

[State 3101, Effect]
type = PlaySnd
trigger1 = AnimElem = 22
value = 1, 34
channel = 5

[State 3101, Voice]
type = PlaySnd
trigger1 = AnimElem = 24
value = 0, 24
channel = 0

[State 3101, Effect]
type = PlaySnd
trigger1 = AnimElemTime(25) = 2
value = 1, 16
channel = 1

[State 3101, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
[Statedef 3105]
type    = A
movetype= H
physics = N
ctrl = 0

[State 3105, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 3105+Var(55)*30000

[State 3105, Muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3105, Layer]
type = SprPriority
trigger1 = Time >= 38 && Time <= 51
value = ifelse (Time = 51, 1, 2)

[State 3105,Velocity]
type = VelSet
trigger1 = (Time = 118) || (Time = 171)
x = ifelse (Time = 171, 0, -0.1)
y = ifelse (Time = 171, 0, -11)

[State 3105,Gravity]
type = VelAdd
trigger1 = (Time > 118 && Time < 171) || Time > 215
y = .45

[State 3105, Anim]
type = ChangeAnim2
trigger1 = Time >= 171 && Time < 215
value = 3110+Var(55)*30000

[State 3105,HitPause]
type = PosAdd
trigger1 = (Time >= 15 && Time < 37) || (Time >= 92 && Time < 111) || (Time >= 171 && Time < 215)
x = ifelse (Time % 2, 1, -1)

[State 3105, Position]
type = PosAdd
trigger1 = Time = 215
y = -40

[State 3105, Velocity]
type = VelSet
trigger1 = Time = 215
x = -2
y = -10

[State 3105, Anim]
type = ChangeAnim
trigger1 = (Vel Y > 0 && Pos Y >= 0) && SelfAnimExist(5051+Var(55)*30000)
value = 5051+Var(55)*30000

[State 3105, StateChage]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;-----------------------------------------------------------------------
[Statedef 3150]
type    = S
movetype= A
physics = S
anim = 3100
sprpriority = 2
velset = 0,0
ctrl = 0

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [3000,3999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1
[State 3150, S-CancelFx]
type = VarSet
trigger1 = Time = 0
var(16) = ifelse ((PrevStateNo = [1000, 1080]), 1, 0)

[State 3150, EnvColor]
type = EnvColor
trigger1 = Time < 29
value = ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0)
time = 1
under = 1

[State 3150, PalFX]
type = PalFX
trigger1 = Time < 30 && PrevStateNo = [1000,1080]
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1

[State 3150, Pause]
type = SuperPause
trigger1 = Time = 1
anim = -1
sound = f9000,1
time = 27
movetime = 27
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
darken = 0

[State 3150, BG Cleaner]
type = AssertSpecial
trigger1 = Time < 29
flag= noFG

[State 3150, Spark Back]
type = Explod
trigger1 = Time = 1
anim = f7100
scale = 0.5,0.5
postype = p1
pos = 21, -70
sprpriority = -2
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3200, 4]
type = Explod
trigger1 = time=1
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=1
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3150, Spark Front]
type = Explod
trigger1 = Time = 1
anim = f7110
scale = 0.5,0.5
postype = p1
pos = 21, -70
sprpriority = 10
ontop = 1
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3150, 1]
type = HitDef
trigger1 = Time = 0 && P2StateNo != [130,153]
attr = S, HT
hitflag = M
priority = 7, Miss
sparkno = -1
p2facing = 1
p1stateno = 3151
p2stateno = 3155
getpower = 250
givepower = 200
numhits = 0
kill = 0

[State 3150, S-CancelFx]
type = VarSet
trigger1 = AnimTime = 0
var(16) = 0

[State 3150, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
[Statedef 3151]
type    = S
movetype= A
physics = S
anim = 3151
velset = 0,0
ctrl = 0
facep2 = 1

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1
[State 3151, EnvColor]
type = EnvColor
trigger1 = Time < 29
value = ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0)
time = 1
under = 1

[State 3151, PalFX]
type = PalFX
trigger1 = Time < 30 && Var(16)
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1

[State 3151, Pause]
type = SuperPause
trigger1 = Time = 0
anim = -1
sound = f9000,1
time = 28
movetime = 28
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
darken = 0

[State 3151, BG Cleaner]
type = AssertSpecial
trigger1 = Time < 29
flag= noFG

[State 3151, Spark Back]
type = Explod
trigger1 = Time = 2
anim = f7100
scale = 0.5,0.5
postype = p1
pos = 43, -116
sprpriority = -2
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3200, 4]
type = Explod
trigger1 = time=2
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=2
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3151, Spark Front]
type = Explod
trigger1 = Time = 2
anim = f7110
scale = 0.5,0.5
postype = p1
pos = 43, -116
sprpriority = 10
ontop = 1
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3151, Voice]
type = PlaySnd
trigger1 = Time = 0
value = 0, 23
channel = 0

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 38, -136

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 45, -128

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
pos = 44, -91

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
pos = 44, -64

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = 42, -9

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
pos = 17, -54

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
pos = 34, -74

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(8) >= 0 && AnimElemTime(9) < 0
pos = 28, -75

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
pos = 41, -96

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
pos = 31, -136

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
pos = 28, -113

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(12) >= 0 && AnimElemTime(13) < 0
pos = 22, -120

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(13) >= 0 && AnimElemTime(14) < 0
pos = 14, -124

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(14) >= 0 && AnimElemTime(15) < 0
pos = 32, -126

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(15) >= 0 && AnimElemTime(17) < 0
pos = 56, -54

[state 3151, Bind]
type = TargetBind
trigger1 = AnimElemTime(17) >= 0 && AnimElemTime(18) < 0
pos = 31, -125

[state 3151, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 2 || AnimElem = 5 || AnimElem = 15 || AnimElem = 18
value = ifelse ((AnimElem = 18), -20, -35);value = ifelse ((AnimElem = 18), -40, -70)
kill = ifelse ((AnimElem = 18), 1, 0)
absolute = 1

[state 3151, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemTime(25) = 2 || AnimElemTime(37) = 2 || AnimElemTime(49) = 2
value = ifelse (AnimElemTime(49) = 2, -150, -100)
absolute = 1

[State 3151, Layer]
type = SprPriority
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(8) <= 0
value = ifelse (AnimElemTime(8) = 0, 2, 1)

[State 3151, Muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3151, Position]
type = PosAdd
trigger1 = AnimElem = 8
x = 52

[State 3151, Position]
type = PosAdd
trigger1 = AnimElem = 17
x = 27

[State 3151, Position]
type = PosAdd
trigger1 = AnimElem = 19
x = 11

[State 3151, Position]
type = PosAdd
trigger1 = AnimElem = 20
x = 44

[State 3151, Position]
type = PosAdd
trigger1 = AnimElem = 55
x = 12

[state 3151, Width]
type = Width
trigger1 = 1
edge = ifelse (AnimElemTime(17) < 0, 60, 20),30

[State 3151, EnvShake]
type = EnvShake
trigger1 = AnimElem = 5 || AnimElem = 15 || AnimElemTime(25) = 2 || AnimElemTime(37) = 2 || AnimElemTime(49) = 2
time = 20

[state 3151, EnvColor]
type = EnvColor
trigger1 = AnimElem = 5 || AnimElem = 15 || AnimElemTime(25) = 2 || AnimElemTime(37) = 2 || AnimElemTime(49) = 2
value = 248,248,248
time = 2
under = 1

[State 3151, HitCount]
type = HitAdd
trigger1 = AnimElemTime(25) = 2 || AnimElemTime(37) = 2 || AnimElemTime(49) = 2
value = 1

[State 3151, HitSpark]
type = Explod
trigger1 = AnimElemTime(15) = 0 || AnimElemTime(25) = 2 || AnimElemTime(37) = 2 || AnimElemTime(49) = 2
anim = f3
pos = ifelse (AnimElemTime(15) = 0, 52, -2), ifelse (AnimElemTime(15) = 0, -47, -90)
postype = p1
bindtime = 1
ontop = 1
ownpal = 1

[state 3151, ShockWave]
type = Explod
trigger1 = AnimElem = 5
postype = p1
anim = Fifelse(StageVar(info.author) = "water",25,66)
pos = ifelse(StageVar(info.author) = "water",32,42)
sprpriority = ifelse(StageVar(info.author) = "water",10,-2)
ownpal = 1

[state 3151, ShockWave]
type = Explod
trigger1 = AnimElem = 5
postype = p1
anim = Fifelse(StageVar(info.author) = "water",25,67)
facing = ifelse(StageVar(info.author) = "water",-1,1)
pos = ifelse(StageVar(info.author) = "water",52,42)
ontop = 1
ownpal = 1

[state 3151, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1, 18
channel = 1

[state 3151, Effect]
type = PlaySnd
trigger1 = AnimElem = 15
value = 1,13
channel = 1

[state 3151, Effect]
type = PlaySnd
trigger1 = AnimElem = 15
value = 1,15
channel = 2

[State 3151, Effect]
type = PlaySnd
trigger1 = AnimElem = 17
value = 1, 11
channel = 1

[State 3151, Effect]
type = PlaySnd
trigger1 = AnimElem = 22 || AnimElem = 34 || AnimElem = 46
value = 1, 34
channel = 5

[State 3151, Voice]
type = PlaySnd
trigger1 = AnimElem = 24 || AnimElem = 36 || AnimElem = 48
value = 0, 24
channel = 0

[State 3151, Effect]
type = PlaySnd
trigger1 = AnimElemTime(25) = 2 || AnimElemTime(37) = 2 || AnimElemTime(49) = 2
value = 1, 16
channel = 1

[state 3151, ShockWave]
type = Explod
trigger1 = P2StateNo = 5100
postype = p2
anim = Fifelse(StageVar(info.author) = "water",25,66)
pos = ifelse(StageVar(info.author) = "water",-10,0)
sprpriority = ifelse(StageVar(info.author) = "water",10,-2)
ownpal = 1
persistent = 0

[state 3151, ShockWave]
type = Explod
trigger1 = P2StateNo = 5100
postype = p2
anim = Fifelse(StageVar(info.author) = "water",25,67)
facing = ifelse(StageVar(info.author) = "water",-1,1)
pos = ifelse(StageVar(info.author) = "water",10,0)
ontop = 1
ownpal = 1
persistent = 0

[State 3151, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
[Statedef 3155]
type    = A
movetype= H
physics = N
ctrl = 0

[State 3155, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 3155+Var(55)*30000

[State 3155, Muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3155, Layer]
type = SprPriority
trigger1 = Time >= 42 && Time <= 56
value = ifelse (Time = 56, 1, 2)

[State 3155,Velocity]
type = VelSet
trigger1 = (Time = 149) || (Time = 203) || (Time = 204) || (Time = 256) || (Time = 257) || (Time = 306)
x = ifelse (Time = 149, -0.1, 0)
y = ifelse (Time = 149 || Time = 204, -12, ifelse (Time = 257, -11, 0))

[State 3155,Gravity]
type = VelAdd
trigger1 = Vel Y
y = .45

[State 3155, Anim]
type = ChangeAnim2
trigger1 = (Time = 203) || (Time = 256) || (Time >= 306 &&  Time < 350)
value = 3110+Var(55)*30000

[State 3155,HitPause]
type = PosAdd
trigger1 = (Time >= 20 && Time < 42) || (Time >= 112 && Time < 142) || (Time >= 306 && Time < 350)
x = ifelse (Time % 2, 1, -1)

[State 3155, Position]
type = PosAdd
trigger1 = Time = 350
y = -40

[State 3155, Velocity]
type = VelSet
trigger1 = Time = 350
x = -2
y = -12

[State 3155, Anim]
type = ChangeAnim
trigger1 = (Vel Y > 0 && Pos Y >= 0) && SelfAnimExist(5051+Var(55)*30000)
value = 5051+Var(55)*30000

[State 3155, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0 && Pos Y >= 0
time = 20

[State 3155, StateChage]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;-----------------------------------------------------------------------
;空中抓投
;-----------------------------------------------------------------------
[Statedef 3200]
type    = S
movetype= A
physics = S
anim = 3200
sprpriority = 2
juggle = 1
velset = 0,0
ctrl = 0

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1
[state 3200, Power]
type = VarSet
trigger1 = Time = 0
var(5) = ifelse (Command = "br2", 1, 0)

[State 3200, EnvColor]
type = EnvColor
trigger1 = Time < 29
value = ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0)
time = 1
under = 1

[State 3200, PalFX]
type = PalFX
trigger1 = Time < 30 && PrevStateNo = [1000,1080]
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1

[State 3200, Pause]
type = SuperPause
trigger1 = Time = 1
anim = -1
sound = f9000,0
time = 27
movetime = 27
poweradd = ifelse(fvar(30) > 0,0,-1000)
darken = 0

[State 3200, BG Cleaner]
type = AssertSpecial
trigger1 = Time < 29
flag= noFG

[State 3200, Spark Back]
type = Explod
trigger1 = Time = 1
anim = f7000
scale = 0.5,0.5
postype = p1
pos = 21, -70
sprpriority = -2
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3200, Spark Front]
type = Explod
trigger1 = Time = 1
anim = f7010
scale = 0.5,0.5
postype = p1
pos = 21, -70
sprpriority = 10
ontop = 1
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3200, Velocity]
type = VelSet
trigger1 = Time = 31
x = 3
y = -(6 + Var(5))

[State 3200, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 31
StateType = A
physics = A

[State 3200, Anim]
type = ChangeAnim
trigger1 = Time > 31 && Vel Y > -1
value = 1081
persistent = 0

[State 3200, Effect]
type = PlaySnd
trigger1 = Anim = 3200 && AnimElem = 3
value = f40,0
channel = 20

[State 3200, Muteki]
type = NotHitBy
trigger1 = Time < 40
value = SCA

[State 3200, 3]
type = Hitdef
trigger1 = Anim = 3200 && AnimElemTime(3) > 0
attr = A, HT
hitflag = AF
animtype = Heavy
priority = 7, Miss
damage = 40, 0
sparkno = 9
guard.sparkno = -1
sparkxy = -8, -137
hitsound = 800,0
guardsound = -1
pausetime = 13,12
p2facing = 1
p1stateno = 3201
p2stateno = 3205
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
getpower = 0,0
givepower = 150
kill = 0
persistent = 0

;-----------------------------------------------------------------------
[Statedef 3201]
type    = A
movetype= A
physics = N
anim = 3201
sprpriority = 2
ctrl = 0

[State 3201, Anim]
type = ChangeAnim
trigger1 = Vel Y > -1
value = 3202
persistent = 0

[State 3201, Anim]
type = ChangeAnim
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3203
persistent = 0

[state 3201, PosFreeze]
type = PosFreeze
trigger1 = Anim = 3203

[state 3201, Velocity]
type = Gravity
trigger1 = Anim != 3203

[State 3201, StateChange]
type = TargetState
trigger1 = Anim = 3202
value = 3206
persistent = 0

[State 3201, StateChange]
type = TargetState
trigger1 = Anim = 3203
value = 3207
persistent = 0

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3201
pos = 26, -147

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3202 && AnimElemTime(2) < 0
pos = 40, -100

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3202 && AnimElemTime(2) >= 0
pos = 40, -85

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3203 && AnimElemTime(2) < 0
pos = 42, -9

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3203 && (AnimElemTime(2) >= 0 && AnimElemTime(3) < 0)
pos = 17, -54

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3203 && (AnimElemTime(3) >= 0 && AnimElemTime(4) < 0)
pos = 34, -74

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3203 && (AnimElemTime(4) >= 0 && AnimElemTime(5) < 0)
pos = 42, 0

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3203 && (AnimElemTime(5) >= 0 && AnimElemTime(6) < 0)
pos = 32, -84

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3203 && (AnimElemTime(6) >= 0 && AnimElemTime(7) < 0)
pos = 40, -75

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3203 && (AnimElemTime(7) >= 0 && AnimElemTime(8) < 0)
pos = 42, -75

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3203 && (AnimElemTime(8) >= 0 && AnimElemTime(9) < 0)
pos = 50, -82

[state 3201, Bind]
type = TargetBind
trigger1 = Anim = 3203 && (AnimElemTime(9) >= 0 && AnimElemTime(10) < 0)
pos = 31, -125

[state 3201, Hurt]
type = TargetLifeAdd
trigger1 = Anim = 3203 && (AnimElem = 1 || AnimElem = 5 || AnimElem = 10 || AnimElemTime(17) = 2)
value = ifelse (AnimElemTime(17) = 2, -100, -30);value = ifelse (AnimElemTime(17) = 2, -200, -60)
kill = ifelse ((AnimElem = 10 || AnimElemTime(17) = 2), 1, 0)
absolute = 1

[State 3201, Layer]
type = SprPriority
trigger1 = Anim = 3203 && (AnimElemTime(2) >= 0 && AnimElemTime(3) <= 0)
value = ifelse (AnimElemTime(3) = 0, 2, 1)

[state 3201, Width]
type = Width
trigger1 = 1
edge = ifelse (Anim = 3203 && AnimElemTime(9) < 0, 60, 30),30

[State 3201, Position]
type = PosAdd
trigger1 = Anim = 3203 && AnimElem = 1
x = 10

[State 3201, Position]
type = PosAdd
trigger1 = Anim = 3203 && AnimElem = 4
x = 2

[State 3201, Position]
type = PosAdd
trigger1 = Anim = 3203 && AnimElem = 9
x = 45

[State 3201, Position]
type = PosAdd
trigger1 = Anim = 3203 && AnimElem = 11
x = 8

[State 3201, Position]
type = PosAdd
trigger1 = Anim = 3203 && AnimElem = 12
x = 36

[State 3201, EnvShake]
type = EnvShake
trigger1 = Anim = 3203 && (AnimElem = 1 || AnimElemTime(17) = 2)
time = 20

[state 3201, EnvColor]
type = EnvColor
trigger1 = Anim = 3203 && (AnimElem = 1 || AnimElem = 5 || AnimElemTime(17) = 2)
value = 248,248,248
time = 2
under = 1

[State 3201, HitSpark]
type = Explod
trigger1 = Anim = 3203 && (AnimElem = 5 || AnimElemTime(17) = 2)
anim = f3
pos = ifelse (AnimElemTime(17) = 2, -2, 34), ifelse (AnimElemTime(17) = 2, -90, -84)
postype = p1
bindtime = 1
ontop = 1
ownpal = 1

[state 3201, ShockWave]
type = Explod
trigger1 = Anim = 3203 && AnimElem = 1
postype = p1
anim = Fifelse(StageVar(info.author) = "water",25,66)
pos = ifelse(StageVar(info.author) = "water",32,42)
sprpriority = ifelse(StageVar(info.author) = "water",10,-2)
ownpal = 1

[state 3201, ShockWave]
type = Explod
trigger1 = Anim = 3203 && AnimElem = 1
postype = p1
anim = Fifelse(StageVar(info.author) = "water",25,67)
facing = ifelse(StageVar(info.author) = "water",-1,1)
pos = ifelse(StageVar(info.author) = "water",52,42)
ontop = 1
ownpal = 1

[State 3201, 8]
type = PlaySnd
trigger1 = Time = 0
value = 0, 23
channel = 0

[state 3201, Effect]
type = PlaySnd
trigger1 = Anim = 3203 && AnimElem = 1
value = 1, 18
channel = 1

[State 3201, Effect]
type = PlaySnd
trigger1 = Anim = 3203 && AnimElem = 5
value = 1, 39
channel = 1

[State 3201, Effect]
type = PlaySnd
trigger1 = Anim = 3203 && AnimElem = 10
value = 1, 11
channel = 1

[State 3201, Effect]
type = PlaySnd
trigger1 = Anim = 3203 && AnimElem = 14
value = 1, 34
channel = 5

[State 3201, Voice]
type = PlaySnd
trigger1 = Anim = 3203 && AnimElem = 16
value = 0, 24
channel = 0

[State 3201, Effect]
type = PlaySnd
trigger1 = Anim = 3203 && AnimElemTime(17) = 2
value = 1, 16
channel = 1

[State 3201, StateChange]
type = ChangeState
trigger1 = Anim = 3203 && AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
[Statedef 3205]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 3205, Anim]
type = Changeanim
trigger1 = !HitShakeOver
value = 5001+Var(55)*30000

[State 3205, Anim]
type = Changeanim2
trigger1 = HitShakeOver
value = 1085+Var(55)*30000
persistent = 0

;-----------------------------------------------------------------------
[Statedef 3206]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 3206, Anim]
type = Changeanim2
trigger1 = Time = 0
value = 3206+Var(55)*30000

;-----------------------------------------------------------------------
[Statedef 3207]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 3207, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 3207+Var(55)*30000

[State 3207, Muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3207, Layer]
type = SprPriority
trigger1 = Time >= 23 && Time <= 36
value = ifelse (Time = 36, 1, 2)

[State 3207,Velocity]
type = VelSet
trigger1 = (Time = 94) || (Time = 147)
x = ifelse (Time = 147, 0, -0.1)
y = ifelse (Time = 147, 0, -11)

[State 3207,Gravity]
type = VelAdd
trigger1 = (Time > 94 && Time < 147) || Time > 191
y = .45

[State 3207, Anim]
type = ChangeAnim2
trigger1 = Time >= 147 && Time < 191
value = 3110+Var(55)*30000

[State 3207,HitPause]
type = PosAdd
trigger1 = (Time < 23) || (Time >= 147 && Time < 191)
x = ifelse (Time % 2, 1, -1)

[State 3207, Position]
type = PosAdd
trigger1 = Time = 191
y = -40

[State 3207, Velocity]
type = VelSet
trigger1 = Time = 191
x = -2
y = -10

[State 3207, Anim]
type = ChangeAnim
trigger1 = Time > 191 && (Vel Y > 0 && Pos Y >= 0) && SelfAnimExist(5051+Var(55)*30000)
value = 5051+Var(55)*30000

[State 3207, StateChage]
type = SelfState
trigger1 = Time > 191 && (Vel Y > 0 && Pos Y >= 0)
value = 5100

;-----------------------------------------------------------------------
;空中抓投MAX
;-----------------------------------------------------------------------
[Statedef 3250]
type    = S
movetype= A
physics = S
anim = 3200
sprpriority = 2
juggle = 1
velset = 0,0
ctrl = 0

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1
[State 3250, EnvColor]
type = EnvColor
trigger1 = Time < 29
value = ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0)
time = 1
under = 1

[State 3250, PalFX]
type = PalFX
trigger1 = Time < 30 && PrevStateNo = [1000,1080]
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1

[State 3250, Pause]
type = SuperPause
trigger1 = Time = 1
anim = -1
sound = f9000,1
time = 27
movetime = 27
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
darken = 0

[State 3250, BG Cleaner]
type = AssertSpecial
trigger1 = Time < 29
flag= noFG

[State 3250, Spark Back]
type = Explod
trigger1 = Time = 1
anim = f7100
scale = 0.5,0.5
postype = p1
pos = 21, -70
sprpriority = -2
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3200, 4]
type = Explod
trigger1 = time=1
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=1
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3250, Spark Front]
type = Explod
trigger1 = Time = 1
anim = f7110
scale = 0.5,0.5
postype = p1
pos = 21, -70
sprpriority = 10
ontop = 1
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3250, Velocity]
type = VelSet
trigger1 = Time = 31
x = 4
y = -7

[State 3250, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 31
StateType = A
physics = A

[State 3250, Anim]
type = ChangeAnim
trigger1 = Time > 31 && Vel Y > -1
value = 1081
persistent = 0

[State 3250, Effect]
type = PlaySnd
trigger1 = Anim = 3200 && AnimElem = 3
value = f40,0
channel = 20

[State 3250, Muteki]
type = NotHitBy
trigger1 = Time < 40
value = SCA

[State 3250, 3]
type = Hitdef
trigger1 = Anim = 3200 && AnimElemTime(3) > 0
attr = A, HT
hitflag = AF
animtype = Heavy
priority = 7, Miss
damage = 100, 0
sparkno = 9
guard.sparkno = -1
sparkxy = -8, -137
hitsound = 800,0
guardsound = -1
pausetime = 13,12
p2facing = 1
p1stateno = 3251
p2stateno = 3205
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
getpower = 0,0
givepower = 150
numhit = 0
kill = 0
persistent = 0

;-----------------------------------------------------------------------
[Statedef 3251]
type    = A
movetype= A
physics = N
anim = 3201
sprpriority = 2
ctrl = 0

[State 3251, Anim]
type = ChangeAnim
trigger1 = Vel Y > -1
value = 3202
persistent = 0

[State 3251, Anim]
type = ChangeAnim
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3250
persistent = 0

[state 3251, PosFreeze]
type = PosFreeze
trigger1 = Anim = 3250

[state 3251, Velocity]
type = Gravity
trigger1 = Anim != 3250

[State 3251, StateChange]
type = TargetState
trigger1 = Anim = 3202
value = 3206
persistent = 0

[State 3251, StateChange]
type = TargetState
trigger1 = Anim = 3250
value = 3255
persistent = 0

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3201
pos = 26, -147

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3202 && AnimElemTime(2) < 0
pos = 40, -100

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3202 && AnimElemTime(2) >= 0
pos = 40, -85

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3250 && AnimElemTime(2) < 0
pos = 42, -9

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3250 && (AnimElemTime(2) >= 0 && AnimElemTime(3) < 0)
pos = 17, -54

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3250 && (AnimElemTime(3) >= 0 && AnimElemTime(4) < 0)
pos = 34, -74

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3250 && (AnimElemTime(4) >= 0 && AnimElemTime(5) < 0)
pos = 42, 0

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3250 && (AnimElemTime(5) >= 0 && AnimElemTime(6) < 0)
pos = 32, -84

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3250 && (AnimElemTime(6) >= 0 && AnimElemTime(7) < 0)
pos = 40, -75

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3250 && (AnimElemTime(7) >= 0 && AnimElemTime(8) < 0)
pos = 42, -75

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3250 && (AnimElemTime(8) >= 0 && AnimElemTime(9) < 0)
pos = 50, -82

[state 3251, Bind]
type = TargetBind
trigger1 = Anim = 3250 && (AnimElemTime(9) >= 0 && AnimElemTime(10) < 0)
pos = 31, -125

[state 3251, Hurt]
type = TargetLifeAdd
trigger1 = Anim = 3250 && (AnimElem = 1 || AnimElem = 5 || AnimElem = 10 || AnimElemTime(17) = 2 || AnimElemTime(29) = 2 || AnimElemTime(41) = 2)
value = ifelse (AnimElemTime(41) = 2, -120, -30);value = ifelse (AnimElemTime(41) = 2, -200, -60)
kill = ifelse ((AnimElem = 10 || AnimElemTime(17) = 2), 1, 0)
absolute = 1

[State 3251, Layer]
type = SprPriority
trigger1 = Anim = 3250 && (AnimElemTime(2) >= 0 && AnimElemTime(3) <= 0)
value = ifelse (AnimElemTime(3) = 0, 2, 1)

[state 3251, Width]
type = Width
trigger1 = 1
edge = ifelse (Anim = 3250 && AnimElemTime(9) < 0, 60, 20),30

[State 3251, Position]
type = PosAdd
trigger1 = Anim = 3250 && AnimElem = 1
x = 10

[State 3251, Position]
type = PosAdd
trigger1 = Anim = 3250 && AnimElem = 4
x = 2

[State 3251, Position]
type = PosAdd
trigger1 = Anim = 3250 && AnimElem = 9
x = 45

[State 3251, Position]
type = PosAdd
trigger1 = Anim = 3250 && AnimElem = 11
x = 8

[State 3251, Position]
type = PosAdd
trigger1 = Anim = 3250 && AnimElem = 12
x = 36

[State 3251, Position]
type = PosAdd
trigger1 = Anim = 3250 && AnimElem = 47
x = 12

[State 3251, EnvShake]
type = EnvShake
trigger1 = Anim = 3250 && (AnimElem = 1 || AnimElemTime(17) = 2 || AnimElemTime(29) = 2 || AnimElemTime(41) = 2)
time = 20

[state 3251, EnvColor]
type = EnvColor
trigger1 = Anim = 3250 && (AnimElem = 1 || AnimElem = 5 || AnimElemTime(17) = 2 || AnimElemTime(29) = 2 || AnimElemTime(41) = 2)
value = 248,248,248
time = 2
under = 1

[State 3251, HitCount]
type = HitAdd
trigger1 = Anim = 3250 && (AnimElemTime(29) = 2 || AnimElemTime(41) = 2)
value = 1

[State 3251, HitSpark]
type = Explod
trigger1 = Anim = 3250 && (AnimElemTime(5) = 0 || AnimElemTime(17) = 2 || AnimElemTime(29) = 2 || AnimElemTime(41) = 2)
anim = f3
pos = ifelse (AnimElemTime(5) = 0, 34, -2), ifelse (AnimElemTime(5) = 0, -84, -90)
postype = p1
bindtime = 1
ontop = 1
ownpal = 1

[state 3251, ShockWave]
type = Explod
trigger1 = Anim = 3250 && AnimElem = 1
postype = p1
anim = Fifelse(StageVar(info.author) = "water",25,66)
pos = ifelse(StageVar(info.author) = "water",32,42)
sprpriority = ifelse(StageVar(info.author) = "water",10,-2)
ownpal = 1

[state 3251, ShockWave]
type = Explod
trigger1 = Anim = 3250 && AnimElem = 1
postype = p1
anim = Fifelse(StageVar(info.author) = "water",25,67)
facing = ifelse(StageVar(info.author) = "water",-1,1)
pos = ifelse(StageVar(info.author) = "water",52,42)
ontop = 1
ownpal = 1

[State 3251, 8]
type = PlaySnd
trigger1 = Time = 0
value = 0, 23
channel = 0

[state 3251, Effect]
type = PlaySnd
trigger1 = Anim = 3250 && AnimElem = 1
value = 1, 18
channel = 1

[State 3251, Effect]
type = PlaySnd
trigger1 = Anim = 3250 && AnimElem = 5
value = 1, 39
channel = 1

[State 3251, Effect]
type = PlaySnd
trigger1 = Anim = 3250 && AnimElem = 10
value = 1, 11
channel = 1

[State 3251, Effect]
type = PlaySnd
trigger1 = Anim = 3250 && (AnimElem = 14 || AnimElem = 26 || AnimElem = 38)
value = 1, 34
channel = 5

[State 3251, Voice]
type = PlaySnd
trigger1 = Anim = 3250 && (AnimElem = 16 || AnimElem = 28 || AnimElem = 40)
value = 0, 24
channel = 0

[State 3251, Effect]
type = PlaySnd
trigger1 = Anim = 3250 && (AnimElemTime(17) = 2 || AnimElemTime(29) = 2 || AnimElemTime(41) = 2)
value = 1, 16
channel = 1

[State 3251, Voice]
type = PlaySnd
trigger1 = Anim = 3250 && AnimElem = 50
value = 0,27
channel = 0

[state 3151, ShockWave]
type = Explod
trigger1 = P2StateNo = 5100
postype = p2
anim = Fifelse(StageVar(info.author) = "water",25,66)
pos = ifelse(StageVar(info.author) = "water",-10,0)
sprpriority = ifelse(StageVar(info.author) = "water",10,-2)
ownpal = 1
persistent = 0

[state 3151, ShockWave]
type = Explod
trigger1 = P2StateNo = 5100
postype = p2
anim = Fifelse(StageVar(info.author) = "water",25,67)
facing = ifelse(StageVar(info.author) = "water",-1,1)
pos = ifelse(StageVar(info.author) = "water",10,0)
ontop = 1
ownpal = 1
persistent = 0

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 50
id = 1421
sprpriority = 4
postype = P1
pos = 16,16
stateno = 1003
helpertype = normal
keyctrl = 0 
ownpal = 1
Size.xscale = .5
Size.yscale = .5

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 50
id = 1423
sprpriority = 4
postype = P1
pos = 16,16
stateno = 1003
helpertype = normal
keyctrl = 0 
ownpal = 1
Size.xscale = .5
Size.yscale = .5

[State 3251, Muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3251, StateChange]
type = ChangeState
trigger1 = Anim = 3250 && AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
[Statedef 3255]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 3255, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 3207+Var(55)*30000

[State 3255, Muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3255, Layer]
type = SprPriority
trigger1 = Time >= 23 && Time <= 36
value = ifelse (Time = 36, 1, 2)

[State 3255,Velocity]
type = VelSet
trigger1 = (Time = 94) || (Time = 149) || (Time = 150) || (Time = 202) || (Time = 203) || (Time = 252)
x = ifelse (Time = 94, -0.1, 0)
y = ifelse (Time = 94 || Time = 150, -12, ifelse (Time = 203, -11, 0))

[State 3255,Gravity]
type = VelAdd
trigger1 = Vel Y
y = .45

[State 3255, Anim]
type = ChangeAnim2
trigger1 = (Time = 149) || (Time = 202) || (Time >= 252 &&  Time < 296)
value = 3110+Var(55)*30000

[State 3255,HitPause]
type = PosAdd
trigger1 = (Time < 23) || (Time >= 252 && Time < 296)
x = ifelse (Time % 2, 1, -1)

[State 3255, Position]
type = PosAdd
trigger1 = Time = 296
y = -40

[State 3255, Velocity]
type = VelSet
trigger1 = Time = 296
x = -2
y = -10

[State 3255, Anim]
type = ChangeAnim
trigger1 = Time > 296 && (Vel Y > 0 && Pos Y >= 0) && SelfAnimExist(5051+Var(55)*30000)
value = 5051+Var(55)*30000

[State 3255, StateChage]
type = SelfState
trigger1 = Time > 296 && (Vel Y > 0 && Pos Y >= 0)
value = 5100

;-----------------------------------------------------------------------
;放炮
;-----------------------------------------------------------------------
[Statedef 3300]
type = S
movetype= A
physics = S
juggle = 7
anim = 3300
sprpriority = 2
velset = 0,0
ctrl = 0

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1
[State 3300, PowerSet]
type = VarSet
trigger1 = Time = 0
var(5) = ifelse (Command = "final3" && (Power >= 2000 || Var(12)), 1, 0)

[State 3300, EnvColor]
type = EnvColor
trigger1 = Time < 29
value = ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0), ifelse (Time < 5, 248, 0)
time = 1
under = 1

[State 3300, PalFX]
type = PalFX
trigger1 = (PrevStateNo = [1000, 1070]) && Time < 31
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1

[State 3300, Pause]
type = SuperPause
trigger1 = Time = 1
anim = -1
sound = f9000,0
time = 35
movetime = 35
poweradd = ifelse(fvar(30) > 0,0,-1000)
darken = 0

[State 3300, BG Cleaner]
type = AssertSpecial
trigger1 = Time < 29
flag= noFG

[State 3300, Spark Back]
type = Explod
trigger1 = Time = 3
anim = f7000
scale = 0.5,0.5
postype = p1
pos = -2, -84
sprpriority = -2
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3300, Spark Front]
type = Explod
trigger1 = Time = 3
anim = f7010
scale = 0.5,0.5
postype = p1
pos = -2, -84
sprpriority = 10
ontop = 1
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 3300, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1, 34
channel = 5

[State 3300, Effect]
type = PlaySnd
trigger1 = AnimElem = 10
value = 0,33
channel = 1

[State 3300, Voice]
type = PlaySnd
trigger1 = AnimElem = 10
value = 0,22
channel = 0

[State 3300, Velocity]
type = VelSet
trigger1 = AnimElemTime(10) = 21
x = -8

[State 3300, Voice]
type = PlaySnd
trigger1 = AnimElem = 10
value = 1,33

[State 3300, Beam]
type = Projectile
trigger1 = AnimElem = 10
projanim = 3310
projhitanim = -1
offset = 3, -84
projpriority = 9999
projsprpriority = 3
projremove = 0
projremovetime = 22
attr = S, HP
damage = 250, 50
animtype = Heavy
hitflag = MAF
guardflag = M
pausetime = 0,12 + Var(5)
sparkno = 3
guard.sparkno = 42
sparkxy = 40, 0
hitsound = S1,18
guardsound = 6,1
ground.type = Low
ground.slidetime = 16
ground.hittime  = 17
guard.ctrltime = 18
ground.velocity = -5, -8
guard.velocity = -10
air.velocity = -5,-6
air.juggle = 5
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
envshake.time = 16
envshake.ampl = 4
ProjID = 3300

[State 3300, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
;炸弹MAX
;-----------------------------------------------------------------------
[Statedef 2300]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 2300
sprpriority = 2
poweradd = ifelse(fvar(30) > 0,-1000,-2000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1
[State 2300,PalFx]
type = PalFX
trigger1 = gametime%2=1 && time <= 10
trigger1 = PrevStateno = [1000,1999]
time = 1
add = 256,256,256
ignorehitpause = 1

[State 2300,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s2300,1

[State 2300,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 10
value = s2300,2

[State 2300,PlaySnd]
type = null;PlaySnd
trigger1 = AnimElem = 23
value = s2300,3

[State 2300,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 11
value = s2300,4

[State 2300,EnvColor]
type = EnvColor
trigger1 = animelemtime(4)=3
value = 248,248,248
under = 1
time = 2

[State 2300,EnvColor]
type = EnvColor
trigger1 = animelemtime(5)=1
value = 0,0,0
under = 1
time = 30

[State 2300,AfterImage]
type = AfterImage
trigger1 = animelem = 6
time = 75
palmul = 1,1,1
paladd = 0,0,0
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
framegap = 2
length = 6
trans = Add1

[State 2300,SuperPause]
type = SuperPause
trigger1 = animelem = 5
time = 28
movetime = 28
anim = -1
darken = 0
sound = f9000,1

[State 2300,Explod]
type = Explod
trigger1 = animelem = 5
anim = f7110
scale = 0.5,0.5
postype = p1
pos = -22,-45
sprpriority = 5
supermove = 1
supermovetime = 9999
bindtime = 1
ownpal = 1

[State 3200, 4]
type = Explod
trigger1 = animelem = 5
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = animelem = 5
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 2300,Explod]
type = Explod
trigger1 = animelem = 5
anim = f7100
scale = 0.5,0.5
postype = p1
pos = -22,-45
sprpriority = -10
sprpriority = -1
supermove = 1
supermovetime = 9999
bindtime = 1
ownpal = 1

[State 2300,NotHitby]
type = NotHitBy
trigger1 = Time < 60
value = SCA

[State 2300,VelAdd]
type = VelAdd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 15
trigger3 = AnimElem = 18
x = -3

[State 2300,playsnd]
type = playsnd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 15
trigger3 = AnimElem = 18
value = 2300,5

[State 2900, 1]
type = helper
trigger1 = animelem = 12
trigger2 = animelem = 15
trigger3 = animelem = 18
id = 2030
name = "tobi"
pos = 60,-80
postype = p1
stateno = 2030
helpertype = normal
keyctrl = 0
ownpal = 1

[State 2300,EnvColor]
type = EnvColor
trigger1 = AnimElem = 12
trigger2 = AnimElem = 15
trigger3 = AnimElem = 18
time = 2
under = 1
value = 255,255,255
ignorehitpause = 1
persistent = 0

[State 1150,Explod]
type = Explod
trigger1 = AnimElem = 12
trigger2 = AnimElem = 15
trigger3 = AnimElem = 18
anim = 1422
postype = p1
facing = -1
pos = -40,0
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1
scale = .5,.5
id=1501
removeongethit = 1

[State 2300,Explod]
type = null;Explod
trigger1 = AnimElem = 12
trigger2 = AnimElem = 15
trigger3 = AnimElem = 18
anim = f125
postype = p1
facing = 1
pos = 10,0
sprpriority = 3
supermove = 1
ownpal = 1

[State 2300,Explod]
type = null;Explod
trigger1 = AnimElem = 12
trigger2 = AnimElem = 15
trigger3 = AnimElem = 18
anim = f125
postype = p1
facing = 1
pos = 35,0
sprpriority = 1
supermove = 1
ownpal = 1

[State 2200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 25
value = s181,1

[State 1150,Explod]
type = Explod
trigger1 = AnimElem = 25
anim = 3903
scale = .5,.5
postype = p1
facing = 1
pos = -52,-135
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1
id=3903

[State 1150,Explod]
type = Explod
trigger1 = AnimElem = 25
anim = 3903
scale = .5,.5
postype = p1
facing = -1
pos = 52,-135
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1
id=3903

[State 2300,Explod]
type = null;Explod
trigger1 = AnimElem = 25
anim = 185
postype = p1
facing = -1
pos = 10,13
sprpriority = 3
supermove = 1
ownpal = 1

[State 2300,Explod]
type = null;Explod
trigger1 = AnimElem = 25
anim = 185
postype = p1
pos = -40,8
sprpriority = 3
supermove = 1
ownpal = 1

[State 2300,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
; (HELPER)炸弹
[Statedef 2030]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= 0
velset = 8,-7
sprpriority = 2
ctrl = 0
anim = 2030

[State 2030,NotHitby]
type = NotHitBy
trigger1 = 1
value = SCA

[state a]
type =veladd
trigger1 = 1
y = 0.8

[State 2]
type = HitDef
trigger1 = time = 0
attr = A, HP
animtype  = up
damage    = 160,10
priority = 5, Hit
getpower = 0,0
hitflag = MAFD
guardflag = MA
pausetime = 0,4
sparkno = 3
sparkxy = 0,0
hitsound   = s2300,0
guard.sparkno = 42
guardsound = 6,1
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -7,-3
air.velocity = -7,-3
fall = 1
air.fall = 1
fall.recover = 0
palfx.time = 40
palfx.mul = 230,200,128
palfx.sinadd = 32,118,220,16
palfx.add = 190,160,84

[State -2,红色双烟雾];Random < 50
type = Explod
triggerall = Random < 50
trigger1 = Movehit
anim = f400
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1

[State -2,红色雾气]
type = Explod
triggerall = p2movetype = H
triggerall = Random < 100
trigger1 = Movehit
anim = f401
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1

[State -2,三个小爆点]
type = Explod
triggerall = p2movetype = H
triggerall = Random < 100
trigger1 = Movehit
anim = f402
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1

[State -2,红色单烟雾];Random < 70
type = Explod
triggerall = p2movetype = H
triggerall = Random < 70
trigger1 = Movehit
anim = f403
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1

[State 01]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger2 = movecontact
value = 2031

;-----------------------------------------------------------------------
; (HELPER)炸弹爆炸
[Statedef 2031]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
sprpriority = 2
ctrl = 0
anim = 2030

[state a]
type = playsnd
trigger1 = time = 0
value = -1

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -8
freq = 95
phase = 95
ignorehitpause = 0
Persistent = 0

[State 1000, 5]
type = Explod
trigger1 = time = 0
anim = f10
sprpriority = 5
postype = p1
scale = .8,.8
pos = 20,0
bindtime = 1
supermove = 1
under = 0
ownpal = 1
trans = add1

[State 1000, 5]
type = Explod
trigger1 = time = 0
anim = 3395
sprpriority = 3
postype = p1
scale = 1,1
pos = 25,55
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[state a]
type = destroyself
trigger1 = time = 0

;-----------------------------------------------------------------------
;MAX2
;-----------------------------------------------------------------------
[Statedef 3600]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 3600
sprpriority = 5
poweradd = -2000
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1
[State 2300,PalFx]
type = PalFX
trigger1 = gametime%2=1 && time <= 10
trigger1 = PrevStateno = 1000 || PrevStateno = 1001 || PrevStateno = 1010
time = 1
add = 256,256,256
ignorehitpause = 1

[State 2300,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s3600,0

[State 2300,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = s3600,3

[State 2300,EnvColor]
type = EnvColor
trigger1 = animelem =1
value = 0,0,0
under = 1
time = 40

[State 2300,AfterImage]
type = AfterImage
trigger1 = animelem = 6
time = 75
palmul = 1,1,1
paladd = 0,0,0
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
framegap = 2
length = 6
trans = Add1

;-----------------------------------------------
[State a];SC/DC 取消1技gc
type = VarAdd
trigger1 = prevstateno = [1000,3999]
fvar(29) = -1000
persistent = 0

[State 2300,SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 40
movetime = 40
anim = -1
darken = 0
sound = f9000,2

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 0
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 30
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 2300,Explod]
type = Explod
trigger1 = animelem = 1
anim = f7310
postype = p1
pos = 0,-60
sprpriority = 5
supermove = 1
supermovetime = 9999
bindtime = 1
ownpal = 1

[State 2300,Explod]
type = Explod
trigger1 = animelem = 1
anim = f7300
postype = p1
pos = 0,-60
sprpriority = -1
supermove = 1
supermovetime = 9999
bindtime = 1
ownpal = 1

[State 2300,NotHitby]
type = NotHitBy
trigger1 = Time < 40
value = SCA

[State 2300,playsnd]
type = playsnd
trigger1 = AnimElem = 10
value = 3600,1

[State 2900, 1]
type = null;helper
trigger1 = AnimElem = 10
trigger2 = AnimElem = 12
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
id = 3601
name = "飞弹"
pos = 60,-80
postype = p1
stateno = 3601
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1120, hitdef]
type = Projectile
trigger1 = AnimElem = 10
trigger2 = AnimElem = 12
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
ProjAnim = 3601
ProjHitAnim = -1
ProjID = 1001
projshadow = 64,64,64
offset = 60,-80
velocity = 11,0
hitflag = MAFP
guardflag = MA
attr = S, SP
animtype  = Hard
damage    = 20,2
priority = 5, Hit
getpower = 0,0
givepower = 15,15
guardflag = MA
pausetime = 0,13
guard.pausetime = 0,11
sparkno = 3
guard.sparkno = 42
sparkxy = 0,0
hitsound   = s3600,4
guardsound = s1,22
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7,-4
yaccel = 0.5
fall = 1
fall.recover = 1
air.velocity = -7,-4
air.animtype = Back
air.fall = 1
ID = 21002
palfx.time =35
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,160,104

[State 2900, 1]
type = null;helper
trigger1 = AnimElem = 12
trigger2 = AnimElem = 14
trigger3 = AnimElem = 16
id = 3601
name = "飞弹"
pos = 60,-60
postype = p1
stateno = 3601
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1120, hitdef]
type = Projectile
trigger1 = AnimElem = 12
trigger2 = AnimElem = 14
trigger3 = AnimElem = 16
ProjAnim = 3601
ProjHitAnim = -1
ProjID = 1001
projshadow = 64,64,64
offset = 60,-60
velocity = 11,0
hitflag = MAFP
guardflag = MA
attr = S, SP
animtype  = Hard
damage    = 20,2
priority = 5, Hit
getpower = 0,0
givepower = 15,15
guardflag = MA
pausetime = 0,13
guard.pausetime = 0,11
sparkno = 3
guard.sparkno = 42
sparkxy = 0,0
hitsound   = s3600,4
guardsound = s1,22
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7,-4
yaccel = 0.5
fall = 1
fall.recover = 1
air.velocity = -7,-4
air.animtype = Back
air.fall = 1
ID = 21002
palfx.time =35
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,160,104

[State 2900, 1]
type = helper
trigger1 = AnimElem = 10
trigger2 = AnimElem = 14
trigger3 = AnimElem = 18
id = 3601
name = "飞弹"
pos = 60,-35
postype = p1
stateno = 3601
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1120, hitdef]
type = Projectile
trigger1 = AnimElem = 10
trigger2 = AnimElem = 14
trigger3 = AnimElem = 18
ProjAnim = 3601
ProjHitAnim = -1
ProjID = 1001
projshadow = 64,64,64
offset = 60,-35
velocity = 11,0
hitflag = MAFP
guardflag = MA
attr = S, SP
animtype  = Hard
damage    = 20,2
priority = 5, Hit
getpower = 0,0
givepower = 15,15
guardflag = MA
pausetime = 0,13
guard.pausetime = 0,11
sparkno = 3
guard.sparkno = 42
sparkxy = 0,0
hitsound   = s3600,4
guardsound = s1,22
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7,-4
yaccel = 0.5
fall = 1
fall.recover = 1
air.velocity = -7,-4
air.animtype = Back
air.fall = 1
ID = 21002
palfx.time =35
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,160,104

[State 2300,EnvColor]
type = EnvColor
trigger1 = AnimElem = 10
trigger2 = AnimElem = 12
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
trigger5 = AnimElem = 18
time = 2
under = 1
value = 255,255,255
ignorehitpause = 1
persistent = 0

[State 2300,velset]
type = velset
trigger1 = AnimElem = 10
trigger2 = AnimElem = 12
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
trigger5 = AnimElem = 18
x = -2.55546

[State 1150,Explod]
type = Explod
trigger1 = AnimElem = 10
trigger2 = AnimElem = 12
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
trigger5 = AnimElem = 18
anim = 1422
postype = p1
facing = -1
pos = -10,0
sprpriority = 2
supermove = 1
bindtime = 1
ownpal = 1
scale = .5,.5
id=1501
removeongethit = 1

[State 2300,Explod]
type = null;Explod
trigger1 = AnimElem = 10
trigger2 = AnimElem = 12
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
trigger5 = AnimElem = 18
anim = 3602
ID = 3600
postype = p1
facing = -1
pos = 5,0
sprpriority = 3
supermove = 1
ownpal = 1

[State 2300,Explod]
type = null;Explod
trigger1 = AnimElem = 19
anim = 3603
ID = 3600
postype = p1
facing = -1
pos = 5,-75
sprpriority = 1
supermove = 1
ownpal = 1

[State 2300,Explod]
type = Explod
trigger1 = AnimElem = 24
anim = 3606
ID = 3600
postype = p1
pos = -10,-80
sprpriority = -1
supermove = 1
ownpal = 1
bindtime = -1
ignorehitpauses = 0
scale = .6,.6

[State 2300,playsnd]
type = playsnd
trigger1 = AnimElem = 26
value = 3600,2

[State 2900, 1]
type = helper
trigger1 = AnimElem = 26
id = 3604
name = "飞弹"
pos = 0,-85
postype = p1
stateno = 3604
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1505, 5]
type = Projectile
trigger1 = AnimElem = 26
projpriority = 2
attr = S, SP
projID = 3600
projanim = 3607
projhitanim = 3607
projremovetime = 52
projmiSStime = 1
projhitS = 1
offset = 0,-85
velocity = 0,0
hitflag = MAF
damage = 0,0
getpower = 0,0
givepower = 0,0
animtype = Hard
guardflag = M
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
guard.type = high
ground.slidetime = 0
ground.hittime = 0
air.hittime = 0
ground.velocity = 0
air.velocity = 0,0
guard.hittime = 0
guard.velocity = 0

[State 2300,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3610
ctrl = 0
;------------------------------------------------------------------------------------
[Statedef 3610]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 3610
sprpriority = 0

[State 2200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s181,1

[State 1150,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 3903
scale = .5,.5
postype = p1
facing = 1
pos = -60,-155
sprpriority = 2
supermove = 1
bindtime = 1
ownpal = 1
id=3903

[State 1150,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 3903
scale = .5,.5
postype = p1
facing = -1
pos = 60,-155
sprpriority = 2
supermove = 1
bindtime = 1
ownpal = 1
id=3903

[State 2300,Explod]
type = null;Explod
trigger1 = AnimElem = 1
anim = 185
ID = 3600
postype = p1
facing = -1
pos = 10,13
sprpriority = 3
supermove = 1
ownpal = 1

[State 2300,Explod]
type = null;Explod
trigger1 = AnimElem = 1
anim = 185
ID = 3600
postype = p1
pos = -40,8
sprpriority = 3
supermove = 1
ownpal = 1

[State 2300,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 3601]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= 0
velset = 11,0
sprpriority = 2
ctrl = 0
anim = 3601

[State 2102, 4]
type = MoveHitReset
trigger1 = MoveHit

[State 200, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2102, 2]
type = HitOverride
trigger1 = time = 0
time = -1
attr = SCA, AA, AT, AP
slot = 0
stateno = 3602

[State 2]
type = HitDef
trigger1 = time = 0
attr = A, HP
animtype  = Hard
damage    = 20,2
priority = 5, Hit
getpower = 0,0
hitflag = MAFD
guardflag = MA
pausetime = 0,4
sparkno = 3
sparkxy = 0,0
hitsound   = s3600,4
guard.sparkno = 42
guardsound = s1,22
ground.type = high
ground.slidetime = 50
ground.hittime  = 50
ground.velocity = -7
air.velocity = -7,-3
fall = 0
air.fall = 1
fall.recover = 0
palfx.time = 40
palfx.mul = 230,200,128
palfx.sinadd = 32,118,220,16
palfx.add = 190,160,84

[State 01]
type = ChangeState
trigger1 = time > 100
trigger2 = movecontact
value = 3602
;---------------------------------------------------------------------------
[Statedef 3602]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
sprpriority = 2
ctrl = 0
anim = 2030

[state a]
type = playsnd
trigger1 = time = 0
value = -1

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -8
freq = 95
phase = 95
ignorehitpause = 0
Persistent = 0

[State 1000, 5]
type = Explod
trigger1 = time = 0
anim = 3395
sprpriority = 3
postype = p1
scale = 1,1
pos = 25,55
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[state a]
type = destroyself
trigger1 = time = 0
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[Statedef 3604]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= 0
velset = 0,0
sprpriority = 22
ctrl = 0
anim = 3604

[State 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2]
type = HitDef
trigger1 = timemod = 4,0
attr = A, HP
animtype  = diagup
damage    = 25,2
priority = 5, Hit
getpower = 0,0
hitflag = MAFD
guardflag = MA
pausetime = 0,4
sparkno = 3
sparkxy = 0,0
hitsound   = s2300,0
guard.sparkno = 42
guardsound = s1,22
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -7,-3
air.velocity = -7,-3
fall = 1
air.fall = 1
fall.recover = 0
;palfx.time = 40
;palfx.mul = 230,200,128
;palfx.sinadd = 32,118,220,16
;palfx.add = 190,160,84

[State 2102, 2]
type = HitOverride
trigger1 = time = 0
time = -1
attr = SCA, AA, AT, AP
slot = 0
stateno = 3605

[state 2102, 2]
type = changestate
trigger1 = animtime = 0
trigger2 = root,movetype = H
value = 3605
ignorehitpause = 1
;----------------------
[Statedef 3605]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 3605
VelSet = 0,0

[state a]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H
;==============================================================================

;============================================================
[Statedef 24300]
type = A
movetype = I
physics = N
anim = 99999
velset = 0, 0
ctrl = 0

[State 3020, 1]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28001)
triggerall = teamside = 1
trigger1 = !time
anim = F28001
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28001)
triggerall = teamside = 1
trigger1 = !time
anim = F28001
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28002)
triggerall = teamside = 1
trigger1 = !time
anim = F28002
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28002)
triggerall = teamside = 1
trigger1 = !time
anim = F28002
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28003)
triggerall = teamside = 1
trigger1 = !time
anim = F28003
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28003)
triggerall = teamside = 1
trigger1 = !time
anim = F28003
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28004)
triggerall = teamside = 1
trigger1 = !time
anim = F28004
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28004)
triggerall = teamside = 1
trigger1 = !time
anim = F28004
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28005)
triggerall = teamside = 1
trigger1 = !time
anim = F28005
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28005)
triggerall = teamside = 1
trigger1 = !time
anim = F28005
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28006)
triggerall = teamside = 1
trigger1 = !time
anim = F28006
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28006)
triggerall = teamside = 1
trigger1 = !time
anim = F28006
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28007)
triggerall = teamside = 1
trigger1 = !time
anim = F28007
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28007)
triggerall = teamside = 1
trigger1 = !time
anim = F28007
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28011)
triggerall = teamside = 2
trigger1 = !time
anim = F28011
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28011)
triggerall = teamside = 2
trigger1 = !time
anim = F28011
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28012)
triggerall = teamside = 2
trigger1 = !time
anim = F28012
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28012)
triggerall = teamside = 2
trigger1 = !time
anim = F28012
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28013)
triggerall = teamside = 2
trigger1 = !time
anim = F28013
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28013)
triggerall = teamside = 2
trigger1 = !time
anim = F28013
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28014)
triggerall = teamside = 2
trigger1 = !time
anim = F28014
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28014)
triggerall = teamside = 2
trigger1 = !time
anim = F28014
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28015)
triggerall = teamside = 2
trigger1 = !time
anim = F28015
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28015)
triggerall = teamside = 2
trigger1 = !time
anim = F28015
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28016)
triggerall = teamside = 2
trigger1 = !time
anim = F28016
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28016)
triggerall = teamside = 2
trigger1 = !time
anim = F28016
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28017)
triggerall = teamside = 2
trigger1 = !time
anim = F28017
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28017)
triggerall = teamside = 2
trigger1 = !time
anim = F28017
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 4300]
type = RemoveExplod
trigger1 = root,StateNo != 3600
trigger1 = root,StateNo != [3800,3820]
id = 8000

[State Snd]
type = PlaySnd
trigger1 = root,StateNo != 3600
trigger1 = root,StateNo != [3800,3820]
value = F23997,3
persistent = 0

[State 4300]
type = Explod
triggerall = !NumExplod(4291)
triggerall = teamside = 1
trigger1 = root,StateNo != 3600
trigger1 = root,StateNo != [3800,3820]
anim = F24293
id = 4291
postype = back
pos = 0, 0
bindtime = -1
scale = 1,1
sprpriority = -11
ownpal = 1
persistent = 0
supermovetime = 99999
pausemovetime = 99999

[State 4300]
type = Explod
triggerall = !NumExplod(4291)
triggerall = teamside = 2
trigger1 = root,StateNo != 3600
trigger1 = root,StateNo != [3800,3820]
anim = F24294
id = 4291
postype = back
pos = 0, 0
bindtime = -1
scale = 1,1
sprpriority = -11
ownpal = 1
persistent = 0
supermovetime = 99999
pausemovetime = 99999

[State 4300]
type = DestroySelf
triggerall = Time > 0
trigger1 = root,StateNo != 3600
trigger1 = root,StateNo != [3800,3820]
;============================================================
