
[Data]
life = 1500        
attack = 100    
defence = 100       
fall.defence_up = 0 
liedown.time = 30   
airjuggle = 15    
sparkno = 2
guard.sparkno = 42
volume = 0
IntPersistIndex = 5,20
FloatPersistIndex=40
KO.echo = 0         
power = 5000

[Size]
xscale = 1
yscale = 1
ground.back = 15
ground.front = 15
air.back = 13
air.front = 13
height = 45          ;僉儍儔偺崅偝
z.width = 3          ;Player width (into and out)
attack.width = 0     ;Default attack width: back, front
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90;Default attack distance for projectiles
head.pos = -4, -91    ;Approximate position of head
mid.pos = -4, -56     ;Approximate position of midsection

[Velocity]
walk.fwd  = 2.666667            ;Walk forward
walk.back = -1.666667          ;Walk backward
run.fwd  = 6.5               ;Run forward (x, y)  - if y<0, player will hop
run.back = -6,-4          ;Run backward (x, y) - if y=0, player will run
jump.neu = 0,-9.7        ;Neutral jumping velocity (x, y)
jump.back = -3.1,-9.2     ;Jump back Speed (x, y)
jump.fwd = 3.1,-9.2      ;Jump forward Speed (x, y)
runjump.fwd = 3.5,-9.0   ;.

[Movement]
;airjump.num = 0       ;Number of air jumps allowed (opt)
;airjump.height = 35   ;Minimum distance from ground before you can air jump (opt)
yaccel = .56         ;Vertical acceleration
stand.friction = .8  ;Friction coefficient when standing
crouch.friction = .8 ;Friction coefficient when crouching

;========================================================================

;-------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type = S
physics = S
anim = 100+Var(55)*10000
ctrl = 0

[State 5120, 5]
type = NotHitBy
triggerall = time = 0
trigger1 = prevstateno = 4256 || prevstateno = 4276
trigger2 = prevstateno = 4341 || prevstateno = 4351
trigger3 = prevstateno = 4278 || prevstateno = 42791
trigger4 = prevstateno = 4336 || prevstateno = 5120
trigger5 = prevstateno = 140
value2 = , NT,ST
time = 9

[State 100, 1]
type = VelSet
trigger1 = time > 3
x = const(velocity.run.fwd.x)

[State 191, Spray Anim P1]
type = Explod
trigger1 = time >= 0 && timemod = 10,0
trigger1 = StageVar(info.author) = "water"
ID = 20
anim = F21
postype = p1
pos = -10,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = F100,0+(StageVar(info.author) = "water")
loop = 1
channel = 10

[State 100, 3]
type = ChangeState
trigger1 = (command = "holdup") && (time >= 4)
trigger2 = roundstate = 2&&sysfvar(1)  = 0&&(time >= 4)&&random <= 100+var(58)*50
trigger2 = var(58)>=1&&p2bodydist x < 70
trigger2 = p2statetype = s|p2movetype = A
value = 40
ctrl = 0

[State 100, 3]
type = ChangeState
triggerall = !var(58)
trigger1 = (command != "holdfwd") && (time >= 13)
value = 101
ctrl = 0

[State 100, DashStop]
type = ChangeState
triggerall = var(58)>=1
trigger1 = inguarddist
trigger2 = p2MoveType = A
trigger3 = P2BodyDist X <= 30
trigger3 = P2BodyDist Y >= -50
value = 101
ctrl = 0

[State 100, 5]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

;------------------------------------
[Statedef 101]
type = S
physics = S
velset = 0,0
ctrl = 1

;Stop channel 20's sound when button fwd is release
[State 100, 3]
type = StopSnd
trigger1 = time = 0
channel = 10;running snd

[State 101, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = anim != 101+Var(55)*10000
value    = 101+Var(55)*10000

[State 101, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------
[Statedef 102]
type = S
physics = S
anim = 102+Var(55)*10000
velset = 0
ctrl = 0

[State 102, NOTHITBY]
type = nothitby
trigger1 = 1
value = SC, NT, ST, HT

[State 102, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 103

;----------------------------
[Statedef 103]
type = A
physics = N
anim = 103+Var(55)*10000

[State 103, 1]
type = VelSet
trigger1 = Time = 0
x = 6
y = -4

[State 103, 2]
type = PlaySnd
trigger1 = Time = 0
value = F105, 0

[State 103, 3]
type = VelAdd
trigger1 = Time > 0
y = .51

[State 103, 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 107

;---------------------------------
[Statedef 105]
type = S
physics = S
anim = 105+Var(55)*10000
velset = 0
ctrl = 0

[State 5120, 5]
type = NotHitBy
triggerall = time = 0
trigger1 = prevstateno = 4256 || prevstateno = 4276
trigger2 = prevstateno = 4341 || prevstateno = 4351
trigger3 = prevstateno = 4278 || prevstateno = 42791
trigger4 = prevstateno = 4336 || prevstateno = 5120
trigger5 = prevstateno = 140
value2 = , NT,ST
time = 9

[State 105, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 106

;----------------------------
[Statedef 106]
type = A
physics = N
anim = 106+Var(55)*10000

[State -2, 0]
type = RemoveExplod
trigger1 = 1
ignorehitpause = 1
ID = 200002

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)+Var(55)*0.5
y = const(velocity.run.back.y)+Var(55)*0.5

[State 191, Spray Anim P1]
type = Explod
trigger1 = time = 2
trigger1 = StageVar(info.author) = "water"
anim = F21
postype = p1
pos = 0,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 100, 3]
type = PlaySnd
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 2
value = f47,1

[State 100, 3]
type = PlaySnd
trigger1 = time = 2
value = F105, 0

[State 106, 3]
type = veladd
trigger1 = time = 10
x = .06

[State 106, 3]
type = VelAdd
trigger1 = Time > 2
y = .79

[State 106, 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 107

;---------------------------------
[Statedef 107]
type = S
physics = S
anim = 107+Var(55)*10000
velset = 0,0

[State 107, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 100, 3]
type = PlaySnd
trigger1 = time = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 106, 3];小灰尘
type = GameMakeAnim
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 2
value = 125
pos = -5,-2
spacing = 1

[State 0];小水花
type = GameMakeAnim
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 1
value = 21
pos = 0, 0
under = 0

[State 107, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------
;Roll (forwards)
[Statedef 700]
type = S
movetype = I
physics = N
anim = 700+Var(55)*10000
poweradd = 0
velset = 0
ctrl = 0
Sprpriority = -1
facep2 = 1
;---------------------------------------------------
[State 700, PalFX];身上白光
type = PalFX
triggerall = (Time = 0 || Time = 3 || Time = 6)
trigger1 = prevstateno = [150,153]
time = 1
add = 0,0,255

[State 701, PowerAdd]
type = PowerAdd
trigger1 = prevstateno = [150,153]
trigger1 = time = 0
value = -1000

[State 700, NotHitBy]
type = NotHitBy
trigger1 = prevstateno = [150,153]
trigger1 = 1
value = SCA

[State 700, EnvColor]
type = EnvColor
triggerall = time = 0
trigger1 = prevstateno = [150,153]
value = 255,255,255
time = 1
under = 1

[State 700, Explod]
type = Explod
trigger1 = prevstateno = [150,153]
trigger1 = time = 0
anim = f700
postype = p1
ID = 700
pos = 0,-65
ontop = 1
ownpal = 1
persistent = 0
pausemovetime = 999999
supermovetime = 999999
supermove = 1

[State 700, Pause]
type = Pause
trigger1 = prevstateno = [150,153]
trigger1 = time = 0
time = 6
movetime = 6
ignorehitpause = 1

[State 700, AfterImage]
type = AfterImage
triggerall = time = 0
trigger1 = prevstateno = [150,153]
time = 15
length = 3
frameGap = 1
timeGap = 4
PalAdd = 0, 0, 0
PalMul = 1, 1, 1
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
Trans = add1
;---------------------------------------------------
[State 700, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 47 2]
type = Afterimagetime
trigger1 = time%2 = 0 && Time < 9
time = 2

[State 1000, 1]
type = NotHitBy
trigger1 = prevstateno = [150,152]
trigger1 = 1
value = SCA
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno != [150,152]
trigger1 = Time >= 0
trigger1 = animtime <= 0 - 9
value = SCA, NT, ST
time = 1

[State 700, 1]
type = PlaySnd
trigger1 = Time = 0
value =5,1+(Var(55)=1)*17+(Var(55)=2)*15

[State 250, 4]
type = VelSet
trigger1 = AnimElem = 3 && prevstateno = 100
x = 7

[State 250, 4]
type = VelSet
trigger1 = AnimElem = 3 && prevstateno != 100
x = 5

[State 250, 6]
type = VelSet
trigger1 = AnimElem = 7
x = 0

[State 700, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Roll (BAck)
[Statedef 710]
type = S
movetype = I
physics = N
anim = 710+Var(55)*10000
poweradd = 0
velset = 0
ctrl = 0
Sprpriority = -1
facep2 = 1
;---------------------------------------------------
[State 700, PalFX];身上白光
type = PalFX
triggerall = (Time = 0 || Time = 3 || Time = 6)
trigger1 = prevstateno = [150,153]
time = 1
add = 0,0,255

[State 701, PowerAdd]
type = PowerAdd
trigger1 = prevstateno = [150,153]
trigger1 = time = 0
value = -1000

[State 700, NotHitBy]
type = NotHitBy
trigger1 = prevstateno = [150,153]
trigger1 = 1
value = SCA

[State 700, EnvColor]
type = EnvColor
triggerall = time = 0
trigger1 = prevstateno = [150,153]
value = 255,255,255
time = 1
under = 1

[State 700, Explod]
type = Explod
trigger1 = prevstateno = [150,153]
trigger1 = time = 0
anim = f700
postype = p1
ID = 700
pos = 0,-65
ontop = 1
ownpal = 1
persistent = 0
pausemovetime = 999999
supermovetime = 999999
supermove = 1

[State 700, Pause]
type = Pause
trigger1 = prevstateno = [150,153]
trigger1 = time = 0
time = 6
movetime = 6
ignorehitpause = 1

[State 700, AfterImage]
type = AfterImage
triggerall = time = 0
trigger1 = prevstateno = [150,153]
time = 15
length = 3
frameGap = 1
timeGap = 4
PalAdd = 0, 0, 0
PalMul = 1, 1, 1
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
Trans = add1
;---------------------------------------------------
[State 710, 1]
type = PlayerPush
trigger1 = AnimElem = 1 ,>0
value = 0

[State 1000, 1]
type = NotHitBy
trigger1 = prevstateno = [150,152]
trigger1 = 1
value = SCA
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno != [150,152]
trigger1 = Time >= 0
trigger1 = animtime <= 0 - 9
value = SCA, NT, ST
time = 1

[State 800, 6]
type = PlayerPush
trigger1 = 1
value = 0

[State 701, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*15

[State 260, 4]
type = VelSet
trigger1 = AnimElem = 4
x = -5

[State 260, 6]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 701, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
[Statedef 3990]
type = S
movetype = I
physics = S
anim = 3990+Var(55)*10000
poweradd = 0
velset = 0,0
ctrl = 0

[State 3700,Turn]
type = Turn
trigger1 = time = 0 && P2Dist X < 0

[State 1000, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3550, 2]
type = PalFX
trigger1 = Time = 0
time = 1
add = 0, 0, 0

[State 260, 4]
type = VelSet
trigger1 = time = [0,3]
x = -8

[State 701, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*15
volume = 0
channel = 0

[State 1002, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------

;===================================================
[Statedef 190]
type = S
ctrl = 0
anim = 99999

[State a]
type = ChangeState
trigger1 = Enemy,Stateno = 99971
value = 0

[State 191, 3] ; Alternate Intro
type = Changestate
triggerall = Var(55)=1
triggerall = Time = 0
trigger1 = p2Name = "Robert" || p4Name = "Robert"
trigger2 = p2Name = "Yuri" || p4Name = "Yuri"
trigger3 = p2Name = "Ryo" || p4Name = "Ryo"
value = 194
ctrl = 0

[State 191, 1] ; Intro Kyokugen
type = Changestate
triggerall = Var(55)=0
triggerall = Time = 0
trigger1 = p2Name = "Robert" || p4Name = "Robert"
trigger2 = p2Name = "Yuri" || p4Name = "Yuri"
trigger3 = p2Name = "Ryo" || p4Name = "Ryo"
value = 193
ctrl = 0

[State 191, 3] ; Alternate Intro
type = Changestate
trigger1 = Time = 0
value = 192+(random>500&&Var(55)=0)*5+(Var(55)=2)*5+(Var(55)=1)*5
ctrl = 0

;---------------------------------------------------------------------------
; Alternate Intro2
[Statedef 197]
type = S
physics = S
movetype = i
ctrl = 0
anim = 190+Var(55)*10000
velset = 0,0

[State 191, 4.1]
type = Playsnd
triggerall = Var(55)<1
trigger1 = animelem = 8
trigger2 = animelem = 10
value = 190,1
channel = 4

[State 191, 4.1]
type = Playsnd
triggerall = Var(55)=2
trigger1 = animelem = 2
value = 5,10
channel = 4

[State 191, 4.1]
type = Playsnd
triggerall = Var(55)=1
trigger1 = animelem = 2
value = 4,13
channel = 4

[State 191, 5] ;Intro not yet over
type = AssertSpecial
trigger1 = time = [0,260]
flag = Intro

[State 191, 6]
type = Changestate
trigger1 = time = 260&&Var(55)<1
trigger2 = AnimTime = 0&&Var(55)>=1
value = 95196

;===============
[Statedef 192]
type = S
physics = S
ctrl = 0
anim = 191
velset = 0,0

[State 192, 1] ;Intro not yet over
type = AssertSpecial
trigger1 = Time = [0,133]
flag = Intro

[State 192, 2]
type = Playsnd
trigger1 = animelem = 6
trigger2 = animelem = 12
value = 191,1
channel = 4

[State 192, 3]
type = Changestate
trigger1 = Time >= 133
value = 95196

;---------------------------------------------------------------------------
[Statedef 194]
type = S
physics = S
ctrl = 0
anim = 194
velset = 0,0

[State 194, 1] ;Intro not yet over
type = AssertSpecial
trigger1 = Time = [0,350]
flag = Intro

[State 194, 2]
type = Playsnd
trigger1 = animelem = 3
value = 192,1
channel = 4

[State 194, 2]
type = Playsnd
trigger1 = animelem = 26
value = 3,23
channel = 4

[State 194, 2]
type = Playsnd
trigger1 = animelem = 21
value = 200,2

[State 194, 2]
type = Playsnd
trigger1 = animelem = 27
value = 3,11

[State 191, 1]
type = Explod
trigger1 = AnimElem = 27
anim = 1040
pos = 55,-87
sprpriority = 5
ownpal = 1

[State 191, M1]
type = Explod
trigger1 = AnimElem = 27
persistent = 0
anim = 197
postype = p1
pos = 58, -87
velocity = 8, 1
accel = .5, .20
removetime = 48
sprpriority = 5

[State 191, M2]
type = Explod
trigger1 = AnimElem = 27
anim = 198
postype = p1
pos = 58, -84
velocity = 6, 3
accel = .25, .32
removetime = 48
sprpriority = 5

[State 194, 4]
type = Helper
trigger1 = AnimElem = 21
ID = 196
pos = 35,-120
postype = p1
stateno = 196
name = "mask"
helpertype = normal
keyctrl = 0
ownpal = 1

[State 194, 3]
type = Changestate
trigger1 = Time >= 350
value = 95196

;-------------------------------------------------------------------------------------------
;Mask
[Statedef 196]
type = A
anim = 196
physics = N
velset = .5,-8

[State 196, 1]
type = VelAdd
trigger1 = Time >= 0
y = .35

[State 196, 1]
type = null;VelAdd
trigger1 = AnimElem = 9, >= 0
x = -.2

[State 196, 2]
type = DestroySelf
trigger1 = time = 48

;------------------------------------------------------------------------
[Statedef 193]
type = S
physics = S
ctrl = 0
anim = 193+Var(55)*10000
velset = 0,0

[State 193, 1] 
type = AssertSpecial
trigger1 = Time = [0,300]
flag = Intro

[State 193, 2.1]
type = Playsnd
trigger1 = animelem = 4
value = 0,13
channel = 4

[State 193, 2.2]
type = Playsnd
trigger1 = animelem = 8
value = 1,13
channel = 4

[State 193, 3]
type = Changestate
trigger1 = Time >= 300
value = 95196

;---------------------------------------------------------------------------
; Time over
[Statedef 170]
type = S
anim = 170+Var(55)*10000

[State 170, 1]
type = AssertSpecial
trigger1 = Time = [0,280]
flag = RoundNotOver


;--------------------------------------------------------------------------------
[Statedef 189]
type = A
movetype = I
physics = N
anim = 44+Var(55)*10000
velset = 4.8,-1
ctrl = 0

[State 189, SB]
type = screenbound
trigger1 = 1
value = 0

[State 189, 1]
type = posadd
trigger1 = time = 0
y = -70
x = -100

[State 189, 2]
type = veladd
trigger1 = 1
y = .4

[State 189, AS]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 189, 3]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 198

;-------------------------------------------------------------------------------
[Statedef 198]
type = S
movetype = I
physics = N
anim = 47+Var(55)*10000
velset = 0,0
ctrl = 0

[State 197, 1]
type = posset
trigger1 = time = 0
y = 0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 197, AS]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 197, 3]
type = ChangeState
trigger1 = time >= 4
value = 95196

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
movetype = I
physics = S
anim = 195+Var(55)*10000+(IsHelper(1234567777))*root,var(55)*10000
velset = 0,0
ctrl = 0

[state 1]
type=assertspecial
trigger1 = IsHelper(1234567777)
flag=invisible

[State 1010, 0]
type = destroyself
trigger1 = animtime = 0
trigger1 = IsHelper(1234567777)
ignorehitpause = 1
persistent = 0

[State 195, SND1]
type = PlaySnd
trigger1 = IsHelper(1234567777)
trigger1 = AnimElem = 2&&root,Var(55)<1
value = 195,1

[State 195, SND1]
type = PlaySnd
trigger1 = IsHelper(1234567777)
trigger1 = AnimElem = 2&&root,Var(55)=1
value = 4,14

[State 195, SND1]
type = PlaySnd
trigger1 = IsHelper(1234567777)
trigger1 = AnimElem = 2&&root,Var(55)=2
value = 5,11

[State 195, SND1]
type = PlaySnd
trigger1 != IsHelper(1234567777)
trigger1 = AnimElem = 2&&Var(55)<1
value = 195,1

[State 195, SND1]
type = PlaySnd
trigger1 != IsHelper(1234567777)
trigger1 = AnimElem = 2&&Var(55)=1
value = 4,14

[State 195, SND1]
type = PlaySnd
trigger1 != IsHelper(1234567777)
trigger1 = AnimElem = 2&&Var(55)=2
value = 5,11

[State 195, 2]
type = CtrlSet
trigger1 = winko = 0 && Time = 45
value = 1

[State 195, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------
; Win
[Statedef 180]
type = S
velset = 0,0
movetype = A
physics = S
;------------------------------------------------
[State a]
type = ChangeState
triggerall = Enemy,Stateno = 99971
trigger1 = time = 0
value = 99972

[State a]
type  = ChangeState
triggerall = Enemy,Stateno != 99971
trigger1 = MatchOver
value  = 99998
;------------------------------------------------
[State 180,1]
type  = ChangeState
trigger1 = MatchOver = 1
value  = 0

[State 107, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 180, 7]
type = ChangeState
trigger1 =Var(55) =2
value = 181+(random < 500)*3

[State 180, 7]
type = ChangeState
trigger1 =Var(55) =1
value = 182+(random < 500)*4

[State 180, 7]
type = ChangeState
trigger1 =Var(55) =0
value = 181+random%7

;------------------------------------------------------------
; Win pose D
[Statedef 181]
type = S
anim = 180+(Var(55)=2)*20000
movetype = A
physics = S

[State 183, 2]
type = PlaySnd
trigger1 = AnimElem = 4&&Var(55)>1
value = 199,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0,320]
flag = RoundNotOver

;------------------------------------------------------------
; Win pose A
[Statedef 182]
type = S
anim = 181+Var(55)*10000
ctrl = 0
movetype =A
physics = S

[State 2727, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State 2727, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 182, 2]
type = PlaySnd
trigger1 = AnimElem = 8
value = 181,1

[State 181, 摿庩岠壥]
type = AssertSpecial
trigger1 = time = [0,220]
flag = roundnotover

;------------------------------------------------------------
[Statedef 1877]
type = S
anim = 0

[State 183, 1]
type = AssertSpecial
trigger1 = Time = [0,1]
flag = RoundNotOver

;------------------------------------------------------------
; Win pose E
[Statedef 183]
type = S
anim = 182
movetype = i
physics = S

[State 183, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 182,1

[State 181, 摿庩岠壥]
type = AssertSpecial
trigger1 = time = [0,220]
flag = roundnotover

;------------------------------------------------------------
; Win pose F
[Statedef 184]
type = S
anim = 183+Var(55)*10000
movetype = A
physics = S

[State 184, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 183,1

[State 181, 摿庩岠壥]
type = AssertSpecial
trigger1 = time = [0,220]
flag = roundnotover

;------------------------------------------------------------
; Win pose G
[Statedef 185]
type = S
anim = 184
movetype = A
physics = S

[State 185, 2]
type = PlaySnd
trigger1 = AnimElem = 6
value = 184,1

[State 181, 摿庩岠壥]
type = AssertSpecial
trigger1 = time = [0,220]
flag = roundnotover

;------------------------------------------------------------
; Win pose B
[Statedef 186]
type = S
anim = 185+Var(55)*10000
movetype = A
physics = S

[State 186, 2]
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 17
value = 200,2

[State 181, 摿庩岠壥]
type = AssertSpecial
trigger1 = time = [0,220]
flag = roundnotover

;------------------------------------------------------------
; Win pose C
[Statedef 187]
type = S
anim = 186
movetype = A
physics = S

[State 187, 2]
type = PlaySnd
trigger1 = AnimElem = 13
value = 185,1

[State 181, 摿庩岠壥]
type = AssertSpecial
trigger1 = time = [0,220]
flag = roundnotover

;;===================================================
[Statedef 200]
type = S
movetype = A
physics = S
anim = 200+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = light
damage = ifelse(enemy,var(0) = 1,35,35)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
guardflag = M
pausetime = 7+(Var(28)=1)*4,8+(Var(28)=1)*4
sparkno = 0
guard.sparkno = 40
sparkxy = -15,-84
hitsound = 5,0
guardsound = 6,0
ground.type = high
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7
guard.hittime = 6
guard.velocity = -6
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 40
ignorehitpause = 1
persistent = 0

[State 200, 4]
type = ChangeState
trigger1 = P2bodydist X < 25 && Time = 0
value = 210

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
[Statedef 205]
type = S
movetype = A
physics = S
anim = 20205
velset = 0,0
ctrl = 0
facep2 = 1

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11
channel = 0

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = hard
damage = ifelse(enemy,var(0) = 1,35,35)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
guardflag = M
pausetime = 14,14
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-84
hitsound = 5,1
guardsound = 6,0
ground.type = high
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7
guard.hittime = 6
guard.velocity = -6
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 40
ignorehitpause = 1
persistent = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
;Standing Close Light Punch
[Statedef 210]
type = S
movetype = A
physics = S
anim = 210+Var(55)*10000 
velset = 0,0
hitcountpersist = 1
ctrl = 0
facep2 = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11
channel = 0

[State 210, 2]
type = PlaySnd
trigger1 = Time = 0
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 210, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = light
damage = ifelse(enemy,var(0) = 1,35,30)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
guardflag = M
pausetime = 7+(Var(28)=1)*4,8+(Var(28)=1)*4
sparkno = 0
guard.sparkno = 40
sparkxy = -15,-69
hitsound = 5,0
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7
guard.hittime = 6
guard.velocity = -6
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 30
ignorehitpause = 1
persistent = 0

[State 210, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Standing light kick
[Statedef 220]
type = S
movetype = A
physics = S
anim = 220+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 220, 1]
type = PlaySnd
trigger1 = Time = 1
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11
channel = 0

[State 220, 2]
type = PlaySnd
trigger1 = time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 220, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = light
hitflag = MAF
damage = ifelse(enemy,var(0) = 1,40,40)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
guardflag = M
pausetime = 7+(Var(28)=1)*4,8+(Var(28)=1)*4
sparkno = 0
guard.sparkno = 40
sparkxy = -15,-86
hitsound = 5,2
guardsound = 6,0
ground.type = high
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7
guard.hittime = 6
guard.velocity = -6
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 40
ignorehitpause = 1
persistent = 0

[State 200, 4]
type = ChangeState
trigger1 = P2bodydist X < 30 && Time = 0
value = 230

[State 220, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
[Statedef 225]
type = S
movetype = A
physics = S
anim = 20225
velset = 0,0
ctrl = 0
facep2 = 1

[State 220, 1]
type = PlaySnd
trigger1 = Time = 1
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11
channel = 0

[State 220, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 9
movetype = I

[State 220, 3]
type = HitDef
trigger1 = AnimElem = 8
attr = S, NA
animtype = hard
hitflag = MAF
damage = ifelse(enemy,var(0) = 1,40,40)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
guardflag = M
pausetime = 7,8
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-84
hitsound = 5,1
guardsound = 6,0
ground.type = high
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7
guard.hittime = 6
guard.velocity = -6
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 40
ignorehitpause = 1
persistent = 0

[State 220, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Standing light kick (close)
[Statedef 230]
type = S
movetype = A
physics = S
anim = 230+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 230, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11

[State 230, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = light
damage = ifelse(enemy,var(0) = 1,30,30)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
pausetime = 7+(Var(28)=1)*4,8+(Var(28)=1)*4
sparkno = 0
guard.sparkno = 40
sparkxy = -15,-76
hitsound = 5,2
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7
guard.hittime = 6
guard.velocity = -6
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 20
ignorehitpause = 1
persistent = 0

[State 230, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Standing hard punch
[Statedef 240]
type = S
movetype = A
physics = S
anim = 240+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 240, 2]
type = PlaySnd
trigger1 = Time = 1
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 240, 3]
type = PlaySnd
trigger1 = Time = 1
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 240, 4]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = hard
damage = ifelse(enemy,var(0) = 1,85,80)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
guardflag = M
hitflag = MAF
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-76
hitsound = 5,1
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 100
ignorehitpause = 1
persistent = 0

[State 200, 4]
type = ChangeState
trigger1 = P2bodydist X < 35 && Time = 0
value = 250

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Standing hard punch (close)
[Statedef 250]
type = S
movetype = A
physics = S
anim = 250+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 250, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 250, 2]
type = PlaySnd
trigger1 = Time = 0
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 250, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,65,65)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
guardflag = M
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-84
hitsound = 5,1
guardsound = 6,0
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 70
ignorehitpause = 1
persistent = 0

[State 250, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Standing hard kick
[Statedef 260]
type = S
movetype = A
physics = S
anim = 260+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 260, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 260, 3]
type = PlaySnd
trigger1 = AnimElem = 3
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 7&&Var(55)!=2
movetype = I

[State 260, 4]
type = HitDef
trigger1 = AnimElem = 6&&Var(55)!=2
trigger2 = time = 0&&Var(55)=2
attr = S, NA
animtype = hard
damage = ifelse(enemy,var(0) = 1,110,100)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
guardflag = M
hitflag = MAF
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-68
hitsound = 5,3
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 140
ignorehitpause = 1
persistent = 0

[State 260, Posadd1]
type = posadd
triggerall =Var(55)=2
trigger1 = Animelem = 3
trigger2 = AnimElem = 4
trigger3 = Animelem = 5
x = 8

[State 260, Posadd1]
type = posadd
triggerall =Var(55)=2
trigger1 = Animelem = 5
trigger2 = AnimElem = 6
x = 5

[State 260, Posadd1]
type = posadd
triggerall =Var(55)!=2
trigger1 = Animelem = 2
trigger2 = AnimElem = 3
trigger3 = Animelem = 4
trigger4 = animelem = 8
trigger5 = animelem = 9
trigger6 = animelem = 10 
x = 8

[State 260, Posadd1]
type = posadd
triggerall =Var(55)!=2
trigger1 = animelem = 11
x = 5

[State 200, 4]
type = ChangeState
trigger1 = P2bodydist X < 30 && Time = 0
value = 270

[State 260, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Standing hard kick (close)
[Statedef 270]
type = S
movetype = A
physics = S
anim = 270+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 270, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 270, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 270, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = hard
damage = ifelse(enemy,var(0) = 1,85,70)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
hitflag = MAF
guardflag = M
pausetime = 11-(Var(55)=2)*4,12-(Var(55)=2)*4
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-76
hitsound = 5,3
guardsound = 6,0
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 80
ignorehitpause = 1
persistent = 0

[State 270, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Standing knockdown attack
[Statedef 280]
type = S
movetype = A
physics = S
velset = 0,0
anim = 280+Var(55)*10000 
ctrl = 0
facep2 = 1

[State 280, 3]
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = Random < 750
value = 5,6+(Var(55)=1)*15+(Var(55)=2)*9

[State 280, 4]
type = PlaySnd
trigger1 = AnimElem = 5
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 280, 5]
type = HitDef
trigger1 = Var(55)!=1
trigger1 = AnimElem = 5
trigger2 = Var(55)=1
trigger2 = AnimElem = 4
attr = S, NA
damage = ifelse(enemy,var(0) = 1,120,120)
getpower = ifelse(Var(10) != 0,0,170),ifelse(Var(10) != 0,0,170)
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-65
hitsound = 5,4
guardsound = 6,0
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 17
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4815,4045)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 130
ignorehitpause = 1
persistent = 0

[State 280, Posadd1]
type = posadd
trigger1 = AnimElem = 2
trigger2 = Animelem = 3
trigger3 = animelem = 4
x = 8

[State 280, Posadd2]
type = posadd
trigger1 = Var(55)!=1
trigger1 = AnimElem = 5
x = 10

[State 280, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
;Crouching Basic Attacks
;----------------------------------------------------------------------
; Crouching light punch
[Statedef 400]
type = C
movetype = A
physics = C
anim = 400+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 400, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11

[State 400, 2]
type = PlaySnd
trigger1 = Time = 0
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 400, 3]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
animtype = light
damage = ifelse(enemy,var(0) = 1,35,30)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
guardflag = M
hitflag = M
pausetime = 7+(Var(28)=1)*4,8+(Var(28)=1)*4
sparkno = 0
guard.sparkno = 40
sparkxy = -15,-44
hitsound = 5,0
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7
guard.hittime = 6
guard.velocity = -6
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 30
ignorehitpause = 1
persistent = 0

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;--------------------------------------------------------------------------------------
;Crouching light kick
[Statedef 420]
type = C
movetype = A
physics = C
anim = 420+Var(55)*10000 
velset = 0
ctrl = 0
facep2 = 1

[State 420, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11

[State 420, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 420, 3]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
animtype = light
damage = ifelse(enemy,var(0) = 1,35,30)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
guardflag = L
hitflag = M
pausetime = 7+(Var(28)=1)*4,8+(Var(28)=1)*4
sparkno = 0
guard.sparkno = 40
sparkxy = -15,-7
hitsound = 5,2
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 30
ignorehitpause = 1
persistent = 0

[State 420, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;--------------------------------------------------------------------------------------
[Statedef 425]
type = C
movetype = A
physics = C
anim = 20425
velset = 0
ctrl = 0
facep2 = 1

[State 420, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11

[State 420, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 420, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
animtype = light
damage = ifelse(enemy,var(0) = 1,35,30)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
guardflag = L
hitflag = M
pausetime = 7+(Var(28)=1)*4,8+(Var(28)=1)*4
sparkno = 0
guard.sparkno = 40
sparkxy = -15,-7
hitsound = 5,2
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7
guard.hittime = 6
guard.velocity = -6
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 30
ignorehitpause = 1
persistent = 0

[State 420, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;--------------------------------------------------------------------------------------
; Crouching hard punch
[Statedef 440]
type = C
movetype = A
physics = C
anim = 440+Var(55)*10000 
velset = 0
ctrl = 0
facep2 = 1

[State 440, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 440, 2]
type = PlaySnd
trigger1 = Time = 0
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 440, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
animtype = hard
damage = ifelse(enemy,var(0) = 1,75,70)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
guardflag = M
hitflag = MAF
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,ifelse(enemy,pos Y = 0,-85,-110)
hitsound = 5,1
guardsound = 6,0
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 90
ignorehitpause = 1
persistent = 0

[State 440, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;--------------------------------------------------------------------------------------
; Crouching hard kick
[Statedef 460]
type = C
movetype = A
physics = C
anim = 460+Var(55)*10000 
velset = 0
ctrl = 0
facep2 = 1

[State 460, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 460, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 460, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,110,95)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
hitflag = MAF
guardflag = L
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-12
hitsound = 5,3
guardsound = 6,0
ground.type = trip
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 4840

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 100
ignorehitpause = 1
persistent = 0

[State 460, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;--------------------------------------------------------------------------------------
[Statedef 461]
type = S
movetype = A
physics = S
anim = 20461 
velset = 0
ctrl = 0
facep2 = 1

[State 460, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 460, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 460, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,110,95)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
hitflag = MAF
guardflag = L
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-50
hitsound = 5,3
guardsound = 6,0
ground.type = trip
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 4840

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 100
ignorehitpause = 1
persistent = 0

[State 460, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
[Statedef 462]
type = S
movetype = A
physics = S
anim = 20462
velset = 0
ctrl = 0
facep2 = 1

[State 460, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 460, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 907, 0]
type = varset
trigger1 = p2stateno = 4150
var(4) = 1
persistent = 0
ignorehitpause = 1

[State 330, 3]
type = HitDef
trigger1 = p2statetype = L && var(4) = 0
trigger1 = AnimElem = 5
attr = C, NA
animtype = hard
damage = ifelse(enemy,var(0) = 1,50,40)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
guardflag = L
hitflag = FD
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -12,-20
hitsound = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 4150

[State 330, 3]
type = HitDef
trigger1 = p2statetype != L
trigger1 = AnimElem = 522222
attr = C, NA
animtype = hard
damage = ifelse(enemy,var(0) = 1,70,70)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
guardflag = L
hitflag = M
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-16
hitsound = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State 460, 3]
type = HitDef
trigger1 = p2statetype != L
trigger1 = AnimElem = 5
attr = S, NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,110,95)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
hitflag = MAF
guardflag = L
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-50
hitsound = 5,3
guardsound = 6,0
ground.type = trip
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 4840

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 100
ignorehitpause = 1
persistent = 0

[State 460, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
[Statedef 463]
type = C
movetype = A
physics = C
anim = 20462
velset = 0,0
ctrl = 0
facep2 = 1

[State 460, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 460, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 331, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
animtype = hard
damage = ifelse(enemy,var(0) = 1,70,70)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
hitflag = MAF
guardflag = M
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-16
hitsound = 5,1
guardsound = 6,0
priority = 7, Hit
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State 331, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
;Aerial Basic Attacks
;----------------------------------------------------------------------
;Jumping light punch
[Statedef 600]
type = A
movetype = A
physics = A
anim = 600+Var(55)*10000 
ctrl = 0

[State 600, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11

[State 600, 2]
type = PlaySnd
trigger1 = Time = 0
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 600, 3]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
animtype = Medium
damage = ifelse(enemy,var(0) = 1,35,30)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
guardflag = H
hitflag = MAF
pausetime = 11,12
sparkno = 0
guard.sparkno = 40
sparkxy = -15,-43
hitsound = 5,0
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 30
ignorehitpause = 1
persistent = 0

;--------------------------------------------------------------------------------------
;Jumping light punch Diagonal
[Statedef 605]
type = A
movetype = A
physics = A
anim = 605+Var(55)*10000 
ctrl = 0

[State 605, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11

[State 605, 2]
type = PlaySnd
trigger1 = Time = 0
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 605, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
animtype = Medium
damage = ifelse(enemy,var(0) = 1,35,30)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
guardflag = H
hitflag = MAF
pausetime = 11,12
sparkno = 0
guard.sparkno = 40
sparkxy = -15,-43
hitsound = 5,0
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 30
ignorehitpause = 1
persistent = 0

;--------------------------------------------------------------------------------------
;Jumping light kick VERTICAL
[Statedef 610]
type = A
movetype = A
physics = A
anim = 610+Var(55)*10000 
ctrl = 0

[State 610, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11

[State 610, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 610, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
animtype = Medium
damage = ifelse(enemy,var(0) = 1,35,35)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = H
pausetime = 11,12
sparkno = 0
guard.sparkno = 40
sparkxy = -15,-45
hitsound = 5,2
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 40
ignorehitpause = 1
persistent = 0

;--------------------------------------------------------------------------------------
;Jumping light kick DIAGONAL
[Statedef 620]
type = A
movetype = A
physics = A
anim = 620+Var(55)*10000 
ctrl = 0

[State 620, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11

[State 620, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 3&&Var(55)!=2
movetype = I

[State 620, 3]
type = HitDef
trigger1 = AnimElem = 2&&Var(55)!=2
trigger2 = time = 0&&Var(55)=2
attr = A, NA
animtype = Medium
damage = ifelse(enemy,var(0) = 1,35,30)
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = H
pausetime = 11,12
sparkno = 0
guard.sparkno = 40
sparkxy = -15,-45
hitsound = 5,2
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 30
ignorehitpause = 1
persistent = 0

;--------------------------------------------------------------------------------------
[Statedef 625]
type = A
movetype = A
physics = A
anim = 20625
poweradd = 0
ctrl = 0

[State 625, 1]
type = PlaySnd
trigger1 = Time = 0
value = F0,1

[State 625, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,3

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 625, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,95,60)
getpower = ifelse(Var(10) != 0,0,150),ifelse(Var(10) != 0,0,150)
givepower = 20,20
guardflag = H
pausetime = 5,5
sparkno = 1
sparkxy = -20,-50
guard.sparkno = 41
hitsound = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
guard.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4960,ifelse(p2statetype = C,4277,4305)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 120
ignorehitpause = 1
persistent = 0

;--------------------------------------------------------------------------------------
;Jumping hard punch
[Statedef 630]
type = A
movetype = A
physics = A
anim = 630+Var(55)*10000 
ctrl = 0

[State 630, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 630, 2]
type = PlaySnd
trigger1 = Time = 0
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 630, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
animtype = Medium
damage = ifelse(enemy,var(0) = 1,65,60)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
hitflag = MAF
guardflag = H
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-46
hitsound = 5,1
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.slidetime = 30
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 80
ignorehitpause = 1
persistent = 0

;--------------------------------------------------------------------------------------
;Jumping hard punch Diagonal
[Statedef 635]
type = A
movetype = A
physics = A
anim = 635+(Var(55)=1)*(10000)+(Var(55)=2)*(19995)
ctrl = 0

[State 635, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 635, 2]
type = PlaySnd
trigger1 = Time = 0
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 635, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
animtype = Medium
damage = ifelse(enemy,var(0) = 1,65,65)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
hitflag = MAF
guardflag = H
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-46
hitsound = 5,1
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.slidetime = 30
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 100
ignorehitpause = 1
persistent = 0

;--------------------------------------------------------------------------------------
;Jumping hard kick VERTICAL
[Statedef 640]
type = A
movetype = A
physics = A
anim = 640+(Var(55)=1)*(10010)+(Var(55)=2)*(20000)
ctrl = 0

[State 640, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 640, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 640, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = A, NA
animtype = Medium
damage = ifelse(enemy,var(0) = 1,65,60)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
hitflag = MAF
guardflag = H
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-44
hitsound = 5,3
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.slidetime = 30
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 160
ignorehitpause = 1
persistent = 0

;--------------------------------------------------------------------------------------
;Jumping hard kick DIAGONAL
[Statedef 650]
type = A
movetype = A
physics = A
anim = 650+Var(55)*10000 
ctrl = 0

[State 650, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 650, 2]
type = PlaySnd
trigger1 = Time = 0
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 650, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = A, NA
animtype = Medium
damage = ifelse(enemy,var(0) = 1,65,60)
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
hitflag = MAF
guardflag = H
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-44
hitsound = 5,3
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.slidetime = 30
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 90
ignorehitpause = 1
persistent = 0

;-------------------------------------------------------------
; Jumping knockdown attack
[Statedef 660]
type = A
movetype = A
physics = A
ctrl = 0
anim = 660+(Var(55)=1)*(10000-20)+(Var(55)=2)*20000

[State 660, 1]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = Random < 750
value = 5,6

[State 660, 2]
type = PlaySnd
trigger1 = animelem = 1
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 660, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = A, NA
hitflag = MAF
animtype = HARD
damage = ifelse(enemy,var(0) = 1,140,130)
getpower = ifelse(Var(10) != 0,0,170),ifelse(Var(10) != 0,0,170)
givepower = 20,20
guardflag = M
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
ground.type = low
sparkxy = -15,-45
hitsound = 5,4
guardsound = 6,2
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 17
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4815,4045)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 140
ignorehitpause = 1
persistent = 0

;--------------------------------------------------------------------------------------
; Standing knockdown attack counter
[Statedef 285]
type = S
movetype = A
physics = S
anim = 712+Var(55)*10000 
poweradd = -1000
velset = 0
ctrl = 0
facep2 = 1

[State 240, 4]
type = varSet
trigger1 = time = 0
var(11)  = 0

[State 3000, PALFX]
type = PalFX
trigger1 = timemod = 2,0 && time <= 5
ignorehitpause = 1
time = 1
add = 255,255,255
ignorehitpause = 1

[State 660, 2]
type = PlaySnd
trigger1 = animelem = 1
value = F2,1

[State 800, 1]
type = HitBy
trigger1 = AnimElem = 6,<0
value = SCA, NT, ST
time = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 712, 5]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
damage = 10
hitflag = MAF
guardflag = M
pausetime = 11,12
animtype = Hard
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-80
hitsound = 5,4
guardsound = 6,2
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 55351
p2facing = 1
p2getp1state = 1
kill = 0

[State 712, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
;BASIC FORWARD ATTACKS
;---------------------------------------------------------------------
; Standing Forward Light Punch
[Statedef 300]
type    = S
physics = S
movetype= A
anim = 300+Var(55)*10000 
ctrl = 0
velset = 0,0
facep2 = 1

[State 300, posadd1]
type = posadd
trigger1 = AnimElem = 1
x = 11

[State 300, posadd2]
type = posadd
trigger1 = AnimElem = 2
x = 9

[State 300, posadd3]
type = posadd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
x = 3

[State 300, posadd1]
type = posadd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
x = 7

[State 300, 1]
type = PlaySnd
trigger1 = Time = 1
value = 5,1+(Var(55)=1)*20+(Var(55)=2)*13

[State 300, 2]
type = PlaySnd
trigger1 = Time = 1
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 300, HITDEF1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
hitflag = MAF
animtype = Hard
damage = ifelse(enemy,var(0) = 1,65,60)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
guardflag = M
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-84
hitsound = 5,4
guardsound = 6,0
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4850,4130)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 70
ignorehitpause = 1
persistent = 0

[State 202, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Forward Light Punch 2
[Statedef 301]
type = S
movetype = A
physics = S
anim = 300+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 301, posadd1]
type = posadd
trigger1 = AnimElem = 1
x = 11

[State 301, posadd2]
type = posadd
trigger1 = AnimElem = 2
x = 9

[State 301, posadd3]
type = posadd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
x = 3

[State 301, posadd1]
type = posadd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
x = 7

[State 301, 1]
type = PlaySnd
trigger1 = Time = 1
value = 5,1+(Var(55)=1)*20+(Var(55)=2)*13

[State 301, 2]
type = PlaySnd
trigger1 = Time = 1
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 301, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,65,60)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
hitflag = MAF
guardflag = M
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-84
hitsound = 5,4
guardsound = 6,0
priority = 7, Hit
ground.type = high
ground.slidetime = 30
ground.hittime = 20
ground.velocity = -15.5
guard.hittime = 17
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State 301, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Forward Light Kick
[Statedef 320]
type = S
movetype = A
physics = S
anim = 320+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 320, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 5,2+(Var(55)=1)*18+(Var(55)=2)*13

[State 320, 2]
type = PlaySnd
trigger1 = animelem = 5
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 320, 3]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,65,60)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
hitflag = MAF
guardflag = H
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-74
hitsound = 5,3
guardsound = 6,0
priority = 7, Hit
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 30
ignorehitpause = 1
persistent = 0

[State 320, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Forward Light Kick (Cancel)
[Statedef 321]
type = S
movetype = A
physics = S
anim = 321+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 321, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 5,2+(Var(55)=1)*18+(Var(55)=2)*13

[State 321, 2]
type = PlaySnd
trigger1 = animelem = 5
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 321, 3]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,65,60)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
hitflag = MAF
guardflag = M
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-74
hitsound = 5,3
guardsound = 6,0
priority = 7, Hit
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State 321, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Back punch
[Statedef 310]
type = S
movetype = A
physics = S
anim = 310+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 200, 4]
type = ChangeState
trigger1 = Var(55)=2 && Time = 0
value = 205

[State 310, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 5,2+(Var(55)=1)*18+(Var(55)=2)*13

[State 310, 2]
type = PlaySnd
trigger1 = animelem = 6
value = F0,1

[State 310, Projcancel]
type = projectile
trigger1 = animelem = 8
hitflag = P
attr = S, SP
persistent = 1
ignorehitpause = 1
persistent = 1
projanim = 311
projid = 311
projremovetime = 5
offset= 0, 0
postype = P1
bindtime = 1
vel = .0001
projsprpriority = 2
projpriority = 20
ownpal = 1
poweradd = 140

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 9&&var(55) != 1
trigger2 = AnimElem = 7&&var(55) = 1
movetype = I

[State 310, 3]
type = HitDef
trigger1 = AnimElem = 8&&var(55) != 1
trigger2 = AnimElem = 6&&var(55) = 1
attr = S, NP
animtype = Hard
damage = ifelse(enemy,var(0) = 1,100,70)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
hitflag = MAF
guardflag = MAFP
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-84
hitsound = 5,1
guardsound = 6,0
priority = 7, Hit
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 220
ignorehitpause = 1
persistent = 0

[State 310, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Back punch Cancel
[Statedef 311]
type = S
movetype = A
physics = S
anim = 310+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 311, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 5,2+(Var(55)=1)*18+(Var(55)=2)*13

[State 311, 2]
type = PlaySnd
trigger1 = animelem = 6
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 9&&var(55) != 1
trigger2 = AnimElem = 7&&var(55) = 1
movetype = I

[State 310, 3]
type = HitDef
trigger1 = AnimElem = 8&&var(55) != 1
trigger2 = AnimElem = 6&&var(55) = 1
attr = S, NA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,100,70)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
hitflag = MAF
guardflag = M
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-84
hitsound = 5,1
guardsound = 6,0
priority = 7, Hit
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State 311, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
;Crouching forward light kick
[Statedef 330]
type = C
movetype = A
physics = C
anim = 330+Var(55)*10000 
velset = 0
ctrl = 0
facep2 = 1

[State 200, 4]
type = ChangeState
trigger1 = Var(55)=2&&Time = 0
value = 425

[State 330, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 3,23

[State 330, 2]
type = PlaySnd
trigger1 = Time = 2
value = F0,1

[State 907, 0]
type = varset
trigger1 = p2stateno = 4150
var(4) = 1
persistent = 0
ignorehitpause = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 330, 3]
type = HitDef
trigger1 = p2statetype = L && var(4) = 0
trigger1 = AnimElem = 6
attr = C, NA
animtype = hard
damage = ifelse(enemy,var(0) = 1,50,40)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
guardflag = L
hitflag = FD
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = 21,-20
hitsound = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 4150

[State 330, 3]
type = HitDef
trigger1 = p2statetype != L
trigger1 = AnimElem = 6
attr = C, NA
animtype = hard
damage = ifelse(enemy,var(0) = 1,70,70)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
guardflag = L
hitflag = M
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-16
hitsound = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 50
ignorehitpause = 1
persistent = 0

[State 330, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
; Crouching Forward Light Kick (cancel)
[Statedef 331]
type = C
movetype = A
physics = C
anim = 330+Var(55)*10000 
velset = 0,0
ctrl = 0
facep2 = 1

[State 200, 4]
type = ChangeState
trigger1 = Var(55)=2&&Time = 0
value = 425

[State 331, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 3,23

[State 331, 2]
type = PlaySnd
trigger1 = animelem = 5 
value = F2,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 331, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = C, NA
animtype = hard
damage = ifelse(enemy,var(0) = 1,70,70)
getpower = ifelse(Var(10) != 0,0,85),ifelse(Var(10) != 0,0,85)
givepower = 20,20
hitflag = MAF
guardflag = M
pausetime = 11,12
sparkno = 1
guard.sparkno = 41
sparkxy = -15,-16
hitsound = 5,1
guardsound = 6,0
priority = 7, Hit
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State 331, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
;Throws
;-------------------------------------------------------------------------------------
;Throw Y
[Statedef 800]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 350+Var(55)*10000 
sprpriority = 5

[State 350, 2]
type = HitDef
trigger1 = P2Stateno != [120,155]
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-          
priority = 4, Miss    
sparkno = -1          
sprpriority = 1  
hitsound = -1
p2facing = 1          
p1stateno = 351       
p2stateno = 352    

[State 350, 3]
type = ChangeState
Trigger1 = Time = 1
value = 240

;=============================================================
;Success
[Statedef 351] 
type    = S
movetype= A
physics = S
anim = 351+Var(55)*10000 
sprpriority = 2
velset = 0,0

[State 351, posadd1]
type = Posadd
trigger1 = AnimElem = 20
x = 47

[State 351, 1]
type = Width
trigger1 = animelem = 3, < 0
edge = 80,20

[State 351, 1]
type = Width
trigger1 = animelem = 3, >= 0
edge = 0,0

[State 351, 2]
type = Explod
trigger1 = AnimElem = 2
id = 1046
anim = F8
pos = 33,-84
postype = p1
sprpriority = 1
ownpal = 1
removeongethit = 1

[State 905, 13]
type = ChangeState
triggerall = life<=enemy,life|((life>enemy,life)&&Random < 300)
triggerall = animelem = 1, >= 0
triggerall = animelem = 3, < 0
trigger1 = enemy,command = "holdfwd" && enemy,command = "y"
trigger2 = enemy,command = "holdback" && enemy,command = "y"
trigger3 = random <= enemy,var(58)*20
value = 890

[State 0, VarSet]
type = VarAdd
trigger1 = time=0
fv = 8
value = 10+(fvar(11))*(var(10)!=0)
ignorehitpause = 1

[State 351, 2]
type = Explod
trigger1 = AnimElem = 9
id = 1037
anim = F2
pos = 51,-18
postype = p1
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 351, 2]
type = Explod
trigger1 = AnimElem = 17
id = 1037
anim = F2
pos = 96,0
postype = p1
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 351, Bind1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 30, 0
time = 1

[State 351, Bind2]
type = TargetBind
trigger1 = AnimElem = 2
pos = 30, 0
time = 1

[State 351, Bind3]
type = TargetBind
trigger1 = AnimElem = 3
pos = 23, 0
time = 1

[State 351, Bind4]
type = TargetBind
trigger1 = AnimElem = 4
pos = 19, 0
time = 1

[State 351, Bind5]
type = TargetBind
trigger1 = AnimElem = 5
pos = 15, 0
time = 1

[State 351, Bind6]
type = TargetBind
trigger1 = AnimElem = 6
pos = 27, -7
time = 1

[State 351, Bind7]
type = TargetBind
trigger1 = AnimElem = 7
pos = 43, -3
time = 1

[State 351, Bind8]
type = TargetBind
trigger1 = AnimElem = 8
pos = 43, 7
time = 1

[State 351, Bind9]
type = TargetBind
trigger1 = AnimElem = 9
pos = 16, 19
time = 1

[State 351, Bind10]
type = TargetBind
trigger1 = AnimElem = 10
pos = 51, -12
time = 1

[State 351, Bind11]
type = TargetBind
trigger1 = AnimElem = 11
pos = 85, -4
time = 1

[State 351, Bind12]
type = TargetBind
trigger1 = AnimElem = 12
pos = 85, 0
time = 1

[State 351, sprpriority]
type = sprpriority
trigger1 = AnimElem = 12
value = -2

[State 183, 3]
type = EnvShake
trigger1 =  animelem = 11 || animelem = 18
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 2160, 33]
type = Explod
trigger1 = animelem = 11 || animelem = 18
anim = F61
sprpriority = -2
postype = p2
pos = 0,0
bindtime = 1

[State 351, Crunchy]
type = PlaySnd
trigger1 = AnimElem = 11
value = F7,0

[State 351, DAMAGE]
type = targetlifeadd
Trigger1 = AnimElem = 9
kill = 0
value = -60

[State 351, DAMAGE2]
type = targetlifeadd
trigger1 = AnimElem = 18
value = -60

[State 351, Grab Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F800,0
volume = 0

[State 351, Voice Snd]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 17
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11
channel = 0

[State 351, hit Snd]
type = PlaySnd
trigger1 = AnimElem = 8
value = F5,3

[State 351, hit Snd]
type = PlaySnd
trigger1 = AnimElem = 17
value = F5,1

[State 351, end]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------
;(GRABBED)
[Statedef 352]
type    = A
movetype= H ;Get hit
physics = N
sprpriority = -1
ctrl = 0
velset = 0,0

[State 352, 2]
type = velset
Trigger1 = Time = 0
value = 0,0

[State 352, 1]
type = Width
trigger1 = time >= 0
edge = 0,0

[State 352, 1]
type = ScreenBound
Trigger1 = Time >= 0
value = 0

[State 1105, 3]
type = Changeanim2
trigger1 = P1name != "CHOI BOUNGE" || P3name != "CHOI BOUNGE"
trigger1 = time = 0
value = 352+Var(55)*10000 

[State 1105, 3]
type = Changeanim2
trigger1 = P1name = "CHOI BOUNGE" || P3name = "CHOI BOUNGE"
trigger1 = time = 0
value = 356+Var(55)*10000 

[State 352, 3]
type = changestate
Trigger1 = AnimTime = 0
value = 353
ctrl = 0

;---------------------------------------------------------------------------
;SMASH
[Statedef 353]
type    = L
movetype= H
physics = N
sprpriority = 0
velset = 0,0

[State 355, Cancel]
type = turn
Trigger1 = time = 0

[State 353, posset] 
type = posset 
trigger1 = Time = 0
y = 0

[State 353, 1] 
type = ChangeAnim
trigger1 = Time = 0
value = 5080+Var(55)*30000 

[State 353, 1] 
type = ChangeAnim
trigger1 = Time = 5
value = 5170+Var(55)*30000 

[State 353, 1] 
type = ChangeAnim
trigger1 = Time = [29,34]
value = 5080+Var(55)*30000 

[State 353, 2]
type = changestate
trigger1 = time = 34
value = 354

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;Bounce
[Statedef 354]
type    = L
movetype= H
physics = N
velset = 4.5,-5.5

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 210, 3]
type = PosAdd
trigger1 = time = 0
y = 17

[State 354, posset] 
type = velset 
trigger1 = time = 0
y = -6
x = 4

[State 354, Gravity] 
type = Veladd
trigger1 = Time > 0
y = .5

[State 354, 1] 
type = ChangeAnim
trigger1 = Time = 0
value = 5160+Var(55)*30000 

[State 1420, State]
type = SelfState
trigger1 = Pos Y >= 15 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;P1 Miss
[Statedef 355]
type    = S
movetype= I ;Get hit
physics = S
velset = -12,0
anim = 355+Var(55)*10000 
ctrl = 0

[State 355, Cancel]
type = targetstate
Trigger1 = time = 0
value = 306

[State 355, MD]
type = makedust
Trigger1 = 1
pos = 0,0
spacing = 3

[State 351, Cancel Snd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 280,0

[State 355, END]
type = changestate
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------
;P2 Counter
[Statedef 306]
type    = S
movetype= I ;Get hit
physics = S
velset = 0,0
ctrl = 0

[State 356, ANIM1]
type = changeanim
trigger1 = selfanimexist(306+Var(55)*30000 )
Trigger1 = time = 0
value = 306+Var(55)*10000 

[State 356, ANIM2]
type = changeanim
trigger1 = !selfanimexist(306+Var(55)*30000 )
trigger1 = selfanimexist(200+Var(55)*30000 )
Trigger1 = Time = 0
value = 200+Var(55)*10000 

[State 356, END]
type = selfstate
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------
;Throw B
;---------------------------------------------------------------------------
;GrabB
[Statedef 850]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 360+Var(55)*10000 
sprpriority = 5

[State 360, 2]
type = HitDef
trigger1 = P2Stateno != [120,155]
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-          
priority = 4, Miss    
sparkno = -1          
sprpriority = 1  
hitsound = -1
p2facing = 1          
p1stateno = 361       
p2stateno = 362    

[State 360, 3]
type = ChangeState
trigger1 = Time = 1
value = 260

;Success
[Statedef 361] 
type    = S
movetype= A
physics = S
anim = 361+Var(55)*10000 
sprpriority = 2
velset = 0,0

[State 351, 1]
type = Width
trigger1 = animelem = 6, < 0
edge = 20,50

[State 361, Turn]
type = Turn
Trigger1 = animelem = 9

[State 301, 1]
type = posadd
trigger1 = animelem = 3
x = -10

[State 301, 1]
type = posadd
trigger1 = animelem = 4
trigger2 = animelem = 5
x = -4

[State 301, 1]
type = posadd
trigger1 = animelem = 8
x = 10

[State 301, 1]
type = posadd
trigger1 = animelem = 9
x = -6

[State 301, 1]
type = Width
trigger1 = animelem = 3, >= 0
edge = 0,0

[State 301, 2]
type = Explod
trigger1 = AnimElem = 2
id = 1046
anim = F8
pos = 33,-84
postype = p1
sprpriority = 1
ownpal = 1
removeongethit = 1

[State 905, 13]
type = ChangeState
triggerall = life<=enemy,life|((life>enemy,life)&&Random < 300)
triggerall = animelem = 1, >= 0
triggerall = animelem = 3, < 0
trigger1 = enemy,command = "holdfwd" && enemy,command = "y"
trigger2 = enemy,command = "holdback" && enemy,command = "y"
trigger3 = random <=enemy,var(58)*20
value = 890

[State 301, Bind1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 30, 0
time = 1

[State 301, Bind2]
type = TargetBind
trigger1 = AnimElem = 2
pos = 30, 0
time = 1

[State 301, Bind3]
type = TargetBind
trigger1 = AnimElem = 3
pos = 20, -95
time = 1

[State 301, Bind4]
type = TargetBind
trigger1 = AnimElem = 4
pos = -20, -85
time = 1

[State 301, Bind5]
type = TargetBind
trigger1 = AnimElem = 5
pos = -50, -60
time = 1

[State 301, Bind6]
type = TargetBind
trigger1 = AnimElem = 6
pos = -50, 0
time = 1

[State 183, 3]
type = EnvShake
trigger1 =  animelem = 6
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 2160, 33]
type = Explod
trigger1 = animelem = 6
anim = F66
sprpriority = -2
postype = p2
pos = 0,0
bindtime = 1

[State 2160, 33]
type = Explod
trigger1 = animelem = 6
anim = F67
sprpriority = -2
postype = p2
pos = 0,0
bindtime = 1

[State 301, Crunchy]
type = PlaySnd
trigger1 = AnimElem = 6
value = F7,0

[State 301, GrndEX1]
type = Explod
trigger1 = AnimElem = 7
id = 1507
anim = 1507
pos = 0,10
postype = p2
sprpriority = -3
ownpal = 1
removeongethit = 1

[State 301, GrndEX2]
type = Explod
trigger1 = AnimElem = 7
id = 1508
anim = 1508
pos = 0,10
postype = p2
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 0, VarSet]
type = VarAdd
trigger1 = time=0
fv = 8
value = 10+(fvar(11))*(var(10)!=0)
ignorehitpause = 1

[State 301, DAMAGE]
type = targetlifeadd
Trigger1 = AnimElem = 6
value = -160

[State 301, Grab Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F800,0

[State 301, Voice Snd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 5,1+(Var(55)=1)*17+(Var(55)=2)*11

[State 301, end]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;(GRABBED)
[Statedef 362]
type    = A
movetype= H ;Get hit
physics = N
sprpriority = -1
ctrl = 0
velset = 0,0

[State 2730, 2]
type = velset
Trigger1 = Time = 0
value = 0,0

[State 361, 1]
type = Width
trigger1 = time >= 0
edge = 0,0

[State 362, 1]
type = ScreenBound
Trigger1 = Time >= 0
value = 0

[State 1105, 3]
type = Changeanim2
trigger1 = P1name != "CHOI BOUNGE" || P3name != "CHOI BOUNGE"
trigger1 = time = 0
value = 362+Var(55)*10000 

[State 1105, 3]
type = Changeanim2
trigger1 = P1name = "CHOI BOUNGE" || P3name = "CHOI BOUNGE"
trigger1 = time = 0
value = 366+Var(55)*10000 

[State 302, liftoff]
type = changestate
Trigger1 = AnimTime = 0
value = 364

;SMASH
[Statedef 363]
type    = L
movetype= H
physics = N
sprpriority = 0
velset = 0,0

[State 355, Cancel]
type = turn
Trigger1 = time = 0

[State 353, posset] 
type = posset 
trigger1 = Time = 0
y = 0

[State 353, 1] 
type = ChangeAnim2
trigger1 = Time = 0
value = 363+Var(55)*10000 

[State 353, 2]
type = changestate
trigger1 = animtime = 0
value = 364

;---------------------------------------------------------------------------
;Bounce
[Statedef 364]
type = A
movetype = H
physics = N
velset = 0

[State 1000, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 210, 3]
type = PosAdd
trigger1 = !animexist(5165+Var(55)*30000 )
trigger1 = time = 0
X = 20
y = 17

[State 210, 3]
type = PosAdd
trigger1 = animexist(5165+Var(55)*30000 )
trigger1 = time = 0
X = 0
y = 0

[State 1370, Anim]
type = ChangeAnim
trigger1 = animexist(5165+Var(55)*30000 )
trigger1 = time = 0
value = 5165+Var(55)*30000 

[State 1370, Anim]
type = ChangeAnim
trigger1 = !animexist(5165+Var(55)*30000 )
trigger1 = time = 0
value = 5160+Var(55)*30000 

[State 1420, Velocity]
type = VelSet
trigger1 = time = 4
y = -5.5
x = 4

[State 1525, 4]
type = VelAdd
trigger1 = Time > 4
y = .4

[State 1370, Sprite2]
type = SprPriority
trigger1 = time >= 4
value = 1

[State 2160, 33]
type = Explod
trigger1 = Pos Y >= 0 && Vel Y > 0
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 1420, State]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;------  搳偘偸偗偝傟傞懁  ------
[Statedef 890]
type = S
movetype = A
physics = S
anim = 890+Var(55)*10000 
poweradd = 0
velset = 0
ctrl = 0
facep2 = 1
Sprpriority = 1

[State 2210, 19]
type = targetstate
trigger1 = Time = 0
value = 892

[State 1360, Bind2]
type = TargetBind
trigger1 = time = 0
pos = 45,0

[State 2210, 19]
type = ChangeState
trigger1 = time = 7
value = 4303

;------  搳偘偸偗  ------
[Statedef 892]
type = S
movetype = A
physics = S
anim = 891+Var(55)*10000 
poweradd = 0
velset = 0,0
ctrl = 0
facep2 = 1
Sprpriority = 2

[State 220, 4]
type = Changeanim
trigger1 = selfanimexist(891+Var(55)*10000 ) && Time = 0
value = 891+Var(55)*10000 

[State 2210, 19]
type = Changeanim
trigger1 = !selfanimexist(891+Var(55)*10000 ) && Time = [0,7]
value = 5010+Var(55)*30000 

[State 220, 4]
type = selfState
trigger1 = selfanimexist(891+Var(55)*10000 ) && Time = 0
value = 891

[State 2210, 19]
type = selfState
trigger1 = !selfanimexist(891+Var(55)*10000 ) && Time = 7
value = 4303

;------  搳偘偸偗  ------
[Statedef 891]
type = S
movetype = A
physics = N
anim = 891+Var(55)*10000
poweradd = 0
velset = 0
ctrl = 0
facep2 = 1
Sprpriority = 2

[State 220, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 220, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,2+(Var(55)=1)*17+(Var(55)=2)*11

[State 240, 3]
type = VelSet
trigger1 = AnimElem = 1,3
x = -7

[State 1660, 4]
type = VelMul
trigger1 = 1
x = .86

[State 2210, 3]
type = PlaySnd
trigger1 = AnimElem = 5
value = F5,4

[State 2000, 15]
type = EnvColor
trigger1 = AnimElem = 4
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1
persistent = 0

[State 2355, 10]
type = AssertSpecial
trigger1 = AnimElem = 4
flag = NoFG
ignorehitpause = 1
persistent = 0

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 220, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------
[Statedef 2900]
type = S
movetype = A
physics = S
anim = 2900+(Var(55)=2)*20000
velset = 0
poweradd = ifelse(Var(10) != 0,0,130)
ctrl = 0

[State 240, 偳偙僉儍儞僎乕僕徚旓]
type = VarAdd
triggerall = var(10) != 0 && var(30) = 0 && time = 0
trigger1 = var(32) = 1 || var(31) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, 偳偙僉儍儞揰柵]
type = VarAdd
triggerall = var(30) = 0 && var(10) != 0 && time = 0
trigger1 = (prevstateno = [3200,3202])||(prevstateno = [12500,12501])|prevstateno = [23400,23401]
trigger2 = var(32) = 1 || var(31) = 1
var(36) = 9

[State 3700,Turn]
type = Turn
trigger1 = time = 0 && P2Dist X < 0

[State 800, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, HT
time = 2

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 4+(Var(55)=2),8+(Var(55)=2)*11

[State 1000, 5]
type = HitDef
trigger1 = AnimElem = 7&&Var(55)=2
attr = S, HA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,30,Ceil(30 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = 3
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-60,-80)
pausetime = 28,30
hitsound = 5,1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4490,ifelse(enemy,var(0) = 1,4450,ifelse(p2statetype = C,4480,4425)))
envshake.time = 15
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 1000, 5]
type = HitDef
trigger1 = AnimElem = 9&&Var(55)=2
attr = S, HA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,30,Ceil(30 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = 3
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-80,-90)
pausetime = 30,30
hitsound = 5,1
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4490,ifelse(enemy,var(0) = 1,4450,ifelse(p2statetype = C,4480,4425)))
envshake.time = 15
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 1000, 5]
type = HitDef
trigger1 = AnimElem = 3&&Var(55)!=2
attr = S, SA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,120,110),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = 2
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-75,-85)
pausetime = 11,12
hitsound = 5,4
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4815,4045)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 70
ignorehitpause = 1
persistent = 0

[State 1000, 16]
type = ChangeState
trigger1 = AnimTime = 0
value = 2901

;------  庛 屨朇[嬻拞]  ------
[Statedef 2901]
type = A
movetype = A
physics = N
anim = 2901+(Var(55)=2)*20000

[State -2, 0]
type = RemoveExplod
trigger1 = 1
ignorehitpause = 1
ID = 200002

[State 1300, 5]
type = PosAdd
trigger1 = AnimElem = 1
x = 7+(Var(55)=2)*10
y = -5

[State 1001, 3]
type = VelSet
trigger1 = Time = 0
x = 0.5
y = -5

[State 1660, 4]
type = VelMul
trigger1 = 1
x = .96

[State 1001, 3]
type = VelSet
trigger1 = Time = 15
x = 0

[State 1660, 4]
type = VelMul
trigger1 = Time = [0,15]
y = .85

[State 1001, 4]
type = VelAdd
trigger1 = Time > 13
y = .45

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 2
movetype = I

[State 1001, 7]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,100,90),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
sparkno = 2
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-80,-110)
hitflag = MAF
guardflag = M
pausetime = 11+(Var(55)=2)*13,12+(Var(55)=2)*13
hitsound = 5,4
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4805,4015)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 70
ignorehitpause = 1
persistent = 0

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,14

[State 1001, 19]
type = VelSet
trigger1 = AnimElem = 2
x = 0

[State 1001, 21]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -15
value = 2902

;-------------------------------------------------------------------------------------------------
[Statedef 2902]
type = S
movetype = I
physics = S
anim = 2902+(Var(55)=2)*20000
velset = 0,0

[State 1002, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 1002, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
[Statedef 2950]
type = S
movetype = A
physics = S
anim = 2950+(Var(55)=2)*20000
velset = 0
poweradd = ifelse(Var(10) != 0,0,130)
ctrl = 0

[State 240, 偳偙僉儍儞僎乕僕徚旓]
type = VarAdd
triggerall = var(10) != 0 && var(30) = 0 && time = 0
trigger1 = var(31) = 1 || var(32) = 1
trigger2 = (prevstateno = [3200,3202])||(prevstateno = [12500,12501])|prevstateno = [23400,23401]
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, 偳偙僉儍儞揰柵]
type = VarAdd
triggerall = var(30) = 0 && var(10) != 0 && time = 0
trigger1 = var(31) = 1 || var(32) = 1
trigger2 = (prevstateno = [3200,3202])||(prevstateno = [12500,12501])|prevstateno = [23400,23401]
var(36) = 9

[State 3700,Turn]
type = Turn
trigger1 = time = 0 && P2Dist X < 0

[State 800, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, HT
time = 3

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 4+(Var(55)=2),8+(Var(55)=2)*11

[State 1000, 5]
type = HitDef
trigger1 = AnimElem = 4&&Var(55)!=2
attr = S, SA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,130,130),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = 2
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-75,-85)
pausetime = 11,12
hitsound = 5,4
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4815,4045)

[State 1000, 5]
type = HitDef
trigger1 = AnimElem = 7&&Var(55)=2
attr = S, HA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,40,Ceil(40-(var(11)  = 1)*20 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = 3
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-60,-80)
pausetime = 28,30
hitsound = 5,1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4490,ifelse(enemy,var(0) = 1,4450,ifelse(p2statetype = C,4480,4425)))
envshake.time = 15
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 1000, 5]
type = HitDef
trigger1 = AnimElem = 9&&Var(55)=2
attr = S, HA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,40,Ceil(40-(var(11)  = 1)*20 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = 3
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-80,-90)
pausetime = 30,30
hitsound = 5,1
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4490,ifelse(enemy,var(0) = 1,4450,ifelse(p2statetype = C,4480,4425)))
envshake.time = 15
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 70
ignorehitpause = 1
persistent = 0

[State 1000, 16]
type = ChangeState
trigger1 = AnimTime = 0
value = 2951

;------------------------------------------------------------------------------------------
[Statedef 2951]
type = A
movetype = A
physics = N
anim = 2951+(Var(55)=2)*20000

[State 3100, SparkSound]
type = PlaySnd
trigger1 = time = 1&&(prevstateno = 3401)
value = 4,9

[State 1300, 5]
type = PosAdd
trigger1 = AnimElem = 1
x = 10+(Var(55)=2)*10+(var(11)  = 1)*10
y = -10

[State 1001, 3]
type = VelSet
trigger1 = Time = 0
x = 2+(Var(55)=2)+(var(11)  = 1)*1
y = -10.8

[State 1660, 4]
type = VelMul
trigger1 = 1
x = .96

[State 1001, 3]
type = VelSet
trigger1 = Time = 15
x = 0

[State 1660, 4]
type = VelMul
trigger1 = Time = [0,15]
y = .85

[State 1001, 4]
type = VelAdd
trigger1 = Time > 15
y = .45

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 2
movetype = I

[State 1001, 7]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,100,100),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
sparkno = 2
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-80,-110)
hitflag = MAF
guardflag = M
pausetime = 11+(Var(55)=2)*15,12+(Var(55)=2)*15
hitsound = 5,4
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4805,4015)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 70
ignorehitpause = 1
persistent = 0

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,14

[State 2210, 2]
type = null;PlaySnd
trigger1 = MoveHit = 1
value = S3,11
channel = 30
ignorehitpause = 1
persistent = 0

[State 1001, 19]
type = VelSet
trigger1 = AnimElem = 2
x = 0

[State 1001, 21]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -15
value = 2952

;--------------------------------------------------------------------------------------------
[Statedef 2952]
type = S
movetype = I
physics = S
anim = 2952+(Var(55)=2)*20000
velset = 0,0

[State 1002, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 1002, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;========================================================
[Statedef 3400]
type = S
movetype = A
physics = S
anim = 3400+(prevstateno = 3103)
velset = 0
poweradd = ifelse(fvar(30) > 0,0,-1000)
ctrl = 0
velset = 0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 2000, 7]
type = VarSet
trigger1 = time = 1
var(10) = 0

[State 2000, 7]
type = VarSet
trigger1 = prevstateno = 3103
var(11)  = 1

[State 2000, 7]
type = VarSet
trigger1 = prevstateno != 3103
var(11)  = 0

[State 800, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, HT
time = 37

[State 3100, SparkSound]
type = PlaySnd
trigger1 = time = 1&&(prevstateno != 3103)
value = F9000,0

[State 3120, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,14

[State 3100, Voice]
type = PlaySnd
trigger1 = time = 3
value = 4,10

[State 2420,5]
type = SuperPause
trigger1 = Time = 1&&(prevstateno != 3103)
time = 30
anim = -1
p2defmul = 1
movetime = 30
darken = 0

[State 3100,Explod1]
type = Explod
trigger1 = time = 3&&(prevstateno != 3103)
anim = f7010
scale = .5,.5
id   = 200
pos = 9,-88
postype = p1
supermove = 1
supermovetime = 9999
sprpriority = 5
bindtime = 1
ontop = 1
ownpal = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = time = 3&&(prevstateno != 3103)
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3100,Explod2]
type = Explod
trigger1 = time = 3&&(prevstateno != 3103)
anim = f7000
scale = .5,.5
id   = 200
pos = 9,-88
postype = p1
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ontop = 0
ownpal = 1
unhittable = 1

[State 1000, 5]
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,40,Ceil(40-(var(11)  = 1)*20 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = 3
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-60,-80)
pausetime = 20,20
hitsound = 5,1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4490,ifelse(enemy,var(0) = 1,4450,ifelse(p2statetype = C,4480,4425)))
envshake.time = 15
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 2000, 15]
type = EnvColor
trigger1 = MoveHit = 1
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2355, 10]
type = AssertSpecial
trigger1 = MoveHit = 1
flag = NoFG
persistent = 0
ignorehitpause = 1

[State 1000, 16]
type = ChangeState
trigger1 = AnimElem = 10
value = 3401

;----------------------------------------------------------------------------------------
[Statedef 3401]
type = S
movetype = A
physics = S
velset = 0
poweradd = 0
ctrl = 0
velset = 0
hitcountpersist = 1

[State 3120, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,14

[State 1000, 5]
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,40,Ceil(40-(var(11)  = 1)*20 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = 3
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-80,-90)
pausetime = 25,24
hitsound = 5,1
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4490,ifelse(enemy,var(0) = 1,4450,ifelse(p2statetype = C,4480,4425)))
envshake.time = 15
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 2000, 15]
type = EnvColor
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2355, 10]
type = AssertSpecial
trigger1 = MoveHit = 1
flag = NoFG
persistent = 0
ignorehitpause = 1

[State 1000, 16]
type = ChangeState
trigger1 = AnimTime = 0
value = 3410-(var(11)  = 1)*459

;--------------------------------------------------------------------------------------
[Statedef 3410]
type = A
movetype = A
physics = N
anim = 3410

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 4,9

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 1
id = 2911
sprpriority = 10
postype = P1
pos = 0,0
stateno = 2911
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
persistent = 0

[State 1300, 5]
type = PosAdd
trigger1 = AnimElem = 1
x = 10
y = -10

[State 1001, 3]
type = VelSet
trigger1 = Time = 0
x = 3
y = -22

[State 1660, 4]
type = VelMul
trigger1 = 1
x = .96

[State 1001, 3]
type = VelSet
trigger1 = Time = 12
x = 0

[State 1660, 4]
type = VelMul
trigger1 = Time = [0,12]
y = .78

[State 1001, 4]
type = VelAdd
trigger1 = Time > 12
y = .45

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 2
movetype = I

[State 1001, 7]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 1,2
trigger3 = AnimElem = 1,4
trigger4 = AnimElem = 1,6
attr = A, HA
animtype = Hard
damage = ifelse(HitCount >=3,10,Ceil(80-(var(11)  = 1)*40 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-60
hitflag = MAF
guardflag = M
pausetime = 1,2
hitsound = -1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4825,4080)
envshake.time = 0
envshake.freq = 150
envshake.ampl = 5
envshake.phase = 150

[State 1001, 7]
type = HitDef
trigger1 = AnimElem = 1,8
attr = A, HA
animtype = Hard
damage = ifelse(HitCount >=3,10,Ceil(80-(var(11)  = 1)*40 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-75
hitflag = MAF
guardflag = M
pausetime = 11,12
hitsound = -1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4825,4080)
envshake.time = 10
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,14

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 7,3

[State 2210, 2]
type = PlaySnd
trigger1 = MoveHit = 1
value = F5,1
channel = 30
ignorehitpause = 1

[State 114, 10]
type = MoveHitReset
trigger1 = MoveHit = 1
ignorehitpause = 1

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 110
ignorehitpause = 1
persistent = 0

[State 1001, 19]
type = VelSet
trigger1 = AnimElem = 2
x = 0

[State 2000, 7]
type = VarSet
trigger1 = AnimElem = 2
var(11)  = 0

[State 1001, 21]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -15
value = 2952

;---------------------------------------------------------------------------------------------
;Kouken
[Statedef 23400]
type = S
movetype = A
physics = S
anim = 23400
velset = 0
ctrl = 0
velset = 0

[State 800, 1]
type = notHitBy
trigger1 = Time = 0
value = SCA, NT, HT
time = 6

[State 240, 1]
type = VarAdd
triggerall = var(10) != 0 &&time = 0
trigger1 = var(31) = 1|var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, 1]
type = VarAdd
triggerall = var(10) != 0 &&time = 0
trigger1 = var(31) = 1|var(32) = 1
var(36) = 9

[State 3120, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 6,11

[State 3100, Voice]
type = PlaySnd
trigger1 = time = 3
value = 6,10

[State 1000, 5]
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,60,Ceil(60-(var(11)  = 1)*20 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = 3
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-60,-80)
pausetime = 35,35
hitsound = s6,7
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4490,ifelse(enemy,var(0) = 1,4450,ifelse(p2statetype = C,4480,4425)))
envshake.time = 15
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 2000, 15]
type = EnvColor
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2355, 10]
type = AssertSpecial
trigger1 = MoveHit = 1
flag = NoFG
persistent = 0
ignorehitpause = 1

[State 1000, 16]
type = ChangeState
trigger1 = AnimElem = 10
value = 23401

;------------------------------------------------------------------------------------------
[Statedef 23401]
type = S
movetype = A
physics = S
velset = 0
poweradd = 0
ctrl = 0
velset = 0
hitcountpersist = 1

[State 3120, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 6,11

[State 1000, 5]
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,60,Ceil(60-(var(11)  = 1)*20 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = 3
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-80,-90)
pausetime = 35,34
hitsound = s6,7
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4490,ifelse(enemy,var(0) = 1,4450,ifelse(p2statetype = C,4480,4425)))
envshake.time = 15
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 2000, 15]
type = EnvColor
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2355, 10]
type = AssertSpecial
trigger1 = MoveHit = 1
flag = NoFG
persistent = 0
ignorehitpause = 1

[State 1000, 16]
type = ChangeState
trigger1 = AnimTime = 0
value = 23410

;------ ------------------------------------------------------------------------------------
[Statedef 23410]
type = A
movetype = A
physics = N
anim = 23410

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 5,15

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 1
id = 2911
sprpriority = 10
postype = P1
pos = 0,0
stateno = 2911
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
ignorehitpause = 0
persistent = 0

[State 1300, 5]
type = PosAdd
trigger1 = AnimElem = 1
x = 10
y = -10

[State 1001, 3]
type = VelSet
trigger1 = Time = 0
x = 3
y = -22

[State 1660, 4]
type = VelMul
trigger1 = 1
x = .96

[State 1001, 3]
type = VelSet
trigger1 = Time = 12
x = 0

[State 1660, 4]
type = VelMul
trigger1 = Time = [0,12]
y = .78

[State 1001, 4]
type = VelAdd
trigger1 = Time > 12
y = .45

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 2
movetype = I

[State 1001, 7]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 1,2
trigger3 = AnimElem = 1,4
trigger4 = AnimElem = 1,6
attr = A, HA
animtype = Hard
damage = ifelse(HitCount >=3,10,Ceil(40 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-60
hitflag = MAF
guardflag = M
pausetime = 1,2
hitsound = -1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4825,4080)
envshake.time = 0
envshake.freq = 150
envshake.ampl = 5
envshake.phase = 150

[State 1001, 7]
type = HitDef
trigger1 = AnimElem = 1,8
attr = A, HA
animtype = Hard
damage = ifelse(HitCount >=3,10,Ceil(80 / (2 ** HitCount))),10
getpower = 0,0
givepower = 20,20
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-75
hitflag = MAF
guardflag = M
pausetime = 11,12
hitsound = -1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4825,4080)
envshake.time = 10
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,14

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 7,3

[State 2210, 2]
type = PlaySnd
trigger1 = MoveHit = 1
value = 6,7
ignorehitpause = 1

[State 114, 10]
type = MoveHitReset
trigger1 = MoveHit = 1
ignorehitpause = 1

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 110
ignorehitpause = 1
persistent = 0

[State 1001, 19]
type = VelSet
trigger1 = AnimElem = 2
x = 0

[State 2000, 7]
type = VarSet
trigger1 = AnimElem = 2
var(11)  = 0

[State 1001, 21]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -15
value = 2952




















;---------------------------------------------------------------------------
[Statedef -3]
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------

[State -3, 2];跳跃系统相关(普通跳)
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 40 
trigger1 = var(25) <= 0
value = F40, 0
channel = 13

[State -3, 2];跳跃系统相关（大跳/小跳）
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 40 
trigger1 = var(25) > 1
value = F40, 1
channel = 13

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; AH大神的大跳系统
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[State -3, 5]
type = varset
trigger1 = stateno = 10
trigger1 = time = 0
trigger2 = stateno = [100,101]
v = 25
value = 20

[State -3, 5]
type = varset
trigger1 = stateno = 52
trigger1 = time = 0
v = 25
value = 0

[State -3, 5]
type = varset
trigger1 = stateno = 40
trigger1 = command != "holdup"
v = 26
value = 1

[State -3, 5]
type = varset
trigger1 = stateno = 40
trigger1 = command = "holdup"
v = 26
value = 0

[State -3, 5]
type = VelAdd
trigger1 = stateno = 50
trigger1 = anim = 41+Var(55)*10000 
trigger1 = time = 1
trigger1 = var(25) >= 1
y = -0.6

[State -3, 5]
type = velset
trigger1 = stateno = 50
trigger1 = anim = 42+Var(55)*10000 
trigger1 = time = 1
trigger1 = var(25) >= 1
x = 4.5

[State -3, 5]
type = velset
trigger1 = stateno = 50
trigger1 = anim = 43+Var(55)*10000 
trigger1 = time = 1
trigger1 = var(25) >= 1
x = -4.5

[State -3, 5]
type = veladd
trigger1 = stateno = 50
trigger1 = time = 1
trigger1 = var(26) = 1
y = 3

[State -3, 5]
type = AfterImage
triggerall = fvar(20) < 1
triggerall = fvar(21) < 1
trigger1 = stateno = 50
trigger1 = time = 1
trigger1 = var(25) >= 1
time = 10
trans = add1
timegap = 1
framegap = 2
length = 8
palbright = 12,12,12
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

;--------------------------------------------
[State 0, changeanim]
type = changeanim
triggerall = roundno >= 2
trigger1 = palno = [5,8]
trigger1 = anim = 5+Var(55)*10000 
value = 1

[State 0, changeanim]
type = changeanim
triggerall = roundno >= 2
trigger1 = palno = [9,12]
trigger1 = anim = 5+Var(55)*10000 
value = 2

[state varadd]
type = varset
triggerall = roundstate <= 1
trigger1 = palno = [5,8]
var(55) = 1

[state varadd]
type = varset
triggerall = roundstate <= 1
trigger1 = palno = [9,12]
var(55) = 2

;---------------------------------------------------------------
;----------------------火焰受击伴随烟雾-------------------------
;---------------------------------------------------------------
;人物受到带火属性的招式攻击Var设定
[State 2300, Burn]
type = Varset
trigger1 = Projhittime(3800) >= 0 && Projhittime(3800) <= 55
trigger2 = Anim = 23911
trigger2 = animelemtime(29) > 0
persistent = 0
ignorehitpause = 1
var(23) = 1

[State -2,红色双烟雾];Random < 50
type = Explod
triggerall = p2movetype = H
triggerall = Random < 50
trigger1 = Projhittime(3800) >= 0 && Projhittime(3800) <= 55
anim = f400
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1

[State -2,红色雾气]
type = Explod
triggerall = p2movetype = H
triggerall = Random < 100
trigger1 = Projhittime(3800) >= 0 && Projhittime(3800) <= 55
anim = f401
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1

[State -2,三个小爆点]
type = Explod
triggerall = p2movetype = H
triggerall = Random < 100
trigger1 = Projhittime(3800) >= 0 && Projhittime(3800) <= 55
anim = f402
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1

[State -2,红色单烟雾];Random < 70
type = Explod
triggerall = p2movetype = H
triggerall = Random < 70
trigger1 = Projhittime(3800) >= 0 && Projhittime(3800) <= 55
anim = f403
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1

;---------------------------------------------------------------
;P2倒地之后的烟雾（红色）
;---------------------------------------------------------------
[State 1000, explods];红色小明火
type = Explod
triggerall = var(23) > 0 && Random < 70
trigger1 = (p2stateno = [5100,5110]) && p2movetype = H
trigger2 = (p2stateno = [4167,4169]) && p2movetype = H
anim = f404
pos = 0,0
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1
ignorehitpause = 1

[State 1000, explods];红色小灰雾
type = Explod
triggerall = var(23) > 0 && Random < 70
trigger1 = (p2stateno = [5100,5110]) && p2movetype = H
trigger2 = (p2stateno = [4167,4169]) && p2movetype = H
trigger3 = (p2stateno = [4127,4128]) && p2movetype = H
anim = f405
pos = 0,0
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1
ignorehitpause = 1

[State 1000, explods];红色小圈
type = Explod
triggerall = var(23) > 0 && Random < 70
trigger1 = (p2stateno = [5100,5110]) && p2movetype = H
trigger2 = (p2stateno = [4167,4169]) && p2movetype = H
trigger3 = (p2stateno = [4127,4128]) && p2movetype = H
anim = f406
pos = 0,0
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1
ignorehitpause = 1

[State 1000, explods];红色贴地喷雾1
type = Explod
triggerall = StageVar(info.author) != "water"
triggerall = var(23) > 0 && Random < 50
trigger1 = (p2stateno = [5100,5110]) && p2movetype = H
trigger2 = (p2stateno = [4167,4169]) && p2movetype = H
trigger3 = (p2stateno = [4127,4128]) && p2movetype = H
anim = f407
pos = 0,0
postype = p2
sprpriority = 999
bindtime = 1
random = 100,0
ownpal = 1
supermove = 1
ignorehitpause = 1

[State 1000, explods];红色贴地喷雾2
type = Explod
triggerall = StageVar(info.author) != "water"
triggerall = var(23) > 0 && Random < 50
trigger1 = (p2stateno = [5100,5110]) && p2movetype = H
trigger2 = (p2stateno = [4167,4169]) && p2movetype = H
trigger3 = (p2stateno = [4127,4128]) && p2movetype = H
anim = f407
pos = 0,0
facing = -1
postype = p2
sprpriority = 999
bindtime = 1
random = 100,0
ownpal = 1
supermove = 1
ignorehitpause = 1

[State 1000, VarSet]
type = VarSet
trigger1 = p2movetype != H
v = 23
value = 0
persistent = 0
;---------------------------------------------------------------
;------------------------END OF STATE---------------------------
;---------------------------------------------------------------

[State -2,2]
type = targetstate
trigger1 = numtarget(3811)&& NumProjID(3800) = 0
trigger1 = ProjHit3800 = 1
value = 4165
ignorehitpause = 1
persistent = 0

;--------------------------------------------
; Play sound when hit by light
[State -3, 1.2]
type = PlaySnd
triggerall = Time = 1
triggerall = alive
triggerall = Random <= 500;use random
trigger1 = stateno = 5001
trigger1 = anim = 5000
trigger2 = stateno = 5001
trigger2 = anim = 5010
trigger3 = stateno = 5011
trigger3 = anim = 5020 
value = 0,6
channel = 0
volume = 80
ignorehitpause = 1

; Play sound when hit by medium
[State -3, 1.3]
type = PlaySnd
triggerall = Time = 1
triggerall = alive
triggerall = Random <= 500;use random
trigger1 = stateno = 5001
trigger1 = anim = 5001
trigger2 = stateno = 5001
trigger2 = anim = 5011
trigger3 = stateno = 5011
trigger3 = anim = 5021 
value = 0,9
channel = 0
volume = 80
ignorehitpause = 1

; Play sound when hit by hard
[State -3, 1.4]
type = PlaySnd
triggerall = Time = 1
triggerall = alive
triggerall = Random <= 400;use random
trigger1 = stateno = 5001
trigger1 = anim = 5002
trigger2 = stateno = 5001
trigger2 = anim = 5012
trigger3 = stateno = 5011
trigger3 = anim = 5022 
value = 0,7
channel = 0
volume = 80
ignorehitpause = 1

; Play sound when lying down
[State -3, 1.5]
type = PlaySnd
triggerall = Time = 1
triggerall = alive
triggerall = Random <= 200;use random
trigger1 = stateno = 5100
value = 0,8
channel = 0
volume = 80
ignorehitpause = 1

;Stop Zanretsu snd
[State -3, 1]
type = StopSnd
trigger1 = stateno = 2602
trigger1 = AnimElem = 29
trigger2 = stateno = 2600
trigger2 = animelem = 53
trigger3 = movetype = H
trigger4 = stateno = 2601
value = 3,10
channel = 3
