[Statedef 2000]
type = S
movetype = A
physics = S
anim = 2000+Var(55)*10000
velset = 0
poweradd = ifelse(Var(10) != 0,0,65)
ctrl = 0
facep2 = 1

[State 2000, snd1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3+Var(55),2

[State 2000, snd2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 7,2

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6,1
movetype = I

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 6,1
id = 2887
sprpriority = 10
postype = P1
pos = 70,-15+Var(55)*10
stateno = 2887
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
persistent = 1

[State 2000, 4]
type = Projectile
trigger1 = AnimElem = 6,1
projpriority = 2
attr = S, SP
projID = 2000
projanim = 2887
projhitanim = -1
offset = 70,-15+Var(55)*5
velocity = 4
ownpal = 1
damage = ifelse(enemy,var(0) = 1,110,90),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
animtype = Hard
hitflag = MAFP
guardflag = M
pausetime = 0,12
sparkno = 2
guard.sparkno = 42
sparkxy = 0,-60
hitsound   = 5,1
guardsound = 6,2
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State 2000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------
;Kouken2
[Statedef 2001]
type = S
movetype = A
physics = S
anim = 2001+Var(55)*10000
velset = 0
poweradd = ifelse(Var(10) != 0,0,65)
ctrl = 0
facep2 = 1

[State 2001, snd1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3+Var(55),2

[State 2001, snd2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 7,2

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 6,1
movetype = I

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 6,1
id = 2887
sprpriority = 10
postype = P1
pos = 70,-15+Var(55)*10
stateno = 2885
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
persistent = 1

[State 2001, 4]
type = Projectile
trigger1 = AnimElem = 6,1
projpriority = 2
attr = S, SP
projID = 2000
projanim = 2887
projhitanim = -1;2006
offset = 70,-15+Var(55)*5
velocity = 6
ownpal = 1
damage = ifelse(enemy,var(0) = 1,115,95),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
animtype = Hard
hitflag = MAFP
guardflag = M
pausetime = 0,12
sparkno = 2
guard.sparkno = 42
sparkxy = 0,-60
hitsound   = 5,1
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State 2001, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------
[Statedef 2050]
type = S
movetype = A
physics = S
anim = 2050+Var(55)*10000
velset = 0
poweradd = 65
ctrl = 0
facep2 = 1

[State 240, LQ[W]
type = VarAdd
triggerall = var(10) != 0 && var(30) = 0 && time = 0&&Var(55)=2
trigger1 = var(31) = 1 || var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, L_]
type = VarAdd
triggerall = var(30) = 0 && var(10) != 0 && time = 0&&Var(55)=2
trigger1 = var(31) = 1 || var(32) = 1
var(36) = 9

[State 2000, snd1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3+(Var(55)=2)*2,2+(Var(55)=2)*17

[State 2160, 33]
type = Explod
trigger1 = AnimElem = 6&&Var(55)=2
anim = F61
sprpriority = -3
postype = p1
pos = 50,0
bindtime = 1

[State 2000, 4]
type = Projectile
trigger1 = AnimElem = 7&&Var(55)!=2
trigger2 = AnimElem = 5&&Var(55)=2
projpriority = 2+(Var(55)=2)*7
attr = S, SP
projID = 2991
projanim = ifelse(var(55) = 2,22053,2991)
projhitanim = 2991
projremovetime = 7
offset = ifelse(var(55) = 2,60,0),ifelse(var(55) = 2,-70,0)
velocity = 0
ownpal = 1
damage = 0
getpower = 0
givepower = 0
animtype = Hard
hitflag = MAFP
guardflag = M
pausetime = 0,0
sparkxy = -15,0
sparkno = 2
guard.sparkno = 42
hitsound   = 5,1
guardsound = 6,1
ground.type = high

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 8&&Var(55)!=2
trigger2 = AnimElem = 7&&Var(55)=2
movetype = I

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 7&&Var(55)!=2
;trigger2 = AnimElem = 6&&Var(55)=2
attr = S, SA
damage = ifelse(enemy,var(0) = 1,120,100)+(helper(50000),var(6)>0)*100,10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 11+(helper(50000),var(6)>0)*12,12+(helper(50000),var(6)>0)*12
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-65
hitsound = 5,4
guardsound = 6,1
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4815,4045)

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 6&&Var(55)=2
attr = A, SP
damage = ifelse(enemy,var(0) = 1,120,100)+(helper(50000),var(6)>0)*100,10
getpower = ifelse(root,Var(10) != 0,0,65),ifelse(root,Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 5,12+(helper(50000),var(6)>0)*12
sparkno = 2
guard.sparkno = 42
sparkxy = -18,-70
hitsound = s3,11
guardsound = 6,1
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -16
air.velocity = -6,-4
air.type = High
air.hittime = 17
yaccel = .65
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State 2000, snd1]
type = PlaySnd
trigger1 = AnimElem = 6&&Var(55)=2
value = 6,8
channel = 0

[State 183, 3]
type = EnvShake
trigger1 = animelem = 6&&Var(55)=2
ignorehitpause = 1
ampl = 4
freq = 150
time = 10

[State -2, 7]
type = Varadd
trigger1 = ProjGuarded = 1
var(5) = 100+(helper(50000),var(6)>0)*50
ignorehitpause = 1
persistent = 0

[State 1100, 1]
type = PlaySnd
trigger1 = movehit = 1
value = 3+Var(55)*1.5,11-Var(55)*2
volume = 120
persistent = 0
ignorehitpause = 1

[State 2000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------
;f02
[Statedef 2051]
type = S
movetype = A
physics = S
anim = 2051+Var(55)*10000
velset = 0
poweradd = ifelse(Var(10) != 0,0,65)
ctrl = 0
facep2 = 1

[State 240, LQ[W]
type = VarAdd
triggerall = var(10) != 0 && var(30) = 0 && time = 0&&Var(55)=2
trigger1 = var(31) = 1 || var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, L_]
type = VarAdd
triggerall = var(30) = 0 && var(10) != 0 && time = 0&&Var(55)=2
trigger1 = var(31) = 1 || var(32) = 1
var(36) = 9

[State 2000, snd1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3+(Var(55)=2)*2,2+(Var(55)=2)*17

[State 2000, snd1]
type = PlaySnd
trigger1 = AnimElem = 6&&Var(55)=2
value = 6,8

[State 2160, 33]
type = Explod
trigger1 = AnimElem = 6&&Var(55)=2
anim = F66
sprpriority = -2
postype = p1
pos = 50,0
bindtime = 1

[State 2160, 33]
type = Explod
trigger1 = AnimElem = 6&&Var(55)=2
anim = F67
sprpriority = 2
postype = p1
pos = 50,0
bindtime = 1

[State 183, 3]
type = EnvShake
trigger1 = AnimElem = 7&&Var(55)!=2
trigger2 = AnimElem = 6&&Var(55)=2
ignorehitpause = 1
ampl = 4
freq = 200
time = 15

[State 2000, 4]
type = Projectile
trigger1 = AnimElem = 7&&Var(55)!=2
trigger2 = AnimElem = 5&&Var(55)=2
projpriority = 2+(Var(55)=2)*7
attr = S, SP
projID = 2991
projanim = ifelse(var(55) = 2,22052,2991)
projhitanim = 2991
projremovetime = 7
offset = ifelse(var(55) = 2,60,0),ifelse(var(55) = 2,-70,0)
velocity = 0
ownpal = 1
damage = 0
getpower = 0
givepower = 0
animtype = Hard
hitflag = MAFP
guardflag = M
pausetime = 0,0
sparkno = 2
guard.sparkno = 42
sparkxy = -15,0
hitsound = 5,1
guardsound = 6,1
ground.type = high

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 8&&Var(55)!=2
trigger2 = AnimElem = 7&&Var(55)=2
movetype = I

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 7&&Var(55)!=2
;trigger2 = AnimElem = 6&&Var(55)=2
attr = S, SA
damage = ifelse(enemy,var(0) = 1,200,170)+(helper(50000),var(6)>0)*100,10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 11+(helper(50000),var(6)>0)*12,12+(helper(50000),var(6)>0)*12
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-65
hitsound = 5,4
guardsound = 6,1
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4815,4045)

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 6&&Var(55)=2
attr = A, SP
damage = ifelse(enemy,var(0) = 1,140,120)+(helper(50000),var(6)>0)*100,10
getpower = ifelse(root,Var(10) != 0,0,65),ifelse(root,Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 5,12+(helper(50000),var(6)>0)*12
sparkno = 2
guard.sparkno = 42
sparkxy = -18,-70
hitsound = s6,7
guardsound = 6,1
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -17
air.velocity = -6,-4
air.type = High
air.hittime = 17
yaccel = .65
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))

[State 1100, 1]
type = PlaySnd
trigger1 = movehit = 1
value = 3+Var(55)*1.5,11-Var(55)*2
volume = 120
persistent = 0
ignorehitpause = 1

[State -2, 7]
type = Varset
trigger1 = MoveGuarded = 1
var(5) = 0
ignorehitpause = 1
persistent = 0

[State 3640, Target]
type = TargetState
trigger1 = Var(55)!=2
trigger1 = MoveGuarded
value = 4302
ignorehitpause = 1
persistent = 0

[State 2000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------
;f02
[Statedef 2100]
type = S
movetype = A
physics = S
anim = 2100+Var(55)*10000
velset = 0
poweradd = 65
ctrl = 0
facep2 = 1

[State 2000, snd1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,3

[State 2000, 4]
type = Projectile
trigger1 = AnimElem = 11
projpriority = 9
attr = S, SP
projID = 2992
projanim = 2992
projhitanim = 2992
projremovetime = 3
offset = 0,0
velocity = 0
ownpal = 1
damage = 0
getpower = 0
givepower = 0
animtype = Hard
hitflag = MAFP
guardflag = M
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -15,0
hitsound = -1
guardsound = -1
ground.type = high

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 12
movetype = I

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 11
attr = S, SA
damage = ifelse(enemy,var(0) = 1,120,120),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 11,12
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-65
hitsound = 5,4
guardsound = 6,1
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4955,4240)

[State -2, 7]
type = Varset
trigger1 = MoveGuarded = 1
var(5) = 0
ignorehitpause = 1
persistent = 0

[State 3640, Target]
type = TargetState
trigger1 = MoveGuarded
value = 4302
ignorehitpause = 1
persistent = 0

[State 2000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------------------
;f02
[Statedef 2101]
type = S
movetype = A
physics = S
anim = 2101+Var(55)*10000
velset = 0
poweradd = 65
ctrl = 0
facep2 = 1

[State 2000, snd1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,3

[State 183, 3]
type = EnvShake
trigger1 = animelem = 11
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 2000, 4]
type = Projectile
trigger1 = AnimElem = 11
projpriority = 9
attr = S, SP
projID = 2992
projanim = 2992
projhitanim = 2992
projremovetime = 3
offset = 0,0
velocity = 0
ownpal = 1
damage = 0
getpower = 0
givepower = 0
animtype = Hard
hitflag = MAFP
guardflag = M
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -15,0
hitsound = -1
guardsound = -1
ground.type = high

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 12
movetype = I

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 11
attr = S, SA
damage = ifelse(enemy,var(0) = 1,120,120),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = 
animtype = Hard
ground.animtype = low
pausetime = 11,12
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-65
hitsound = 5,4
guardsound = 6,1
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4955,4295)

[State 1100, 1]
type = PlaySnd
trigger1 = movehit = 1
value = 3,11
volume = 120
persistent = 0
ignorehitpause = 1

[State 3640, Target]
type = TargetState
trigger1 = MoveGuarded
value = 4300
ignorehitpause = 1
persistent = 0

[State 2000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------------
;rf02
[Statedef 2200]
type = S
movetype = A
physics = S
anim = 2200+Var(55)*10000
velset = 0
poweradd = 65
ctrl = 0
facep2 = 1

[State 240, 1]
type = VarAdd
triggerall = var(10) != 0 &&time = 0
trigger1 = var(31) = 1|var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, 1]
type = VarAdd
triggerall = var(10) != 0 &&time = 0
trigger1 = var(31) = 1|var(32) = 1
var(36) = 9

[State 2000, snd1]
type = PlaySnd
trigger1 = AnimElem = 5 || AnimElem = 10
value = F0,1

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
damage = ifelse(enemy,var(0) = 1,80,Ceil(80 / (2 ** HitCount))),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 4,4
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-65
hitsound = 5,1
guardsound = 6,1
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -0.1,-15
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4280)))

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 70
ignorehitpause = 1
persistent = 0

[State 2000, 5]
type = ChangeState
trigger1 = AnimElem = 6
value = 2205

;-----------------------------------------------------------------------------------------
;rf02
[Statedef 2205]
type = S
movetype = A
physics = S
poweradd = 0
ctrl = 0
hitcountpersist = 1

[State 2000, snd1]
type = PlaySnd
trigger1 = AnimElem = 5 || AnimElem = 10
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 10
attr = S, SA
damage = ifelse(enemy,var(0) = 1,80,Ceil(80 / (2 ** HitCount))),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 11,12
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-75
hitsound = 5,1
guardsound = 6,1
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -15.5
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4945,ifelse(p2statetype = C,4277,4275)))
p2stateno = ifelse(enemy,var(0) = 1,4955,4240)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 60
ignorehitpause = 1
persistent = 0

[State 2000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------------
;rf02
[Statedef 2201]
type = S
movetype = A
physics = N
anim = 2201+Var(55)*10000
velset = 0
poweradd = ifelse(Var(10) != 0,0,65)
ctrl = 0
facep2 = 1

[State 240, 1]
type = VarAdd
triggerall = var(10) != 0 &&time = 0
trigger1 = var(31) = 1|var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, 1]
type = VarAdd
triggerall = var(10) != 0 &&time = 0
trigger1 = var(31) = 1|var(32) = 1
var(36) = 9

[State 2000, snd1]
type = VelSet
trigger1 = animelem = 4
x = 8

[State 2000, snd1]
type = VelSet
trigger1 = animelem = 4,23
x = 0

[State 1660, 4]
type = VelMul
trigger1 = animelem = 4,>=0
x = .935

[State 2000, snd1]
type = PlaySnd
trigger1 = AnimElem = 5 || AnimElem = 10
value = F0,1

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
damage = ifelse(enemy,var(0) = 1,80,Ceil(80 / (2 ** HitCount))),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 4,12
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-65
hitsound = 5,1
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4815,4055)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 80
ignorehitpause = 1
persistent = 0

[State 2000, 5]
type = ChangeState
trigger1 = AnimElem = 6
value = 2202

;---------------------------------------------------------------------------------------------
;rf02
[Statedef 2202]
type = S
movetype = A
physics = N
poweradd = 0
ctrl = 0
hitcountpersist = 1

[State 2000, snd1]
type = VelSet
trigger1 = animelem = 4
x = 8

[State 2000, snd1]
type = VelSet
trigger1 = animelem = 4,23
x = 0

[State 1660, 4]
type = VelMul
trigger1 = animelem = 4,>=0
x = .935

[State 2000, snd1]
type = PlaySnd
trigger1 = AnimElem = 5 || AnimElem = 10
value = F0,1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 10
attr = S, HT
damage = ifelse(enemy,var(0) = 1,80,Ceil(80 / (2 ** HitCount))),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 11,12
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-75
hitsound = 5,1
guardsound = 6,1
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4955,4240)
p2stateno = ifelse(enemy,var(0) = 1,4815,4055)
p2stateno = ifelse(enemy,var(0) = 1,4850,4130)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 80
ignorehitpause = 1
persistent = 0

[State 2000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------
;Mouko Burai Gan
[Statedef 2500]
type = S
movetype = A
physics = S
anim = 2500
velset = 0
ctrl = 0
poweradd = ifelse(Var(10) != 0,0,85)
facep2 = 1


[State 240, 1]
type = VarAdd
triggerall = var(10) != 0 &&time = 0
trigger1 = var(31) = 1|var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, 1]
type = VarAdd
triggerall = var(10) != 0 &&time = 0
trigger1 = var(31) = 1|var(32) = 1
var(36) = 9

[State 2500, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,4

[State 2500, 1]
type = ReversalDef
trigger1 = AnimElem = 2
reversal.attr = SC,NA,SA,HA
pausetime = 11,15
sparkno = 42
sparkxy = 0,0
hitsound = 6,1
sprpriority = -1
numhits = 0

[State 2500, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 2510
ctrl = 1

;------------------------------------------------------------------------------------------------------
[Statedef 2510]
type = S
movetype = A
physics = S
anim = 2510
velset = 0
ctrl = 0

[State 3200, Eff]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3,20

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 10
movetype = I

[State 2500, 1]
type = HitDef
trigger1 = AnimElem = 8
attr = S, SA
damage = ifelse(enemy,var(0) = 1,180,120)+(helper(50000),var(6)>0)*100,10
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
animtype = DiagUp
guardflag = M
hitflag = MAF
pausetime = 24,25
guard.pausetime = 20,20
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-70
hitsound = 5,4
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4860,4160)
envshake.time = 18
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 90+(helper(50000),var(6)>0)*50
ignorehitpause = 1
persistent = 0

[State 2500, 2]
type = ChangeState
trigger1 = MoveHit
value = 2502

[State 2500, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 2503

;-------------------------------------------------------------------------------------------
;Mouko Burai Gan 2
[Statedef 2501]
type = S
movetype = A
physics = S
anim = 2501
velset = 0
ctrl = 0
poweradd = ifelse(Var(10) != 0,0,85)
facep2 = 1

[State 240, 1]
type = VarAdd
triggerall = var(10) != 0 &&time = 0
trigger1 = var(31) = 1|var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, 1]
type = VarAdd
triggerall = var(10) != 0 &&time = 0
trigger1 = var(31) = 1|var(32) = 1
var(36) = 9

[State 2501, 1]
type = ReversalDef
trigger1 = AnimElem = 2
reversal.attr = SC,NA,SA,HA
pausetime = 12,15
sparkno = 42
sparkxy = 0,0
hitsound = 6,1
sprpriority = -1
numhits = 0

[State 2501, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,4
channel = 0

[State 2500, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 2511
ctrl = 1

------------------------------------------------------------------------------------------------
[Statedef 2511]
type = S
movetype = A
physics = S
anim = 2510
velset = 0
ctrl = 0

[State 3200, Eff]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3,20

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 10
movetype = I

[State 2501, 1]
type = HitDef
trigger1 = AnimElem = 8
attr = S, SA
damage = ifelse(enemy,var(0) = 1,190,130)+(helper(50000),var(6)>0)*100,10
getpower = ifelse(Var(10) != 0,0,130),ifelse(Var(10) != 0,0,130)
givepower = 20,20
animtype = DiagUp
guardflag = M
hitflag = MAF
pausetime = 24,25
guard.pausetime = 20,20
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-70
hitsound = 5,4
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4860,4160)
envshake.time = 18
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 90+(helper(50000),var(6)>0)*50
ignorehitpause = 1
persistent = 0

[State 2501, 2]
type = ChangeState
trigger1 = animelem = 10
trigger1 = MoveHit
value = 2502

[State 2501, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 2503

;---------------------------------------------------------------------------------
;Mouko Burai Gan Taunt
[Statedef 2502]
type = S
movetype = I
physics = S
anim = 2502

[State 2502, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,5

[State 2502,1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2502, 2]
type = TargetDrop
trigger1 = AnimTime = 0

[State 2502, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------------------
;Mouko Burai Gan Taunt
[Statedef 2503]
type = S
movetype = I
physics = S
anim = 2503

[State 2502, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------
;Zanretsu Ken Weak
[Statedef 2602]
type = S
movetype = A
physics = S
anim = 2602+Var(55)*10000
velset = 0
ctrl = 0
poweradd = ifelse(Var(10) != 0,0,130)
facep2 = 1

[State 240, LQ[W]
type = VarAdd
triggerall = var(10) != 0 && var(30) = 0 && time = 0&&Var(55)=2
trigger1 = var(31) = 1 || var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, L_]
type = VarAdd
triggerall = var(30) = 0 && var(10) != 0 && time = 0&&Var(55)=2
trigger1 = var(31) = 1 || var(32) = 1
var(36) = 9

[State 2602, snd1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3+Var(55),12-(Var(55)=2)*5-(Var(55)=1)*7

[State 2602, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3,10

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 29
movetype = I

[State 2602, 1]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 11
trigger4 = AnimElem = 14
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 23
trigger8 = AnimElem = 26
attr = S, SA
damage = 0,0
getpower = ifelse(Var(10) != 0,0,20),ifelse(Var(10) != 0,0,20)
givepower = 20,20
animtype = Hard
guardflag = M
hitflag = MAF
pausetime = 1,2
sparkno = 2
guard.sparkno = 42
sparkxy = -15, -84
hitsound = 5,1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4605,4600)
p2facing = 1
snap = 40,0
iD=2600

[State 2600, 2]
type = ChangeState
trigger1 = numtarget(2600)
trigger1 = MoveHit
value = 2601

[State 2602, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------------
;Zanretsu Ken Strong
[Statedef 2600]
type = S
movetype = A
physics = S
anim = 2600+Var(55)*10000
velset = 0
ctrl = 0
poweradd = ifelse(Var(10) != 0,0,130)
facep2 = 1

[State 240, LQ[W]
type = VarAdd
triggerall = var(10) != 0 && var(30) = 0 && time = 0&&Var(55)=2
trigger1 = var(31) = 1 || var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, L_]
type = VarAdd
triggerall = var(30) = 0 && var(10) != 0 && time = 0&&Var(55)=2
trigger1 = var(31) = 1 || var(32) = 1
var(36) = 9

[State 2600, snd1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3+Var(55),12-(Var(55)=2)*5-(Var(55)=1)*7

[State 2602, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3,10

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 53
movetype = I

[State 2600, 1]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 11
trigger4 = AnimElem = 14
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 23
trigger8 = AnimElem = 26
trigger9 = AnimElem = 29
trigger10= AnimElem = 32
trigger11= AnimElem = 35
trigger12= AnimElem = 38
trigger13= AnimElem = 41
trigger14= AnimElem = 44
trigger15= AnimElem = 47
trigger16= AnimElem = 50
attr = S, SA
damage = 0,0
getpower = ifelse(Var(10) != 0,0,20),ifelse(Var(10) != 0,0,20)
givepower = 20,20
animtype = Hard
guardflag = M
hitflag = MAF
pausetime = 1,2
sparkno = 2
guard.sparkno = 42
sparkxy = -15, -84
hitsound = 5,1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4605,4600)
p2facing = 1
snap = 40,0
iD=2600

[State 2600, 2]
type = ChangeState
trigger1 = numtarget(2600)
trigger1 = MoveHit
value = 2601

[State 2600, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------
;SUCCEED
[Statedef 2601]
type = S
movetype = A
physics = S
anim = 2601+Var(55)*10000
poweradd = 0

[State 21000, 2]
type = Width
trigger1 = AnimElemtime(1)>0
edge = 40,0
 
[State 4000, 2]
type = targetstate
trigger1 = time=0
value = 2605

[State 2601, 1]
type = HitAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 7
trigger4 = AnimElem = 10
trigger5 = AnimElem = 13
trigger6 = AnimElem = 16
trigger7 = AnimElem = 19
trigger8 = AnimElem = 22
trigger9 = AnimElem = 25
trigger10= AnimElem = 28
trigger11= AnimElem = 31
value = 1+(Var(55)=2)

[State 2601, 1]
type = PowerAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 7
trigger4 = AnimElem = 10
trigger5 = AnimElem = 13
trigger6 = AnimElem = 16
trigger7 = AnimElem = 19
trigger8 = AnimElem = 22
trigger9 = AnimElem = 25
trigger10= AnimElem = 28
trigger11= AnimElem = 31
value = ifelse(Var(10) != 0,0,20+(Var(55)=2))

[State 2601, 1]
type = TargetPowerAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 7
trigger4 = AnimElem = 10
trigger5 = AnimElem = 13
trigger6 = AnimElem = 16
trigger7 = AnimElem = 19
trigger8 = AnimElem = 22
trigger9 = AnimElem = 25
trigger10= AnimElem = 28
trigger11= AnimElem = 31
value = 20

[State 2601, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 7
trigger4 = AnimElem = 10
trigger5 = AnimElem = 13
trigger6 = AnimElem = 16
trigger7 = AnimElem = 19
trigger8 = AnimElem = 22
trigger9 = AnimElem = 25
trigger10= AnimElem = 28
trigger11= AnimElem = 31
value = -10-(Var(55)=2)*2
kill = 0

[State 1056, 1]
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 7
trigger4 = AnimElem = 10
trigger5 = AnimElem = 13
trigger6 = AnimElem = 16
trigger7 = AnimElem = 19
trigger8 = AnimElem = 22
trigger9 = AnimElem = 25
trigger10= AnimElem = 28
trigger11= AnimElem = 31
value = F5,ifelse(random < 499,1,3)

[State 1056, 1]
type = Explod
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 7
anim = F2
pos = 40,-65
postype = p1
sprpriority = 5
ownpal = 1

[State 1056, 1]
type = Explod
trigger1 = AnimElem = 10
trigger2 = AnimElem = 13
trigger3 = AnimElem = 16
anim = F2
pos = 40,-72
postype = p1
sprpriority = 5
ownpal = 1

[State 1056, 1]
type = Explod
trigger1 = AnimElem = 19
trigger2 = AnimElem = 22
trigger3 = AnimElem = 25
trigger4 = AnimElem = 28
trigger5 = AnimElem = 31
anim = F2
pos = 40,-116
postype = p1
sprpriority = 5
ownpal = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 42
movetype = I

[State 800, 1]
type = notHitBy
trigger1 = AnimElemtime(41)<= 0
value = SCA, NT, HT
time = 1

[State 2601, 1]
type = HitDef
trigger1 = AnimElem = 41
attr = S, SA
damage = ifelse(enemy,var(0) = 1,30,30),10
getpower = ifelse(Var(10) != 0,0,20),ifelse(Var(10) != 0,0,20)
givepower = 20,20
animtype = Hard
guardflag = M
hitflag = MAF
pausetime = 25,27
sparkno = 2
guard.sparkno = 42
sparkxy = -15, -84
hitsound = 5,4
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(Var(55)= 2,ifelse(enemy,var(0) = 1,12505,4020),ifelse(enemy,var(0) = 1,4805,4020))
envshake.time = 18
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 2601, 2]
type = ChangeState
trigger1 = AnimTime = 0||Time >= 400
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------
;Hit By
[Statedef 2605]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 2605, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 2605+Var(55)*10000

[State 2605, 2]
type = velset
trigger1 = Time = 2
y = -.42

;-----------------------------------------------------------------------------------
;Shouran Kyaku Near
[Statedef 2705]
type = S
movetype = A
physics = N
poweradd = ifelse(Var(10) != 0,0,130)
velset = 0,0
ctrl = 0

[State 2705, snd1]
type = PlaySnd
trigger1 = AnimElem = 1,=2
value = 3,17

[State 2705, Anim]
type = Changeanim
trigger1 = time = 0
trigger1 = anim != 2700+Var(55)*10000
value = 2705+Var(55)*10000

[State 2705, 1]
type = VelSet
trigger1 = time > 9
x = const(velocity.run.fwd.x)

[State 191, Spray Anim P1]
type = Explod
trigger1 = time >= 9 && timemod = 10,0
trigger1 = StageVar(info.author) = "water"
ID = 20
anim = F21
postype = p1
pos = -10,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 9
value = F100,0+(StageVar(info.author) = "water")

[State 2705, 6]
type = ChangeState
trigger1 = animelem = 3, >= 0
trigger1 = p2bodydist x <= 10
value = 2715
ctrl = 0

[State 2705, 6]
type = ChangeState
triggerall = animelem = 3, > 0
trigger1 = time >= 30
trigger2 = var(9) = 1 && ((enemy,var(0) = 1 && p2bodydist x > 80)|| p2statetype = A)
value = 2710
ctrl = 0

;----------------------------------------------
;Shouran Kyaku Far
[Statedef 2700]
type = S
movetype = A
physics = N
poweradd = ifelse(Var(10) != 0,0,130)
velset = 0,0
ctrl = 0
facep2 = 1

[State 2705, snd1]
type = PlaySnd
trigger1 = AnimElem = 1,=2
value = 3+(Var(55)>=1)*1,17-(Var(55)>=1)*10

[State 2700, Anim]
type = Changeanim
trigger1 = time = 0
trigger1 = anim != 2700+Var(55)*10000
value = 2700+Var(55)*10000

[State 2700, 1]
type = VelSet
trigger1 = time > 15
x = const(velocity.run.fwd.x)

[State 191, Spray Anim P1]
type = Explod
trigger1 = time >= 15 && timemod = 10,0
trigger1 = StageVar(info.author) = "water"
ID = 20
anim = F21
postype = p1
pos = -10,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = F100,0+(StageVar(info.author) = "water")

[State 2700, 6]
type = ChangeState
trigger1 = animelem = 3, >= 0
trigger1 = p2bodydist x <= 10
value = 2715
ctrl = 0

[State 2700, 6]
type = ChangeState
triggerall = animelem = 3, > 0
trigger1 = time >= 80
trigger2 = var(9) = 1 && ((enemy,var(0) = 1 && p2bodydist x > 80)|| p2statetype = A)
value = 2710
ctrl = 0

;--------------------------------------------------------------------------------------------
;Run Forward Stop
[Statedef 2710]
type = S
movetype = I
physics = N
anim = 2710+Var(55)*10000
velset = 0,0
ctrl = 0

[State 2710, AFTER]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 2710, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------
;Attempt
[Statedef 2715]
type = S
movetype = A
physics = N
anim = 2715+Var(55)*10000
velset = 0,0
sprpriority = 2
ctrl = 0

[State 2715, 2]
type = HitDef
Trigger1 = var(4)<=0
Trigger1 = animelem = 3
attr = S, ST          
hitflag = M-          
priority = 7, miss   
sparkno = -1          
sprpriority = 1  
hitsound = -1
p2facing = 1          
p1stateno = 2720       
p2stateno = 2730  
fall = 10
fall.recover = 0
ground.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .55
guard.dist = -100
snap = 36,0

[State 2715, 1]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------
;Success
[Statedef 2720]
type = S
movetype = A
physics = N
anim = 2720+Var(55)*10000
poweradd = 0
velset = 0,0
sprpriority = 2
ctrl = 0

[State 2720, Bind1]
type = BindToTarget
trigger1 = AnimElem = 2
pos = 20, 63, head

[State 301, 2]
type = Explod
trigger1 = AnimElem = 1
id = 1045
anim = F9
pos = 33,-84
postype = p1
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 2720, Explod]
type = Explod
trigger1 = animelem = 2,=1
trigger2 = animelem = 4,=1
trigger3 = animelem = 6,=1
trigger4 = animelem = 8,=1
trigger5 = animelem = 10,=1
trigger6 = animelem = 12,=1
id = 1041
anim = F2
pos = 32,-58
postype = p1
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 2720, Grab Snd]
type = PlaySnd
trigger1 = AnimElem = 1
value = F800,0

[State 2720, HitSnd]
type = PlaySnd
trigger1 = animelem = 2,=1
trigger2 = animelem = 4,=1
trigger3 = animelem = 6,=1
trigger4 = animelem = 8,=1
trigger5 = animelem = 10,=1
trigger6 = animelem = 12,=1
value = F5,3

[State 2720, HitSnd]
type = PlaySnd
trigger1 = animelem = 16,=1
value = F5,4

[State 2720, DAMAGE]
type = targetlifeadd
trigger1 = animelem = 2,=1
trigger2 = animelem = 4,=1
trigger3 = animelem = 6,=1
trigger4 = animelem = 8,=1
trigger5 = animelem = 10,=1
trigger6 = animelem = 12,=1
value = -20
kill = 0

[State 2720, DAMAGE]
type = targetpoweradd
trigger1 = animelem = 2,=1
trigger2 = animelem = 4,=1
trigger3 = animelem = 6,=1
trigger4 = animelem = 8,=1
trigger5 = animelem = 10,=1
trigger6 = animelem = 12,=1
trigger7 = animelem = 16,=1
value = 20

[State 2720, DAMAGE]
type = poweradd
trigger1 = animelem = 2,=1
trigger2 = animelem = 4,=1
trigger3 = animelem = 6,=1
trigger4 = animelem = 8,=1
trigger5 = animelem = 10,=1
trigger6 = animelem = 12,=1
trigger7 = animelem = 16,=1
value = ifelse(Var(10) != 0,0,20)

[State 2720, Explod]
type = Explod
trigger1 = animelem = 16
id = 1041
anim = F2
pos = 56,-30
postype = p1
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 2720, DAMAGE1]
type = targetlifeadd
trigger1 = animelem = 16,=1
value = -50

[State 183, 3]
type = EnvShake
trigger1 =  animelem = 16,1
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 2720, Posadd1]
type = posadd
trigger1 = animelem = 16
x = 3

[State 2720, End]
type = ChangeState
trigger1 = animtime = 0
value = 2725
ctrl = 0

;------------------------------------------------------------------------------------
;Finisher
[Statedef 2725]
type = A
movetype = I
physics = N
anim = 2725+Var(55)*10000
velset = -2.0,-8.5
sprpriority = 2
ctrl = 0

[State 2725, Posadd1]
type = posadd
trigger1 = animelem = 1
x = -51
y = -3

[State 2725, Posadd1]
type = Veladd
trigger1 = time > 0
y = .54

[State 2725, 1]
type = Width
trigger1 = animelem = 6, <= 0
edge = 40,20

[State 2725, 1]
type = ChangeState
trigger1 = vel y > 0  && pos y >= -10
value = 2727

;----------------------------------------------
;Land
[Statedef 2727]
type    = S
physics = S
movetype = I
anim = 2727+Var(55)*10000
ctrl = 0

[State 2727, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State 2727, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 1527, 6]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1
;-----------------------------------------------


;-----------------------------------------------------
;(GRABBED)
[Statedef 2730]
type    = A
movetype= H ;Get hit
physics = N
sprpriority = -2
ctrl = 0
velset = 0,0

[State 2730, 2]
type = velset
Trigger1 = Time = 0
value = 0,0

[State 2730, SB]
type = Screenbound
Trigger1 = 1
value = 0

[State 2730, 2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2730+var(55)

[State 2730, liftoff]
type = Changestate
Trigger1 = AnimTime = 0
value = 4045;1300
ctrl = 0

;-----------------------------------------------

; HITA_SHAKE
[Statedef 1300]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1300, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000

[State 1300, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000

[State 1300, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)+Var(55)*30000))
value = 5047 + GetHitVar(animtype)+Var(55)*30000

[State 1300, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 4
value = anim

[State 1300, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 1305

[State 1300, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000+Var(55)*30000
trigger2 = anim = 5010+Var(55)*30000
persistent = 0
time = 6
waveform = square

[State 1300, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001+Var(55)*30000
trigger2 = anim = 5011+Var(55)*30000
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 1300, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012+Var(55)*30000
trigger2 = anim = 5002+Var(55)*30000
trigger3 = anim = 1305+Var(55)*30000
trigger4 = anim = [5051+Var(55)*30000,5059+Var(55)*30000]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;-----------------------------------------------------
; HITA_UP (initial going up)
[Statedef 1305]
type    = A
movetype= H
physics = N
ctrl = 0

[State 1305, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 1305, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1305, 3]
type = Selfstate
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 1305, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 1315 ;HITA_FALL

[State 1305, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1310 ;HITA_UP (transition)

;---------------------------------------------------------------------------

;---------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 1310]
type    = A
movetype= H
physics = N

[State 1310, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035+Var(55)*30000)
trigger1 = Anim != [5051+Var(55)*30000,5059+Var(55)*30000] ;Not if in hit up anim
trigger1 = Anim != 5090+Var(55)*30000
value = 5035+Var(55)*30000

[State 1310, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1310, 3]
type = Selfstate
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 1310, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 1315 ;HITA_FALL

;----------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 1315]
type    = A
movetype= H
physics = N

[State 1315, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 1
sysvar(4) = floor(vel x)

[State 1315, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035+Var(55)*30000
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035+Var(55)*30000
trigger2 = (Anim != [5051+Var(55)*30000, 5059+Var(55)*30000]) && (Anim != [5061+Var(55)*30000, 5069+Var(55)*30000])
trigger2 = Anim != 5090+Var(55)*30000
value = 5050+Var(55)*30000

[State 1315, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050+Var(55)*30000,5059+Var(55)*30000]
trigger1 = Vel Y >= ifelse(anim = 5050+Var(55)*30000, 1, -2)
trigger1 = SelfAnimExist(anim+10+Var(55)*30000)
value = anim+10+Var(55)*30000
persistent = 0

[State 1315, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1315, 4] ;Recover near ground
type = Selfstate
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 1315; Recover in mid air
type = Selfstate
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 1315, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 1320 ;HIT_Ground

;---------------------------------------------------------------------------

; HIT_Ground
[Statedef 1320]
type    = L
movetype= H
physics = N

[State 1320, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = vel x > 1
x = 1

[State 1320, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 1320, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 1320, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051+Var(55)*30000,5059+Var(55)*30000]) && (anim != [5061+Var(55)*30000,5069+Var(55)*30000])
trigger2 = !SelfAnimExist(5100 + (anim % 10)+Var(55)*30000)
value = 5100+Var(55)*30000

[State 1320, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051+Var(55)*30000,5059+Var(55)*30000]) || (anim = [5061+Var(55)*30000,5069+Var(55)*30000])
trigger1 = SelfAnimExist(5100 + (anim % 10)+Var(55)*30000)
value = 5100 + (anim % 10)+Var(55)*30000

[State 1320, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1320, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1320, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 1320, 8]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 1320, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 1320, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 1320, 11]
type = PosFreeze
trigger1 = 1

[State 1320, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 1325

[State 1320, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;----------------------------------------------------------

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 1325]
type    = L
movetype= H
physics = N

[State 1325, 1] ;Coming hit ground anim (normal)
type = Nothitby
trigger1 = 1
value = SCA

[State 1325, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101+Var(55)*30000,5109+Var(55)*30000]
trigger2 = !SelfAnimExist(5160 + (anim % 10)+Var(55)*30000)
value = 5160+Var(55)*30000

[State 1325, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 1325, 3]
type = HitFallVel
trigger1 = GetHitVar(fall.yvel) != 0
trigger1 = Time = 0

[State 1325, VEl]
type = Velset
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
x = sysvar(4)
y = -3.7

[State 1325, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 1325, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 1325, 6] ;Hit ground
trigger1 = time > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 1330

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 1330]
type    = L
movetype= H
physics = N

[State 1330, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 1330, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 1330, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 1330, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 1330, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 1330, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1330, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 1330, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 1330, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 1330, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1330, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 1330, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 1330, 11] ;If just died
type = SelfState
triggerall = !alive
triggerall = time >= 50
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 1330, GETUP]
type = SelfState
triggerall = alive
trigger1 = time >= 30
value = 5120

[State 1330, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 1330, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 1330, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 1330, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 1335]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1335, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 1335, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 1335, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 1335, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 1335, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 1305 ;HITA_UP

;---------------------------------------------------------------------
;Hien Shippuu Kyaku (Weak)
[Statedef 2801]
type = S
movetype = A
physics = S
anim = 2801+Var(55)*10000 
ctrl = 0
velset = 0, 0
poweradd = ifelse(Var(10) != 0,0,130)
facep2 = 1

[State 240, 1]
type = VarAdd
triggerall = var(10) != 0 && var(30) = 0 && time = 0&&Var(55)>=1
trigger1 = var(31) = 1 || var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, L_]
type = VarAdd
triggerall = var(30) = 0 && var(10) != 0 && time = 0&&Var(55)>=1
trigger1 = var(31) = 1 || var(32) = 1
var(36) = 9

[State 2801,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 2811

;-------------------------------------------------------------------------------------------------
;Hien Shippuu Kyaku Air
[Statedef 2811]
type = A
movetype = A
physics = N
anim = 2810+Var(55)*10000 

[State 2810, snd1]
type = PlaySnd
trigger1 = time = 0
value = 3+(Var(55)=2)*2,21-(Var(55)=2)*12
channel = 0

[State 1110,0]
type = VelSet
trigger1 = Time = 0
x = 7.0
y = -3.0

[State 1110,1]
type = VelAdd
trigger1 = Time >= 0
x = .35
y = .4

[State 1110,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 2821

;-------------------------------------------------------------------------------------------------
;Hien ATK
[Statedef 2821]
type = A
movetype = A
physics = N
anim = 2820+Var(55)*10000 

[State 2000, eff]
type = PlaySnd
trigger1 = time = 0
value = 3,22

[State 1120,0]
type = VelSet
trigger1 = Time = 0
y = -0.2

[State 1120,0]
type = VelSet
trigger1 = Time = 6
y = 0.2

[State 2820,1]
type = HitDef
trigger1 = time = 0
trigger1 = enemy,anim != 1234
attr = A, SA
animtype = Hard
hitflag = MAF
guardflag = M
damage = ifelse(enemy,var(0) = 1,130,120)+(helper(50000),var(6)>0)*100,10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitsound = 5,4
guardsound = 6,1
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-68
pausetime = 11+(helper(50000),var(6)>0)*12,12+(helper(50000),var(6)>0)*12
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 4115
p2stateno = ifelse(enemy,var(0) = 1,4835,4050)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 80+(helper(50000),var(6)>0)*50
ignorehitpause = 1
persistent = 0

[State 2820,3]
type = ChangeState
trigger1 = Time = 12
value = 2831

;-------------------------------------------------------------------------------------------------
;miss
[Statedef 2831]
type = A
movetype = I
physics = N
anim = 2830+Var(55)*10000 

[State 1130,0]
type = VelAdd
trigger1 = Time >= 0
x = -.5
y = .6

[State 1130,0]
type = VelSet
trigger1 = Vel X <= 0
x = 0

[State 1130,1]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 2841

;-------------------------------------------------------------------------------------------------
;Land
[Statedef 2841]
type = S
movetype = I
physics = S
anim = 2840+Var(55)*10000 
velset = 0, 0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 1140,0]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1140,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------------
; Hien Shippuu Kyaku (Strong)
[Statedef 2800]
type = S
movetype = A
physics = S
anim = 2800+Var(55)*10000
ctrl = 0
velset = 0, 0
poweradd = ifelse(Var(10) != 0,0,130)
facep2 = 1

[State 240, LQ[W]
type = VarAdd
triggerall = var(10) != 0 && var(30) = 0 && time = 0&&Var(55)>=1
trigger1 = var(31) = 1 || var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, L_]
type = VarAdd
triggerall = var(30) = 0 && var(10) != 0 && time = 0&&Var(55)>=1
trigger1 = var(31) = 1 || var(32) = 1
var(36) = 9

[State 2800,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 2810

;---------------------------------------------------------------------------------------------------
;Hien Shippuu Kyaku Air
[Statedef 2810]
type = A
movetype = A
physics = N
anim = 2810+Var(55)*10000

[State 2810, snd1]
type = PlaySnd
trigger1 = time = 0
value = 3+(Var(55)=2)*2,21-(Var(55)=2)*12

[State 1110,0]
type = VelSet
trigger1 = Time = 0
x = 7.0
y = -3.0

[State 1110,1]
type = VelAdd
trigger1 = Time >= 0
x = .35
y = .4

[State 1110,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 2820

;---------------------------------------------------------------------------------------------------
;Hien ATK
[Statedef 2820]
type = A
movetype = A
physics = N
anim = 2820+Var(55)*10000

[State 2000, eff]
type = PlaySnd
trigger1 = time = 0
value = 3,22

[State 1120,0]
type = VelSet
trigger1 = Time = 0
y = -0.2

[State 1120,0]
type = VelSet
trigger1 = Time = 6
y = 0.2

[State 2820,1]
type = HitDef
trigger1 = enemy,anim != 1234
trigger1 = time = 0
attr = A, SA
animtype = Hard
hitflag = MAF
guardflag = M
damage = ifelse(enemy,var(0) = 1,100,60)+(helper(50000),var(6)>0)*60,10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitsound = 5,4
guardsound = 6,1
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-68
pausetime = 11+(helper(50000),var(6)>0)*12,12+(helper(50000),var(6)>0)*12
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C && P2movetype != A,4277,4330)))
p2stateno = ifelse(enemy,var(0) = 1,4815,4050)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 80+(helper(50000),var(6)>0)*50
ignorehitpause = 1
persistent = 0

[State 2820,2]
type = ChangeState
trigger1 = MoveContact = 1
value = 2850

[State 2820,3]
type = ChangeState
trigger1 = Time = 22
trigger1 = MoveContact = 0
value = 2830

;---------------------------------------------------------------------------------------------------
;miss
[Statedef 2830]
type = A
movetype = I
physics = N
anim = 2830+Var(55)*10000

[State 1130,0]
type = VelAdd
trigger1 = Time >= 0
x = -.5
y = .6

[State 1130,0]
type = VelSet
trigger1 = Vel X <= 0
x = 0

[State 1130,1]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 2840

;---------------------------------------------------------------------------------------------------
;Land
[Statedef 2840]
type = S
movetype = I
physics = S
anim = 2840+Var(55)*10000
velset = 0, 0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 1140,0]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1140,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------------
;Succeed
[Statedef 2850]
type = A
movetype = A
physics = N
anim = 2850+Var(55)*10000

[State 1120,0]
type = VelSet
trigger1 = Time = 0
y = 0

[State 2810, snd1]
type = PlaySnd
trigger1 = time = 0&&Var(55)=2
value = 5,8

[State 1150,0]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
animtype = High
damage = ifelse(enemy,var(0) = 1,100,30),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
guardflag = M
hitflag = MAF
hitsound = 5,4
guardsound = 6,1
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-55
pausetime = 10+(Var(55)=2)*20,12+(Var(55)=2)*20
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 4115
p2stateno = ifelse(enemy,var(0) = 1,4805,4025)

[State -2, 7]
type = Varadd
trigger1 = MoveGuarded = 1
var(5) = 80
ignorehitpause = 1
persistent = 0

[State 1150,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 2860

;Hit Land
[Statedef 2860]
type = A
movetype = I
physics = N
anim = 2860+Var(55)*10000

[State 1160,0]
type = VelAdd
trigger1 = Time >= 0
x = -.5
y = .6

[State 1160,0]
type = VelSet
trigger1 = Vel X <= 0
x = 0

[State 1160,1]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 2870

;---------------------------------------------------------------------------------------------------
;Land Full
[Statedef 2870]
type = S
movetype = I
physics = S
anim = 2870+Var(55)*10000
velset = 0, 0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 1170,0]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1170,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------------------------
;Hyper Moves
;---------------------------------------------------------------------------------------------------
;Haou Shikou Ken
[Statedef 3000]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3000+Var(55)*10000
poweradd = ifelse(fvar(30) > 0,0,-1000)
ctrl = 0
velset = 0
facep2 = 1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 2000, 7]
type = VarSet
trigger1 = time = 1&&(Var(55)!=2)
var(10) = 0

[State 800, 1]
type = HitBy
trigger1 = Time = 0&&Var(55)!=2
value = SCA, NT, HT
time = 31

[State 3000, posset1] 
type = posadd 
trigger1 = animelem = 3
x = -31

[State 3000, SparkSound]
type = PlaySnd
trigger1 = time = 1;&&(Var(55)!=2)
value = F9000,0

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3+(Var(55)>=1)*3,3+(Var(55)>=1)*7

[State 2420,5]
type = SuperPause
trigger1 = Time = 1;&&(Var(55)!=2)
time = 30
anim = -1
p2defmul = 1
movetime = 30
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 1;&&(Var(55)!=2)
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3500, 13]
type = AssertSpecial
trigger1 =(Var(55)!=2)&&Time = [1,30]
flag = Nofg
flag1 = noshadow
ignorehitpause = 1

[State 3005,Explod1]
type = Explod
trigger1 = Time = 3&&Var(55)=2
anim = f7010
scale = .5,.5
id   = 200
pos = -45,-54
postype = p1
supermove = 1
supermovetime = 9999
sprpriority = 5
bindtime = 1
ontop = 1
ownpal = 1

[State 3005,Explod2]
type = Explod
trigger1 = Time = 3&&Var(55)=2
anim = f7000
scale = .5,.5
id   = 200
pos = -45,-54
postype = p1
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ontop = 0
ownpal = 1
unhittable = 1

[State 3100,Explod1]
type = Explod
trigger1 = time = 3&&Var(55)=1
anim = f7010
scale = .5,.5
id   = 200
pos = 9,-88
postype = p1
supermove = 1
supermovetime = 9999
sprpriority = 5
bindtime = 1
ontop = 1
ownpal = 1

[State 3100,Explod2]
type = Explod
trigger1 = time = 3&&Var(55)=1
anim = f7000
scale = .5,.5
id   = 200
pos = 9,-88
postype = p1
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ontop = 0
ownpal = 1

[State 3005, 4]
type = ChangeState
triggerall =!var(58)
trigger1 = AnimTime = 0
trigger2 = time > 32-(Var(55)=2)*16
trigger2 = command != "hold_x"
value = 3001

[State 3005, 4]
type = ChangeState
triggerall = roundstate = 2&&sysfvar(11) = 0
triggerall = var(58)>=1
trigger1 = AnimTime = 0
trigger2 = random < 100+var(58)*20&&enemy,Vel Y >= 0
trigger2 = time > 32-(Var(55)=2)*16
value = 3001

;-----------------------------------------------------------------------------------------------
[Statedef 3001]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3001+Var(55)*10000

[State 3001, posset2] 
type = posadd 
trigger1 = animelem = 3
x = 31

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1&&Var(55)>=1
value = 4+(Var(55)=2),3+(Var(55)=2)*11

[State 3001, snd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 7,3

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 4,1
movetype = I

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 4
id = 2888
sprpriority = 10
postype = P1
pos = 30,-10
stateno = 2888
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
ignorehitpause = 1
persistent = 1

[State 3001, 1]
type = Projectile
trigger1 = AnimElem = 4
projpriority = 9
projanim = 2889
projID = 3000
velocity = 18,0
offset = 30,-10
attr = S, NP
damage = ifelse(Var(55)=2,220,200),10
getpower  = 0
givepower = 20,20
animtype = up
guardflag = M
pausetime = 3,12
priority = 20, Hit
projpriority = 20
sparkno = 2
guard.sparkno = 42
sparkxy = 0,-60
hitsound   = 5,4
guardsound = 6,2
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4835,4105)

[State 3001, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------------------
;Haou Shikou Ken 2
[Statedef 3005]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3000+Var(55)*10000
poweradd = ifelse(fvar(30) > 0,0,-1000)
ctrl = 0
velset = 0
facep2 = 1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 2000, 7]
type = VarSet
trigger1 = time = 1&&(Var(55)!=2)
var(10) = 0

[State 800, 1]
type = HitBy
trigger1 = Time = 0&&Var(55)!=2
value = SCA, NT, HT
time = 31

[State 3000, posset1] 
type = posadd 
trigger1 = animelem = 3
x = -31

[State 3000, SparkSound]
type = PlaySnd
trigger1 = time = 1;&&(Var(55)!=2)
value = F9000,0

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3+(Var(55)>=1)*3,3+(Var(55)>=1)*7

[State 2420,5]
type = SuperPause
trigger1 = Time = 1;&&(Var(55)!=2)
time = 30
anim = -1
p2defmul = 1
movetime = 30
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 3;&&Var(55)=2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3005,Explod1]
type = Explod
trigger1 = Time = 3&&Var(55)=2
anim = f7010
scale = .5,.5
id   = 200
pos = -45,-54
postype = p1
supermove = 1
supermovetime = 9999
sprpriority = 5
bindtime = 1
ontop = 1
ownpal = 1

[State 3005,Explod2]
type = Explod
trigger1 = Time = 3&&Var(55)=2
anim = f7000
scale = .5,.5
id   = 200
pos = -45,-54
postype = p1
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ontop = 0
ownpal = 1
unhittable = 1

[State 3100,Explod1]
type = Explod
trigger1 = time = 3&&Var(55)=1
anim = f7010
scale = .5,.5
id   = 200
pos = 9,-88
postype = p1
supermove = 1
supermovetime = 9999
sprpriority = 5
bindtime = 1
ontop = 1
ownpal = 1

[State 3100,Explod2]
type = Explod
trigger1 = time = 3&&Var(55)=1
anim = f7000
scale = .5,.5
id   = 200
pos = 9,-88
postype = p1
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ontop = 0
ownpal = 1

[State 3005, 4]
type = ChangeState
triggerall =!var(58)
trigger1 = AnimTime = 0
trigger2 = time > 32-(Var(55)=2)*16
trigger2 = command != "hold_y"
value = 3006

[State 3005, 4]
type = ChangeState
triggerall = roundstate = 2&&sysfvar(11) = 0
triggerall = var(58)>=1
trigger1 = AnimTime = 0
trigger2 = random < 100+var(58)*20&&enemy,Vel Y >= 0
trigger2 = time > 32-(Var(55)=2)*16
value = 3006

;-----------------------------------------------------------------------------------------------------
[Statedef 3006]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3001+Var(55)*10000

[State 3001, posset2] 
type = posadd 
trigger1 = animelem = 3
x = 31

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1&&Var(55)>=1
value = 4+(Var(55)=2),3+(Var(55)=2)*11

[State 3006, snd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 7,3

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 4,1
movetype = I

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 4
id = 2888
sprpriority = 10
postype = P1
pos = 30,-10
stateno = 2888
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
ignorehitpause = 1
persistent = 1

[State 3006, 1]
type = Projectile
trigger1 = AnimElem = 4
projpriority = 9
projanim = 2889
projID = 3000
velocity = 4.5
offset = 30,-10
attr = S, NP
damage = ifelse(Var(55)=2,220,200),10
getpower  = 0
givepower = 20,20
animtype = up
guardflag = M
pausetime = 3,12
priority = 20, Hit
projpriority = 20
sparkno = 2
guard.sparkno = 42
sparkxy = 0,-60
hitsound   = 5,4
guardsound = 6,2
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4835,4105)

[State 3006, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------

;-------------------------------------------------------------------------------------
;Shin Kishin Geki
;-------------------------------------------------------------------------------------
[Statedef 3200]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3200+Var(55)*10000
velset = 0
poweradd = ifelse(fvar(30) > 0,0,-1000)
ctrl = 0
velset = 0
facep2 = 1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 240, LQ[W]
type = VarAdd
triggerall = var(10) != 0 && var(30) = 0 && time = 0&&Var(55)=2
trigger1 = var(31) = 1 || var(32) = 1
var(10) = -200
persistent = 0
ignorehitpause = 1

[State 240, L_]
type = VarAdd
triggerall = var(30) = 0 && var(10) != 0 && time = 0&&Var(55)=2
trigger1 = var(31) = 1 || var(32) = 1
var(36) = 9

[State 2000, 7]
type = VarSet
trigger1 = time = 1&&Var(55)!=2
var(10) = 0

[State 800, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, HT
time = 31

[State 2041, 2] 
type = Afterimage
trigger1 = AnimElem = 4
time = 2
length = 8
FrameGap = 2
PalBright = 0,0,0
palcolor = 1
PalContrast = 170,170,255
PalAdd = 0,0,0
PalMul = 1,1,1
trans = none

[State 3200, SparkSound]
type = PlaySnd
trigger1 = time = 0&&Var(55)!=2
value = F9000,0

[State 3200, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3+(Var(55)=2)*2,18+(Var(55)=2)

[State 3200, Voice]
type = PlaySnd
trigger1 = AnimElem = 21
value = 3+(Var(55)=2)*2,19-(Var(55)=2)*5

[State 3200, Eff]
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 14
trigger3 = AnimElem = 21
value = 3,20

[State 2420,5]
type = SuperPause
trigger1 = Time = 0&&Var(55)!=2
time = 30
anim = -1
p2defmul = 1
movetime = 30
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1,=2&&Var(55)!=2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3000,Explod1]
type = Explod
trigger1 = animelem = 1,=2&&Var(55)!=2
anim = f7010
scale = .5,.5
id   = 200
pos = 28,-56
postype = p1
supermove = 1
supermovetime = 9999
sprpriority = 5
bindtime = 1
ontop = 1
ownpal = 1

[State 3000,Explod2]
type = Explod
trigger1 = animelem = 1,=2&&Var(55)!=2
anim = f7000
scale = .5,.5
id   = 200
pos = 28,-56
postype = p1
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ontop = 0
ownpal = 1
unhittable = 1

[State 3200, posset1] 
type = posadd 
trigger1 = animelem = 22
trigger2 = animelem = 23
trigger3 = animelem = 24
trigger4 = animelem = 25
trigger5 = animelem = 26
trigger6 = animelem = 27
trigger7 = animelem = 28
trigger8 = animelem = 29
trigger9 = animelem = 30
x = 8

[State 3200, posset2] 
type = posadd 
trigger1 = animelem = 31
x = 9

[State 3200, posset2] 
type = posadd 
trigger1 = animelem = 16
trigger2 = animelem = 17
trigger3 = animelem = 18
trigger4 = animelem = 19
trigger5 = animelem = 20
trigger6 = animelem = 21
x = 4

[State 3200, P1]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
hitflag = MA
animtype = hard
damage = ifelse(enemy,var(0) = 1,150,100),10
getpower  = 0
givepower = 20,20
guardflag = 
pausetime = 30,30
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-65
hitsound = S290,0
guardsound = 6,1
ground.type = high
ground.velocity = -0.1,-20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C && P2movetype != A,4277,4330)))
envshake.time = 18
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 2000, 15]
type = EnvColor
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2355, 10]
type = AssertSpecial
trigger1 = MoveHit = 1&&Var(55)!=2
flag = NoFG
persistent = 0
ignorehitpause = 1

[State 3200, 4]
type = ChangeState
trigger1 = AnimElem = 8
value = 3201

;---------------------------------------------------------------------------------------------
[Statedef 3201]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0
poweradd = 0
ctrl = 0
velset = 0

[State 3200, Voice]
type = PlaySnd
trigger1 = AnimElem = 21
value = 3+(Var(55)=2)*2,19-(Var(55)=2)*5

[State 3200, Eff]
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 14
trigger3 = AnimElem = 21
value = 3,20

[State 3200, posset1] 
type = posadd 
trigger1 = animelem = 22
trigger2 = animelem = 23
trigger3 = animelem = 24
trigger4 = animelem = 25
trigger5 = animelem = 26
trigger6 = animelem = 27
trigger7 = animelem = 28
trigger8 = animelem = 29
trigger9 = animelem = 30
x = 8

[State 3200, posset2] 
type = posadd 
trigger1 = animelem = 31
x = 9

[State 3200, posset2] 
type = posadd 
trigger1 = animelem = 16
trigger2 = animelem = 17
trigger3 = animelem = 18
trigger4 = animelem = 19
trigger5 = animelem = 20
trigger6 = animelem = 21
x = 4

[State 3200, P2]
type = HitDef
trigger1 = AnimElem = 14
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,150,100),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 30,30
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-65
hitsound = S290,0
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C && P2movetype != A,4277,4330)))
envshake.time = 18
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 2000, 15]
type = EnvColor
trigger1 = MoveHit = 1
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2355, 10]
type = AssertSpecial
trigger1 = MoveHit = 1
flag = NoFG
persistent = 0
ignorehitpause = 1

[State 3200, 4]
type = ChangeState
trigger1 = AnimElem = 15
value = 3202

;---------------------------------------------------------------------------------------
[Statedef 3202]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0
poweradd = 0
ctrl = 0
velset = 0

[State 3200, Voice]
type = PlaySnd
trigger1 = AnimElem = 21
value = 3+(Var(55)=2)*2,19-(Var(55)=2)*5

[State 3200, Eff]
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 14
trigger3 = AnimElem = 21
value = 3,20

[State 3200, posset1] 
type = posadd 
trigger1 = animelem = 22
trigger2 = animelem = 23
trigger3 = animelem = 24
trigger4 = animelem = 25
trigger5 = animelem = 26
trigger6 = animelem = 27
trigger7 = animelem = 28
trigger8 = animelem = 29
trigger9 = animelem = 30
x = 8

[State 3200, posset2] 
type = posadd 
trigger1 = animelem = 31
x = 9

[State 3200, posset2] 
type = posadd 
trigger1 = animelem = 16
trigger2 = animelem = 17
trigger3 = animelem = 18
trigger4 = animelem = 19
trigger5 = animelem = 20
trigger6 = animelem = 21
x = 4

[State 5040, 4]
type = StateTypeSet
trigger1 =var(55) = 1
trigger1 = AnimElem = 26
trigger2 =var(55)!= 1
trigger2 = AnimElem = 22
movetype = I

[State 1000, 5]
type = HitDef
trigger1 =var(55) = 1
trigger1 = AnimElem = 21
attr = S, SA
animtype = Hard
damage = ifelse(enemy,var(0) = 1,30,20),10
getpower = ifelse(Var(10) != 0,0,65),ifelse(Var(10) != 0,0,65)
givepower = 20,20
hitflag = MAF
guardflag = M
sparkno = 2
guard.sparkno = 42
sparkxy = -15,ifelse(enemy,pos Y = 0,-75,-85)
pausetime = 11,12
hitsound = 5,4
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 30
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C && P2movetype != A,4277,4330)))

[State 3200, P3]
type = HitDef
trigger1 =var(55) = 1
trigger1 = AnimElem = 25
trigger2 =var(55)!= 1
trigger2 = AnimElem = 21
attr = S, HA
hitflag = MAF
animtype = Diagup
damage = ifelse(enemy,var(0) = 1,150-var(55)*30,100-var(55)*30),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 30,30
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-65
hitsound = 5,4
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4870,4170)
envshake.time = 18
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 1300, 5]
type = PosAdd
trigger1 =var(55) = 1
trigger1 = AnimElem = 25
x = 7
y = -5

[State 1001, 3]
type = VelSet
trigger1 =var(55) = 1
trigger1 = AnimElem = 25
x = 1.5
y = -4

[State 1001, 4]
type = VelAdd
trigger1 =var(55) = 1
trigger1 = AnimElemtime(27)> 0
y = .45

[State 2000, 15]
type = EnvColor
trigger1 = MoveHit = 1
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2355, 10]
type = AssertSpecial
trigger1 = MoveHit = 1
flag = NoFG
persistent = 0
ignorehitpause = 1

[State 1001, 21]
type = ChangeState
triggerall =var(55)= 1
trigger1 = Vel Y > 0 && Pos Y >= -15
value = 2902

[State 3200, 4]
type = ChangeState
trigger1 =var(55)!= 1
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
;Ryuuko Ranbu龙虎乱舞(WEAK)
;--------------------------------------------------------------------------------------
[Statedef 3100]
type = S
movetype = A
physics = S
anim = 3100+Var(55)*10000
poweradd = ifelse(fvar(30) > 0,0,-1000)
ctrl = 0
velset = 0
facep2 = 1

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 2000, 7]
type = VarSet
trigger1 = time = 1
var(10) = 0

[State 800, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, HT
time = 31

[State 3100, SparkSound]
type = PlaySnd
trigger1 = time = 1
value = F9000,0

[State 3120, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 3,14

[State 3100, Voice]
type = PlaySnd
trigger1 = time = 3
value = 3+(Var(55)=1),13-(Var(55)=1)*7

[State 2420,5]
type = SuperPause
trigger1 = Time = 1
time = 30
anim = -1
p2defmul = 1
movetime = 30
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3100,Explod1]
type = Explod
trigger1 = time = 3
anim = f7010
scale = .5,.5
id   = 200
pos = 9,-88
postype = p1
supermove = 1
supermovetime = 9999
sprpriority = 5
bindtime = 1
ontop = 1
ownpal = 1

[State 3100,Explod2]
type = Explod
trigger1 = time = 3
anim = f7000
scale = .5,.5
id   = 200
pos = 9,-88
postype = p1
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ontop = 0
ownpal = 1
unhittable = 1

[State 2041, 2] 
type = Afterimage
trigger1 = AnimElem = 4
time = 2
length = 8
FrameGap = 2
PalBright = 0,0,0
palcolor = 1
PalContrast = 170,170,255
PalAdd = 0,0,0
PalMul = 1,1,1
trans = none

[State 3100, 1]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A
physics = N

[State 3100, 1]
type = velset
trigger1 = AnimElem = 4
x = 10
y = -1

[State 3100, 1]
type = veladd
trigger1 = AnimElem = 4,> 0
y = .17

[State 3200, Hitdef]
type = HitDef
trigger1 = (prevstateno != [200,3999])&&(prevstateno != [12500,12501])
triggerall = p2stateno = 4101 || p2statetype != A || p2statetype = A && p2movetype != H
trigger1 = AnimElem = 4
attr = A, HA
hitflag = MAF
animtype = hard
damage = 0,0
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 1,1
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-84
hitsound = 5,1
guardsound = 6,1
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4605,4600)
p2facing = 1
p2getp1stateno = 1
kill = 0

[State 3200, Hitdef]
type = HitDef
trigger1 =(prevstateno = [200,3999])||prevstateno = [12500,12501]
trigger1 = AnimElem = 4
attr = A, HA
hitflag = MAF
animtype = hard
damage = 0,0
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 1,1
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-84
hitsound = 5,1
guardsound = 6,1
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4605,4600)
p2facing = 1
p2getp1stateno = 1
kill = 0

[State 2000, 15]
type = EnvColor
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1
persistent = 0

[State 2355, 10]
type = AssertSpecial
trigger1 = MoveHit = 1
flag = NoFG
ignorehitpause = 1
persistent = 0

[State 3500, 2]
type = ChangeState
trigger1 = MoveHit = 1
value = 3103

[State 3100, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = moveguarded
value = 3102

;--------------------------------------------------------------------------------------------------------
;Ryuuko Ranbu (STRONG)
[Statedef 3109]
type = S
movetype = A
physics = S
anim = 3109+Var(55)*10000
poweradd = ifelse(fvar(30) > 0,0,-1000)
ctrl = 0
velset = 0
facep2 = 1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 2000, 7]
type = VarSet
trigger1 = time = 1
var(10) = 0

[State 800, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, HT
time = 47

[State 3109, SparkSound]
type = PlaySnd
trigger1 = time = 1
value = F9000,0

[State 3109, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 3,14

[State 3109, Voice]
type = PlaySnd
trigger1 = time = 3
value = 3+(Var(55)=1),13-(Var(55)=1)*7

[State 2420,5]
type = SuperPause
trigger1 = Time = 1
time = 30
anim = -1
p2defmul = 1
movetime = 30
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 3
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3109,Explod1]
type = Explod
trigger1 = time = 3
anim = f7010
scale = .5,.5
id   = 200
pos = 9,-88
postype = p1
supermove = 1
supermovetime = 9999
sprpriority = 5
bindtime = 1
ontop = 1
ownpal = 1

[State 3109,Explod2]
type = Explod
trigger1 = time = 3
anim = f7000
scale = .5,.5
id   = 200
pos = 9,-88
postype = p1
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ontop = 0
ownpal = 1
unhittable = 1

[State 2041, 2] 
type = Afterimage
trigger1 = AnimElem = 4
time = 2
length = 8
FrameGap = 2
PalBright = 0,0,0
palcolor = 1
PalContrast = 170,170,255
PalAdd = 0,0,0
PalMul = 1,1,1
trans = none

[State 3109, 1]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A
physics = N

[State 3109, 1]
type = velset
trigger1 = AnimElem = 4
x = 10
y = -1.45

[State 3109, 1]
type = veladd
trigger1 = AnimElem = 4,> 0
y = .12

[State 3109, Hitdef]
type = HitDef
trigger1 = (prevstateno != [200,3999])&&(prevstateno != [12500,12501])
triggerall = p2stateno = 4101 || p2statetype != A || p2statetype = A && p2movetype != H
trigger1 = AnimElem = 1
attr = A, HA
hitflag = MAF
animtype = hard
damage = 0,0
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 1,1
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-84
hitsound = 5,1
guardsound = 6,1
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4605,4600)
p2facing = 1
p2getp1stateno = 1
kill = 0

[State 3109, Hitdef]
type = HitDef
trigger1 = (prevstateno = [200,3999])||(prevstateno = [12500,12501])
trigger1 = AnimElem = 1
attr = A, HA
hitflag = MAF
animtype = hard
damage = 0,0
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 1,1
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-84
hitsound = 5,1
guardsound = 6,1
ground.type = low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4605,4600)
p2facing = 1
p2getp1stateno = 1
kill = 0

[State 2000, 15]
type = EnvColor
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1
persistent = 0

[State 2355, 10]
type = AssertSpecial
trigger1 = MoveHit = 1
flag = NoFG
ignorehitpause = 1
persistent = 0

[State 3500, 2]
type = ChangeState
trigger1 = MoveHit = 1
value = 3103

[State 3109, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = moveguarded
value = 3102

;-----------------------------------------------------------------------------------------------------
;Ryuuko Ranbu (MISS)
[Statedef 3102]
type = S
movetype = I
physics = N
anim = 3102+Var(55)*10000

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3010, 1]
type = null;BGPalFX
trigger1 = PrevStateNo = 3500
trigger1 = 1
time = 2
invertall = 1
ignorehitpause = 1

[State 3102, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3102, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 3102, 1]
type = velset
trigger1 = Time = 0
y = 0

[State 3102, 1]
type = velmul
trigger1 = AnimElem = 3,< 10
x = .78

[State 3102, 1]
type = velset
trigger1 = AnimElem = 3,= 10
x = 0

[State 3102, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;Go for Broke
[Statedef 3103]
type = S
movetype = A
physics = N
velset = 0,0
anim = 3103+Var(55)*10000
ctrl = 0

[State 4000, 2]
type = targetstate
trigger1 = time = 0
value = 4330

[State 1000, 2]
type = Width
trigger1 = AnimElem = 1
value = 70,0

[State 1360, Bind1]
type = TargetBind
trigger1 = animelem = 1
pos = 70-Var(55)*10,0

[State 3103, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3103, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 3103, 1]
type = velset
trigger1 = Time = 0
y = 0

[State 3103, Lp]
type = HitDef
trigger1 = AnimElem = 3, =1
attr = S, HA
hitflag = MAF
animtype = Medium
damage = ifelse(enemy,var(0) = 1,20,20-Var(55)*5),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 25
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C && P2movetype != A,4277,4330)))
kill = 0

[State 3103, HP]
type = HitDef
trigger1 = AnimElem = 8, =1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,20,20-Var(55)*5),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,5
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 25
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C && P2movetype != A,4277,4330)))
kill = 0

[State 3103, HKc]
type = HitDef
trigger1 = AnimElem = 16, =1 
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,20,20-Var(55)*5),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 25
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C && P2movetype != A,4277,4330)))
kill = 0

[State 3103, Lp2]
type = HitDef
trigger1 = AnimElem = 21, =1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,20,20-Var(55)*5),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 25
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C && P2movetype != A,4277,4330)))
kill = 0

[State 3103, HP]
type = HitDef
trigger1 = AnimElem = 26, =1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,10,10-Var(55)*5),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 25
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C && P2movetype != A,4277,4330)))
kill = 0

[State 3103, lkc]
type = HitDef
trigger1 = AnimElem = 32, =1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,20,20-Var(55)*5),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 25
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C && P2movetype != A,4277,4330)))
kill = 0

[State 3103, HPc]
type = HitDef
trigger1 = AnimElem = 38, =1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,20,20-Var(55)*5),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 25
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C && P2movetype != A,4277,4330)))
kill = 0

[State 3103, cHP]
type = HitDef
trigger1 = AnimElem = 42, =1
attr = S, HA
hitflag = MAF
animtype = medium
damage = ifelse(enemy,var(0) = 1,20,20-Var(55)*5),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 11,12
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(Var(55) != 1,3106,ifelse(p2statetype = C,4480,4420))
snap = 60,0
kill = 0

[State 3103, HPc]
type = HitDef
trigger1 = AnimElem = 46, =1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,20,20-Var(55)*5),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 5,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 3106
snap = 65,0
kill = 0

[State 2210, 2]
type = PlaySnd
trigger1 = AnimElem = 3, =1
trigger2 = AnimElem = 8, =1
trigger3 = AnimElem = 16, =1 
trigger4 = AnimElem = 21, =1
trigger5 = AnimElem = 26, =1
trigger6 = AnimElem = 32, =1
trigger7 = AnimElem = 38, =1
trigger8 = AnimElem = 42, =1
trigger9 = AnimElem = 46, =1&&Var(55) = 1
value = F5,1+(Random < 500)*3
ignorehitpause = 1

[State 2000, 15]
type = EnvColor
trigger1 = AnimElem = 3, =1
trigger2 = AnimElem = 8, =1
trigger3 = AnimElem = 16, =1 
trigger4 = AnimElem = 21, =1
trigger5 = AnimElem = 26, =1
trigger6 = AnimElem = 32, =1
trigger7 = AnimElem = 38, =1
trigger8 = AnimElem = 42, =1
trigger9 = AnimElem = 46, =1&&Var(55) = 1
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 2355, 10]
type = AssertSpecial
trigger1 = AnimElem = 3, =1
trigger2 = AnimElem = 8, =1
trigger3 = AnimElem = 16, =1 
trigger4 = AnimElem = 21, =1
trigger5 = AnimElem = 26, =1
trigger6 = AnimElem = 32, =1
trigger7 = AnimElem = 38, =1
trigger8 = AnimElem = 42, =1
trigger9 = AnimElem = 46, =1&&Var(55) = 1
flag = NoFG
ignorehitpause = 1

[State 3103, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 3120+Var(55)*280

;----------------------------
;Hop back (in the air)
[Statedef 3120]
type = A
physics = N
anim = ifelse(Var(55) = 0,3125,3120)+Var(55)*10000

[State 2041, 2] 
type = Afterimage
trigger1 = AnimElem = 1
time = 2
length = 8
FrameGap = 2
PalBright = 0,0,0
palcolor = 1
PalContrast = 170,170,255
PalAdd = 0,0,0
PalMul = 1,1,1
trans = none

[State 2041, 2] 
type = Afterimage
trigger1 = AnimElem = 1
time = 2
length = 7
FrameGap = 3
PalBright = 0,0,0
palcolor = 1
PalContrast = 170,170,255
PalAdd = 0,0,0
PalMul = 1,1,1
trans = none

[State 2041, 2] 
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 3120, 1]
type = VelSet
trigger1 = Time = 0
x = -7
y = -4.2

[State 3120, 2]
type = PlaySnd
trigger1 = time = 1
value = 3,14

[State 3120, 3]
type = veladd
trigger1 = time = 10
x = .03

[State 3120, 3]
type = VelAdd
trigger1 = Time > 2
y = .79

[State 3120, 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -5
trigger1 = Var(55) = 0 && PrevStateNo = 3103
value = 3126

[State 3120, 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -5
trigger1 = Var(55) != 0 && PrevStateNo = 3103
value = 3121

[State 3120, 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -5
trigger1 = Var(55) = 0 && PrevStateNo = 3501
value = 3507

[State 3120, 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -5
trigger1 = Var(55) != 0 && PrevStateNo = 3501
value = 3502

;----------------------------------------------------------------------------------------------------
; Land and Shoot
[Statedef 3121]
type = S
physics = S
anim = 3121+Var(55)*10000
velset = 0,0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3121, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3121, 1]
type = velset
trigger1 = Time = 0
x = -18

[State 3121, 1]
type = velset
trigger1 = Time = 4
x = 0

[State 1660, 4]
type = VelMul
trigger1 = 1
x = .85

[State 3121, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,15

[State 3001, snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 7,3

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 3,1
movetype = I

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 3
id = 2888
sprpriority = 10
postype = P1
pos = 45,-10
stateno = 2888
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
ignorehitpause = 1
persistent = 1

[State 3121, 1]
type = Projectile
trigger1 = AnimElem = 3
projanim = 2889
projID = 3000
velocity = 7.5,0
offset = 45,-10
attr = S, HP
damage = ifelse(enemy,var(0) = 1,100,90),10
getpower  = 0
givepower = 20,20
animtype = up
givepower = 30,10
guardflag = M
pausetime = 0,12
priority = 20, Hit
sparkno = 2
guard.sparkno = 42
sparkxy = 10,-60
hitsound = 5,4
guardsound = 6,2
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4835,4105)

[State 3121, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;tBjbVf02
[Statedef 3126]
type = S
movetype = A
physics = S
anim = 3126+Var(55)*10000
velset = 0,0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3121, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3121, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,15
channel = 0

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
damage = ifelse(enemy,var(0) = 1,100,60)
getpower = 0,0
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 1,12
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-44
hitsound =5,4
guardsound = 6,0
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4815,4045)
p2stateno = ifelse(enemy,var(0) = 1,4930,4250)

[State 3121, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------------
;ij
[Statedef 3150]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 201, 2]
type = ChangeState
trigger1 = life = 0 
value = 4105+Var(55)*10000

[State pos]
type = posset
trigger1 = 1
y = 0

[State 2205]
type = ChangeAnim
trigger1 = time = 0
value = 5010-(GetHitVar(groundtype)=1)*10+Var(55)*30000
elem = 1

[State 2205]
type = ChangeAnim
trigger1 = time = 2
value = 5013-(GetHitVar(groundtype)=1)*10+Var(55)*30000
elem = 2

[State 2205]
type = ChangeAnim
trigger1 = time = 4
value = 5012-(GetHitVar(groundtype)=1)*10+Var(55)*30000
elem = 2

[State 2205]
type = ChangeAnim
trigger1 = time = 10
value = 5010-(GetHitVar(groundtype)=1)*10+Var(55)*30000
elem = 2

[State 2205]
type = ChangeAnim
trigger1 = time >= 14
value = 5010-(GetHitVar(groundtype)=1)*10+Var(55)*30000
elem = 1

[State 2205]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 3151

;-----------------------------------------------------------------------------------------
[Statedef 3151]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State pos]
type = posset
trigger1 = 1
y = 0

[State end]
type = SelfState
trigger1 = time = 25
value = 0

;--------------------------------------------------------------------------------------
;Ryuuko Ranbu (MAX)
[Statedef 3500]
type = S
movetype = A
physics = S
anim = 3100+Var(55)*10000
velset = 0
ctrl = 0
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
ctrl = 0
velset = 0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 2000, 7]
type = VarSet
trigger1 = time = 1
var(10) = 0

[State 800, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, HT
time = 40

[State 3500, ChimeSound]
type = PlaySnd
trigger1 = time = 1
value = F9000,1

[State 3500, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 3,14

[State 3500, Voice]
type = PlaySnd
trigger1 = time = 3
value = 3,13

[State 2420,5]
type = SuperPause
trigger1 = Time = 1
time = 30
anim = -1
p2defmul = 1
movetime = 30
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3500, 13]
type = AssertSpecial
trigger1 = Time = [1,30]
flag = Nofg
flag1 = noshadow
ignorehitpause = 1

[State 3500,Explod1]
type = Explod
trigger1 = time = 3
anim = f7110
scale = .5,.5
pos = 9,-88
postype = p1
supermove = 1
supermovetime = 9999
sprpriority = 5
bindtime = 1
ontop = 1
ownpal = 1

[State 3500,Explod2]
type = Explod
trigger1 = time = 3
anim = f7100
scale = .5,.5
pos = 9,-88
postype = p1
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ontop = 0
ownpal = 1
unhittable = 1

[State 3200, 4]
type = Explod
trigger1 = time = 3
anim = f996
scale = .5,.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time = 3
anim = f995
scale = .5,.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 2041, 2] 
type = Afterimage
trigger1 = AnimElem = 4
time = 2
length = 8
FrameGap = 2
PalBright = 0,0,0
palcolor = 1
PalContrast = 170,170,255
PalAdd = 0,0,0
PalMul = 1,1,1
trans = none

[State 3100, 1]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A
physics = N

[State 3100, 1]
type = velset
trigger1 = AnimElem = 4
x = 10
y = -1

[State 3100, 1]
type = veladd
trigger1 = AnimElem = 4,> 0
y = .17

[State 3200, Hitdef]
type = HitDef
trigger1 = (prevstateno != [200,3999])&&(prevstateno != [12500,12501])
trigger1 = p2statetype = S && p2movetype = H || p2statetype = S ||  p2statetype = A && !p2movetype = H || p2statetype = C || p2statetype = C && p2movetype = H 
trigger1 = AnimElem = 4
attr = A, HA
hitflag = MAF
animtype = hard
damage = 0,0
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 1,1
sparkno = 3
guard.sparkno = 42
sparkxy = 20,-77
hitsound = 5,1
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4605,4600)
p2getp1stateno = 1
p2facing = 1
kill = 0

[State 3200, Hitdef]
type = HitDef
trigger1 = (prevstateno = [200,3999])||(prevstateno = [12500,12501])
trigger1 = AnimElem = 4
attr = A, HA
hitflag = MAF
animtype = hard
damage = 0,0
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 1,1
sparkno = 3
guard.sparkno = 42
sparkxy = 20,-77
hitsound = 5,1
guardsound = 6,1
ground.type = high
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4605,4600)
p2getp1stateno = 1
p2facing = 1
kill = 0

[State 2000, 15]
type = EnvColor
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1
persistent = 0

[State 2355, 10]
type = AssertSpecial
trigger1 = MoveHit = 1
flag = NoFG
ignorehitpause = 1
persistent = 0

[State 3500, 2]
type = ChangeState
trigger1 = MoveHit = 1
value = 3501

[State 3500, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = moveguarded
value = 3102

;-------------------------------------------------------------------------------------
;Go for broke MAX 
[Statedef 3501]
type = S
movetype = A
physics = N
velset = 0,0
anim = 3501+Var(55)*10000
ctrl = 0

[State 4000, 2]
type = targetstate
trigger1 = time = 0
value = 4330

[State 1000, 2]
type = Width
trigger1 = AnimElem = 1
value = 70,0

[State 1360, Bind1]
type = TargetBind
trigger1 = animelem = 1
pos = 70,0

[State 3010, 1]
type = null;BGPalFX
trigger1 = 1
time = 2
invertall = 1
ignorehitpause = 1

[State 3501, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3501, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 3501, 1]
type = velset
trigger1 = Time = 0
y = 0

[State 3103, Lpc]
type = HitDef
trigger1 = AnimElem = 5,=1
attr = S, HA
hitflag = MAF
animtype = Medium
damage = ifelse(enemy,var(0) = 1,40,40),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))
kill = 0

[State 3103, LP]
type = HitDef
trigger1 = AnimElem = 7,=1
attr = S, HA
hitflag = MAF
animtype = Medium
damage = ifelse(enemy,var(0) = 1,20,20),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))
kill = 0

[State 3103, HP]
type = HitDef
trigger1 = AnimElem = 12,=1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,10,10),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))
kill = 0

[State 3103, HPc]
type = HitDef
trigger1 = AnimElem = 17,=1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,10,10),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))
kill = 0

[State 3103, fLk]
type = HitDef
trigger1 = AnimElem = 25,=1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,10,10),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))
kill = 0

[State 3103, Nijitawa]
type = HitDef
trigger1 = AnimElem = 37,=1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,10,10),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))
kill = 0

[State 3103, HPc]
type = HitDef
trigger1 = AnimElem = 40,=1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,10,10),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))
kill = 0

[State 3103, Lk]
type = HitDef
trigger1 = AnimElem = 46,=1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,10,10),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))
kill = 0

[State 3103, HKc]
type = HitDef
trigger1 = AnimElem = 56,=1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,10,10),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 2,2
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = C && enemy,var(0) = 1,4985,ifelse(enemy,var(0) = 1,4975,ifelse(p2statetype = C,4277,4330)))
kill = 0

[State 3103, HPex]
type = HitDef
trigger1 = AnimElem = 64,=1
attr = S, HA
hitflag = MAF
animtype = hard
damage = ifelse(enemy,var(0) = 1,10,10),10
getpower  = 0
givepower = 20,20
guardflag = M
pausetime = 11,12
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-64
hitsound = -1
guardsound = 6,1
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 3106
kill = 0

[State 2210, 2]
type = PlaySnd
trigger1 = MoveHit = 1
value = F5,1+(Random < 500)*3
ignorehitpause = 1

[State 2000, 15]
type = EnvColor
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 2355, 10]
type = AssertSpecial
trigger1 = MoveHit = 1
flag = NoFG
ignorehitpause = 1

[State 114, 10]
type = MoveHitReset
trigger1 = MoveHit = 1
ignorehitpause = 1

[State 3500, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 3120

;--------------------------------------------------------------------------------------------
; Land and Shoot MAX
[Statedef 3502]
type = S
physics = S
anim = 3502+Var(55)*10000
velset = 0,0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3500, 13]
type = AssertSpecial
trigger1 = 1
trigger1 = PrevStateNo = 94200
flag = Nofg
flag1 = noshadow
ignorehitpause = 1

[State 3200, 4]
type = Explod
trigger1 = Time = 4
anim = f993
scale = .5,.5
id = 993
postype = p1
pos= 10,0
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = Time = 4
anim = f994
scale = .5,.5
id = 994
postype = p1
pos= 10,0
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 2420,5]
type = SuperPause
trigger1 = Time = 4
time = 30
anim = -1
p2defmul = 1
movetime = 30
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 4
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3500,Explod1]
type = Explod
trigger1 = Time = 4
anim = f7010
scale = .5,.5
id   = 204
pos = 25,-52
postype = p1
supermove = 1
supermovetime = 9999
sprpriority = 5
bindtime = 1
ontop = 1
ownpal = 1

[State 3500,Explod2]
type = Explod
trigger1 = Time = 4
anim = f7000
scale = .5,.5
id   = 204
pos = 25,-52
postype = p1
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ontop = 0
ownpal = 1
unhittable = 1

[State 3502, Voice]
type = PlaySnd
trigger1 = Time = 4
value = F9000,0

[State 3121, 1]
type = velset
trigger1 = Time = 0
x = -18

[State 3121, 1]
type = velset
trigger1 = Time = 4
x = 0

[State 1660, 4]
type = VelMul
trigger1 = 1
x = .85

[State 3502, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3502, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,15

[State 3502, snd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 8
trigger3 = AnimElem = 14
value = 7,3

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 3, = 1
id = 2888
sprpriority = 10
postype = P1
pos = 45,-10
stateno = 2888
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
ignorehitpause = 1
persistent = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 8, = 1
id = 2888
sprpriority = 10
postype = P1
pos = 45,-10
stateno = 28888
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
ignorehitpause = 1
persistent = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 14, = 1
id = 2888
sprpriority = 10
postype = P1
pos = 45,-10
stateno = 28889
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
ignorehitpause = 1
persistent = 1

[State 321, 1]
type = PlaySnd
trigger1 = animelem = 8|animelem = 14
value = 390,1

[State 3502, Pj1]
type = Projectile
trigger1 = AnimElem = 3, = 1
projanim = 2889
projID = 3000
velocity = 10,0
offset = 45,-10
attr = S, HP
damage = ifelse(enemy,var(0) = 1,120,120),10
getpower  = 0
givepower = 20,20
animtype = hard
guardflag = M
pausetime = 0,12
priority = 20, Hit
sparkno = 2
guard.sparkno = 42
sparkxy = 10,-60
hitsound = 5,4
guardsound = -1
ground.type = high
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 3150

[State 3502, Pj2]
type = Projectile
trigger1 = AnimElem = 8,= 1
projanim = 2889
projID = 3001
velocity = 10,0
offset = 45,-10
attr = S, HP
damage = ifelse(enemy,var(0) = 1,60,60),10
getpower  = 0
givepower = 20,20
animtype = hard
guardflag = M
pausetime = 0,12
priority = 20, Hit
sparkno = 2
guard.sparkno = 42
sparkxy = 10,-60
hitsound = 5,4
guardsound = -1
ground.type = high
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 3150
kill = 0

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 14,2
movetype = I

[State 3502, PJ3]
type = Projectile
trigger1 = AnimElem = 14, = 1
projanim = 2889
projID = 3002
velocity = 10,0
offset = 45,-10
attr = S, HP
damage = ifelse(enemy,var(0) = 1,30,30),10
getpower  = 0
givepower = 20,20
animtype = diagup
guardflag = M
pausetime = 0,12
priority = 20, Hit
projpriority = 2
sparkno = 2
guard.sparkno = 42
sparkxy = 10,-60
hitsound = 5,4
guardsound = -1
ground.type = high
ground.slidetime = 30
ground.hittime = 30
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4870,4170)

[State 3502, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------
;MAXtBjbVf02
[Statedef 3507]
type = S
movetype = A
physics = S
anim = 3507+Var(55)*10000
velset = 0,0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3502, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3200, 4]
type = Explod
trigger1 = animelem = 5
anim = f993
scale = .5,.5
id = 993
postype = p1
pos= 10,0
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = animelem = 5
anim = f994
scale = .5,.5
id = 994
postype = p1
pos= 10,0
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 2420,5]
type = SuperPause
trigger1 = animelem = 5
time = 30
anim = -1
p2defmul = 1
movetime = 30
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 5
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3500,Explod1]
type = Explod
trigger1 = animelem = 5
anim = f7010
scale = .5,.5
id   = 204
pos = 25,-52
postype = p1
supermove = 1
supermovetime = 9999
sprpriority = 5
bindtime = 1
ontop = 1
ownpal = 1

[State 3500,Explod2]
type = Explod
trigger1 = animelem = 5
anim = f7000
scale = .5,.5
id   = 204
pos = 25,-52
postype = p1
sprpriority = -5
supermove = 1
supermovetime = 9999
bindtime = 1
ontop = 0
ownpal = 1
unhittable = 1

[State 3502, Voice]
type = PlaySnd
trigger1 = AnimElem = 5
value = F9000,0

[State 3502, Voice]
type = PlaySnd
trigger1 = AnimElem = 9
value = 3,15

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 14
movetype = I

[State 280, 5]
type = HitDef
trigger1 = AnimElem = 13
attr = S, HA
damage = ifelse(enemy,var(0) = 1,250,220)
getpower = 0,0
givepower = 20,20
hitflag = MAF
guardflag = M
animtype = Hard
ground.animtype = low
pausetime = 40,40
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-44
hitsound = 5,4
guardsound = 6,1
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4815,4045)
envshake.time = 18
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State 3502, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------------------
; HITG_SHAKE BY Ryuuko Ranbu
[Statedef 3104]
type    = S
movetype= H
physics = N
velset = 0,0

[State 3104, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000

[State 3104, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000

[State 3104, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)+Var(55)*30000))
value = 5047 + GetHitVar(animtype) +Var(55)*30000

[State 3104, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 3104, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 3105

[State 3104, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000+Var(55)*30000
trigger2 = anim = 5010+Var(55)*30000
persistent = 0
time = 6
waveform = square

[State 3104, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001+Var(55)*30000
trigger2 = anim = 5011+Var(55)*30000
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 3104, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012+Var(55)*30000
trigger2 = anim = 5002+Var(55)*30000
trigger3 = anim = 5030+Var(55)*30000
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;--------------------------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 3105]
type    = S
movetype= H
physics = S

[State 3105, 1]
type = Hitfallset
trigger1 = Time = 0
value = 0

[State 3105, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 3105, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = SelfAnimExist(5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10+Var(55)*30000)
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10+Var(55)*30000

[State 3105, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 3105, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 3105, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 3105, 6]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------------------
; HITG_SHAKE DIZZY
[Statedef 3106]
type    = S
movetype= H
physics = N
velset = 0,0

[State 2205]
type = ChangeAnim
trigger1 = time = 0
value = 5010-(GetHitVar(groundtype)=1)*10+Var(55)*30000
elem = 1

[State 2205]
type = ChangeAnim
trigger1 = time = 2
value = 5013-(GetHitVar(groundtype)=1)*10+Var(55)*30000
elem = 2

[State 2205]
type = ChangeAnim
trigger1 = time = 4
value = 5012-(GetHitVar(groundtype)=1)*10+Var(55)*30000
elem = 2

[State 2205]
type = ChangeAnim
trigger1 = time = 10
value = 5010-(GetHitVar(groundtype)=1)*10+Var(55)*30000
elem = 2

[State 2205]
type = ChangeAnim
trigger1 = time >= 14
value = 5010-(GetHitVar(groundtype)=1)*10+Var(55)*30000
elem = 1

[State 3106, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 3107

;-----------------------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 3107]
type    = S
movetype= H
physics = S

[State 3107, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 3107, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10+Var(55)*30000

[State 3107, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 3107, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 3107, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 3107, 6]
type = ChangeState
trigger1 = HitOver
value = 3108
ctrl = 0

;---------------------------------------------------------------------------
; Dizzy
[Statedef 3108]
type    = S
movetype= H
physics = N
velset = 0,0

[State 3108, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 5300+Var(55)*30000

[State 3108, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = selfstate
trigger1 = Time >= 180
value = 5100
ctrl = 0

[State 3108, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000+Var(55)*30000
trigger2 = anim = 5010+Var(55)*30000
persistent = 0
time = 6
waveform = square

[State 3108, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001+Var(55)*30000
trigger2 = anim = 5011+Var(55)*30000
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 3108, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012+Var(55)*30000
trigger2 = anim = 5002+Var(55)*30000
trigger3 = anim = 5030+Var(55)*30000
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------------------
[Statedef 3700]
type = S
movetype = A
physics = S
anim = 3700
poweradd = -2000
ctrl = 0
velset = 0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 800, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, HT
time = 35

[State 3700,Turn]
type = Turn
trigger1 = time = 0 && P2Dist X < 0

[State 1100, 2]
type = ReversalDef
trigger1 = p2Movetype != H
trigger1 = AnimElem = 5
reversal.attr = ASC, NA,SA, HA
numhits = 0
pausetime = 12,12
sparkno = 42
sparkxy = -15,0
hitsound = 6,1
p1stateno = 3710

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 1100, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------------
[Statedef 3710]
type = S
movetype = A
physics = S
poweradd = 0
ctrl = 0
velset = 0
;--------------------------------------

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 1
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;---------------------------------------------------------
[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 1
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;---------------------------------------------------------------

[State 801, 2]
type = TargetBind
trigger1 = 1
pos = 36,0

[state a]
type = velset
trigger1 = pos x < -30
trigger1 = facing = 1
x = 7

[state a]
type = velset
trigger1 = pos x > -16
trigger1 = facing = 1
x = -7

[state a]
type = velset
trigger1 = pos x >= -30 && pos x <= -16
trigger1 = facing = 1
x = 0

[state a]
type = velset
trigger1 = pos x > 30
trigger1 = facing = -1
x = 7

[state a]
type = velset
trigger1 = pos x < 16
trigger1 = facing = -1
x = -7

[state a]
type = velset
trigger1 = pos x <= 30 && pos x >= 16
trigger1 = facing = -1
x = 0

[State 1105, 3]
type = Changeanim
trigger1 = time = 0
value = 3710

[State 2200, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 2210, 19]
type = targetstate
trigger1 = time = 0
value = 3720

[State 1000, 2]
type = Width
trigger1 = AnimElem = 1
value = 50,0

[State 1360, Bind1]
type = TargetBind
trigger1 = animelem = 1
pos = 50,0

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 3
anim = f7300
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 20,-89
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 3
anim = f7310
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 20,-89
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 2300, 9]
type = superPause
trigger1 = Time = 1
time = 30
movetime = 30
anim = -1
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3700,Turn]
type = Turn
trigger1 = time = 0 && P2Dist X < 0

[State 1100, 1]
type = PlaySnd
trigger1 = Time = 1
value = 3,4

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3,23

[State 1100, 1]
type = PlaySnd
trigger1 = Time = 1
value = F9000,2

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 7,>=0
trigger1 = movehit = 1
value = 3,11
persistent = 0
ignorehitpause = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 3200, P1]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
hitflag = MA
animtype = hard
damage = 420,10
getpower  = 0
givepower = 20,20
guardflag = 
pausetime = 40,40
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-60
hitsound = 0,15
guardsound = 6,1
ground.type = high
ground.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 3730
envshake.time = 20
envshake.freq = 120
envshake.ampl = 4
envshake.phase = 120

[State a]
type = helper
trigger1 = AnimElem = 7
name = "shadow"
helpertype = normal
ID = 3715
pos = 20,6
postype = p1
stateno = 3715
keyctrl = 0
ownpal = 1

[State 1100, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 3715]
type = S
physics = N
ctrl = 0
anim = 3715
velset = 0,0
sprpriority = 9

[State 1102,asp ]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 2050,Trans]
type = Trans
trigger1 = 1
trans = add1
alpha = 35,255

[State a]
type = AfterImage
trigger1 = Time = 0
length = 8
PalBright = 150,0,0
PalContrast =105,105,105
PalAdd = 0,0,0
palmul = 0.9,0.9,0.9
TimeGap  = 2
FrameGap = 1
Trans = Add
time = 9999
Sprpriority = 9999

[State a]
type = afterimagetime
trigger1 = numhelper(3715) = 0
ignorehitpause = 1
time = 0

[State a]
type = destroyself
trigger1 = animtime = 0

;--------------------------------------------------------------------------------
[Statedef 3720]
type    = S
movetype= H
physics = S
Sprpriority = 0
ctrl = 0

[State 1452, 1]
type = PosSet
trigger1 = Time > 0
y = 0

[State 9007, 2]
type = ChangeAnim
trigger1 = selfanimexist(4340+Var(55)*30000)
value = 4340+Var(55)*30000

[State 9007, 2]
type = ChangeAnim
trigger1 = !selfanimexist(4340+Var(55)*30000)
value = 5010+Var(55)*30000

[State 8140, 4]
type = SelfState
trigger1 = time >= 200
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------------
[Statedef 3730]
type = S
movetype = H
physics = N
velset = 0,0

[State 1500, 2]
type = Posset
trigger1 = Time = 0 
y = 0

[State 0, 1]
type = palfx
trigger1 = 1
ignorehitpause=1
time = 0

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(5951+Var(55)*30000 )
Trigger1 = Time = 0
value = 5951+Var(55)*30000 

[State 800, 1]
type = ChangeState
trigger1 = animtime = 0
value = 7312