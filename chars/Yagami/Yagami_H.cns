;-------------------------------[Orochi]--------------------------------
[Statedef 2900]
type = S
movetype = A
physics = N
anim = 2900
ctrl = 0
velset = 0,0
sprpriority = 0

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
;============================================================
[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

;============================================================

[State 2200, 8]
type = SuperPause
trigger1 = Time = 0
time = 100
movetime = 100
poweradd = ifelse(fvar(30) > 0,0,-1000)
anim = -1
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 0
anim = f7300
ID = 4010
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 5,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 0
anim = f7310
ID = 4011
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 5,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 0
value = f9000,2

[State 2200, 2 Voice]
type = PlaySnd
trigger1 = time = 5
trigger2 = time = 55
value = 2900,0
channel = 0

[State 1000, Explod]
type = Explod
trigger1 = time = 5
trigger2 = time = 55
anim = 901
pos = -8,0
postype = p1
bindtime = -1
sprpriority = 5
removeongethit = 1
pausemovetime = 999999
supermovetime = 999999

[State 1000, Explod]
type = Explod
trigger1 = time = 5
trigger2 = time = 55
anim = 902
pos = -8,0
postype = p1
bindtime = -1
sprpriority = 5
removeongethit = 1
pausemovetime = 999999
supermovetime = 999999

[state helper]
type = Helper
trigger1 = time = 5
trigger2 = time = 55
id = 3405
name = "bg"
pos = 0,0
postype = p1
stateno = 3406
helpertype = normal
supermovetime = 999999
ownpal = 1

[State a]
type = helper
trigger1 = animelemTime(2) = 1
id = 2920
persistent = 0
name = "hoeru"
pos = 0,0
postype = P1
stateno = 2920
helpertype = normal
keyctrl = 0

[State 2310, 18]
type = Explod
trigger1 = animelemTime(2) = 1
anim = 2930
postype = p1
pos = 0,0
sprpriority = 3
supermove = 1
bindtime = -1
ownpal = 1

[State 2000, 8]
type = VarSet
trigger1 = AnimElem = 3
var(55) = 1

[State a]
type = RemapPal
trigger1 = anim = 2900
trigger1 = palno = 1
trigger1 = AnimElem = 3
source = 1,1
dest = 1,7

[State a]
type = RemapPal
trigger1 = anim = 2900
trigger1 = palno = 2
trigger1 = AnimElem = 3
source = 1,1
dest = 1,8

[State a]
type = RemapPal
trigger1 = anim = 2900
trigger1 = palno = 3
trigger1 = AnimElem = 3
source = 1,1
dest = 1,9

[State a]
type = RemapPal
trigger1 = anim = 2900
trigger1 = palno = 4
trigger1 = AnimElem = 3
source = 1,1
dest = 1,10

[State a]
type = RemapPal
trigger1 = anim = 2900
trigger1 = palno = 5
trigger1 = AnimElem = 3
source = 1,1
dest = 1,11

[State a]
type = RemapPal
trigger1 = anim = 2900
trigger1 = palno = 6
trigger1 = AnimElem = 3
source = 1,1
dest = 1,12

[State 2200, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 2200, 2 Voice]
type = PlaySnd
trigger1 = animelemTime(2) = 1
value = 9,18
channel = 0

[State 2200, 2 Voice]
type = PlaySnd
trigger1 = animelemTime(2) = 1
value = 18,6
volume = 0

[State 183, 3]
type = EnvShake
trigger1 = AnimElem = 2
ignorehitpause = 1
freq = 170
ampl = 7
phase = 170
time = 25

[State 2210, 19]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------[Orochi]--------------------------------
[Statedef 2901]
type = S
movetype = A
physics = N
anim = 2901
poweradd = 0
ctrl = 0
velset = 0,0
sprpriority = 0
poweradd = ifelse(fvar(30) > 0,0,-1000)

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 10003, helper]
type = helper
trigger1 = time = 0
helpertype = normal
stateno = 2902
ID = 2902
name = "vision"
postype = p1
supermovetime = 35
ownpal = 1

[state helper]
type = Helper
trigger1 = time = 0
id = 3405
name = "bg"
pos = 0,0
postype = p1
stateno = 3406
helpertype = normal
supermovetime = 999999
ownpal = 1

[State 2200, 2 Voice]
type = PlaySnd
trigger1 = AnimElem = 6
value = 2900,0
channel = 0


;============================================================
[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

;============================================================
[State 2200, 8]
type = SuperPause
trigger1 = Time = 0
time = 36
movetime = 30
anim = -1
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 36
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 0
anim = f7300
ID = 4010
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 0,-65
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 0
anim = f7310
ID = 4011
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 0,-65
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 0
value = f9000,2

[State 2200, 2 Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1800,0

[State 2000, 8]
type = VarSet
trigger1 = AnimElem = 6
var(55) = 0

[State a]
type = RemapPal
trigger1 = anim = 2901
trigger1 = palno = 7
trigger1 = AnimElem = 6
source = 1,1
dest = 1,1

[State a]
type = RemapPal
trigger1 = anim = 2901
trigger1 = palno = 8
trigger1 = AnimElem = 6
source = 1,1
dest = 1,2

[State a]
type = RemapPal
trigger1 = anim = 2901
trigger1 = palno = 9
trigger1 = AnimElem = 6
source = 1,1
dest = 1,3

[State a]
type = RemapPal
trigger1 = anim = 2901
trigger1 = palno = 10
trigger1 = AnimElem = 6
source = 1,1
dest = 1,4

[State a]
type = RemapPal
trigger1 = anim = 2901
trigger1 = palno = 11
trigger1 = AnimElem = 6
source = 1,1
dest = 1,5

[State a]
type = RemapPal
trigger1 = anim = 2901
trigger1 = palno = 12
trigger1 = AnimElem = 6
source = 1,1
dest = 1,6

[State 2210, 19]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 2902]
physics = N
anim = 2903

[State 10003, explod]
type = explod
trigger1 = time = 0
anim = 2902
ID = 2902
postype = p1
pos = 0,0
under = 1
bindtime = -1
removetime = 44
sprpriority = 2
pausemovetime = 9999999
supermovetime = 9999999

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = 0
ID = 2902
scale = .7,.7

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = [0,4]
ID = 2902
scale = 1,1

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = [5,8]
ID = 2902
scale = 1.1,1.1

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = [9,12]
ID = 2902
scale = 1.2,1.2

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = [13,16]
ID = 2902
scale = 1.3,1.3

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = [17,20]
ID = 2902
scale = 1.4,1.4

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = [21,24]
ID = 2902
scale = 1.5,1.5

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = [25,30]
ID = 2902
scale = 1.4,1.4

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = [31,34]
ID = 2902
scale = 1.3,1.3

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = [35,38]
ID = 2902
scale = 1.2,1.2

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = [39,42]
ID = 2902
scale = 1.1,1.1

[State 10003, modifyexplod]
type = modifyexplod
trigger1 = time = [43,44]
ID = 2902
scale = 1,1

[State 10003, safety]
type = removeexplod
trigger1 = time >= 44
trigger2 = parent,movetype = H
ID = 2902

[State 10003, end]
type = destroyself
trigger1 = animtime = 0
;----------------------------------------------------------------------
;超必杀技
;----------------------------------------------------------------------
[Statedef 2000]
type     = S
movetype = A
physics  = S
juggle   = 8
velset   = 0,0
anim     = 2000+(var(55)*1)
ctrl     = 0
sprpriority = 2

[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State a]
type = palfx
triggerall = Time = 0
trigger1 = prevstateno = [1000,1999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 1500,]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 40

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 35
time = 35
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7000
supermovetime = 30
pos = 5,-110

[State 00];
type = PlaySnd
triggerall = anim = 2000
trigger1 = AnimElem = 3
value = s7,14
channel = 4

[State 00];
type = PlaySnd
triggerall = anim = 2001
trigger1 = AnimElem = 3
value = 9,23
channel = 4

[State 00];
type = PlaySnd
triggerall = anim = 12000
trigger1 = AnimElem = 3
value = 2000,random%2
channel = 4

[State 3000, u]
type = VelSet
trigger1 = anim = 2000||anim = 12000
trigger1 = AnimElem = 8,>=0
x = 9

[State 3000, u]
type = VelSet
trigger1 = anim = 2001
trigger1 = AnimElem = 13,>=0
x = 12

[State 1950]
type = HitDef
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 0,0
numhits = 0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 1,2
sparkno = 2
guard.sparkno = 42
sparkxy = -10,-40
hitsound = s1,1
guardsound = s2,4
guard.velocity = -5
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 2010
p2stateno = 2020

[State 3000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = MoveGuarded
value = 2005

;---------------------------------------------------------------------------
; SEEt

[Statedef 2050]
type     = S
movetype = A
physics  = S
juggle   = 8
velset   = 0,0
anim     = 2050+(var(55)*1)
ctrl     = 0
sprpriority = 2

[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State a];_
type = palfx
triggerall = Time = 0
trigger1 = prevstateno = [1000,1999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1500,]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 50

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 36
time = 36
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7000
supermovetime = 30
pos = 5,-110

[State 00];
type = PlaySnd
triggerall = anim = 2050
trigger1 = AnimElem = 3
value = s7,14
channel = 4

[State 00];
type = PlaySnd
triggerall = anim = 2051
trigger1 = AnimElem = 3
value = 9,23
channel = 4

[State 00];
type = PlaySnd
triggerall = anim = 12050
trigger1 = AnimElem = 3
value = 2000,random%2
channel = 4

[State 3000, u]
type = VelSet
trigger1 = anim = 2050||anim = 12050
trigger1 = AnimElem = 8,>=0
x = 9

[State 3000, u]
type = VelSet
trigger1 = anim = 2051
trigger1 = AnimElem = 13,>=0
x = 12

[State 1950]
type = HitDef
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 0,0
numhits = 0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 1,2
sparkno = 2
guard.sparkno = 42
sparkxy = -10,-40
hitsound = s1,1
guardsound = s2,4
guard.velocity = -5
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 2060
p2stateno = 2020

[State 3000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = MoveGuarded
value = 2005

;---------------------------------------------------------------------------
; t_bVI

[Statedef 2005]
type     = S
movetype = I
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2005+(var(55)*1)
ctrl     = 0
sprpriority = 2

[State 3000, u]
type = VelSet
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(3) <= 0
x = 4

[State 3000, u]
type = VelSet
trigger1 = AnimElem = 4
x = 0

[State 3000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(i)
[Statedef 2020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2020+var(55)*30000

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(i)
[Statedef 2030]
type    = A
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2030+var(55)*30000

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;SEEt

[Statedef 2010]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2010 +(var(55)*1)
ctrl     = 0
sprpriority = 5

[State 810, IL]
type = Width
trigger1 = 1
edge = 60,0

[State 2000,]
type = PlaySnd
trigger1 = anim = 2010
trigger1 = AnimElem = 12
value = s7,15

[State 2000,]
type = PlaySnd
trigger1 = anim = 2010
trigger1 = AnimElem = 34
value = s7,16

[State 2000,]
type = PlaySnd
trigger1 = anim = 2010
trigger1 = AnimElem = 48
value = s7,17

[State 2000,]
type = PlaySnd
trigger1 = anim = 2010
trigger1 = AnimElem = 52
value = s7,18

[State 2000,]
type = PlaySnd
trigger1 = anim = 2011
trigger1 = AnimElem = 10
value = s9,12

[State 2000,]
type = PlaySnd
trigger1 = anim = 12010
trigger1 = AnimElem = 12
value = s2000,2

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 47
value = s1,8


[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 810, 1]
type = TargetBind
triggerall = anim = 2010 ||anim = 2011
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(46) <= 12
pos = 47,0

[State 810, 1]
type = TargetBind
triggerall = anim = 2010||anim = 2011
trigger1 = AnimElemtime(47) >= 0 && AnimElemtime(52) <= 0
pos = 30,0

[State 810, 1]
type = TargetBind
triggerall = anim = 12010
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(46) <= 12
pos = 57,0

[State 810, 1]
type = TargetBind
triggerall = anim = 12010
trigger1 = AnimElemtime(47) >= 0 && AnimElemtime(52) <= 0
pos = 40,0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
getpower = 0
damage = 15,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,10
sparkno = 2
sparkxy = -15,-55
hitsound = s1,1
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2030
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
getpower = 0
damage = 15,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,10
sparkno = 2
sparkxy = -25,-55
hitsound = s1,1
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2030
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 13
attr = S, HA
getpower = 0
damage = 25,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,10
sparkno = 6
sparkxy = -20,-65
hitsound = s1,6
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2020
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 20
attr = S, HA
getpower = 0
damage = 25,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,12
sparkno = 6
sparkxy = -25,-55
hitsound = s1,6
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2030
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 28
attr = S, HA
getpower = 0
damage = 25,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,12
sparkno = 6
sparkxy = -25,-65
hitsound = s1,6
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2020
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 34
attr = S, HA
getpower = 0
damage = 25,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,12
sparkno = 2
sparkxy = -25,-65
hitsound = s1,1
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2030
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 41
attr = S, HA
getpower = 0
damage = 30,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,12
sparkno = 6
sparkxy = -25,-65
hitsound = s1,6
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2020
kill = 0

[State 52, 4]
type = ChangeState
triggerall = anim = 12010
triggerall = fvar(30)=1
trigger1 = AnimTime = 0
value = 2040

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 52
attr = S, HA
getpower = 0
damage = 80,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 9,7
sparkno = -1
sparkxy = -20,-60
hitsound = s1,9
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -5,-5.5
air.velocity = -5,-5.5
fall = 1
fall.recover = 0
p2stateno = 4115
envshake.time = 12
envshake.ampl = 18
envshake.freq = 100
palfx.time = 50
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 47
persistent = 0
anim = f9
postype = P1
pos = 25,-73
sprpriority = 10

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 52
persistent = 0
anim = 2015
postype = P1
pos = 40,0
sprpriority = 10
supermove = 1

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 52
time = 2
value = 255,255,255
under = 1

[State 1000,]
type = ChangeState
triggerall = anim = 2010 ||anim = 2011
triggerall = power >= 1000
triggerall = p2life > 0
trigger1 = command = "26262626_x+y"
trigger1 = AnimElemtime(52) > 1 && AnimElemtime(54) < 15
value = ifelse(var(55)=1,2700,2750)

[State 52, 4]
type = ChangeState
triggerall = anim = 2010 ||anim = 2011
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 2040]
type = S
movetype = A
physics = S
velset = 0,0
anim = 2040
ctrl = 0
sprpriority = 5


[State 0, TargetState]
type = TargetState
Trigger1 = Time =0
value = 2041

[State 0, 8]
type = Explod
trigger1 = time = 0
anim = f9
postype = p1
pos = 42,-82
bindtime = 1
sprpriority = 5
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = s1,8


[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
pos = 42,-82

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 39,-84

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
pos = 42,-78

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
pos = 27,-108

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = 7,-130

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
pos = -3,-122

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem = 7
pos = 0,-40

[State explod];GtFNg
type = Explod
trigger1 = AnimElem = 7
anim = 2045
id = 2000
sprpriority = 20
postype = p1
pos = 0,0
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.47,0.47

[State explod];GtFNg
type = Explod
trigger1 = AnimElem = 7
anim = 2046
id = 2000
sprpriority = 20
postype = p1
pos = 0,0
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.47,0.47

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 7
value = s2000,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = s2000,5

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = S,HA
getpower = 0
damage = 90
animtype = Hard
priority = 3,Hit
pausetime = 14,15
sparkno = 6
sparkxy = -20,-80
hitsound = s1,7
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4,-8
air.velocity = -4,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = 0.5
fall = 1
fall.recover = 0
envshake.time = 20
envshake.ampl = 12
envshake.freq = 100

[State a]
type = AssertSpecial
trigger1 = AnimElemtime(7) > 0
trigger1 = AnimElemtime(7) < 2
flag = noshadow
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 7
time = 12
add = 256,0,0
mul = 256,0,0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; 相手幼
[Statedef 2041]
type = A
movetype = H
physics = N
velset = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 2041+var(55)*30000

[State 0, SelfState]
type = SelfState
trigger1 = Animtime = 0
value = 5100

;---------------------------------------------------------------------------
;SEEt

[Statedef 2060]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2010+(var(55)*1)
ctrl     = 0
sprpriority = 5

[State 810, IL]
type = Width
trigger1 = 1
edge = 60,0

[State 2000,]
type = PlaySnd
trigger1 = anim = 2010
trigger1 = AnimElem = 8
value = s7,24

[State 2000,]
type = PlaySnd
trigger1 = anim = 2010
trigger1 = AnimElem = 26
value = s7,25

[State 2000,]
type = PlaySnd
trigger1 = anim = 2010
trigger1 = AnimElem = 41
value = s7,26

[State 2000,]
type = PlaySnd
trigger1 = anim = 2011
trigger1 = AnimElem = 10
value = s9,12

[State 2000,]
type = PlaySnd
trigger1 = anim = 12010
trigger1 = AnimElem = 12
value = s2000,2

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 47
value = s1,8

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 810, 1]
type = TargetBind
triggerall = anim = 2010||anim = 2011
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(46) <= 12
pos = 47,0

[State 810, 1]
type = TargetBind
triggerall = anim = 2010||anim = 2011
trigger1 = AnimElemtime(47) >= 0 && AnimElemtime(52) <= 0
pos = 30,0

[State 810, 1]
type = TargetBind
triggerall = anim = 12010
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(46) <= 12
pos = 57,0

[State 810, 1]
type = TargetBind
triggerall = anim = 12010
trigger1 = AnimElemtime(47) >= 0 && AnimElemtime(52) <= 0
pos = 40,0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
getpower = 0
damage = 15,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,10
sparkno = 2
sparkxy = -15,-55
hitsound = s1,1
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2030
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
getpower = 0
damage = 15,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,10
sparkno = 2
sparkxy = -25,-55
hitsound = s1,1
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2030
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 13
attr = S, HA
getpower = 0
damage = 25,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,10
sparkno = 6
sparkxy = -20,-65
hitsound = s1,6
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2020
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 20
attr = S, HA
getpower = 0
damage = 25,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,12
sparkno = 6
sparkxy = -25,-55
hitsound = s1,6
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2030
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 28
attr = S, HA
getpower = 0
damage = 25,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,12
sparkno = 6
sparkxy = -25,-65
hitsound = s1,6
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2020
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 34
attr = S, HA
getpower = 0
damage = 25,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,12
sparkno = 2
sparkxy = -25,-65
hitsound = s1,1
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2030
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 41
attr = S, HA
getpower = 0
damage = 30,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 3,12
sparkno = 6
sparkxy = -25,-65
hitsound = s1,6
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 2020
kill = 0

[State 52, 4]
type = ChangeState
triggerall = anim = 12010
triggerall = fvar(30)=1
trigger1 = AnimTime = 0
value = 2040

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 52
attr = S, HA
getpower = 0
damage = 80,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 9,7
sparkno = -1
sparkxy = -20,-60
hitsound = s1,9
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -5,-5.5
air.velocity = -5,-5.5
fall = 1
fall.recover = 0
p2stateno = 4115
envshake.time = 12
envshake.ampl = 18
envshake.freq = 100
palfx.time = 50
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1


[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 47
persistent = 0
anim = f9
postype = P1
pos = 25,-73
sprpriority = 10

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 52
persistent = 0
anim = 2015
postype = P1
pos = 40,0
sprpriority = 10
supermove = 1

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 52
time = 2
value = 255,255,255
under = 0

[State 1000,]
type = ChangeState
triggerall = anim = 2010||anim = 2011
triggerall = power >= 1000
triggerall = p2life > 0
trigger1 = command = "26262626_x+y"
trigger1 = AnimElemtime(52) > 1 && AnimElemtime(54) < 15
value = ifelse(var(55)=1,2700,2750)

[State 52, 4]
type = ChangeState
triggerall = anim = 2010||anim = 2011
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 2100]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2100
ctrl     = 0
sprpriority = 3

[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State a]
type = palfx
triggerall = Time = 0
trigger1 = prevstateno = [1000,1999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 1500,]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 50

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 34
time = 34
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7000
supermovetime = 30
pos = 5,-50

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 19
value = s2,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 5
value = s7,22

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(19) > 0
x = 4

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 19
y = -8

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(19) > 0
y = .7

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 19
statetype = A

[State 1000, Xe[gX]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2105

;---------------------------------------------------------------------------
; \

[Statedef 2150]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2100
ctrl     = 0
sprpriority = 3

[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State a]
type = palfx
triggerall = Time = 0
trigger1 = prevstateno = [1000,1999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 1500,]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 50

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 34
time = 34
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7000
supermovetime = 30
pos = 5,-50

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 19
value = s2,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 5
value = s7,22

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(19) > 0
x = 6

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 19
y = -8

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(19) > 0
y = .7

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 19
statetype = A

[State 1000, Xe[gX]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2105

;---------------------------------------------------------------------------
; \n

[Statedef 2105]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2105
ctrl     = 0
sprpriority = 3

[State 1000, u]
type = Posset
trigger1 = time = 0
y = 0

[State 200, qbg`]
type = HitDef
trigger1 = time = 0
attr = S, HT
damage = 0,0
animtype = Hard
hitflag = M
priority = 3, Hit
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
hitsound = -1
ground.type = Low
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
p1stateno = 2110
p2stateno = 2120
p2facing = 1

[State 210, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; \

[Statedef 2110]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2110
ctrl     = 0
sprpriority = 3

[State 810, IL]
type = Width
trigger1 = AnimElem = 6
edge = 100,0

[State 1000, u]
type = Posset
trigger1 = time = 0
y = 0

[State 810,]
type = TargetBind
trigger1 = time = 0
pos = 40, 0

[State 810,]
type = TargetBind
trigger1 = AnimElem = 7
pos = -70, 0

[State 810,]
type = TargetBind
trigger1 = AnimElem = 11
pos = -80, 0

[State 810,]
type = TargetBind
trigger1 = AnimElem = 16
pos = 60, 0

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 4
value = 5,0

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 7
value = s1,6

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 12
value = s1,6

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 16
value = s1,6

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 26
value = 7,23

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(6) > 0 && AnimElemtime(20) < 0
flag = noshadow

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 7
time = 18
value = 210,0,0
under = -1

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 11
time = 20
value = 210,0,0
under = -1

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 16
time = 11
value = 210,0,0
under = -1

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(24) < 0
flag = noBG

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16
value = -80
kill = 0

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 26
value = -30

[State 210, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 2120]
type    = S
movetype= H
physics = N
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(2) > 6 && AnimElemtime(12) < 0
flag = noshadow

[State 2100,]
type = Palfx
trigger1 = AnimElemtime(2) = 7
add = -255,-255,-255
time = 132

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2120+var(55)*30000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
trigger1 = loseko
value = 5150

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 210, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = alive = 1
value = 2125
ctrl = 0


[Statedef 2125]
type    = S
movetype= H
physics = N
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2125+var(55)*30000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 5120

[Statedef 2200]
type = S
movetype = A
physics = S
anim = 2200
ctrl = 0
velset = 0, 0
poweradd = 0

[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State a]
type = palfx
triggerall = Time = 0
trigger1 = prevstateno = [1000,1999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 170, G]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 30

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 32
time = 32
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7000
supermovetime = 30
pos = -6,-72

[State 3000]
type = NotHitBy
trigger1 = 1
value = SCA
time = 30

[State 3000]
type = ChangeState
trigger1 = AnimTime = 0
value = 2210


[Statedef 2210]
type = S
movetype = A
physics = N
anim = 2210
velset = 0,0
facep2 = 1
ctrl = 0
poweradd = 0

[State 1100 10]
type = HitDef
trigger1 = (AnimElem = 4 || AnimElem = 17)&& anim = 2210
attr = S, HA
damage = 25,3
animtype = hard
hitflag = MAF
guardflag = M
sparkno = 2
guard.sparkno = 42
hitsound = s1,1
guardsound = s2,1
getpower = 0,0
sparkxy = -15,-47
pausetime = 2,1
ground.hittime = 23
ground.type = low
ground.slidetime = 23
ground.velocity = -3.5
air.velocity = -2.7,-9.5
guard.velocity = -8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = 0.67
air.fall = 1
fall.recover = 0
palfx.time = 27
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1


[State 1100 10]
type = HitDef
trigger1 = (AnimElem = 5 || AnimElem = 18)&& anim = 2210
attr = S, HA
damage = 25,3
animtype = hard
hitflag = MAF
guardflag = M
sparkno = 2
guard.sparkno = 42
hitsound = s1,1
guardsound = s2,1
getpower = 0,0
sparkxy = -20,-77
pausetime = 2,1
ground.hittime = 27
ground.type = high
ground.slidetime = 27
ground.velocity = -3.5
air.velocity = -3.1,-9.5
guard.velocity = -8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = 0.67
air.fall = 1
fall.recover = 0
palfx.time = 27
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1


[State 1100 10]
type = HitDef
trigger1 = (AnimElem = 6 || AnimElem = 19)&& anim = 2210
attr = S, HA
damage = 25,3
animtype = hard
hitflag = MAF
guardflag = M
sparkno = 2
guard.sparkno = 42
hitsound = s1,1
guardsound = s2,1
getpower = 0,0
sparkxy = -25,-107
pausetime = 2,1
ground.hittime = 27
ground.type = high
ground.slidetime = 27
ground.velocity = -3.5
air.velocity = -3.1,-9.5
guard.velocity = -8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = 0.67
air.fall = 1
fall.recover = 0
palfx.time = 27
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1


[State 1100 10]
type = HitDef
trigger1 = AnimElem = 30&& anim = 2210
attr = S, HA
damage = 35,4
animtype = hard
hitflag = MAF
guardflag = M
sparkno = 2
guard.sparkno = 42
hitsound = s1,1
guardsound = s2,1
getpower = 0,0
sparkxy = -5,-47
pausetime = 12,11
ground.hittime = 24
ground.type = low
ground.slidetime = 21
ground.velocity = -5.5
air.velocity = -4,-10.5
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = 0.67
air.fall = 1
fall.recover = 0
palfx.time = 27
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1

[State 1100 10]
type = HitDef
trigger1 = AnimElem = 31&& anim = 2210
attr = S, HA
damage = 35,4
animtype = hard
hitflag = MAF
guardflag = M
sparkno = 2
guard.sparkno = 42
hitsound = s1,1
guardsound = s2,1
getpower = 0,0
sparkxy = -10,-77
pausetime = 12,11
ground.hittime = 24
ground.type = low
ground.slidetime = 21
ground.velocity = -4.5,-11.7
air.velocity = -4,-11.5
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = 0.67
fall = 1
fall.recover = 0
palfx.time = 27
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1

[State 1100 10]
type = HitDef
trigger1 = AnimElem = 32&& anim = 2210
attr = S, HA
damage = 35,4
animtype = hard
fall.animtype = hard
hitflag = MAF
guardflag = M
sparkno = 2
guard.sparkno = 42
hitsound = s1,1
guardsound = s2,1
getpower = 0,0
sparkxy = -10,-117
pausetime = 12,12
ground.hittime = 24
ground.type = low;high
ground.slidetime = 21
ground.velocity = -4.2,-12.7
air.velocity = -3.8,-12.5
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = 0.67
fall = 1
fall.recover = 0
palfx.time = 50
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = (animelem=4,=-1 ||animelem=17,=-1 ||animelem=30,=-1)&&anim = 2210
value = S1,14
volume = 120

[State 0, PlaySnd]
type = PlaySnd
trigger1 = (animelem=6 ||animelem=19 ||animelem=32,=-1)&&anim = 2210
value = f40,0
freqmul = 1.1

[State 201, 3]
type = PlaySnd
trigger1 = (animelem = 6||animelem = 19)&& anim = 2210
value = s9,20

[State 201, 3]
type = PlaySnd
trigger1 = animelem = 32
value = s9,23

[State 1101, 3]
type = PlaySnd
trigger1 = (animelem = 6||animelem = 19||animelem = 32)&& anim = 2210
value = s5,4

[State 1001, 5]
type = Projectile
trigger1 = animelem = 6,=-1  && anim = 2210
trigger2 = animelem = 19,=-1 && anim = 2210
trigger3 = animelem = 32,=-1 && anim = 2210
projanim = 1151
projshadow = 68,68,68
projremovetime = 24
offset = 25,-70
velocity = 0.00001,0
postype = p1

[State 1001, 18]
type = Projectile
trigger1 = animelem = 8,=-1 && anim = 2210
trigger2 = animelem = 21,=-1 && anim = 2210
trigger3 = animelem = 34,=-1 && anim = 2210
projanim = 1161
projshadow = 68,68,68
projremovetime = 24
offset = -10,-150
velocity = 0.00001,0
postype = p1

[State 1000, AfterImage]
type = AfterImage
trigger1 = animelem = 3 && anim = 2210
time = 2
length = 11
timegap = 1
paladd = 60,20,100
PalContrast = 220,200,350
palcolor = 0
framegap = 3

[State 3000, fterimagetime]
type = Afterimagetime
trigger1 = gametime%2 = 0 && anim = 2210
time = 2

;[State 47 2]
;type = Afterimagetime
;trigger1 = time <= 30
;time = 2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = (Animelem = 6||Animelem = 19||Animelem = 32) && anim = 2210
statetype = A
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = ((Animelem = 14||Animelem = 27) && anim = 2210) || anim = 7120
statetype = S

[State 0, PosAdd]
type = PosAdd
trigger1 = (Animelem=3||Animelem=4||Animelem=5||Animelem=16||Animelem = 14||Animelem = 27||Animelem=17||Animelem=18||Animelem=29||Animelem=30||Animelem=31) && anim = 2210
x = 10

[State 0, PosAdd]
type = PosAdd
trigger1 = (Animelem=6||Animelem=19||Animelem=32) && anim = 2210
x = 5

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 6 && anim = 2210
x = 2
y = -3
[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 19 && anim = 2210
x = 3.5
y = -3.5
[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 32 && anim = 2210
x = 4
y = -9.5

[State 0, 5]
type = HitBy
trigger1 = AnimElem = 5,<0 && anim = 2210
value = SCA,ST,HT
time = 3

[State 0, 6]
type = VelAdd
trigger1 = AnimElem = 6,>1 && pos y < 0 && anim = 2210
y = .54
[State 0, 6]
type = VelAdd
trigger1 = AnimElem = 32,>1 && pos y < 0 && anim = 2210
y = .1
[State 0, 6]
type = VelAdd
trigger1 = AnimElem = 6,>1 && vel x > 1 && anim = 2210
trigger2 = AnimElem = 19,>1 && vel x > 1 && anim = 2210
trigger3 = AnimElem = 32,>1 && vel x > 2 && anim = 2210
x = -.2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 32,>1 && anim != 7120 && vel y >0 && pos y >= 0
value = 7120

[State 0, PosSet]
type = PosSet
trigger1 = ((Animelem = 14||Animelem = 27) && anim = 2210) || anim = 7120
y = 0
[State 0, VelSet]
type = VelSet
trigger1 = ((Animelem = 14||Animelem = 27) && anim = 2210) || anim = 7120
x = 0
y = 0

[State -3, 落地水花]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = anim = 2210 && (animelem = 14 || animelem = 27)
trigger2 = Anim = 7120 && Animelem = 1
ID = 22
anim = F22
postype = p1
pos = 10,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2
pausemovetime = 999999
supermovetime = 999999

[State -3 , 落地声效]
type = PlaySnd
trigger1 = anim = 2210 && (animelem = 14 || animelem = 27)
trigger2 = Anim = 7120 && Animelem = 1
value = F47,(0+(StageVar(info.author) = "water"))

[State 0, ChangeState]
type = ChangeState
trigger1 = Anim = 7120 && animtime = 0
value = 0
ctrl = 1
;================
[Statedef 2300]
type = S
movetype = A
physics = N
anim = 2300
ctrl = 0
velset = 0
facep2 = 1

[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State a]
type = palfx
triggerall = Time = 0
trigger1 = prevstateno = [1000,1999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 3000, G]
type = notHitBy
trigger1 = time = 0
value = SCA
time = 33

[State a]
type = VarSet
trigger1 = time = 0
var(55)= 0

[State 2200, 8]
type = SuperPause
trigger1 = Time = 1
time = 28
movetime = 28
anim = -1
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 1
stateno = 7000
supermovetime = 30
pos = -16,-106

[State 2200, 2 Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = s7,34
volume = 255

[State 2200, 2 Voice]
type = PlaySnd
trigger1 = AnimElem = 3 || AnimElem = 10
value = s5,4

[State 5040, 4]
type = StateTypeSet
trigger1 = AnimElem = 12
movetype = I

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 4
persistent = 0
anim = 1050
postype = P1
pos = 0,22
sprpriority = 10
removetime = 20
bindtime = -1

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 11
persistent = 0
anim = 1050
postype = P1
pos = 10,22
sprpriority = 10
removetime = 20
bindtime = -1

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 4
persistent = 0
anim = 2310
postype = P1
pos = 24,0
sprpriority = 10
removetime = 20
bindtime = -1


[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 11
persistent = 0
anim = 2315
postype = P1
pos = 30,-3
sprpriority = 10
removetime = 20
bindtime = -1

[State 1505, 5]
type = Projectile
trigger1 = AnimElem = 4
attr = S, SP
projanim = 2311
projhitanim = 2311
projID = 2310
projshadow = 0,0,0
projremovetime = 21
projmiSStime = 1
projhits = 1
offset = 24,0
velocity = 0
hitflag = MFA
damage = 60,6
getpower  = 0
animtype = Hard
guardflag = M
pausetime = 2,12
sparkno = -1
guard.sparkno = -1
sparkxy = 40,-50
hitsound =  s1,1
guardsound = s2,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 2360
ID = 2002
palfx.time = 60
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1

[State 1505, 5]
type = Projectile
trigger1 = AnimElem = 11
attr = S, SP
projanim = 2316
projhitanim = 2316
projID = 2320
projshadow = 0,0,0
projremovetime = 27
projmiSStime = 1
projhits = 1
offset = 30,-3
velocity = 0
hitflag = MFA
damage = 60,6
getpower  = 0
animtype = Hard
guardflag = M
pausetime = 2,12
sparkno = 2
guard.sparkno = -1
sparkxy = 20,-50
hitsound =  f0,0
guardsound = f6,1
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 2370
ID = 2320
palfx.time = 70
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1

[State 2100, 3]
type = Explod
triggerall = p2movetype = H
trigger1 = ProjHit = 1
anim = f2
pos = 15,-60
postype = p2
sprpriority = 10
supermove = 1
bindtime = 1
facing = -1
ownpal = 1

[State 2100, 3]
type = Explod
trigger1 = Projguarded = 1
anim = f42
pos = 15,-60
postype = p2
sprpriority = 10
supermove = 1
bindtime = 1
facing = -1
ownpal = 1

[State 2000, 15]
type = EnvColor
triggerall = p2movetype = H
trigger1 = projHit = 1
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1
persistent = 0

[State 2355, 10]
type = AssertSpecial
triggerall = p2movetype = H
trigger1 = ProjHit = 1, 0
flag = NoFG
ignorehitpause = 1

[State 2000, 15]
type = EnvColor
triggerall = p2movetype = H
trigger1 = AnimElem = 10,>0 && projHit = 1
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1
persistent = 0

[State 3200, 4]
type = VarSet
trigger1 = projhit2320 = 1
v = 55
value = 1

[State 2210, 19]
type = ChangeState
triggerall = p2movetype = H
trigger1 = AnimElem = 12,>0 && var(55)=1
value = 2350

[State 2210, 19]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 2350]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2350
ctrl     = 0
sprpriority = 3

[state -2, a];X[
type = pause
triggerall = RoundState = 2
trigger1 = AnimElemtime(1) > 0 && AnimElemtime(8) < 2
trigger1 = gametime % 2
time = 2

[State a]
type = VarSet
trigger1 = time = 0
var(55)= 0

[State 3500, 13]
type = AssertSpecial
trigger1 = Time = [10,105]
flag = Nofg
flag2 = nobg
ignorehitpause = 1

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 13
value = s7,35

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 15
value = s18,6

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 15
value = s5,4

[State a]
type = EnvShake
trigger1 = AnimElem = 15
time = 16
freq = 40
ampl = -8

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 14
persistent = 0
anim = 2355
postype = P1
pos = 15,35
sprpriority = 10
removetime = 20
bindtime = -1

[State 3000]
type = Projectile
trigger1 = AnimElem = 15
projID = 2300
projanim = 2360
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projsprpriority = 10
projshadow = 0,0,0
projremovetime = 36
getpower = 0
ownpal = 0
offset = 53,0
velocity = 0,0
attr = S, HP
animtype = Hard
damage = 100,10
hitflag = MAF
hitsound = s1,11
pausetime = 0,8
sparkno = 2
sparkxy = 40,-100
ground.type = High
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -5,-10
air.juggle = 0
air.velocity = -5,-10
fall = 1
palfx.time = 70
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1
p2stateno = 2320
p2facing = 1

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 2360]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1280, 1]
type = posSet
trigger1 = Time = 0
y = 0

[State 9000, 8];
type = ChangeState
trigger1 = Pos Y != 0
value = 2361

[State 9000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000+var(55)*30000,5010+var(55)*30000) + GetHitVar(animtype) 

[State 9000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+var(55)*30000

[State 9000, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 +var(55)*30000+ GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype)+var(55)*30000

[State 9000, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim+var(55)*30000

[State 9000, 6]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 9000, 7]
type = Changestate;SelfState
trigger1 = HitShakeOver
trigger1 = Pos Y = 0
value = 2356

[State 201, 2]
type = ChangeState
trigger1 = life = 0
value = 2361

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 2361

[Statedef 2361]
type = A
movetype = H
physics = N

[State -2, 0]
type = null;RemoveExplod
trigger1 = 1
ignorehitpause = 1
ID = 200002

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(2360)
value = ifelse((GetHitVar(groundtype)=1),5030+var(55)*30000,ifelse((GetHitVar(airtype)=1),5030+var(55)*30000,1235+var(55)*30000))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(2360)
value = ifelse((GetHitVar(groundtype)=1),5030+var(55)*30000,ifelse((GetHitVar(airtype)=1),5030+var(55)*30000,5012+var(55)*30000))

[State 1280, 3]
type = Changestate;SelfState
trigger1 = HitShakeOver = 1
value = 2362

[Statedef 2362]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5030+var(55)*30000 && time = 2
value = 5030 +var(55)*30000

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5030+var(55)*30000 && time = 5
value = 5050+var(55)*30000

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5012+var(55)*30000&& time = 5
value = 5050+var(55)*30000

[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6,-6)
y = -6.7

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6,6)
y = -6.7

[State 1660, 4]
type = VelMul
trigger1 = Time <= 8
x = .97

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 1281, 3]
type = Changestate;SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100


[Statedef 2356]
type    = S
movetype= H
physics = N

[State 9001, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9001, 4]
type = VelMul
trigger1 = Pos Y = 0
trigger1 = Time >= 0
x = .8

[State 9001, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10  +var(55)*30000

[State 9001, 7]
type = Changestate;SelfState
trigger1 = HitOver
value = 0
ctrl = 1

[Statedef 2370]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = 0
y = -12

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = 0
y = -12


[State 1021, 0]
type = ChangeAnim2
trigger1 = hitshakeover = 0
value = 2370+var(55)*30000

[State 1021, 0]
type = ForceFeedBack
trigger1 = hitshakeover = 0
time = 1
waveform = square

[State 8140, 4]
type = Changestate;SelfState
trigger1 = HitShakeOver = 1
value = 2371

;part2
[Statedef 2371]
type = A
movetype= H
physics = N
ctrl = 0

[State 1660, 2]
type = VelMul
trigger1 = Time = [11,18]
y = .4999

[State 1281, 1]
type = VelAdd
trigger1 = Time = [1,11]
y = .4

[State 1281, 1]
type = VelAdd
trigger1 = 1
y = .55

[State 1022, 0]
type = changeanim2
trigger1 = time = 0
value = 2370+var(55)*30000

[State 1022, 2]
type = ChangeAnim
trigger1 = anim = 2370+var(55)*30000
trigger1 = animtime = 0
value = 5030+var(55)*30000

[State 1022, 2]
type = ChangeAnim
trigger1 = anim = 5030+var(55)*30000
trigger1 = animtime = 0
value = 5035+var(55)*30000

[State 1022, 2]
type = ChangeAnim
triggerall = Anim = 5030+var(55)*30000||Anim = 5035+var(55)*30000
trigger1 = AnimTime = 0
value = 5050+var(55)*30000

[State 1022, 2]
type = ChangeAnim
triggerall = Anim = 5050+var(55)*30000
trigger1 = AnimTime = 0
value = 5060+var(55)*30000

[State 1022, 10]
type = selfstate
trigger1 = Vel Y > 0
trigger1 = Pos Y > 15
value = 5100

[Statedef 2320]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = -2.4
y = -14

[State 52, 2]
type = Veladd
trigger1 = time >= 2
y = .5

[State 810,]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
ampl = 10
freq = 120
time = 10

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2320+var(55)*30000

[State 1830]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100
;ctrl = 0

[Statedef 2400]
type     = S
movetype = A
physics  = S
juggle   = 8
velset   = 0,0
anim     = 2400
ctrl     = 0
sprpriority = 2

[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State a]
type = palfx
triggerall = Time = 0
trigger1 = prevstateno = [1000,1999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 1500,]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 40

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7000
supermovetime = 30
pos = 5,-80

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
value = s7,21

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 5
value = f40,0

[State 1000, u]
type = Posadd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 20

[State 1000, u]
type = Velset
trigger1 = AnimElemtime(5) > 0
x = 7

[State 1000, u]
type = Velset
trigger1 = AnimElem = 5
y = -4

[State 1000, u]
type = Veladd
trigger1 = AnimElemtime(5) > 0
y = .35

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 5
statetype = A

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 9
persistent = 0
anim = 1405
postype = P1
pos = 100,-50
sprpriority = 10
removetime = 23

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 9
value = s5,4

[State 1950]
type = HitDef
trigger1 = Time = 0
attr = A,HA
getpower = 0
damage = 0,0
numhits = 0
animtype = Hard
hitflag = MAF
guardflag = H
priority = 5
pausetime = 2,2
sparkno = 2
guard.sparkno = 42
sparkxy = -30,-40
hitsound = s1,4
guardsound = s2,4
guard.velocity = -4
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 2410
p2stateno = 2420

[State 1000, Xe[gX]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2405

;---------------------------------------------------------------------------
;n

[Statedef 2405]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
ctrl     = 0
velset   = 0,0
anim     = 2405
sprpriority = 2

[State 1000, u]
type = Posset
trigger1 = time = 0
y = 0

[State 1000, u]
type = Velset
trigger1 = AnimElem = 1
x = 4

[State 1000, u]
type = Velset
trigger1 = AnimElem = 3
x = 0

[State 210, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;

[Statedef 2410]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
ctrl     = 0
velset   = 0,0
anim     = 2410
sprpriority = 2

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, IL]
type = Width
trigger1 = AnimElem = 1
edge = 110,0

[State 810,]
type = EnvShake
trigger1 = AnimElem = 3
ampl = 12
freq = 120
time = 15

[State 1100, GtFNg\]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 1
persistent = 0
anim = F62
postype = P1
pos = 70,0
sprpriority = 10
bindtime = -1

[State 1100, GtFNg\]
type = Explod
triggerall = StageVar(info.author) = "water"
anim = f23
trigger1 = AnimElem = 1
persistent = 0
postype = P1
pos = 70,0
sprpriority = 10
bindtime = -1

[State 1100, GtFNg\]
type = Explod
triggerall = StageVar(info.author) = "water"
anim = f24
trigger1 = AnimElem = 1
persistent = 0
postype = P1
pos = 60,0
sprpriority = 10
bindtime = -1

[State 1100, GtFNg\]
type = Explod
triggerall = StageVar(info.author) = "water"
anim = f24
facing = -1
trigger1 = AnimElem = 1
persistent = 0
postype = P1
pos = 80,0
sprpriority = 10
bindtime = -1

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
pos = 40, -55

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 38, -25

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
pos = 35, 0

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
pos = 33, 2

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = 20, -2

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
pos = 17, -2

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
pos = 5, -50

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(8) >= 0 && AnimElemTime(9) < 0
pos = 15, -95

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
pos = 25, -120

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
pos = -10, -125

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
pos = -25, -120

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(12) >= 0 && AnimElemTime(13) < 0
pos = -25, -120

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(13) >= 0 && AnimElemTime(14) < 0
pos = -17, -120

[State 810, 3]
type = TargetBind
Trigger1 = AnimElem = 14
pos = -5, -120

[State 810, 3]
type = TargetBind
Trigger1 = AnimElem = 15
pos = 55, 0

[State 1000, u]
type = Posset
trigger1 = time = 0
y = 0

[State 1000, u]
type = Velset
trigger1 = AnimElem = 1
x = 0

[State 1000, u]
type = Velset
trigger1 = AnimElem = 3
x = 0

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 3
value = s0,15

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 9
value = 2,0

[State 200, ]
type = PlaySnd
trigger1 = AnimElemtime(3) = 20
value = 7,27
channel = 10

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 14
value = 7,7
channel = 10

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 15
value = s1,11

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 15
value = s5,4

[State 1000, u]
type = Posadd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 20

[State 1000, u]
type = Posadd
trigger1 = AnimElem = 7
x = 30

[State 1000, u]
type = Velset
trigger1 = AnimElem = 9
x = 6

[State 1000, u]
type = Velset
trigger1 = AnimElem = 9
y = -7.5

[State 1000, u]
type = Veladd
trigger1 = AnimElemtime(9) > 0
y = .3

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 9
statetype = A

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 9
trigger2 = AnimElem = 15
persistent = 0
anim = 1150
id = 1100
postype = P1
pos = 20,0
sprpriority = 10

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 14
trigger2 = AnimElem = 20
persistent = 0
anim = 1160
postype = P1
pos = 0,0
sprpriority = 10

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 15
persistent = 0
anim = 2450
postype = P1
pos = 50,-80
sprpriority = 10

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = -40
kill = 0

[State 0, HitAdd]
type = HitAdd
trigger1 = AnimElem = 3
value = 1
;ignorehitpause =
;persistent =


[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 15
trigger2 = AnimElem = 16
trigger3 = AnimElem = 17
trigger4 = AnimElem = 18
trigger5 = AnimElem = 19
attr = A, HA
damage = 40,0
getpower = 0
animtype = diagup
hitflag = MAF
priority = 3, Hit
pausetime = 2,14
sparkno = 2
guard.sparkno = 42
sparkxy = -25, -60
hitsound = f-1,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.3,-7.8
air.velocity = -5.3,-7.8
air.type = High
air.hittime = 12
fall = 1
fall.recover = 0
palfx.time = 90
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 15
trigger2 = AnimElem = 16
trigger3 = AnimElem = 18
time = 1
value = 255,255,255
under = 1

[State 1000, Xe[gX]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2412

;---------------------------------------------------------------------------
;n
[Statedef 2412]
type     = S
movetype = I
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2412
ctrl     = 0
sprpriority = 2

[State 1000,]
type = Posset
trigger1 = time = 0
y = 0

[State 1000, u]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 2420]
type    = A
movetype= H
physics = S
velset = 0,0

[State 192,]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 2120]
type = null;ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = SprPriority
trigger1 = AnimElem = 1
value = -5

[State 820, 1]
type = SprPriority
trigger1 = AnimElem = 4
value = 5

[State 820, 1]
type = SprPriority
trigger1 = AnimElem = 11
value = -5

[State 820, 1]
type = SprPriority
trigger1 = AnimElem = 14
value = 5

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2420+var(55)*30000

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 820, 1]
type = ChangeAnim
trigger1 = Animtime = 0
value = 5052


[Statedef 2500]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2500
ctrl     = 0
sprpriority = 8

[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State a]
type = palfx
triggerall = Time = 0
trigger1 = prevstateno = [1000,1999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 810, IL]
type = Width
trigger1 = 1
edge = 80,0

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7000
supermovetime = 30
pos = 25,-105

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,25

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 5
value = s5,5

[State 200, qbg`]
type = HitDef
trigger1 = time =0
attr = S, HA
getpower = 0
damage = 100,10
animtype = Hard
hitflag = MAF
priority = 5, Hit
pausetime = 1, 40
sparkno = 6
guard.sparkno = 42
sparkxy = 0, -95
hitsound = s1,6
guardsound = s2,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2
air.type = High
air.velocity = -2,-5
air.hittime = 60
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
envshake.time = 25
envshake.ampl = 10
envshake.freq = 90
p2stateno = 2520
kill = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Movehit=1
value = s0,14

[State 1000, Xe[gX]
type = ChangeState
triggerall = Movehit
trigger1 = AnimElem = 9
value = 2510

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 2510]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2510
ctrl     = 0
sprpriority = 3

[State 700, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2000]
type = AssertSpecial
trigger1 = Anim = 2510
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 3
value = s5,5

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 13
value = s9,26

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 29
value = s18,6

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 29
value = s5,4

[State a]
type = EnvShake
trigger1 = AnimElem = 29
time = 16
freq = 40
ampl = -8

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 28
persistent = 0
anim = 2355
postype = P1
pos = 15,35
sprpriority = 10
removetime = 20
bindtime = -1

[state a];
type = Helper
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
trigger6 = AnimElem = 8
trigger7 = AnimElem = 9
id = 2515
name = "dokuro"
sprpriority = 5
pos = 0,0
postype = p2
stateno = 2515
helpertype = normal
pausemovetime = 0
keyctrl = 0
ownpal = 1

[State 2200, 2 Voice]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
trigger6 = AnimElem = 8
trigger7 = AnimElem = 9
value = 18,6

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
trigger6 = AnimElem = 8
attr = S, HA
getpower = 0
damage = 10
animtype = Hard
hitflag = MAF
priority = 8, Hit
pausetime = 4,5
sparkno = 2
sparkxy = 0,-120
hitsound = s1,4
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3
air.type = High
air.velocity = -4,-3
air.hittime = 20
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
palfx.time = 40
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 12
envshake.freq = 60
p2stateno = 2521
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
getpower = 0
damage = 10
animtype = diagup
hitflag = MAF
priority = 8, Hit
pausetime = 2, 15
sparkno = 2
sparkxy = 0, -100
hitsound = s1,4
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4
air.type = High
air.velocity = 0,-6
air.hittime = 20
air.cornerpush.veloff = 0
yaccel = .25
fall = 1
fall.recover = 0
palfx.time = 90
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
envshake.time = 15
envshake.ampl = 12
envshake.freq = 90
p2stateno = 2522
kill = 0

[State 3000]
type = Projectile
trigger1 = AnimElem = 29
projID = 2300
projanim = 2360
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projsprpriority = 10
projshadow = 0,0,0
projremovetime = 36
getpower = 0
ownpal = 0
offset = 100,0
velocity = 0,0
attr = S, HP
animtype = Hard
damage = 60,6
hitflag = MAF
hitsound = s1,11
pausetime = 0,8
sparkno = 2
sparkxy = 40,-100
ground.type = High
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -5,-10
air.juggle = 0
air.velocity = -5,-10
fall = 1
palfx.time = 70
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1
p2stateno = 2320
p2facing = 1

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 2520]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = 0
y = 0

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2720+var(55)*30000

[State 1830]
type = SelfState
trigger1 = Enemy,stateno != [2500,2510]
value = 5100

[Statedef 2521]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = 0
y = 0

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 2
x = -4
y = -3

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(2) >= 0
y = .4

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2721+var(55)*30000

[State 1830]
type = SelfState
trigger1 = Enemy,stateno != [2500,2510]
value = 5100

;---------------------------------------------------------------------------
;
[Statedef 2522]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = Veladd
trigger1 = time = 0
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = time = 15
x = 0
y = -7.8

[State 52, 1]
type = Veladd
trigger1 = time >= 15
y = .24

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = SelfAnimExist(5052+var(55)*30000)
value = 5052+var(55)*30000

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = !SelfAnimExist(5052+var(55)*30000)
value = 5050+var(55)*30000

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

[Statedef 2515]
type = A
ctrl = 0
anim = 2515
velset = 0,0
movetype = A
physics = N
sprpriority = 20

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------[]
[state a]
type = posset
trigger1 = time = 0
y = 0
;---------------------[]
[state a]
type = destroyself
trigger1 = animtime = 0


;----------------------------------------------八酒杯
[Statedef 2600]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2600+(var(55)*1)
ctrl     = 0
sprpriority = 2

[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State a]
type = palfx
triggerall = Time = 0
trigger1 = prevstateno = [1000,1999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 170, G]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 30

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7000
supermovetime = 30
pos = -20,-90

[State 181,]
type = PlaySnd
trigger1 = anim = 2600
trigger1 = AnimElem = 2
value = s7,21

[State 181,]
type = PlaySnd
trigger1 = anim = 2601
trigger1 = AnimElem = 2
value = s9,9

[State 700, GtFNg\]
type = Explod
trigger1 = AnimElem = 2
anim = 2605
postype = P1
pos = -22, -84
sprpriority = 10
bindtime = -1
removetime = -1
ownpal = 1
removeongethit = 1
supermove = 1
ID = 2600

[State 3000, Xe[gX]
type = ChangeState
triggerall = time >= 34
trigger1 = command != "hold_x"
trigger2 = time = 200
value = 2610

;---------------------------------------------------------------------------
; t
; CNS x: 

[Statedef 2601]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2600+(var(55)*1)
ctrl     = 0
sprpriority = 2

[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State a]
type = palfx
triggerall = Time = 0
trigger1 = prevstateno = [1000,1999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 170, G]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 30

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7000
supermovetime = 30
pos = -20,-90

[State 181,]
type = PlaySnd
trigger1 = anim = 2600
trigger1 = AnimElem = 2
value = s7,21

[State 181,]
type = PlaySnd
trigger1 = anim = 2601
trigger1 = AnimElem = 2
value = s9,9

[State 700, GtFNg\]
type = Explod
trigger1 = AnimElem = 2
anim = 2605
postype = P1
pos = -22, -84
sprpriority = 10
bindtime = -1
removetime = -1
ownpal = 1
removeongethit = 1
supermove = 1
ID = 2600

[State 3000, Xe[gX]
type = ChangeState
triggerall = time >= 34
trigger1 = command != "hold_y"
trigger2 = time = 200
value = 2610

;---------------------------------------------------------------------------
; 

[Statedef 2610]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
anim     = 2650+(var(55)*1)
ctrl     = 0

[State 181,]
type = PlaySnd
trigger1 = AnimElem = 5
value = s5,6

[State 700, GtFNg\]
type = Explod
trigger1 = AnimElem = 1
anim = 2606
postype = P1
pos = -23, -98
sprpriority = 10
bindtime = -1
ownpal = 1

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 5
persistent = 0
anim = 1050
postype = P1
pos = -10,5
sprpriority = 10
removetime = 20
bindtime = -1

[State 1000, wp[o]
type = Helper
trigger1 = AnimElem = 5
name = "yamibarai"
stateno = 2650
ID = 2600
helpertype = normal
pos = 25,1
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 3000]
type = Projectile
trigger1 = AnimElem = 5
projID = 2640
projanim = 2615
projremove = 1
projcancelanim = 1670
projpriority = 2
projhitanim = -1
projremanim = -1
projsprpriority = 1
projshadow = 0,0,0
projremovetime = -1
offset = 25,1
velocity = 7,0
attr = S, HP
damage = 0,0

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;twp[

[Statedef 2650]
type     = S
movetype = A
physics  = N
juggle   = 0
ctrl     = 0
anim     = 2610
sprpriority = 5

[State 1001, ]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;e

[State 1000, ]
type = Velset
trigger1 = time >= 0
x = 7

[State 181,]
type = PlaySnd
trigger1 = p2bodydist X < 1 && p2bodydist X > -10
trigger1 = enemy,statetype != L
trigger1 = numhelper(2600) != 0
value = s18,3

[State 700, GtFNg\]
type = Explod
trigger1 = p2bodydist X < 1 && p2bodydist X > -10
trigger1 = enemy,statetype != L
trigger1 = numhelper(2600) != 0
anim = 3120
postype = P1
pos = 0, 0
sprpriority = 10
ownpal = 1
bindtime = -1
supermove = 1
removeongethit = 1

[State 3000]
type = Projectile
trigger1 = p2bodydist X < 1 && p2bodydist X > -10
trigger1 = enemy,statetype != L
trigger1 = numhelper(2600) != 0
projID = 2620
projanim = 2620
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projsprpriority = 10
projshadow = 0,0,0
projremovetime = 34
getpower = 0
ownpal = 0
offset = 0,0
velocity = 0,0
attr = S, HP
animtype = Hard
damage = 100,10
hitflag = MAF
guardflag = M
hitsound = s1,11
guardsound = s2,4
pausetime = 0,20
sparkno = 2
guard.sparkno = 42
sparkxy = 15,-50
ground.type = High
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -9
air.juggle = 8
air.velocity = -4,-6
air.fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1
p2stateno = 2620
p2facing = 1

[State 810,]
type = EnvShake
trigger1 = p2bodydist X < 1 && p2bodydist X > -10
trigger1 = enemy,statetype != L
trigger1 = numhelper(2600) != 0
ampl = 10
freq = 90
time = 20

[State 1000, Xe[gX]
type = DestroySelf
trigger1 = p2bodydist X < 1 && p2bodydist X > -10
trigger1 = enemy,statetype != L
trigger2 = root,numprojID(2640) = 0

;---------------------------------------------------------------------------
;
[Statedef 2620]
movetype= H
velset = 0,0
ctrl = 0

[State 700,]
type = Palfx
trigger1 = time = 0
trigger2 = time = 10
trigger3 = time = 20
trigger4 = time = 30
trigger5 = time = 40
trigger6 = time = 50
trigger7 = time = 60
trigger8 = time = 70
trigger9 = time = 80
trigger10 = time = 90
trigger11 = time = 100
trigger12 = time = 110
trigger13 = time = 120
trigger14 = time = 130
trigger15 = time = 140
trigger16 = time = 150
trigger17 = time = 160
trigger18 = time = 170
trigger19 = time = 180
trigger20 = time = 190
time = 10
add = 0,-50,80
sinadd = 50,50,50,15
color = 0
invertall = 1

[State 52, 1]
type = VelSet
trigger1 = time >= 0
x = 0
y = 0

[State 6000, 3]
type = StateTypeSet
trigger1 = Pos Y = 0
statetype = S

[State 6000, 3]
type = StateTypeSet
trigger1 = Pos Y != 0
trigger2 = AnimTime = 0
statetype = A

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2635+var(55)*30000

[State 1830]
type = ChangeState
trigger1 = Animtime = 0
value = 2630

;---------------------------------------------------------------------------
;
[Statedef 2630]
type = A
movetype= H
physics  = N
ctrl = 0

[State 170, G]
type = NotHitBy
trigger1 = 1
value = SCA

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = -4
y = -6

[State 52, 1]
type = Veladd
trigger1 = time >= 0
y = .4

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050+var(55)*30000

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
; QSEZE娣(ver)wUx

[Statedef 2700]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2700
ctrl     = 0
sprpriority = 8

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
;追加超杀
[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 32
time = 32
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7000
supermovetime = 30
pos = 5,-65

[State 2000]
type = AssertSpecial
trigger1 = Anim = 2700
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 6
value = s9,23

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 5
value = s5,5

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
getpower = 0
damage = 10
animtype = Hard
hitflag = MAF
priority = 5, Hit
pausetime = 1, 40
sparkno = 6
sparkxy = 0, -95
hitsound = s1,6
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2
air.type = High
air.velocity = -2,-5
air.hittime = 60
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
envshake.time = 25
envshake.ampl = 10
envshake.freq = 90
p2stateno = 2720
kill = 0

[State 1000, Xe[gX]
type = ChangeState
triggerall = Movehit
trigger1 = AnimElem = 9
value = 2710

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 2710]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2710
ctrl     = 0
sprpriority = 3

[State 2000]
type = AssertSpecial
trigger1 = Anim = 2710
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 4
value = s5,5

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 15
value = s9,26

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 31
value = s18,6

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 31
value = s5,4

[State a]
type = EnvShake
trigger1 = AnimElem = 31
time = 16
freq = 40
ampl = -8

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 30
persistent = 0
anim = 2355
postype = P1
pos = 15,35
sprpriority = 10
removetime = 20
bindtime = -1

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
attr = S, HA
getpower = 0
damage = 10
animtype = Hard
hitflag = MAF
priority = 5, Hit
pausetime = 4, 3
sparkno = 6
sparkxy = 0,-100
hitsound = s1,6
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4
air.type = High
air.velocity = -4,-4
air.hittime = 20
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
p2stateno = 2721
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
getpower = 0
damage = 10
animtype = diagup
hitflag = MAF
priority = 5, Hit
pausetime = 2, 15
sparkno = 6
sparkxy = 0, -100
hitsound = s1,6
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5
air.type = High
air.velocity = 0,-8
air.hittime = 20
air.cornerpush.veloff = 0
yaccel = .25
fall = 1
fall.recover = 0
palfx.time = 90
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
envshake.time = 15
envshake.ampl = 12
envshake.freq = 90
p2stateno = 2722
kill = 0

[State 3000]
type = Projectile
trigger1 = AnimElem = 31
projID = 2300
projanim = 2360
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projsprpriority = 10
projshadow = 0,0,0
projremovetime = 36
getpower = 0
ownpal = 0
offset = 53,0
velocity = 0,0
attr = S, HP
animtype = Hard
damage = 60,6
hitflag = MAF
hitsound = s1,11
pausetime = 0,8
sparkno = 2
sparkxy = 40,-100
ground.type = High
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -5,-10
air.juggle = 0
air.velocity = -5,-10
fall = 1
palfx.time = 70
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1
p2stateno = 2320
p2facing = 1

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 2720]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = 0
y = 0

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 2
x = -2
y = -5

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(2) >= 0
y = .4

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2720+var(55)*30000

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;
[Statedef 2721]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = 0
y = 0

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 2
x = -4
y = -4

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(2) >= 0
y = .4

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2721+var(55)*30000

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;
[Statedef 2722]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = Veladd
trigger1 = time = 0
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = time = 15
x = 0
y = -7.8

[State 52, 1]
type = Veladd
trigger1 = time >= 15
y = .24

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = SelfAnimExist(5052+var(55)*30000)
value = 5052+var(55)*30000

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = !SelfAnimExist(5052+var(55)*30000)
value = 5050+var(55)*30000

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100


;---------------------------------------------------------------------------
; QSEZE娣(ver)w^x

[Statedef 2750]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2750
ctrl     = 0
sprpriority = 8

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
;追加超杀
[state a]
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,0,-1000)

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7000
supermovetime = 30
pos = 25,-105

[State 2000]
type = AssertSpecial
trigger1 = Anim = 2750
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 1
value = s7,19

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 5
value = s5,5

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
getpower = 0
damage = 10
animtype = Hard
hitflag = MAF
priority = 5, Hit
pausetime = 1, 40
sparkno = 6
sparkxy = 0, -95
hitsound = s1,6
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2
air.type = High
air.velocity = -2,-5
air.hittime = 60
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
envshake.time = 25
envshake.ampl = 10
envshake.freq = 90
p2stateno = 2720
kill = 0

[State 1000, Xe[gX]
type = ChangeState
triggerall = Movehit
trigger1 = AnimElem = 9
value = 2760

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 2760]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 12760
ctrl     = 0
sprpriority = 3

[State 2000]
type = AssertSpecial
trigger1 = Anim = 12760
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 3
value = s5,5

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 13
value = s7,20

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 29
value = s18,6

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 29
value = s5,4

[State a]
type = EnvShake
trigger1 = AnimElem = 29
time = 16
freq = 40
ampl = -8

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 28
persistent = 0
anim = 2355
postype = P1
pos = 15,35
sprpriority = 10
removetime = 20
bindtime = -1

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
attr = S, HA
getpower = 0
damage = 10
animtype = Hard
hitflag = MAF
priority = 5, Hit
pausetime = 4, 3
sparkno = 6
sparkxy = 0,-120
hitsound = s1,6
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4
air.type = High
air.velocity = -4,-4
air.hittime = 20
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
p2stateno = 2721
kill = 0

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
getpower = 0
damage = 10
animtype = diagup
hitflag = MAF
priority = 5, Hit
pausetime = 2, 15
sparkno = 6
sparkxy = 0, -100
hitsound = s1,6
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5
air.type = High
air.velocity = 0,-8
air.hittime = 20
air.cornerpush.veloff = 0
yaccel = .25
fall = 1
fall.recover = 0
palfx.time = 90
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
envshake.time = 15
envshake.ampl = 12
envshake.freq = 90
p2stateno = 2722
kill = 0

[State 3000]
type = Projectile
trigger1 = AnimElem = 29
projID = 2300
projanim = 2360
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projsprpriority = 10
projshadow = 0,0,0
projremovetime = 36
getpower = 0
ownpal = 0
offset = 53,0
velocity = 0,0
attr = S, HP
animtype = Hard
damage = 60,6
hitflag = MAF
hitsound = s1,11
pausetime = 0,8
sparkno = 2
sparkxy = 40,-100
ground.type = High
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -5,-10
air.juggle = 0
air.velocity = -5,-10
fall = 1
palfx.time = 70
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1
p2stateno = 2320
p2facing = 1

[State 1000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------

[Statedef 2920]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 2920

;---------------------[GtFNg]
[State a]
type = EnvColor
trigger1 = movehit
persistent = 0
ignorehitpause = 1
time = 1
value = 255,255,255
under = 2

;---------------------[U]
[State a]
type = HitDef
trigger1 = time = 0
attr = A, HP
animtype  = hard
damage    = 0,0
getpower = 0,0
hitflag = MAFLD
guardflag = L
pausetime = 14,15
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-13
hitsound = -1
guardsound = s2,4
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = -11
air.velocity = -8
air.fall = 1
fall.recover = 0
p2facing = 1
id = 9999
p2stateno = 2922
kill = 0
palfx.time = 65
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1

;---------------------[G]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

;---------------------[Xe[gs]
[state a]
type = destroyself
trigger1 = animtime = 0

;(ENEMY)nEd
[Statedef 2922]
type    = S
movetype= H
physics = S
velset = 0,0

[State 52, 1]
type = Hitfallset
trigger1 = 1
value = 0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0


;---------------------[o]
[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2922+var(55)*30000

;---------------------[Xe[gs]
[State 821, 3]
type = SelfState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 3000]
type     = S
movetype = A
physics  = S
juggle   = 8
velset   = 0,0
anim     = 3001
ctrl     = 0
sprpriority = 2

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
id = 7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[state a];POWER消耗
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,-1000,-2000)

[State a];取消连闪光
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 34
time = 34
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7100
supermovetime = 30
pos = 30,-60

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 5
value = s5,0

[State 1950]
type = HitDef
trigger1 = AnimElem = 6
attr = S,HT
getpower = 0
damage = 0,0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 0,0
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-65
hitsound = s1,1
guardsound = s2,4
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 3010
p2stateno = 3020

[State 1000, Xe[gX]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QSEEgU

[Statedef 3010]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3010
ctrl     = 0
sprpriority = 5

[State 810, IL]
type = Width
trigger1 = time = 0
edge = 150,0

[State 1000, u]
type = Velset
trigger1 = time = 0
x = 0

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 1
persistent = 0
anim = F62
postype = P1
pos = 70,0
sprpriority = 10
bindtime = -1

[State 1100, GtFNg\]
type = Explod
triggerall = StageVar(info.author) = "water"
anim = f23
trigger1 = AnimElem = 1
persistent = 0
postype = P1
pos = 70,0
sprpriority = 10
bindtime = -1

[State 1100, GtFNg\]
type = Explod
triggerall = StageVar(info.author) = "water"
anim = f24
trigger1 = AnimElem = 1
persistent = 0
postype = P1
pos = 60,0
sprpriority = 10
bindtime = -1

[State 1100, GtFNg\]
type = Explod
triggerall = StageVar(info.author) = "water"
anim = f24
facing = -1
trigger1 = AnimElem = 1
persistent = 0
postype = P1
pos = 80,0
sprpriority = 10
bindtime = -1

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 1
pos = 65, -25

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 2
pos = 70, -10

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = 75, -13

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 4
pos = 75, -30

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 5
pos = 75, -50

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 6
pos = 72, -70

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 7
pos = 72, -90

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 8
pos = 90, -108

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 9
pos = 90, -110

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 10
pos = 85, -118

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 45
pos = 62, -25

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = -100
kill = 0

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 17
value = -50
kill = 0

[State 810,]
type = EnvShake
trigger1 = AnimElem = 1
ampl = 12
freq = 120
time = 15

[State 810,]
type = EnvShake
trigger1 = AnimElem = 17
ampl = 3
freq = 100
time = 5

[State 810,]
type = EnvShake
trigger1 = AnimElem = 20
ampl = 2
freq = 100
time = 63

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2,0

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 15
value = 5,0

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 1
value = s0,15

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 45
value = s0,24

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 45
value = s1,7

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 17
value = 17,0

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 1
value = 9,18

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 45
value = 9,16

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(15) > 0 && AnimElemtime(53) < 0
flag = noshadow

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 15
time = 148
value = 210,0,0
under = -1

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(24) < 0
flag = noBG

[State 2100]
type = Hitadd
trigger1 = AnimElem = 17
value = 1

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 45
attr = S, HA
damage = 200
getpower = 0
animtype = up
hitflag = MAF
priority = 3, Hit
pausetime = 0,30
sparkno = -1
hitsound = -1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-7
air.velocity = -4,-7
air.type = High
air.hittime = 12
fall = 1
fall.recover = 0
envshake.time = 26
envshake.ampl = 14
envshake.freq = 80

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 3020]
type    = S
movetype= H
physics = N
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2120]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(11) > 30
flag = noshadow

[State 2100,]
type = Palfx
trigger1 = AnimElemtime(11) = 20
add = -100,-255,-255
time = 150

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3020+var(55)*30000

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 5130


;---------------------------------------------------------------------------
; O_ZV

[Statedef 3100]
type     = S
movetype = A
physics  = S
juggle   = 8
velset   = 0,0
anim     = 3000
ctrl     = 0
sprpriority = 2

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
id = 7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[state a];POWER消耗
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,-1000,-2000)

[State a];取消连闪光
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 34
time = 34
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7100
supermovetime = 30
pos = 30,-60

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 5
value = s20,0

[State 1500,]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 40

[State 1950]
type = HitDef
trigger1 = AnimElem = 6
attr = S,HT
getpower = 0
damage = 0,0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 0,0
sparkno = 2
guard.sparkno = 42
sparkxy = -15,-65
hitsound = s1,1
guardsound = s2,4
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 3110
p2stateno = 3120

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 6
persistent = 0
anim = 1405
postype = P1
pos = 85,-60
sprpriority = 10
removetime = 23

[State 1000, Xe[gX]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; O_ZV

[Statedef 3110]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3100
ctrl     = 0
sprpriority = 5

[State 810, IL]
type = Width
trigger1 = time = 0
edge = 140,0

[State 1000, u]
type = Velset
trigger1 = time = 0
x = 0

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElem = 1
persistent = 0
anim = 3120
postype = P1
pos = 70,-5
sprpriority = 10
bindtime = -1

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElemtime(10) = 1
persistent = 0
anim = 3150
postype = P1
pos = 79,0
sprpriority = 10

[State 1100, GtFNg\]
type = Explod
trigger1 = AnimElemtime(14) = 2
persistent = 0
anim = 3160
postype = P1
pos = 80,0
sprpriority = 10

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 1
pos = 65, -25

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 2
pos = 70, -10

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = 75, -13

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 4
pos = 75, -30

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 5
pos = 75, -50

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 6
pos = 72, -70

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 7
pos = 72, -90

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 8
pos = 90, -108

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 9
pos = 90, -110

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 10
pos = 85, -118

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 58
pos = 62, -25

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = -100
absolute = 1
kill = 0

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 14
trigger2 = AnimElem = 16
trigger3 = AnimElem = 19
trigger4 = AnimElem = 21
trigger5 = AnimElem = 24
trigger6 = AnimElem = 26
trigger7 = AnimElem = 29
trigger8 = AnimElem = 31
trigger9 = AnimElem = 34
trigger10 = AnimElem = 36
trigger11 = AnimElem = 39
trigger12 = AnimElem = 41
trigger13 = AnimElem = 44
trigger14 = AnimElem = 46
trigger15 = AnimElem = 49
trigger16 = AnimElem = 51
trigger17 = AnimElem = 54
value = -9
kill = 0

[State 810,]
type = EnvShake
trigger1 = AnimElem = 1
ampl = 12
freq = 120
time = 15

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2,0

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1,4

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 11
value = 7,27
channel = 4

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 10
value = 18,5

[State 200, ]
type = PlaySnd
trigger1 = AnimElem = 58
value = 18,6

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(10) > 0 && AnimElemtime(58) < 0
flag = noshadow

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(10) >= 0 && AnimElemtime(58) < 0
flag = noBG

[State 200, qbg`]
type = HitDef
trigger1 = AnimElem = 58
attr = S, HA
damage = 100
getpower = 0
animtype = Diagup
numhits = 0
hitflag = MAF
priority = 3, Hit
pausetime = 0,5
sparkno = -1
hitsound = -1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6,-7.5
air.velocity = -6,-7.5
air.type = High
air.hittime = 12
fall = 1
fall.recover = 0
palfx.time = 70
palfx.add = 0,-50,80
palfx.sinadd = 50,50,50,15
palfx.color = 1
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 7
envshake.freq = 80

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 15
trigger2 = AnimElem = 24
trigger3 = AnimElem = 27
trigger4 = AnimElem = 42
trigger5 = AnimElem = 48
trigger6 = AnimElemtime(56) = 1
trigger7 = AnimElemtime(56) = 2
trigger8 = AnimElemtime(57) = 1
trigger9 = AnimElemtime(58) = 1
trigger10 = AnimElemtime(58) = 4
time = 1
value = 255,255,255
under = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 3120]
type    = S
movetype= H
physics = N
velset = 0,0

[State 700,]
type = Palfx
trigger1 = AnimElem = 11
time = 300
add = 0,-50,80
sinadd = 50,50,50,15
color = 1
invertall = 1

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2120]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3110+var(55)*30000

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 5300

[Statedef 3200]
type     = S
movetype = A
physics  = S
juggle   = 8
velset   = 0,0
anim     = 3200
ctrl     = 0
sprpriority = 2

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
id = 7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[state a];POWER消耗
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,-1000,-2000)

[State a];取消连闪光
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 1500,]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 50

[State 2000, KEZ~]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 36
time = 36
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 0
stateno = 7100
supermovetime = 30
pos = 5,-110

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 2000,]
type = PlaySnd
triggerall = anim = 3200
trigger1 = AnimElem = 3
value = s7,36

[State 3000, u]
type = VelSet
triggerall = anim = 3200
triggerall = var(55)=0
trigger1 = AnimElem = 11,>=0
x = 9

[State 3000, u]
type = VelSet
triggerall = anim = 3200
triggerall = var(55)=1
trigger1 = AnimElem = 11,>=0
x = 12

[State 1950]
type = HitDef
triggerall = anim = 3200
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 0,0
numhits = 0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 1,2
sparkno = 6
guard.sparkno = 42
sparkxy = -10,-40
hitsound = s1,6
guardsound = s2,4
guard.velocity = -5
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 3210

[State 3000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = MoveGuarded
value = 3205

[Statedef 3205]
type     = S
movetype = I
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3205+(var(55)*1)
ctrl     = 0
sprpriority = 2

[State 3000, u]
type = VelSet
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(3) <= 0
x = 4

[State 3000, u]
type = VelSet
trigger1 = AnimElem = 4
x = 0

[State 3000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 3210]
type = S
movetype = A
physics = S
anim = 3210+(var(55)*1)

[State 1020, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 1
length = 10
palbright = 60,60,60
palconstrast = 90,90,160
palpostbright = 0,0,60
paladd = 4,4,16
palmul = .7,.7,.85
trans = add1

[State 2210, 19]
type = targetstate
trigger1 = Time = 0
value = 3216

[State 1000, 2]
type = Width
trigger1 = AnimElem = 1, >= 0
value = 60,0

[State 1360, Bind1]
type = TargetBind
trigger1 = animelem = 1
pos = 40,0

[State 1360, Bind1]
type = TargetBind
trigger1 = animelem = 8
pos = 5,0

[State 1360, Bind1]
type = TargetBind
trigger1 = animelem = 9
pos = 0,0

[State 8110, 4]
type = VelSet
trigger1 = AnimElem = 1
x = 0

[State 1270, 9]
type = PlaySnd
trigger1 = AnimElem = 5
value = s7,37
;channel = 20

[State 2210, 3]
type = PlaySnd
trigger1 = AnimElem = 24;27
value = 7,38

[State 2210, 2]
type = PlaySnd
trigger1 = Animelem = 8 || Animelem = 15 || Animelem = 19
value = s1,6

[State 2210, 2]
type = PlaySnd
trigger1 = Animelem = 23
trigger2 = Animelem = 23,3
value = s1,6

[State 2210, 2]
type = PlaySnd
trigger1 = Animelem = 44 || Animelem = 54 || Animelem = 64
value = s0,15
volume = 0

[State 3000,1]
type = Explod
trigger1 = Animelem = 8
anim = f5;+random%2
postype = p1
pos = 45,-55
sprpriority = 3
supermove = 2
Bindtime = 1
ownpal = 1

[State 3000,1]
type = Explod
trigger1 = Animelem = 8
anim = f6
postype = p1
pos = 40,-65
sprpriority = 3
supermove = 2
Bindtime = 1
ownpal = 1
ontop = 1
facing = -1

[State 3000,1]
type = Explod
trigger1 = Animelem = 15 || Animelem = 23
anim = f5;+random%2
postype = p1
pos = 25,-25
sprpriority = 3
supermove = 2
Bindtime = 1
ownpal = 1

[State 3000,1]
type = Explod
trigger1 = Animelem = 19 || Animelem = 23
anim = f5;+random%2
postype = p1
pos = -35,-25
sprpriority = 3
supermove = 2
Bindtime = 1
ownpal = 1
ontop = 1

[State 3000,1]
type = Explod
trigger1 = Animelem = 15 || Animelem = 23
anim = f2
postype = p1
pos = 25,-50
sprpriority = 3
supermove = 2
Bindtime = 1
ownpal = 1

[State 3000,1]
type = Explod
trigger1 = Animelem = 19 || Animelem = 23
anim = f2
postype = p1
pos = -35,-50
sprpriority = 3
supermove = 2
Bindtime = 1
ownpal = 1
facing = -1

[State 1425, 6]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Animelem = 44 || Animelem = 54 || Animelem = 64
anim = F62
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1
ownpal = 1

[State 1100, GtFNg\]
type = Explod
triggerall = StageVar(info.author) = "water"
anim = f23
trigger1 = Animelem = 44 || Animelem = 54 || Animelem = 64
postype = P1
pos = 0,0
sprpriority = -2
bindtime = -1

[State 1100, GtFNg\]
type = Explod
triggerall = StageVar(info.author) = "water"
anim = f24
trigger1 = Animelem = 44 || Animelem = 54 || Animelem = 64
postype = P1
pos = -10,0
sprpriority = -2
bindtime = -1

[State 1100, GtFNg\]
type = Explod
triggerall = StageVar(info.author) = "water"
anim = f24
facing = -1
trigger1 = Animelem = 44 || Animelem = 54 || Animelem = 64
postype = P1
pos = 10,0
sprpriority = -2
bindtime = -1

[State 903, 11]
type = TargetpowerAdd
trigger1 = Animelem = 8 || Animelem = 15 || Animelem = 19 || Animelem = 23 || Animelem = 44 || Animelem = 54 || Animelem = 64
value = 20

[State 1105, 3]
type = HitAdd
trigger1 = Animelem = 8 || Animelem = 15 || Animelem = 19 || Animelem = 23 || Animelem = 44 || Animelem = 54 || Animelem = 64
value = 1

[State 1105, 3]
type = HitAdd
trigger1 = Animelem = 27,>=0
trigger2 = Animelem = 32,<0
value = 0

[State 1105, 3]
type = EnvColor
trigger1 = time = 0
trigger2 = Animelem = 8,1
trigger3 = Animelem = 15,1
trigger4 = Animelem = 19,1
trigger5 = Animelem = 23,1
trigger6 = Animelem = 44,1
trigger7 = Animelem = 54,1
trigger8 = Animelem = 64,1
value = 255,255,255
under = 1
time = 1

[State 2355, 10]
type = AssertSpecial
trigger1 = time = 0
trigger2 = Animelem = 8,1
trigger3 = Animelem = 15,1
trigger4 = Animelem = 19,1
trigger5 = Animelem = 23,1
trigger6 = Animelem = 44,1
trigger7 = Animelem = 54,1
trigger8 = Animelem = 64,1
flag = NoFG
time = 1
ignorehitpause = 1

[State 903, 11]
type = TargetLifeAdd
trigger1 = Animelem = 15
trigger2 = Animelem = 19
trigger3 = Animelem = 23
trigger4 = Animelem = 44
trigger5 = Animelem = 54
trigger6 = Animelem = 64
value = -30
kill = 0

[State 903, 11]
type = TargetLifeAdd
trigger1 = Animelem = 65
value = -200
kill = 1

[State 0, VarSet]
type = VarSet
trigger1 = Animelem = 65
var(40)=300

[State 2210, 19]
type = targetstate
trigger1 = Animelem = 15
trigger2 = Animelem = 19
trigger3 = Animelem = 23
trigger4 = Animelem = 44
trigger5 = Animelem = 54
value = 3217

[State 4000, 2]
type = targetstate
trigger1 = AnimElem = 65
value = 3218

[State 2210, 2]
type = PlaySnd
trigger1 = AnimElem = 65
value = s1,9
volume = 0
channel = 20

[State 183, 3]
type = EnvShake
trigger1 = AnimElem = 44 || AnimElem = 54 || AnimElem = 64
ignorehitpause = 1
freq = 170
ampl = 7
phase = 170
time = 20

[State 2210, 19]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------  Lv.2 \SEEt[QPP]  ------
[Statedef 3216]
type    = S
movetype= H
physics = S
ctrl = 0

[State 1100, 5]
type = PlayerPush
trigger1 = 1
value = 0

[State 2200, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1452, 1]
type = PosSet
trigger1 = Time > 0
y = 0

[State 1452, 1]
type = Posadd
trigger1 = AnimElem = 5
x = 20

[State 1105, 3]
type = Changeanim2
trigger1 = time = 1
value = 3216+var(55)*30000

;------  Lv.2 \SEEt[QPP]  ------
[Statedef 3217]
type    = S
movetype= H
physics = S
ctrl = 0

[State 1100, 5]
type = PlayerPush
trigger1 = 1
value = 0

[State 2200, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1452, 1]
type = PosSet
trigger1 = Time > 0
y = 0

[State 1105, 3]
type = Changeanim2
trigger1 = time = [0,6]
value = 3217+var(55)*30000

[State 1105, 3]
type = Changeanim2
trigger1 = time >= 7
value = 3218+var(55)*30000

;------  Lv.2 \SEEt[QPQ]  ------
[Statedef 3218]
type = A
movetype = H
physics = N

[State 1360, Turn]
type = Turn
trigger1 = time = 0

[State 9000, 1]
type = PalFX
trigger1 = 1
time = 50
add = 0,-50,80
sinadd = 50,50,50,15
color = 1
invertall = 1

[State 210, 3]
type = PosAdd
trigger1 = time = 0
X = 20
y = 17

[State 1370, Anim]
type = ChangeAnim
trigger1 = time = 0
value = 5160+var(55)*30000

[State 1420, Velocity]
type = VelSet
trigger1 = time = 0
y = -6
x = 4

[State 1525, 4]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 1370, Sprite2]
type = SprPriority
trigger1 = time >= 0
value = 1

[State 2160, 33]
type = Explod
trigger1 = Pos Y >= 10 && Vel Y > 0
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1
ownpal = 1

[State 3000,1]
type = Explod
trigger1 = Vel Y > 0 && Pos Y >= 10
anim = F60
postype = p1
pos = -30,3
sprpriority = 3
supermove = 2
Bindtime = 1
ownpal = 1

[State 1420, State]
type = SelfState
trigger1 = Pos Y >= 10 && Vel Y > 0
value = 5100

;---------------------------------------------------------------
; Red BG
[Statedef 3245]
type = S

[State 9000, 1]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
var(0) = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time <= 16
var(0) = 16

[State 0, VarAdd]
type = VarAdd
trigger1 = time > 56
trigger1 = time <= 72
var(0) = -16

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time >= 0
trigger1 = time <= 72
time = 1
add = var(0),0,0
mul = 256,256,256
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 72

[Statedef 3400]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 8
poweradd= 0
anim = 3400
ctrl = 0
sprpriority = 1

[state turn]
type = turn
trigger1 = p2dist x < 0
trigger1 = time = 0

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
id = 7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
id = 7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[state a];POWER消耗
type = poweradd
trigger1 = time = 0
value = ifelse(fvar(30) > 0,-1000,-2000)

[State a];取消连闪光
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[state nothitby]
type = nothitby
trigger1 = animelem = 11,<0
value = SCA
time = 1

[state removeexplod]
type = removeexplod
trigger1 = time = 0
id = 3000

[State superpause]
type = superpause
trigger1 = time = 1
time = 32
movetime = 32
anim = -1
darken = 0

[State 3000, 1]
type = Helper
trigger1 = time = 1
stateno = 7100
supermovetime = 32
pos = 5,-40

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[state helper]
type = Helper
trigger1 = time = 0
id = 3408
name = "bg"
pos = 0,0
postype = p1
stateno = 3408
helpertype = normal
supermovetime = 999999
ownpal = 1

[state helper]
type = Helper
trigger1 = animelem = 11
id = 3405
name = "bg"
pos = 0,0
postype = p1
stateno = 3406
helpertype = normal
supermovetime = 999999
ownpal = 1

;---------------------[]
[State a]
type = PlaySnd
trigger1 = time = 0
value = s8,40+random%2

[State a]
type = PlaySnd
trigger1 = animelem = 8
value = s18,12
;---------------------[]
[state a]
type = posadd
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
x = 15

[state a]
type = posadd
trigger1 = animelem = 9
x = -8

[state a]
type = posadd
trigger1 = animelem = 10
x = -16

[state a]
type = posadd
trigger1 = animelem = 11
x = -16

[state a]
type = posadd
trigger1 = animelem = 15
x = -16

[state a]
type = posadd
trigger1 = animelem = 16
x = -16

;---------------------[GtFNg]
[State explod]
type = explod
trigger1 = animelem = 5
anim = 3415
sprpriority = 10
postype = p1
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
;scale = 0.5,0.5

[State explod]
type = explod
trigger1 = animelem = 7
anim = 13410
id = 2500
sprpriority = 20
postype = p1
pos = 120,0
bindtime = 13
under = 0
ownpal = 1
scale = 0.47,0.47

[State -2, sparkxy]
type = explod
trigger1 = movehit = 1
persistent = 0
anim = f6
bindtime = 1
pos = 0,-40
postype = P2
sprpriority = 2
ownpal = 1
persistent = 0

[State -2, sparkxy]
type = explod
trigger1 = moveGuarded = 1
persistent = 0
anim = f42
bindtime = 1
pos = 0,-40
postype = P2
sprpriority = 2
ownpal = 1
persistent = 0
;---------------------[U]
[State 210, 2]
type = HitDef
triggerall = enemynear,stateno != [5040,5049]
trigger1 = animelem = 9
attr = S, HA
animtype  = hard
damage    = 100,10
priority = 5, Hit
getpower = 0,0
guardflag = M
pausetime = 2,3
sparkno = s-1
sparkxy = -12,-90
hitsound   = s1,7
guardsound = s2,4
guard.sparkno = s-1
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4.2,-9.5
air.velocity = -4.2,-9.5
air.hittime  = 120
yaccel = 0.55
fall = 1
fall.recover = 0
ID = 200
nochainID = 9999
p1stateno = 3420
palfx.time = 27
palfx.add = -256,-256,-256

[State 210, 2]
type = HitDef
triggerall = enemynear,stateno != [5040,5049]
trigger1 = animelem = 10
trigger2 = animelemtime(10) = 1
trigger3 = animelemtime(10) = 2
trigger4 = animelem = 11
trigger5 = animelemtime(11) = 1
trigger6 = animelemtime(11) = 2
attr = S, HA
animtype  = hard
damage    = 80,8
priority = 5, Hit
getpower = 0,0
guardflag = M
pausetime = 2,3
sparkno = s-1
sparkxy = -12,-90
hitsound   = s1,7
guardsound = s2,4
guard.sparkno = s-1
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4.2,-9.5
air.velocity = -4.2,-9.5
air.hittime  = 120
yaccel = 0.55
fall = 1
fall.recover = 0
ID = 200
nochainID = 9999

;---------------------[]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; SEE@G
[Statedef 3420]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
poweradd= 0
anim = 3420
ctrl = 0
sprpriority = 1

;---------------------[G]
[state nothitby]
type = nothitby
trigger1 = 1
value = SCA
time = 1

;---------------------[KEZo]
[state helper]
type = Helper
trigger1 = time = 0
id = 3405
name = "bg"
pos = 0,0
postype = p1
stateno = 3407
helpertype = normal
supermovetime = 999999
ownpal = 1

[State envshake]
type = EnvShake
trigger1 = time = 0
time = 16
ampl = -14
freq = 75
phase = 75

[State palfx];
type = palfx
trigger1 = time <= 32
time = 1
add = -256,-256,-256
ignorehitpause = 1

;---------------------[]
[state a]
type = posadd
trigger1 = animelem = 1
x = -8

[state a]
type = posadd
trigger1 = animelem = 2
x = -16

[state a]
type = posadd
trigger1 = animelem = 3
x = -16

[state a]
type = posadd
trigger1 = animelem = 7
x = -16

[state a]
type = posadd
trigger1 = animelem = 8
x = -16

;---------------------[GtFNg]
[State removeexplod]
type = removeexplod
trigger1 = animelem = 1
id = 2500

[State explod]
type = explod
trigger1 = animelem = 1
anim = 3425
sprpriority = 20
postype = p1
pos = 120,0
bindtime = 4
under = 0
ownpal = 1
scale = 0.5,0.5
;trans = addalpha
;alpha = 0,0
scale = 0.47,0.47

[State -2, sparkxy]
type = explod
trigger1 = movehit = 1
persistent = 0
anim = f6
bindtime = 1
pos = 0,-40
postype = P2
sprpriority = 2
ownpal = 1
persistent = 0

[State -2, sparkxy]
type = explod
trigger1 = moveGuarded = 1
persistent = 0
anim = f42
bindtime = 1
pos = 0,-40
postype = P2
sprpriority = 2
ownpal = 1
persistent = 0


;---------------------[U]
[State 210, 2]
type = HitDef
triggerall = enemynear,stateno != [5040,5049]
trigger1 = animelemtime(2) = 1
trigger2 = animelemtime(2) = 2
trigger3 = animelem = 3
trigger4 = animelemtime(3) = 1
trigger5 = animelemtime(3) = 2
attr = S, HA
animtype  = hard
damage    = 80,8
priority = 5, Hit
getpower = 0,0
guardflag = M
pausetime = 2,3
sparkno = s-1
sparkxy = -12,-90
hitsound   = s1,7
guardsound = s2,4
guard.sparkno = s-1
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4.2,-9.5
air.velocity = -4.2,-9.5
air.hittime  = 120
yaccel = 0.55
fall = 1
fall.recover = 0
ID = 200
nochainID = 9999
palfx.time = 27
palfx.add = -256,-256,-256

;---------------------[]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1



;----------------------------------------------------------------------------
;(HELPER)wi
[Statedef 3406]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 128

[state varadd]
type = varadd
trigger1 = time > 24
var(55) = -4

;---------------------[o]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = var(55),floor(-var(55)*0.5),floor(-var(55)*0.5)
invertall = 0
color = 256 - floor(var(55)*0.5)

;---------------------[]
[state destroyself]
type = destroyself
trigger1 = time >= 2
trigger1 = var(55) <= 0


;----------------------------------------------------------------------------
;(HELPER)wi
[Statedef 3407]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 256

[state varadd]
type = varadd
trigger1 = time > 32
var(55) = -4

;---------------------[o]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = var(55),floor(-var(55)*0.5),floor(-var(55)*0.5)
invertall = 0
color = 256 - floor(var(55)*0.5)

;---------------------[]
[state destroyself]
type = destroyself
trigger1 = time >= 2
trigger1 = var(55) <= 0

[Statedef 3408]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 256

[state varadd]
type = null;varadd
trigger1 = time > 40
var(55) = -8

;---------------------[o]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = -var(55),-var(55),-var(55)
invertall = 0
color = 256 - var(55)

[State assertspecial]
type = assertspecial
trigger1 = var(55) = 256
flag = NoBG
flag2 = NoFG

;---------------------[]
[state changestate]
type = changestate
trigger1 = root,stateno != [3400,3499]
trigger2 = root,movetype = H
value = 3409

[state destroyself]
type = destroyself
trigger1 = root,stateno = 3400
trigger1 = root,animelem = 11
trigger2 = root,stateno = 3420


;----------------------------------------------------------------------------
;(HELPER)NEO MAXKE
[Statedef 3409]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 256

[state varadd]
type = varadd
trigger1 = 1
var(55) = -8

;---------------------[o]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = -var(55),-var(55),-var(55)
invertall = 0
color = 256 - var(55)

;---------------------[]
[state destroyself]
type = destroyself
trigger1 = var(55) <= 0

;======================================================================
; T焰
;======================================================================
[Statedef 3500]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 3500
sprpriority = 2
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;----------------------------------------
[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24301
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;----------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
;---------------------[3星必杀消耗]
[state a];POWER消耗
type = poweradd
trigger1 = time = 0
value = -2000

[State a];取消连闪光
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

;---------------------[3星必杀消耗]

;-----------------------------------------------
[State a];SC/DC 取消1技gc
type = VarAdd
trigger1 = prevstateno = [1000,3999]
fvar(29) = -1000
persistent = 0

[State 3000, 1]
type = SuperPause
trigger1 = AnimElem = 1
time = 30
movetime = 30
anim = -1
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 43
under = 1
supermove = 1

[State 3000, 1]
type = Helper
trigger1 = AnimElem = 2
stateno = 7200
supermovetime = 40
pos = 10,-60

[State 3600]
type = statetypeset
trigger1 = AnimElemTime(6) = 0
StateType = A
physics = N

[State 3600]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0,Explod]
type = Explod
trigger1 = time=8
anim = f3550
postype = P1
pos = -5,0
sprpriority = 7
supermove = -1
supermovetime = 99999
bindtime = -1
ownpal = 1
scale = 0.48,0.48
ID = 3000

[State 4000, Explod]
type = Explod
trigger1 = AnimElem = 6, = 15
anim = f3551
postype = P1
pos = -5,0
sprpriority = 7
supermove = -1
supermovetime = 99999
bindtime = -1
ownpal = 1
scale = 0.48,0.48
ID = 3000

[State 1000, AfterImage]
type = AfterImage
trigger1 = animelem = 8
time = 2
length = 11
timegap = 1
paladd = 60,20,100
PalContrast = 220,200,350
palcolor = 0
framegap = 3

[State 3000, fterimagetime]
type = Afterimagetime
trigger1 = gametime%2 = 0
time = 2

[State 3600]
type = VelSet
trigger1 = AnimElemTime(8) = 0
x = 10
y = -5

[State 1000, HitBy]
type = HitBy
trigger1 = AnimElemTime(8) > 0
value = SA,HA,NP,HP,NT,ST,HT

[State 3600]
type = VelAdd
trigger1 =  AnimElemTime(10) >= 0
y = .7

[State Snd]
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = s7,23

[State Snd]
type = PlaySnd
trigger1 = AnimElemTime(10) = 0
value = f40,0

[State 1950]
type = HitDef
trigger1 = Time = 0
attr = S, HA
getpower = 0,0
damage = 0,0
animtype = hard
hitflag = MAF
guardflag = -1
priority = 3
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = s1,8
guardsound = -1
guard.velocity = -12
ground.type = low
ground.slidetime = 30
ground.hittime = 15
ground.velocity = -7,-6
air.velocity = -7,-6
p2facing = 1
fall.recover = 0
fall = 1
id = 2000
numhits = 0

[State 1000, movehitreset]
type = movehitreset
triggerall = movehit > 0
trigger1 = numtarget(2000) = 0
trigger2 = numtarget(2000) > 0
trigger2 = target(2000),stateno != 5000 && target(2000),stateno != 5020

[State 1000, p2GCRUSH]
type = targetstate
trigger1 = movehit
persistent = 0
ignorehitpause = 1
value = 3530
ctrl = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = movehit
persistent = 0
ignorehitpause = 1
value = 3520
ctrl = 0

[State 3600]
type = ChangeState
triggerall = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(10) >= 0
value = 3510
ctrl = 1

;---------------------------------------------------------------------------
; Failed
[Statedef 3510]
type    = S
movetype= A
physics = S
poweradd= 0
juggle = 0
ctrl = 0
velset = 0,0
anim = 3510
sprpriority = 2

[State 3610]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3610]
type = HitDef
trigger1 = AnimElem = 1
attr = S, ST
animtype = Hard
damage = 0,0
priority  = 4, Hit
hitflag = MAF
guardflag =
pausetime = 1,1
sparkno = 9
guard.sparkno = 42
sparkxy = -15, -56
hitsound   = s1,8
guardsound = s2,4
ground.type = High
ground.slidetime = 18
ground.hittime  = 19
ground.velocity = -7
air.velocity = -3,-4
air.fall = 1
yaccel = .45
p1stateno = 3520
p2facing = 1

[State 3610]
type = PosAdd
trigger1 = AnimElemTime(5) = 0 || AnimElemTime(6) = 0
x = -10

[State 3610]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Blast!
[Statedef 3520]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3520
sprpriority = 3

[State 4000, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = f3552
postype = P1
pos = 18,15
sprpriority = 7
supermove = -1
supermovetime = 99999
bindtime = -1
ownpal = 1
scale = 0.48,0.48
ID = 3000

[State 3620]
type = TargetState
trigger1 = Time = 0
value = 3530

[State 1000, u]
type = Posset
trigger1 = time = 0
y = 0

[State 1000, u]
type = Velset
trigger1 = AnimElem = 1
x = 0

[State 3620]
type = EnvShake
trigger1 = AnimElemTime(2) = 0
ampl = 4
freq = 120
time = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = s9,27

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = s3520,0

[State 3620]
type = Width
trigger1 = AnimElemTime(5) < 0
edge = 60,0

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(5) < 0
pos = 70,-5

[State 3620]
type = EnvShake
trigger1 = AnimElemTime(3) = 0
ampl = 20
freq = 80
time = 20

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 4010, BGPalFX]
type = BGPalFX
trigger1 = AnimElemTime(5) <= 0
time = 2
mul = 170,0,10
invertall = 1
ignorehitpause = 1

[state helper]
type = Helper
trigger1 = AnimElem = 5
id = 6005
name = "bg"
pos = 0,0
postype = p1
stateno = 6007
helpertype = normal
supermovetime = 999999
ownpal = 1

[State 0, 连击数值增加]
type = HitAdd
trigger1 = AnimElem = 5
value = 1
;ignorehitpause =
;persistent =

[State 4010, E.Shake]
type = EnvShake
trigger1 = AnimElem = 5
Time = 15
ampl = -60
freq = 255
phase = 10

[State 4010, E.Shake]
type = EnvShake
trigger1 = AnimElem = 5, = 15
Time = 15
ampl = -45
freq = 255
phase = 10

[State 4010, E.Shake]
type = EnvShake
trigger1 = AnimElem = 5, = 30
Time = 15
ampl = -30
freq = 255
phase = 10

[State 4010, E.Shake]
type = EnvShake
trigger1 = AnimElem = 5, = 45
Time = 15
ampl = -15
freq = 255
phase = 10

[State 4010, E.Shake]
type = EnvShake
trigger1 = AnimElem = 5, = 60
Time = 15
ampl = -5
freq = 255
phase = 10

[State 0, 2P受控扣血]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = -480
ID = -1
kill = 1
absolute = 0

[State 4010, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = f3560
postype = P1
pos = 70,0
sprpriority = 7
supermove = -1
supermovetime = 99999
bindtime = 1
scale = 0.9,0.9

[State 4010, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = f3561
postype = P1
pos = 70,0
sprpriority = -7
supermove = -1
supermovetime = 99999
bindtime = 1
scale = 0.9,0.9


[State -2, CtrlSet]
type = CtrlSet
triggerall = !Win
trigger1 = AnimTime = -1
value = 1

[State 4010, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;P2StateDef
[Statedef 3530]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 2

[State -2, DestroySelf]
type = DestroySelf
trigger1 = IsHelper
ignorehitpause = 1

[State -2, DefenceMulSet]
type = DefenceMulSet
trigger1 = Time = 0
value = 1

[State -2, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State -2, SelfState]
type = SelfState
trigger1 = Time > 500
trigger1 = P2StateNo != [3500,3530)
value = 5050

[State -2, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3530+var(55)*30000

[State -2, PalFX]
type = PalFX
trigger1 = AnimElem = 1
time = 175
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 0
invertall = 1
ignorehitpause = 1

[State 4020, VelSet]
type = VelSet
Trigger1 = AnimElem = 4
x = -4
y = -15

[State 4020, VelAdd]
type = VelAdd
Trigger1 = AnimElem = 4, >= 0
y = .54

[State 4020, SelfState]
type = SelfState
triggerall = AnimElem = 4, >= 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

[Statedef 3550]
type = A
ctrl = 0
anim = 3550
velset = 0,0
movetype = A
physics = N
sprpriority = 20

[State 3550, BOOM]
type = Explod
trigger1 = Time = 0
anim = F3550
postype = p1
pos = 0,0
velset = 0,0
sprpriority = 5
ownpal = 1
bindtime = 1
supermove = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------[]
[state a]
type = posset
trigger1 = time = 0
y = 0
;---------------------[]
[state a]
type = destroyself
trigger1 = animtime = 0

[Statedef 3560]
type = A
ctrl = 0
anim = 3560
velset = 0,0
movetype = A
physics = N
sprpriority = 20

[State 3550, BOOM]
type = Explod
trigger1 = Time = 0
anim = F3560
postype = p1
pos = 0,0
velset = 0,0
sprpriority = 5
ownpal = 1
bindtime = 1
supermove = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------[]
[state a]
type = posset
trigger1 = time = 0
y = 0
;---------------------[]
[state a]
type = destroyself
trigger1 = animtime = 0


;-----------------------------------------------------------------------
;暴走模式奥义
;-----------------------------------------------------------------------
[Statedef 3600]
type     = S
movetype = A
physics  = S
juggle   = 8
poweradd = 0
velset   = 0,0
anim     = 3600
ctrl     = 0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
;----------------------------------------
[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;----------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[state a];POWER消耗
type = poweradd
trigger1 = time = 0
value = -2000

[State a];取消连闪光
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
triggerall = 1
trigger1 = prevstateno = [1000,2999]
flag = nojugglecheck

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
var(5)=0

;-----------------------------------------------
[State a];SC/DC 取消1技gc
type = VarAdd
trigger1 = prevstateno = [1000,3999]
fvar(29) = -1000
persistent = 0

[State 2000, 4]
type = SuperPause
trigger1 = animelem = 3
time = 30
anim = -1
movetime = 30
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 3
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[State 3000, 1]
type = Helper
trigger1 = AnimElem = 1
stateno = 7200
supermovetime = 30
pos = -6,-72

[State 1000, HitBy]
type = NotHitBy
trigger1 = time = [0,70]
value = SCA

[State a]
type = PlaySnd
trigger1 = AnimElem = 5
value = s9,10

[State 1050, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NT
damage    = 80,8
animtype = hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 9,30
numhits = 1
sparkno = 6
guard.sparkno = 42
sparkxy = -15, -80
hitsound = s1,4
guardsound = 6,2
ground.type = Low
ground.slidetime = 15
ground.hittime  = 60
p2stateno = 294
p2facing = 1
kill = 0
sparkxy = -10,-70
envshake.time = 10
envshake.ampl = 4
envshake.freq = 100
envshake.phase = 100

[State 0,Explod]
type = Explod
trigger1 = animelem = 4
anim = 11210
ID = 10000
postype = P1
pos = -40,40
sprpriority = 7
supermove = -1
supermovetime = 99999
bindtime = -1
ownpal = 1
scale = 0.7,0.7

[State 0, VarSet]
type = VarSet
trigger1 = movehit=1
var(5)=1

[State 0, ChangeState]
type = ChangeState
trigger1 = var(5)=1
trigger1 = AnimElemtime(8) > 10
trigger1 = p2bodydist X < 60
value = 3605

[State 1050, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 3605]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 3605
ctrl     = 0

[State 3910]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 810, Width]
type = Width
trigger1 = 1
edge = 205,0

[State 170, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
var(5)=0

[State a]
type = PlaySnd
trigger1 = AnimElem = 5
value = s9,11

[State a]
type = PlaySnd
trigger1 = AnimElem = 16
value = s9,20

[State a]
type = PlaySnd
trigger1 = AnimElem = 24
value = s9,7

[State 0,Explod]
type = Explod
trigger1 = animelem = 1
anim = 11010
facing = 1
vfacing = -1
ID = 10000
postype = P1
pos = 30,-200
sprpriority = 7
supermove = -1
supermovetime = 99999
bindtime = -1
ownpal = 1
scale = 0.6,0.6

[State 0,Explod]
type = Explod
trigger1 = animelem = 16
anim = 11110
facing = 1
vfacing = -1
ID = 10000
postype = P1
pos = 30,-200
sprpriority = 7
supermove = -1
supermovetime = 99999
bindtime = -1
ownpal = 1
scale = 0.6,0.6

[State 0,Explod]
type = Explod
trigger1 = animelem = 21
anim = 11010
facing = 1
ID = 10000
postype = P1
pos = 30,0
sprpriority = 7
supermove = -1
supermovetime = 99999
bindtime = -1
ownpal = 1
scale = 0.7,0.7

[State 2120,3]
type = Helper
trigger1 = AnimElem = 5
trigger2 = AnimElem = 16
;trigger3 = AnimElem = 24
helpertype = normal
name = "弹墙重击"
id = 3630
pos = 0,-50
postype = p2
stateno = 3630
keyctrl = 0
ownpal = 1

[State 2120,3]
type = Helper
trigger1 = AnimElem = 24
helpertype = normal
name = "弹墙重击"
id = 3631
pos = 0,-50
postype = p2
stateno = 3631
keyctrl = 0
ownpal = 1

[State 1050, 1]
type = ChangeState
trigger1 = AnimElemtime(26) = 2
value = 3620
ctrl = 0

[Statedef 3620]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
poweradd= 0
anim = 3620
ctrl = 0
sprpriority = 1

[State a]
type = PlaySnd
trigger1 = AnimElem = 4
value = s9,21

[State 1000, Pause]
type = Pause
triggerall = AnimElemtime(6) < 0
triggerall = AnimElemtime(10) < 0
triggerall = RoundState = 2
trigger1 = timemod = 2,0
time = 3
movetime = 1
ignorehitpause = 1

[State 2110, d]
type = PlayerPush
trigger1 = AnimElemTime(9) > 0
value = 0

;[state turn]
;type = turn
;trigger1 = p2dist x < 0
;trigger1 = time = 0

[State 1000, ]
type = PlaySnd
trigger1 = AnimElem = 12
value = s5,4

[State 1000, u]
type = Posadd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
x = 20

[State 1000, u]
type = Velset
trigger1 = AnimElemtime(7) > 0
x = 7

[State 1000, u]
type = Velset
trigger1 = AnimElem = 7
y = -6.5

[State 1000, u]
type = Veladd
trigger1 = AnimElemtime(7) > 0
y = .4

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 7
statetype = A

[state nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state removeexplod]
type = removeexplod
trigger1 = time = 0
id = 3000

[state helper]
type = Helper
trigger1 = time = 0
id = 3645
name = "bg"
pos = 0,0
postype = p1
stateno = 3645
helpertype = normal
supermovetime = 999999
ownpal = 1

[State a]
type = PlaySnd
trigger1 = animelem = 7
value = s8,40

[State a]
type = PlaySnd
trigger1 = animelem = 8
value = s18,12

[State 0, Helper]
type = Helper
trigger1 = animelem = 7
helpertype = normal
stateno = 3640
pos = -20,-65
postype = p1
sprpriority = 5
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetome = 9999
ignorehitpause = 1
size.xscale = 0.47
size.yscale = 0.47

[State -2, sparkxy]
type = explod
trigger1 = movehit = 1
persistent = 0
anim = f6
scale = 1.5,1.5
bindtime = 1
pos = 0,-60
postype = P2
sprpriority = 2
ownpal = 1
persistent = 0

[State -2, sparkxy]
type = explod
trigger1 = moveGuarded = 1
persistent = 0
anim = f42
bindtime = 1
pos = 0,-40
postype = P2
sprpriority = 2
ownpal = 1
persistent = 0

[State -2, sparkxy]
type = explod
trigger1 = movehit = 1
persistent = 0
anim = 12045
scale = .6,.6
bindtime = 1
pos = -30,150
postype = P2
sprpriority = 2
ownpal = 1
persistent = 0

[State -2, sparkxy]
type = explod
trigger1 = movehit = 1
persistent = 0
anim = 12046
scale = .6,.6
bindtime = 1
pos = -30,150
postype = P2
sprpriority = 2
ownpal = 1
persistent = 0

[State 210, 2]
type = HitDef
trigger1 = animelem = 11
trigger2 = animelemtime(12) = 1
trigger3 = animelemtime(12) = 2
trigger4 = animelemtime(12) = 3
trigger5 = animelemtime(13) = 1
trigger6 = animelemtime(13) = 2
attr = S, HA
animtype  = hard
damage    = 80,8
priority = 5, Hit
getpower = 0,0
guardflag = M
pausetime = 2,3
sparkno = s-1
sparkxy = -12,-90
hitsound   = s1,7
guardsound = s2,4
guard.sparkno = s-1
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6.2,-10.5
air.velocity = -6.2,-10.5
air.hittime  = 120
yaccel = 0.45
fall = 1
fall.recover = 0
ID = 200
nochainID = 9999

[State 1000, Xe[gX]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3625

[Statedef 3625]
type     = S
movetype = I
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3625
ctrl     = 0
sprpriority = 2

[state helper]
type = Helper
trigger1 = time = 10
id = 3645
name = "bg"
pos = 0,0
postype = p1
stateno = 3646
helpertype = normal
supermovetime = 999999
ownpal = 1

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = time = [0,15]
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 3000, u]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 3000, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 3640]
type = A
movetype = I
physics = N
anim = 3640
ctrl = 0
sprpriority = 5

[state a]
type = Trans
Trigger1 = 1
trans = addalpha
alpha = 256,256

[State 3320, 3]
type = AngleSet
trigger1 = 1
value = -60

[State 3320, 7]
type = AngleDraw
trigger1 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, BindToRoot]
type = BindToRoot
trigger1 = time = [0,30]
pos = -120,-65

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

[Statedef 3645]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 256

[state varadd]
type = null;varadd
trigger1 = time > 40
var(55) = -8

;---------------------[o]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = -var(55),-var(55),-var(55)
invertall = 0
color = 256 - var(55)

[State assertspecial]
type = assertspecial
trigger1 = var(55) = 256
flag = NoBG
flag2 = NoFG

;---------------------[]
[state changestate]
type = changestate
trigger1 = root,stateno != [3600,3699]
trigger2 = root,movetype = H
value = 3646

[state destroyself]
type = destroyself
trigger1 = root,stateno != 3620
trigger2 = root,stateno = 3625


;----------------------------------------------------------------------------
;(HELPER)NEO MAXKE
[Statedef 3646]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 256

[state varadd]
type = varadd
trigger1 = 1
var(55) = -8

;---------------------[o]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = -var(55),-var(55),-var(55)
invertall = 0
color = 256 - var(55)

[state destroyself]
type = destroyself
trigger1 = var(55) <= 0

;----------------------------------------------------------------------------
;(HELPER)NEO MAXKE
[Statedef 6007]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 256

[state varadd]
type = null;varadd
trigger1 = time > 40
var(55) = -8

;---------------------[o]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = -var(55),-var(55),-var(55)
invertall = 0
color = 256 - var(55)

[State assertspecial]
type = assertspecial
trigger1 = var(55) = 256
flag = NoBG
flag2 = NoFG

;---------------------[]
[state changestate]
type = changestate
trigger1 = root,stateno != [3500,3599]
trigger2 = root,movetype = H
trigger3 = root,StateNo = 3520 && root,animelem = 6
value = 6008

;----------------------------------------------------------------------------
;(HELPER)NEO MAXKE
[Statedef 6008]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 256

[state varadd]
type = varadd
trigger1 = 1
var(55) = -8

;---------------------[o]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = -var(55),-var(55),-var(55)
invertall = 0
color = 256 - var(55)

;---------------------[]
[state destroyself]
type = destroyself
trigger1 = var(55) <= 0


;AsB

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[Statedef 3630]
type    = A
physics = N
movetype= A
anim = 3630
ctrl = 0
juggle  = 0
poweradd = 0

[state 2901,1]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state 2901,1]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[State 200, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HP
getpower = 0
damage = 30,0
animtype = Hard
hitflag = MAFP
priority = 3, Hit
pausetime = 9,10
sparkno = 6
sparkxy = -20,0
hitsound = 4,2
guardsound = 6,2
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 294
p2facing = 1
kill = 0
envshake.time = 8
envshake.ampl = 3
envshake.freq = 100

[state 2901,2]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AA,AT
slot = 0
stateno = 3635
time = -1
forceair = 0

[state a]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
[Statedef 3631]
type    = A
physics = N
movetype= A
anim = 3630
ctrl = 0
juggle  = 0
poweradd = 0

[state 2901,1]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state 2901,1]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[State 200, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HP
getpower = 0
damage = 30,0
animtype = Hard
hitflag = MAFP
priority = 3, Hit
pausetime = 9,10
sparkno = 6
sparkxy = -20,0
hitsound = 4,3
guardsound = 6,2
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 55361
p2facing = 1
kill = 0
envshake.time = 8
envshake.ampl = 3
envshake.freq = 100

[state 2901,2]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AA,AT
slot = 0
stateno = 3635
time = -1
forceair = 0

[state a]
type = destroyself
trigger1 = animtime = 0
;------------------------------------------------------------------------
[Statedef 3635]
type    = A
movetype= H
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 99999

[state a]
type = destroyself
trigger1 = time = 1
;=======================================================================


;---------------------------------------------------------------------------
;Code from ahuron
[Statedef 996]
type    = A
movetype= H
physics = N
sprpriority = 1
velset = 0,0

[State 700, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050+var(55)*30000

[State 821, 3] 
type = changeState
trigger1 = time >= GetHitVar(hitshaketime)
value = 997
;---------------------------------------------------------------------------
[Statedef 997]
type    = A
movetype= H
physics = N
sprpriority = 1
velset = -6,-4

[State 700, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050+var(55)*30000

[State 821, 1]
type = VelAdd
Trigger1 = time != 0
y = .52

[State 821, 3] 
type = changeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 998
;---------------------------------------------------------------------------
[Statedef 998]
type    = S
movetype= H
physics = N
velset = -12,0
sprpriority = 1

[State 1027, ]
type = PlaySnd
trigger1 = Time = 0
value = f5000,ifelse(StageVar(info.author) = "water",10,1)

[State 902]
type = GameMakeAnim
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 1
trigger2 = Time = 9
pos = 0, 0
value = 125
under = 0

[State 0];小水花
type = GameMakeAnim
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 1
trigger2 = Time = 9
trigger3 = Time = 17
spacing = 4
value = 21
pos = 0, 0
under = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[state a]
type = velmul
trigger1 = 1
x = 0.85

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 998+var(55)*30000

[State 821, 3] 
type = changestate
trigger1 = time = 20
value = 999
;---------------------------------------------------------------------------
[Statedef 999]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5110+var(55)*30000

[State 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 821, 3] 
type = SelfState
trigger1 = time = 1
value = 5110 
;---------------------------------------------------------------------------
[Statedef 294]
type    = A
movetype= H
physics = N
sprpriority = 1
velset = 0,0

[State 700, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050+var(55)*30000

[State 821, 3] 
type = changeState
trigger1 = time >= GetHitVar(hitshaketime)
value = 295
;---------------------------------------------------------------------------
[Statedef 295]
type    = A
movetype= H
physics = N
sprpriority = 1
velset = -20,0

[state a]
type = posset
trigger1 = time = 0
y = -10

[State 3910]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 700, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 295+var(55)*30000

[State 821, 1]
type = VelAdd
Trigger1 = time >= 50;time != 0
y = .52

[State 821, 3] 
type = changeState
trigger1 = backedgedist < 20
value = 296

[State 821, 3] 
type = changeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 998
;---------------------------------------------------------------------------
[Statedef 296]
type    = A
movetype= H
physics = N
sprpriority = 1
velset = 0,0

[State 3910]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 1027, 撞墙声音]
type = PlaySnd
trigger1 = Time = 0
value = F5000,2

[State 1027, 撞墙震动]
type = envshake
trigger1 = !Time
time = 10

[State 296, 撞墙火花]
type = Explod
trigger1 = Time = 0
anim = F70
pos = -15,-50
postype = p1
sprpriority = -1
supermove = 1
bindtime = 1
ownpal = 1
removeongethit = 1

[State 700, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 296+var(55)*30000

[State 821, 3] 
type = changeState
trigger1 = animtime = 0
value = 297
;---------------------------------------------------------------------------
[Statedef 297]
type    = A
movetype= H
physics = N
sprpriority = 1
velset = 24,0

[State 3910]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[state a]
type = turn
trigger1 = time = 0

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050+var(55)*30000

[State 821, 1]
type = VelAdd
Trigger1 = time >= 50;time != 0
y = .52

[State 821, 3] 
type = selfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100
;---------------------------------------------------------------------------
