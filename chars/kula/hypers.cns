;---------------------------------------------------------------------------
;水晶球
;---------------------------------------------------------------------------
[Statedef 3400]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 3400
SprPriority = 2
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 4
Anim = -1
Time = 30
MoveTime = 30
P2DefMul = 1
Darken = 0

[State 3200, 4]
type = Explod
trigger1 = AnimElem = 4
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = AnimElem = 4
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 6000,黑色底色]
type = Envcolor
trigger1 = AnimElem = 4
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = AnimElem = 4
anim = f7100
ID = 7100
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 5,-100
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = AnimElem = 4
anim = f7110
ID = 7110
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 5,-100
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = AnimElem = 4
value = f9000,1

;ex max
[State 4106, 6]
type = BGPalFX
trigger1 = Time = [0,116];[0,29]
time  = 1
color = 12+((time)*2)
add   = -256+((time)*2),-256+((time)*2),-256+((time)*2)
ignorehitpause = 1

[State -1]
Type = PlaySnd
Trigger1 = Time = 39
Value = s3000, 2
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = AnimElem = 5;AnimElem = 18
Value = s3000, 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = AnimElem = 5;AnimElem = 18
Value = s3000, 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 5;Time = 106
Value = s1100, 2
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 5;6
Anim = 10005
ID = 10005
PosType = P1
Pos = -20,-25
RemoveTime = -2
RemoveOnGetHit = 1
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 810,EnvShake]
type = EnvShake
trigger1 = AnimElem = 5;Time = 103
ampl = 8
freq = 100
time = 20

[State -1]
Type = Helper
Trigger1 = AnimElem = 5;Time = 103
StateNo = 10006
ID = 10006
PosType = P1
Pos = -25,-25
Ownpal = 1
Keyctrl = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
[Statedef 10006]
Type = A
MoveType = A
Physics = N
SprPriority = 5
Ctrl = 0
Anim = 10006

[State 3020, 1]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State -1]
Type = HitOverRide
Trigger1 = 1
Attr = SCA, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = -1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type =VelAdd
Trigger1 = Vel X >= 5;Vel X < 5
X = -.57

[State -1]
Type = VelSet
Trigger1 = time =0
X = 10

[State -1]
Type = null;VelSet
Trigger1 = Vel X >= 5
X = 5

[State -1]
Type = VelAdd
TriggerAll = Time >= 6
Trigger1 = Command = "holddown"
Trigger1 = Vel Y < 6
Y = .2

[State -1]
Type = VelSet
TriggerAll = Time >= 6
Trigger1 = Vel Y >= 6
Y = 6

[State -1]
Type = VelAdd
TriggerAll = Time >= 6
Trigger1 = Pos Y <= 50
Trigger1 = Command = "holdup"
Trigger1 = Vel Y > -6
Y = -.2

[State -1]
Type = VelSet
TriggerAll = Time >= 6
Trigger1 = Pos Y <= 50
Trigger1 = Vel Y <= -6
Y = -6

[State -1]
Type = VelSet
TriggerAll = Time >= 6
Trigger1 = Pos Y > 50
Y = 0

[State -1]
Type = PosSet
TriggerAll = Time >= 6
Trigger1 = Pos Y > 50
Y = 50

[State -1]
Type = HitDef
TriggerAll = Parent,Var(25)/10%10 < 3
Trigger1 = 1
Attr = S, HP
Damage = 20,5
AnimType  = Hard
HitFlag = MAF
GuardFlag = MA
Priority  = 3, Dodge
PauseTime = 3,10
SparkXY = -Random%20, -40-Random%20
HitSound   = 5,4
guardsound = 6,2
SparkNo = 2
Guard.SparkNo = 42
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -2,-6
Guard.Velocity = -4
Air.Velocity = -2*Parent,Var(50),IfElse(Parent,Var(50)=1,-6,Parent,FVar(25))
AirGuard.Velocity = -4,-5
Down.Velocity = -4,-2.5
SprPriority = 5
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
YAccel = .45
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 24
EnvShake.Time = 6
EnvShake.Ampl = 4
EnvShake.Freq = 60
GetPower = 0, 0
GivePower = 22, 11

[State -1]
Type = AssertSpecial
Trigger1 = 1
Flag = Noshadow
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeState
Trigger1 = MoveContact = 1
Value = 10007
Persistent = 1
IgnoreHitPause = 1

[State -1]
Type = DestroySelf
Trigger1 = Time > 1
Trigger1 = FrontEdgeDist <= -40
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

;---------------------------------------------------------------------------
[Statedef 10007]
Type = A
MoveType = A
Physics = N
SprPriority = 5
VelSet = 0,0
Ctrl = 0
Anim = 10007

[State 3020, 1]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State -1]
Type = HitOverRide
Trigger1 = 1
Attr = SCA, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = -1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = MoveHitReset
Trigger1 = Time = 0
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Helper
Trigger1 = Time = [10,60]
StateNo = 10008
ID = 10008
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 10


[State -1]
Type = HitDef
TriggerAll = Parent,Var(25)/10%10 < 3
Trigger1 = Time %5= 0
Attr = S, HP
Damage = 23,8
AnimType  = Hard
HitFlag = MAF
GuardFlag = MA
Priority  = 3, Dodge
PauseTime = 1,5
HitSound   = 5,4
guardsound = 6,2
SparkXY = -Random%20, -40-Random%20
SparkNo = 2
Guard.SparkNo = 42
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1.5,-5
Guard.Velocity = -3
Air.Velocity = -1.5*Parent,Var(50),IfElse(Parent,Var(50)=1,-5,Parent,FVar(25))
AirGuard.Velocity = -3,-6
Down.Velocity = -3,-2.5
SprPriority = 5
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
YAccel = .45
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 24
EnvShake.Time = 6
EnvShake.Ampl = 4
EnvShake.Freq = 60
GetPower = 0, 0
GivePower = 12, 6

[State -1]
Type = AssertSpecial
Trigger1 = 1
Flag = Noshadow
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = DestroySelf
Trigger1 = Time >= 70
Trigger1 = NumHelper(3008) = 0
Trigger2 = FrontEdgeDist <= -40
IgnoreHitPause = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

;---------------------------------------------------------------------------

[Statedef 10008]
Type = A
MoveType = A
Physics = N
SprPriority = 5
VelSet = 0,0
Ctrl = 0
Anim = 10007

[State 3020, 1]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State -1]
Type = HitOverRide
Trigger1 = 1
Attr = SCA, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = -1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 2
Range = 0,1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosAdd
Trigger1 = Time = 0
X = 10+Ceil((Random/25)*IfElse(Var(2)=1,1,-1))
Y = Ceil((Random/25)*IfElse(Var(2)=1,1,-1))

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 3
Range = 0,359
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Trans
Trigger1 = 1
Trans = Add

[State -1]
Type = AngleSet
Trigger1 = Time = 0
Value = Var(3)

[State -1]
Type = AssertSpecial
Trigger1 = 1
Flag = Noshadow
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = DestroySelf
Trigger1 = Time = 68
IgnoreHitPause = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[Statedef 2700]
type = S
movetype = A
physics = S
anim = 2700
poweradd = ifelse(fvar(30) > 0,0,-1000)
juggle = 0
velset = 0
ctrl = 0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 3000,]
type = NotHitBy
trigger1 = time < 30
value = SCA

[State a]
type = BGPalFX
trigger1 = Time = [0,29]
time  = 1
color = 12+((time)*8)
add   = -256+((time)*8),-256+((time)*8),-256+((time)*8)
ignorehitpause = 1

[State 3009, pause]
type = SuperPause
trigger1 = time = 0
time = 30
anim = -1
movetime = 30
darken = 0
p2defmul = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 0
anim = f7000
ID = 7000
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = -5,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 0
anim = f7010
ID = 7010
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = -5,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 0
value = f9000,0

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 2710
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 2710]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 5,-5.6
anim = 2750
sprpriority = 2

[State 2041, 2]
type = Afterimage
trigger1 = AnimElem = 1
time = 2
length = 10
FrameGap = 3
PalBright = 0,0,0
palcolor = 1
PalContrast = 170,170,255
PalAdd = 0,0,0
PalMul = 1,1,1
trans = none

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 3000, 靠近地面时无敌]
type = NotHitBy
trigger1 = Pos Y >= -30
value = SCA

[State 1000, Playsnd]
type = Playsnd
trigger1 = time = 0
value = f40,1

[State 250]
type = VelAdd
trigger1 = 1
y = .55
[State 250]
type = VelAdd
trigger1 = Pos Y = -10
y = .95

[State 250]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 2720
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 2750]
type = S
movetype = A
physics = S
anim = 2700
poweradd = ifelse(fvar(30) > 0,0,-1000)
juggle = 0
velset = 0
ctrl = 0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 3000, hehe!]
type = NotHitBy
trigger1 = time < 30
value = SCA

[State a]
type = BGPalFX
trigger1 = Time = [0,29]
time  = 1
color = 12+((time)*8)
add   = -256+((time)*8),-256+((time)*8),-256+((time)*8)
ignorehitpause = 1

[State 3009, pause]
type = SuperPause
trigger1 = time = 0
time = 30
anim = -1
movetime = 30
darken = 0
p2defmul = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 0
anim = f7000
ID = 7000
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = -5,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 0
anim = f7010
ID = 7010
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = -5,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 0
value = f9000,0

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 2760
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 2760]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 7,-7.6
anim = 2750
sprpriority = 2

[State 2041, 2]
type = Afterimage
trigger1 = AnimElem = 1
time = 2
length = 10
FrameGap = 3
PalBright = 0,0,0
palcolor = 1
PalContrast = 170,170,255
PalAdd = 0,0,0
PalMul = 1,1,1
trans = none

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 3000, 靠近地面时无敌]
type = NotHitBy
trigger1 = Pos Y >= -30
value = SCA

[State 1000, Playsnd]
type = Playsnd
trigger1 = time = 0
value = f40,1

[State 250]
type = VelAdd
trigger1 = 1
y = .5
[State 250]
type = VelAdd
trigger1 = Pos Y = -10
y = 1.25

[State 250]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 2720
ctrl = 0
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
[Statedef 2701]
type = A
movetype = A
physics = N
anim = 2701
poweradd = ifelse(fvar(30) > 0,0,-1000)
juggle = 0
velset = 5,-3.6
ctrl = 0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 3000, 靠近地面时无敌]
type = NotHitBy
trigger1 = Pos Y >= -30
value = SCA

[State a]
type = BGPalFX
trigger1 = Time = [0,29]
time  = 1
color = 12+((time)*8)
add   = -256+((time)*8),-256+((time)*8),-256+((time)*8)
ignorehitpause = 1

[State 3009, pause]
type = SuperPause
trigger1 = time = 0
time = 25
anim = -1
movetime = 0
darken = 0
p2defmul = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 0
anim = f7000
ID = 7000
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = -5,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 0
anim = f7010
ID = 7010
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = -5,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 0
value = f9000,0

[State 2041, 2]
type = Afterimage
trigger1 = AnimElem = 1
time = 2
length = 10
FrameGap = 3
PalBright = 0,0,0
palcolor = 1
PalContrast = 170,170,255
PalAdd = 0,0,0
PalMul = 1,1,1
trans = none

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 1000, Playsnd]
type = Playsnd
trigger1 = time = 0
value = f40,1

[State 1000, dm sound]
type = Playsnd
trigger1 = time = 0
value = s2700,0

[State 250]
type = VelAdd
trigger1 = 1
y = ifelse(prevstateno=1208,1.35,.55)

[State 250]
type = VelAdd
trigger1 = Pos Y = -10
y = .95

[State 200, 3]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 2720
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 2751]
type = A
movetype = A
physics = N
anim = 2701
poweradd = ifelse(fvar(30) > 0,0,-1000)
juggle = 0;10
velset = 9,-5.6
ctrl = 0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3000, 靠近地面时无敌]
type = NotHitBy
trigger1 = Pos Y >= -30
value = SCA

[State a]
type = BGPalFX
trigger1 = Time = [0,29]
time  = 1
color = 12+((time)*8)
add   = -256+((time)*8),-256+((time)*8),-256+((time)*8)
ignorehitpause = 1

[State 3009, pause]
type = SuperPause
trigger1 = time = 0
time = 25
anim = -1
movetime = 0
darken = 0
p2defmul = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 0
anim = f7000
ID = 7000
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = -5,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 0
anim = f7010
ID = 7010
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = -5,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 0
value = f9000,0

[State 2041, 2]
type = Afterimage
trigger1 = AnimElem = 1
time = 2
length = 10
FrameGap = 3
PalBright = 0,0,0
palcolor = 1
PalContrast = 170,170,255
PalAdd = 0,0,0
PalMul = 1,1,1
trans = none

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 1000, Playsnd]
type = Playsnd
trigger1 = time = 0
value = f40,1

[State 1000, dm sound]
type = Playsnd
trigger1 = time = 0
value = s2700,0

[State 250]
type = VelAdd
trigger1 = 1
y = .55

[State 250]
type = VelAdd
trigger1 = Pos Y = -10
y = 1.15

[State 200, 3]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 2720
ctrl = 0

;---------------------------------------------
[Statedef 2720]
type = S
movetype = A
physics = S
anim = 12760
sprpriority = 2
poweradd = 0
juggle = 0
velset = 0,0
ctrl = 0

[State 200, 1]
type = Posset
trigger1 = time = 0
y = 0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3000,42

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = f7,1

[State 1000, Playsnd]
type = Playsnd
trigger1 = time = 0
value = s240,1

[State 4010, E.Shake]
type = EnvShake
trigger1 = time=0
Time = 20
ampl = -9
freq = 140
phase = 10

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 2
id = 3061
sprpriority = 5
postype = P1
pos = 35,15
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.4
size.yscale =.4

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 2
projanim = 13061
projhitanim = 13061
projscale = 1,.8
projID = 3000
velocity = 0
projremovetime = 20
projpriority = 5
postype = p1
offset = 10,5
attr = S, HP
damage = ifelse(p2statetype=A,50,60),5
animtype = up
hitflag = MAFP
guardflag = M
sparkno = 2
guard.sparkno = 42
sparkxy = -50,-50
hitsound = S3000,36
guardsound = 6,2
pausetime = 0,13
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -1.5,-11
air.velocity = -1.5,-11
fall = 1
fall.recover.time = 100
yaccel = .5
getpower = 0
palfx.time = 57
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
air.juggle = 0;10
;afterimage.time = -1
;afterimage.length = 20 
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 50,150,250
;afterimage.paladd =  0,0,0
;afterimage.palmul = .85,.75,.75 
;afterimage.timegap = 1
;afterimage.framegap = 1
;afterimage.trans = add

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 2
id = 3061
sprpriority = 6
postype = P1
pos = 5,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.3

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 2
projanim = 13061
projhitanim = 13061
projscale = .8,1
projID = 3000
velocity = 0
projremovetime = 20
projpriority = 6
postype = p1
offset = 35,0
attr = S, HP
damage = ifelse(p2statetype=A,50,60),5
animtype = up
hitflag = MAFP
guardflag = M
sparkno = 2
guard.sparkno = 42
sparkxy = -30,-50
hitsound = S3000,36
guardsound = 6,2
pausetime = 0,13
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -1.5,-11
air.velocity = -1.5,-11
fall = 1
fall.recover.time = 100
yaccel = .5
getpower = 0
palfx.time = 57
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
air.juggle = 0;10
;afterimage.time = -1
;afterimage.length = 20 
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 50,150,250
;afterimage.paladd =  0,0,0
;afterimage.palmul = .85,.75,.75 
;afterimage.timegap = 1
;afterimage.framegap = 1
;afterimage.trans = add

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 2
id = 3060
sprpriority = 5
postype = P1
pos = -30,15
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.4
size.yscale =.4

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 2
projanim = 13060
projhitanim = 13060
projscale = 1,.8
projID = 3000
velocity = 0
projremovetime = 20
projpriority = 5
postype = p1
offset = -10,5
attr = S, HP
damage = ifelse(p2statetype=A,50,70),5
animtype = up
hitflag = MAFP
guardflag = M
sparkno = 2
guard.sparkno = 42
sparkxy = 35,-50
hitsound = S3000,36
guardsound = 6,2
pausetime = 0,13
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -1.5,-11
air.velocity = -1.5,-11
fall = 1
fall.recover.time = 100
yaccel = .5
getpower = 0
palfx.time = 57
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
air.juggle = 0;10
;afterimage.time = -1
;afterimage.length = 20 
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 50,150,250
;afterimage.paladd =  0,0,0
;afterimage.palmul = .85,.75,.75 
;afterimage.timegap = 1
;afterimage.framegap = 1
;afterimage.trans = add

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 2
id = 3060
sprpriority = 5
postype = P1
pos = -5,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.3

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 2
projanim = 13060
projhitanim = 13060
projscale = .8,1
projID = 3000
velocity = 0
projremovetime = 20
projpriority = 6
postype = p1
offset = -40,0
attr = S, HP
damage = ifelse(p2statetype=A,50,60),5
animtype = up
hitflag = MAFP
guardflag = M
sparkno = 2
guard.sparkno = 42
sparkxy = 50,-50
hitsound = S3000,36
guardsound = 6,2
pausetime = 0,13
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -1.5,-11
air.velocity = -1.5,-11
fall = 1
fall.recover.time = 100
yaccel = .5
getpower = 0
palfx.time = 57
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
air.juggle = 0;10
;afterimage.time = -1
;afterimage.length = 20 
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 50,150,250
;afterimage.paladd =  0,0,0
;afterimage.palmul = .85,.75,.75 
;afterimage.timegap = 1
;afterimage.framegap = 1
;afterimage.trans = add

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 3600]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 3600
ctrl = 0
facep2 = 1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
;-----------------------------------------------
[State a];SC/DC 取消1技gc
type = VarAdd
trigger1 = prevstateno = [1000,3999]
fvar(29) = -1000
persistent = 0

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 0
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 2
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 1100, dm spark]
type = Explod
trigger1 = AnimElem = 1
anim = f7310
ID = 1000
postype = p1
pos = 25,-100
bindtime = -1
sprpriority = 2
supermovetime = 30
ownpal = 1
removeongethit = 1

[State 1100, dm spark]
type = Explod
trigger1 = AnimElem = 1
anim = f7300
ID = 1000
postype = p1
pos = 25,-100
bindtime = -1
sprpriority = -2
supermovetime = 30
ownpal = 1
removeongethit = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = AnimElem = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 31
under = 1
supermove = 1

[State 3009, pause]
type = SuperPause
trigger1 = AnimElem = 1
time = 30
anim = -1
movetime = 1
darken = 0
p2defmul = 1
poweradd = -2000

[State 1000, dm sound]
type = Playsnd
trigger1 = AnimElem = 1
value = f9000,2

[State 3200, 2]
type = velset
trigger1 = AnimElem = 2
x = 4
y = 2.5

[State 3200 , 1]
type = HitDef
trigger1 = time = 0
trigger1 = P2StateNo != [150,155]
trigger1 = P2StateNo != [40,49]
trigger1 = P2StateNo != 50 && 52
trigger1 = p2statetype != A
numhits = 0
attr = A, HT
getpower = 0,0
hitflag = M
guard.dist = 0
priority = 4, Miss
hitsound = s8,1
sparkno = -1
p2facing = 1
p1facing = 1
p1stateno = 3610
p2stateno = 3615
p2getp1state = 1
Palfx.time = 1

[State 1100, 1]
type = Explod
trigger1 = animelem = 2,>0 && timemod = 5,0
anim = 3621
ID = 812
facing = -1
postype = p1
pos = 0,-50
vel = 0,-2-(random%5)
random = 20,20
bindtime = 1
sprpriority = 13
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = animelem = 2,>0 && timemod = 5,0
anim = 3621
ID = 812
facing = -1
postype = p1
pos = 0,-50
vel = 0,-2-(random%5)
random = 20,20
bindtime = 1
sprpriority = 3
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = animelem = 2,>0 && timemod = 5,0
anim = 3621
ID = 812
facing = 1
postype = p1
pos = 0,-50
random = 20,20
vel = 0,-2-(random%5)
bindtime = 1
sprpriority = 13
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = animelem = 2
anim = 3070
ID = 3070
facing = 1
postype = p1
pos = -25,-50
bindtime = -1
sprpriority = -1
ownpal = 1
removetime = -1

[State 3200 , 3]
type = ChangeState
trigger1 = Pos Y >= -4 && Vel Y > 0
value = 3605
ctrl = 0
;---------------------------------------------------------------------------
[Statedef 3605]
type = S
movetype = I
physics = S
poweradd = 0
anim = 3605
velset = 0,0

[State 1100, 1]
type = Explod
trigger1 = time = 0
anim = 3075
ID = 3075
facing = 1
postype = p1
pos = -3,-70
bindtime = 1
sprpriority = 3
ownpal = 1
vfacing = -1

[State 3210, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 3210, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3210, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 3610]
type    = A
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
anim = 3610
facep2 = 1
sprpriority = 5

[State 810, width]
type = width
trigger1 = 1
edge = 80,0

[State 3250,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3200, 2]
type = PlaySnd
trigger1 = animelem = 8
value = 2200,0
channel = 22

[State 3200, 2]
type = PlaySnd
trigger1 = animelem = 8
value = 3000,38

[State 3250, 4]
type = targetlifeadd
trigger1 = time = [39,139]
value = -2
kill = 0

[State 3250, 4]
type = targetpoweradd
trigger1 = time = [39,139]
value = -5

[State 3250, 4]
type = lifeadd
trigger1 = time = [39,139]
value = 1

[State 1100, 1]
type = Explod
trigger1 = time = 0
anim = 3075
ID = 3090
facing = 1
postype = p1
pos = -3,-70
bindtime = 1
sprpriority = 6
ownpal = 1
vfacing = -1

[State 1100, 1]
type = Explod
trigger1 = animelem = 6
anim = 3070
ID = 3080
facing = 1
postype = p1
pos = 2,-50
bindtime = -1
sprpriority = 6
ownpal = 1
removetime = -1
scale = .8,.8

[State 1100, 1]
type = Explod
trigger1 = animelem = 5,>0 && animelem = 10,<0 && timemod = 5,0
anim = 3075
ID = 3090
facing = 1
postype = p1
pos = 0,0
random = 30,10
vel = 0,2.5
bindtime = 1
sprpriority = 6
ownpal = 1

[State 1100, 1]
type = RemoveExplod
trigger1 = animelem = 10
ID = 3080

[State 1100, 1]
type = Explod
trigger1 = animelem = 10
anim = 3075
ID = 3090
facing = 1
postype = p1
pos = -3,-70
bindtime = 1
sprpriority = 3
ownpal = 1
vfacing = -1

[State 3250 1]
type = TargetBind
trigger1 = AnimElem = 1,>0 && animelem = 11,<0
pos = 4,0

[State 3250 1]
type = posset
trigger1 = AnimElem = 1,=0
x = target,Const(size.mid.pos.x)
y = target,Const(size.mid.pos.y)

[State 3250 1]
type = posset
trigger1 = AnimElem = 1,=2
x = target,Const(size.mid.pos.x)
y = target,Const(size.mid.pos.y)-10

[State 3250 1]
type = posset
trigger1 = AnimElem = 2,=0
x = target,Const(size.mid.pos.x)
y = target,Const(size.mid.pos.y)-20

[State 3250 1]
type = posset
trigger1 = AnimElem = 2,=2
x = target,Const(size.mid.pos.x)
y = target,Const(size.mid.pos.y)-30

[State 3250 1]
type = posset
trigger1 = AnimElem = 3,=0
x = target,Const(size.mid.pos.x)
y = target,Const(size.mid.pos.y)-40

[State 3250 1]
type = posset
trigger1 = AnimElem = 3,=2
x = target,Const(size.mid.pos.x)
y = target,Const(size.mid.pos.y)-50

[State 810, Hurt]
type = turn
triggerall = BackEdgeBodyDist < 105
trigger1 = AnimElem = 11

[State 3250 1]
type = POSADD
trigger1 = AnimElem = 11
x = -32

[State 3250,VelSet]
type = VelSet
trigger1 = AnimElem = 11,=3
x = -3
y = -9.8

[State 3250,VelAdd]
type = VelAdd
trigger1 = AnimElem = 11, >= 3
y = .59

[State 2160, 33]
type = Explod
trigger1 = AnimElem = 8
anim = 13120
id = 3610
scale = .5,.5
pos = -105,-85
sprpriority = 4
postype = p2
pos = -50,0
bindtime =  -1
supermove = 1
under = 0
ownpal = 1
removetime =-1

[State 1100, 1]
type = null;Explod
trigger1 = AnimElem = 8
anim = 3613
ID = 813
postype = p1
pos = -35,110
bindtime = 1
sprpriority = 4
ownpal = 1

[State 1100, 1]
type = null;Explod
trigger1 = AnimElem = 8
anim = 3611
ID = 811
postype = p1
pos = -35,110
bindtime = 1
sprpriority = 3
ownpal = 1

[State 1100, 1]
type = null;Explod
trigger1 = AnimElem = 8
anim = 3612
ID = 812
postype = p1
pos = -35,110
bindtime = 1
sprpriority = 0
ownpal = 1

[State 3250 , 3]
type = ChangeState
trigger1 = Pos Y >= -4 && Vel Y > 0
value = 3620
ctrl = 0
;-------------------------------------------------------------------------------
;enemy
;-------------------------------------------------------------------------------
[Statedef 3615]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0
facep2 = 1

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 3260, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 3615+var(55)*30000

[State 830,ChangeAnim]
type = PalFx
trigger1 = time > 40
add = 20,20,200
mul = 224,256,256
sinadd = -20,-10,-10
time = 2
color = 0
invertall = 1

[State 3260,6]
type = ChangeState
trigger1 = enemy,stateno != [3610,3620]
value = 3616

;---------------------------------------------------------------------------
[Statedef 3616]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 0
facep2 = 1

[State 830,ChangeAnim]
type = PalFx
trigger1 = 1
add = 20,20,200
mul = 224,256,256
sinadd = -20,-10,-10
time = 2
color = 0
invertall = 1

[state 3265, 1]
type = poweradd
trigger1 = time = 0
value = -1000

[State 3265,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 3265]
type = VelSet
trigger1 = time = 0
x = -2
y = -14

[State 3265, 1]
type = ChangeAnim
trigger1 = time = 0
value = 2760+var(55)*30000

[State 3265,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3265, 1]
type = VelAdd
trigger1 = 1
y = .6

[State 3265, ANIM2]
type = SelfState
trigger1 = Pos Y >= -14 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
[Statedef 3620]
type    = A
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
anim = 3620
facep2 = 1
sprpriority = 1

[State 1100, 1]
type = targetlifeadd
trigger1 = time = 51
trigger2 = time = 79
trigger3 = AnimElem = 22
value = -100
kill = 0

[State 1100, 1]
type = hitadd
trigger1 = time = 51
trigger2 = time = 79
trigger3 = AnimElem = 22
value = 2

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 14
id = 2020
sprpriority = 3
postype = P1
pos = -10,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.25
size.yscale =.25

[State -2,]
type = null;Projectile
trigger1 = AnimElem = 14
projanim = 3625
projscale = .5,.5
projremovetime = 46
offset = -10,0
postype = p1
afterimage.time = -1
afterimage.length = 20 
afterimage.palbright = 0,0,0
afterimage.palcontrast = 50,150,250
afterimage.paladd =  0,0,0
afterimage.palmul = .85,.75,.75 
afterimage.timegap = 1
afterimage.framegap = 1
afterimage.trans = add

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 16
id = 2020
sprpriority = 3
postype = P1
pos = 10,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.3
size.yscale =.3

[State -2,]
type = null;Projectile
trigger1 = AnimElem = 16
projanim = 3625
projscale = .6,.6
projremovetime = 46
offset = 10,0
postype = p1
afterimage.time = -1
afterimage.length = 20 
afterimage.palbright = 0,0,0
afterimage.palcontrast = 50,150,250
afterimage.paladd =  0,0,0
afterimage.palmul = .85,.75,.75 
afterimage.timegap = 1
afterimage.framegap = 1
afterimage.trans = add

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 18
id = 2020
sprpriority = 3
postype = P1
pos = 35,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.35
size.yscale =.35

[State -2,]
type = null;Projectile
trigger1 = AnimElem = 18
projanim = 3625
projscale = .7,.7
projremovetime = 46
offset = 35,0
postype = p1
afterimage.time = -1
afterimage.length = 20 
afterimage.palbright = 0,0,0
afterimage.palcontrast = 50,150,250
afterimage.paladd =  0,0,0
afterimage.palmul = .85,.75,.75 
afterimage.timegap = 1
afterimage.framegap = 1
afterimage.trans = add

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 20
id = 2020
sprpriority = 3
postype = P1
pos = 65,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.4
size.yscale =.4

[State -2,]
type = null;Projectile
trigger1 = AnimElem = 20
projanim = 3625
projscale = .8,.8
projremovetime = 46
offset = 65,0
postype = p1
afterimage.time = -1
afterimage.length = 20 
afterimage.palbright = 0,0,0
afterimage.palcontrast = 50,150,250
afterimage.paladd =  0,0,0
afterimage.palmul = .85,.75,.75 
afterimage.timegap = 1
afterimage.framegap = 1
afterimage.trans = add

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 22
id = 2020
sprpriority = 3
postype = P1
pos = 100,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.45
size.yscale =.45

[State -2,]
type = null;Projectile
trigger1 = AnimElem = 22
projanim = 3625
projscale = .9,.9
projremovetime = 46
offset = 100,0
postype = p1
afterimage.time = -1
afterimage.length = 20 
afterimage.palbright = 0,0,0
afterimage.palcontrast = 50,150,250
afterimage.paladd =  0,0,0
afterimage.palmul = .85,.75,.75 
afterimage.timegap = 1
afterimage.framegap = 1
afterimage.trans = add

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 24
id = 2020
sprpriority = 3
postype = P1
pos = 140,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.5

[State -2,]
type = null;Projectile
trigger1 = AnimElem = 24
projanim = 3625
projscale = 1,1
projremovetime = 46
offset = 140,0
postype = p1
afterimage.time = -1
afterimage.length = 20 
afterimage.palbright = 0,0,0
afterimage.palcontrast = 50,150,250
afterimage.paladd =  0,0,0
afterimage.palmul = .85,.75,.75 
afterimage.timegap = 1
afterimage.framegap = 1
afterimage.trans = add

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 26
id = 2020
sprpriority = 3
postype = P1
pos = 180,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.75
size.yscale =.75

[State -2,]
type = null;Projectile
trigger1 = AnimElem = 26
projanim = 3625
projscale = 1.5,1.5
projremovetime = 46
offset = 180,0
postype = p1
afterimage.time = -1
afterimage.length = 20 
afterimage.palbright = 0,0,0
afterimage.palcontrast = 50,150,250
afterimage.paladd =  0,0,0
afterimage.palmul = .85,.75,.75 
afterimage.timegap = 1
afterimage.framegap = 1
afterimage.trans = add

[State 1100, 1]
type = Explod
trigger1 = AnimElem = 21
anim = f2
ID = 812
facing = 1
postype = p2
pos = 0,50
scale = 1.2,1.2
bindtime = 1
sprpriority = 33
ownpal = 1

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 14
trigger2 = AnimElem = 16
trigger3 = AnimElem = 18
trigger4 = AnimElem = 20
trigger5 = AnimElem = 22
trigger6 = AnimElem = 24
trigger7 = AnimElem = 26
value = 3000,42

[State 183, 3]
type = EnvShake
trigger1 = AnimElem = 22
ignorehitpause = 1
ampl = 8
freq = 150
time = 20

[State 183, 3]
type = playsnd
trigger1 = animtime = 0
value = 3000,39

[State 183, 3]
type = playsnd
trigger1 = AnimElem = 3
value = 3600,0

[State 3210, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 3210, 2]
type = PosSet
trigger1 = Time = 0
y = 0

;-------------------------------------------
[State 2900, 1]
type = helper
trigger1 = AnimElem = 3
id = 1000
persistent = 0
name = "diana"
pos = 90,-40
postype = P1
stateno = 3650
helpertype = normal
keyctrl = 0
ownpal = 1
;-------------------------------------------
;-------------------------------------------
[State 2900, 1]
type = helper
trigger1 = AnimElem = 3
id = 1000
persistent = 0
name = "foxy"
pos = 50,0
postype = P1
stateno = 3680
helpertype = normal
keyctrl = 0
ownpal = 1
;-------------------------------------------

[State 1000, 1]
type = RemoveExplod
trigger1 = animelem = 30
id = 3610

[State 3040]
type = Explod
trigger1 = animelem = 30
anim = 2095
scale = .5,.5
id = 13611
postype = P2
bindtime = 1
pos = -100,-61
sprpriority = 1
bindtime =  1
supermove = 1
under = 0
ownpal = 1
removetime =-2
persistent = 0

[State 750,ex ]
type = Explod
trigger1 = animelem = 30,>0 && animelem = 39,<0 && timemod = 6,0
anim = 2400
ID = 812
pos = 0,60
postype = p2
vel = -5,-15-(random%3)
random = 12,0
sprpriority = 51
ownpal = 1

[State 750,ex ]
type = Explod
trigger1 = animelem = 30,>0 && animelem = 39,<0 && timemod = 6,0
anim = 2401
ID = 812
pos = 0,60
postype = p2
vel = -4,12+(random%3)
random = 12,0
removetime = 100
sprpriority = 25
ownpal = 1

[State 750,ex ]
type = Explod
trigger1 = animelem = 30,>0 && animelem = 39,<0 && timemod = 6,0
anim = 2402
ID = 812
pos = 0,60
postype = p2
vel = 6,-11-(random%3)
random = 12,10
removetime = 100
sprpriority = 31
ownpal = 1

[State 750,ex ]
type = Explod
trigger1 = animelem = 30,>0 && animelem = 39,<0 && timemod = 6,0
anim = 2403
ID = 812
pos = 0,60
postype = p2
vel = 9,13+(random%3)
random = 10,5
removetime = 100
sprpriority = 51
ownpal = 1

[State 750,ex ]
type = Explod
trigger1 = animelem = 30,>0 && animelem = 39,<0 && timemod = 6,0
anim = 2404
ID = 812
pos = 0,60
postype = p2
vel = -11,1+(random%3)
random = 10,15
removetime = 100
sprpriority = 51
ownpal = 1

[State 750,ex ]
type = Explod
trigger1 = animelem = 30,>0 && animelem = 39,<0 && timemod = 6,0
anim = 2405
ID = 812
pos = 0,60
postype = p2
vel = -12,-15-(random%3)
random = 12,10
sprpriority = 51
ownpal = 1

[State 750,ex ]
type = Explod
trigger1 = animelem = 30,>0 && animelem = 39,<0 && timemod = 6,0
anim = 2406
ID = 812
pos = 0,60
postype = p2
vel = 12,-4-(random%3)
random = 12,0
removetime = 100
sprpriority = 51
ownpal = 1

[State 750,ex ]
type = Explod
trigger1 = animelem = 30,>0 && animelem = 39,<0 && timemod = 6,0
anim = 2407
ID = 812
pos = 0,60
postype = p2
vel = 9,5+(random%3)
random = 12,10
removetime = 100
sprpriority = 51
ownpal = 1

[State 750,ex ]
type = Explod
trigger1 = animelem = 30,>0 && animelem = 39,<0 && timemod = 6,0
anim = 2408
ID = 812
pos = 0,60
postype = p2
vel = 12,1+(random%3)
random = 10,5
removetime = 100
sprpriority = 51
ownpal = 1

[State 750,ex ]
type = Explod
trigger1 = animelem = 30,>0 && animelem = 39,<0 && timemod = 6,0
anim = 2409
ID = 812
pos = 0,60
postype = p2
vel = 13,-2+(random%3)
random = 10,15
removetime = 100
sprpriority = 51
ownpal = 1

[State 750,ex ]
type = Explod
trigger1 = animelem = 30,>0 && animelem = 39,<0 && timemod = 6,0
anim = 2410
ID = 812
pos = 0,60
postype = p2
vel = -10,-13-(random%3)
random = 10,15
removetime = 100
sprpriority = 51
ownpal = 1

[State 183, 3]
type = EnvShake
trigger1 = animelem = 39
ignorehitpause = 1
ampl = 8
freq = 100
time = 50

[State 3250 , 3]
type = playsnd
trigger1 = animelem = 39
value = 8010,1

[State 1100, 1]
type = targetlifeadd
trigger1 = animelem = 39
value = -10
kill = 1

[State 3250 , 3]
type = ChangeState
trigger1 = animelem = 39
value = 3630
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 3630]
type    = A
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
facep2 = 1
sprpriority = 1

[State 3250 , 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------
[Statedef 3650]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd = 0
velset = 0,0
ctrl = 0
anim = 3650

[State 183, 3]
type = turn
trigger1 = time = 0

[State 183, 3]
type = EnvShake
trigger1 = AnimElem = 6
trigger2 = AnimElem = 14
ignorehitpause = 1
ampl = 6
freq = 150
time = 10

[State 183, 3]
type = playsnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 14
value = 5,8

[State 1100, 1]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 14
anim = f6
ID = 812
facing = 1
postype = p2
pos = 0,50
bindtime = 1
sprpriority = 33
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = time = 0
anim = 3660
ID = 812
facing = -1
postype = p1
pos = 35,0
bindtime = 1
sprpriority = 13
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = time = 0
anim = 3670
ID = 812
facing = -1
postype = p1
pos = 35,0
bindtime = 1
sprpriority = 13
ownpal = 1

[state a]
type = destroyself
trigger1 = animtime = 0

;------------------------------------------------------------------------
[Statedef 3680]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd = 0
velset = 0,0
ctrl = 0
anim = 3680
sprpriority = 13

[State 183, 3]
type = EnvShake
trigger1 = AnimElem = 7
trigger2 = AnimElem = 17
ignorehitpause = 1
ampl = 8
freq = 150
time = 15

[State 183, 3]
type = playsnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 17
value = 5,8

[State 1100, 1]
type = Explod
trigger1 = AnimElem = 7
trigger2 = AnimElem = 17
anim = f6
ID = 812
facing = 1
postype = p2
pos = 0,70
bindtime = 1
sprpriority = 33
ownpal = 1

[State 183, 3]
type = velset
trigger1 = AnimElem = 14
x = 6
y = -9

[State 1100, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 3685
ID = 812
postype = p1
pos = 5,0
bindtime = 1
sprpriority = 15
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = AnimElem = 17
anim = 3690
ID = 812
postype = p1
pos = 0,10
bindtime = 1
sprpriority = 15
ownpal = 1

[State 1105, y]
type = veladd
trigger1 = animelem = 15,>0
x = -.1

[State 1105, y]
type = veladd
trigger1 = animelem = 15,>0
y = .5

[state a]
type = Changestate
trigger1 = animelem = 15,>0
trigger1 = vel y >= 0 && pos y >= 0
value = 3681

;------------------------------------------------------------------------
[Statedef 3681]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd = 0
velset = 0,0
ctrl = 0
anim = 3681

[State 1105, y]
type = posset
trigger1 = time = 0
y = 0

[state a]
type = destroyself
trigger1 = animtime = 0

;==============================================================================
[Statedef 2000]
type = S
movetype = A
physics = S
anim = 2000
velset = 0
ctrl = 0
poweradd = ifelse(fvar(30) > 0,0,-1000)
velset = 0,0,0
facep2 = 1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 1, Width]
type = Width
trigger1 = time=0
edge = 65

[State -2, 0]
type = PalFX
triggerall = timemod = 2,0 && time <= 14
trigger1 = prevstateno = [1000,3999]
time = 1
add = 255,255,255
mul = 255,255,255
color = 1
ignorehitpause = 1

[State 2000, 7]
type = Varset
trigger1 = time = 1
var(10) = 0

[State 3000, 0]
type = PlaySnd
trigger1 = Time = 0
value = 2000,0
channel = 0

[State 3000, 0]
type = PlaySnd
trigger1 = animelem = 8, = 1
value = 3000,42
persistent = 0

[State 2200, 8]
type = SuperPause
trigger1 = Time = 2
time = 30
movetime = 30
anim = -1
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 2
anim = f7000
ID = 7000
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 5,-68
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 2
anim = f7010
ID = 7010
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 5,-68
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 2
value = f9000,0

[State 3500, 13]
type = AssertSpecial
trigger1 = Time = [2,31]
flag = Nofg
flag1 = noshadow
ignorehitpause = 1

[State 3000, Muteki]
type = nothitby
trigger1 = time = 0
value = SCA
time = 32

[State explod];X
type = Explod
trigger1 = AnimElem = 2
anim = 2001
id = 2001
sprpriority = 5
postype = p1
pos = 4,6
bindTime = -1
ownpal = 1
ignorehitpause = 0
pausemovetime = 999
supermovetime = 999
scale = 0.5,0.5

[State 1100, 1]
type = Helper
trigger1 = animelemtime(8) = 1
id = 2020
sprpriority = 3
postype = P1
pos = 15,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.45
size.yscale =.45

[State 1100, 1]
type = Helper
trigger1 = animelemtime(6) = 1
id = 2010
sprpriority = 3
postype = P1
pos = 10,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.5

[State 1100, 1]
type = Helper
trigger1 = animelemtime(8) = 1
id = 2010
sprpriority = 3
postype = P1
pos = 50,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.5

[State 180,]
type = VarRandom
trigger1 = 1
v = 22
range = 0,2

[State 3000, hitdef]
type = Projectile
trigger1 = animelemtime(8) = 1
persistent = 0
ProjAnim = 2011
ProjHitAnim = 2011
ProjRemove = 1
ProjRemoveTime = 19
ProjID = ifelse(var(22) = 2,2011,3000)
ProjPriority = 7
ProjsprPriority = 3
projshadow = 64,64,64
offset = 28,0
velocity = 0,0
hitflag = MAFP
guardflag = M
attr = S, HP
damage = ifelse(enemy,var(0) = 1,270,250),10 
animtype = UP
givepower = 20,60
pausetime = 0,12
sparkno = -1
guard.sparkno = -1
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(var(22) = 2,2070,4095)
id=70000

[State 1100, sparking!]
type = Explod
trigger1 = projhit = 1
anim = f2
ID = 1000
postype = p2
pos = 0,-50
bindtime = 1
sprpriority = 8
ownpal = 1

[State 1100, sparking!]
type = Explod
trigger1 = ProjGuarded = 1
anim = f42
ID = 1000
postype = p2
pos = 0,-50
bindtime = 1
sprpriority = 8
ownpal = 1

[State 183, 3]
type = EnvShake
trigger1 = AnimElem = 8
persistent = 0
ignorehitpause = 1
freq = 120
phase = 120
time = 15

[State MovetypeReset]
type = statetypeset
trigger1 = animelemtime(11) >= 0
movetype = I

[State 3000, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 2030]
type    = S
movetype= H
physics = N
juggle  = 0
poweradd = 0
anim = 99999
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3030]
type = Explod
trigger1 = P2StateNo = 2070
anim = 2060
ID = 3060
postype = P2
bindtime = -1
pos = -105,-190
sprpriority = 5
persistent = 0
ignorehitpause = 1
scale = .5,.5

[State 3030]
type = RemoveExplod
trigger1 = P2StateNo != 2070
ID = 2060

[State 3030]
type = ChangeState
trigger1 = P2StateNo = 2080
value = 2035

;---------------------------------------------------------------------------
[Statedef 2035]
type    = S
movetype= H
physics = N
juggle  = 0
poweradd = 0
anim = 99999
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3035]
type = Explod
trigger1 = P2StateNo = 2080
anim = 2065
ID = 2065
postype = P2
bindtime = -1
pos = -105,-190
sprpriority = 5
persistent = 0
ignorehitpause = 1
scale = .5,.5

[State 3035]
type = RemoveExplod
trigger1 = P2StateNo != 2080
ID = 2065

[State 3035]
type = ChangeState
trigger1 = P2StateNo != 2080
value = 2040

;---------------------------------------------------------------------------
[Statedef 2040]
type    = S
movetype= H
physics = N
juggle  = 0
poweradd = 0
anim = 99999
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3040]
type = Explod
trigger1 = P2StateNo = 2090
trigger1 = Time = 0
anim = 2095
postype = P2
bindtime = 1
pos = -100,-181
sprpriority = 5
persistent = 0
ignorehitpause = 1
scale = .5,.5

[State 3040]
type = Explod
trigger1 = P2StateNo != 2090
trigger1 = Time = 0
anim = 2095
postype = P2
bindtime = 1
pos = -105,-190
sprpriority = 5
persistent = 0
ignorehitpause = 1
scale = .5,.5

[State 200, 1]
type = PlaySnd
trigger1 = Time = 0
value = 3000,39

[State 3040]
type = Explod
trigger1 = Time = 0
trigger1 = P2StateNo = 2090
ignorehitpause = 1
anim = 4590
ID = 4590
postype = P2
pos = 0,-60
velocity = 0,0
bindtime = 1
sprpriority = 5
ownpal = 1
scale = .5,.5
persistent = 0

[State 3040]
type = Explod
trigger1 = Time = 0
trigger1 = P2StateNo = 2090
ignorehitpause = 1
anim = 4591
ID = 4591
postype = P2
pos = -10,-80
velocity = 0,0
bindtime = 1
sprpriority = -3
ownpal = 1
scale = .5,.5
persistent = 0

[State 3040]
type = Explod
trigger1 = Time = 0
trigger1 = P2StateNo = 2090
ignorehitpause = 1
anim = 4592
ID = 4592
postype = P2
pos = 20,-100
velocity = 0,0
bindtime = 1
sprpriority = 4
ownpal = 1
scale = .5,.5
persistent = 0

[State 3040]
type = Explod
trigger1 = Time = 0
trigger1 = P2StateNo = 2090
ignorehitpause = 1
anim = 4593
ID = 4593
postype = P2
pos = -20,-95
velocity = 0,0
bindtime = 1
sprpriority = -2
ownpal = 1
scale = .3,.3
persistent = 0

[State 3040]
type = Explod
trigger1 = Time = 0
trigger1 = P2StateNo = 2090
ignorehitpause = 1
anim = 4594
ID = 4594
postype = P2
pos = 0,-130
velocity = 0,0
bindtime = 1
sprpriority = 4
ownpal = 1
scale = .35,.35
persistent = 0

[State 3040]
type = Explod
trigger1 = Time = 0
trigger1 = P2StateNo = 2090
ignorehitpause = 1
anim = 4595
ID = 4595
postype = P2
pos = -10,-105
velocity = 0,0
bindtime = 1
sprpriority = 6
ownpal = 1
scale = .35,.35
persistent = 0

[State 3040]
type = Explod
trigger1 = Time = 0
trigger1 = P2StateNo = 2090
ignorehitpause = 1
anim = 4596
ID = 4596
postype = P2
pos = 0,-40
velocity = 0,0
bindtime = 1
sprpriority = 4
ownpal = 1
scale = .5,.5
persistent = 0

[State 3040]
type = DestroySelf
trigger1 = Time = 13

;---------------------------------------------------------------------------
[Statedef 2070]
type = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 1

[State 3070]
type = VelSet
triggerall = Facing*Enemy,Facing = -1
trigger1 = Time > 6 && (Time < 8)
x = -1.76
y = -8.09

[State 3070]
type = VelSet
triggerall = Facing*Enemy,Facing = 1
trigger1 = Time > 6 && (Time < 8)
x = 1.76
y = -8.09

[State 3070]
type = VelAdd
trigger1 = Time >= 8
y = .523

[State 3070]
type = ChangeAnim2
trigger1 = Time = 0
value = 2070+var(55)*30000

[State 3070]
type = PalFX
trigger1 = Time <= 54
time = 2
add = 0,0,120
sinadd = 50,50,50,15
invertall = 1
color = 1
ignorehitpause = 1

[State 3070]
type = ChangeState
trigger1 = Time >= 8
trigger1 = Pos Y >= -8 && Vel Y > 0
value = 2080
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 2080]
type = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 1

[State 3080]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3080]
type = ChangeAnim2
trigger1 = Time = 0
value = 2080+var(55)*30000

[State 3080]
type = PalFX
trigger1 = Time <= 80
time = 2
add = 0,0,120
sinadd = 50,50,50,15
invertall = 1
color = 1
ignorehitpause = 1

[State 3080]
type = ChangeState
trigger1 = AnimTime = 0
value = 2090

;---------------------------------------------------------------------------
[Statedef 2090]
type    = A
movetype= H
physics = N

[State 3090]
type = VelSet
triggerall = Facing*Enemy,Facing = -1
trigger1 = Time < 2
x = -4.64
y = -8.09

[State 3090]
type = VelSet
triggerall = Facing*Enemy,Facing = 1
trigger1 = Time < 2
x = 4.64
y = -8.09

[State 3090]
type = VelAdd
trigger1 = 1
y = .523

[State 3090]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3090]
type = ChangeAnim
trigger1 = Time = 1
value = 5050+var(55)*30000

[State 3090]
type = ChangeAnim
trigger1 = Time = 7
value = 5060+var(55)*30000

[State 3090]
type = SelfState
trigger1 = Pos Y >= -8 && Vel Y > 0
value = 5100

;--------------------------------------------------------------------------
[Statedef 3477]
type = S
movetype = A
physics = S
anim = 2100
velset = 0
ctrl = 0
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
facep2 = 1
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 3000, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 14
trigger1 = prevstateno = [1000,3999]
ignorehitpause = 1
time = 1
add = 255,255,255
ignorehitpause = 1

[State 2000, 7]
type = VarSet
trigger1 = time = 0
var(10) = 0

[State 3050, 0]
type = PlaySnd
trigger1 = Time = 0
value = 2000,1
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
value = 3000,42

[State 3050, 0]
type = null;PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 11
trigger3 = AnimElem = 15
value = 3000,42

[State 2200, 8]
type = SuperPause
trigger1 = Time = 2
time = 30
movetime = 30
anim = -1
darken = 0

[State 3200, 4]
type = Explod
trigger1 = Time = 2
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = Time = 2
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 2
anim = f7100
ID = 7100
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 5,-68
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 2
anim = f7110
ID = 7110
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 5,-68
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 2
value = f9000,1

[State 3500, 13]
type = AssertSpecial
trigger1 = Time = [2,31]
flag = Nofg
flag1 = noshadow
ignorehitpause = 1

[State 3050, Muteki]
type = nothitby
trigger1 = time = 0
value = SCA
time = 32

[State 183, 3]
type = EnvShake
trigger1 = AnimElem = 6
trigger2 = AnimElem = 11
trigger3 = AnimElem = 15
ignorehitpause = 1
freq = 120
phase = 120
time = 15

[State 2060, 12]
type = EnvColor
trigger1 = 1
time = 1
value = 0,0,0
under = 1
ignorehitpause = 1

[State 7800, 3]
type = BGPalfx
trigger1 =1
ignorehitpause = 1
supermove = 1
time = 1
mul = 0,0,0

[State MovetypeReset]
type = statetypeset
trigger1 = animelemtime(17) >= 0
movetype = I

[State explod];X
type = Explod
trigger1 = AnimElem = 2
anim = 2001
id = 2001
sprpriority = 5
postype = p1
pos = 2,6
bindTime = -1
ownpal = 1
ignorehitpause = 0
pausemovetime = 999
supermovetime = 999
scale = 0.5,0.5

[State 1100, 1]
type = Helper
trigger1 = animelemtime(6) = 1
trigger2 = animelemtime(15) = 1
id = 2010
sprpriority = 3
postype = P1
pos = 10,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.5

[State 1100, 1]
type = Helper
trigger1 = animelemtime(4) = 1
trigger2 = animelemtime(13) = 1
id = 2010
sprpriority = 3
postype = P1
pos = 50,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.5

[State 1100, 1]
type = Helper
trigger1 = animelemtime(6) = 1
id = 2020
sprpriority = 3
postype = P1
pos = 0,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.35
size.yscale =.35

[State 1100, 1]
type = Helper
trigger1 = animelemtime(11) = 1
id = 2020
sprpriority = 3
postype = P1
pos = 30,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.4
size.yscale =.4

[State 1100, 1]
type = Helper
trigger1 = animelemtime(15) = 1
id = 2020
sprpriority = 3
postype = P1
pos = 70,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.45
size.yscale =.45

[State 1100, 1]
type = Helper
trigger1 = animelemtime(18) = 1
id = 2020
sprpriority = 3
postype = P1
pos = 120,0
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.5

[State 3050, hitdef]
type = Projectile
trigger1 = animelemtime(6) = 1
persistent = 0
ProjAnim = 2011
ProjHitAnim = 2011
ProjRemove = 0
ProjRemoveTime = 19
ProjID = 3000
ProjPriority = 7
ProjsprPriority = 3
projshadow = 64,64,64
offset = 28,0
velocity = 0,0
hitflag = MAFP
guardflag = M
attr = S, HP
damage = 170,10 
animtype = UP
givepower = 20,60
pausetime = 0,12
sparkno = -1
guard.sparkno = -1
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4830,4095)
id=70000

[State 3050, hitdef]
type = Projectile
trigger1 = animelemtime(11) = 1
persistent = 0
ProjAnim = 2011
ProjHitAnim = 2011
ProjRemove = 0
ProjRemoveTime = 19
ProjID = 3000
ProjPriority = 7
ProjsprPriority = 3
projshadow = 64,64,64
offset = 58,0
velocity = 0,0
hitflag = MAFP
guardflag = M
attr = S, HP
damage = 170,10 
animtype = UP
givepower = 20,60
pausetime = 0,12
sparkno = -1
guard.sparkno = -1
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4830,4095)
id=70000

[State 3050, hitdef]
type = Projectile
trigger1 = animelemtime(15) = 1
persistent = 0
ProjAnim = 2011
ProjHitAnim = 2011
ProjRemove = 0
ProjRemoveTime = 19
ProjID = 3000
ProjPriority = 7
ProjsprPriority = 3
projshadow = 64,64,64
offset = 98,0
velocity = 0,0
hitflag = MAFP
guardflag = M
attr = S, HP
damage = 170,10 
animtype = UP
givepower = 20,60
pausetime = 0,12
sparkno = -1
guard.sparkno = -1
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(enemy,var(0) = 1,4830,4095)
id=70000

[State 3050, hitdef]
type = Projectile
trigger1 = animelemtime(18) = 1
persistent = 0
ProjAnim = 2011
ProjHitAnim = 2011
ProjRemove = 0
ProjRemoveTime = 19
ProjID = 2011
ProjPriority = 7
ProjsprPriority = 3
projshadow = 64,64,64
offset = 148,0
velocity = 0,0
hitflag = MAFP
guardflag = M
attr = S, HP
damage = 170,10 
animtype = UP
givepower = 20,60
pausetime = 0,12
sparkno = -1
guard.sparkno = -1
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0
guard.hittime = 14
guard.velocity = -13
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 2070
id=70000

[State 1100, sparking!]
type = Explod
trigger1 = projhit = 1
anim = f2
ID = 1000
postype = p2
pos = 0,-50
bindtime = 1
sprpriority = 8
ownpal = 1

[State 1100, sparking!]
type = Explod
trigger1 = ProjGuarded = 1
anim = f42
ID = 1000
postype = p2
pos = 0,-50
bindtime = 1
sprpriority = 8
ownpal = 1

[State 3050, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------Freeze Execution
[Statedef 3671]
type = S
movetype = A
physics = S
anim = 2200
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
juggle = 0
velset = 0
ctrl = 0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 2100, var]
type = Varset
trigger1 = time = 0
var(17) = 1

[State 3000, hehe!]
type = NotHitBy
trigger1 = time < 50
value = SCA

[State 2100, bg]
type = assertspecial
trigger1 = time = [0,30]
flag = nobg
flag2 = nofg

[State 1100, dm spark]
type = Explod
trigger1 = animelem = 1
anim = f7110
scale = 0.5,0.5
ID = 1000
postype = p1
pos = 0,-60
bindtime = -1
sprpriority = 2
supermovetime = 30
ownpal = 1
removeongethit = 1

[State 3200, 4]
type = Explod
trigger1 = AnimElem = 1
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = AnimElem = 1
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 1100, dm spark]
type = Explod
trigger1 = animelem = 1
anim = f7100
scale = 0.5,0.5
ID = 1000
postype = p1
pos = 0,-60
bindtime = -1
sprpriority = -2
supermovetime = 30
ownpal = 1
removeongethit = 1

[State 3009, pause]
type = SuperPause
trigger1 = Animelem = 1
time = 30
anim = -1
movetime = 30
darken = 0
p2defmul = 1

[State 1000, dm sound]
type = Playsnd
trigger1 = AnimElem = 1
value = f9000,1

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2200,0

[State -1]
Type = Explod
Trigger1 = AnimElem = 2
Anim = 10008
ID = 10008
PosType = Left
Pos = 222,210
RemoveTime = -2
RemoveOnGetHit = 1
BindTime = -1
Ownpal = 1
SprPriority = -5
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = 10
Anim = 10009
ID = 10009
PosType = Left
Pos = 222,210
RemoveTime = -2
RemoveOnGetHit = 1
BindTime = -1
Ownpal = 1
SprPriority = -2
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = Time = 12
StateNo = 20000
ID = 20000
PosType = back;Left
Pos = -45,-180-Ceil(ScreenPos Y+Pos Y)
Ownpal = 1
SprPriority = -10
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = null;Explod
Trigger1 = AnimElem = 34
Anim = F24291
scale = 1.35,1
ID = 10010
PosType = back;Left
Pos = 0,0
RemoveTime = -2
RemoveOnGetHit = 1
BindTime = -1
Ownpal = 1
SprPriority = 999
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3100, bgpal]
type = BGPalFX
trigger1 = animelem = 33,<0
invertall = 1
time = 1
mul = 100,100,255
ignorehitpause = 1

[State 2100, bg]
type = assertspecial
trigger1 = 1
flag = nofg
ignorehitpause = 1

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 9
value = 3000,43

[State 1100, dm spark]
type = Explod
trigger1 = AnimElem = 9
anim = 3065
scale = 1.65,1
ID = 3065
postype = left
pos = 156,180
bindtime = -1
sprpriority = -2
supermovetime = 30
ownpal = 1
removeongethit = 1
removetime = 100

[State 1100, sparking!]
type = Explod
trigger1 = projhit2201 = 1
anim = f2
ID = 1000
postype = p2
pos = 0,-50
bindtime = 1
sprpriority = 8
ownpal = 1

[State 1100, sparking!]
type = Explod
trigger1 = ProjGuarded2201 = 1
anim = f42
ID = 1000
postype = p2
pos = 0,-50
bindtime = 1
sprpriority = 8
ownpal = 1

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 2
projanim = 3510
projhitanim = 3510
projID = 3000
velocity = 20
projremovetime = -1
projpriority = 5
projhits = 2
projmisstime = 120
postype = back
offset = -150,0
attr = S, HP
damage = 106,10
animtype = up
hitflag = MAFP
guardflag = M
sparkno = 6
guard.sparkno = 42
sparkxy = 100,-60
hitsound = S5,8
guardsound = s6,10
pausetime = 0,4
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = 0,-12
air.velocity = 0,-12
fall = 1
fall.recover = 0
yaccel = .5
getpower = 0
air.juggle = 10

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 9
projanim = 2201
projhitanim = 2201
projID = 2201
velocity = 4
accel = .8
projremovetime = 100
projpriority = 1
projhits = 9
projmisstime = 1
postype = back
offset = 0,0
attr = S, HP
damage = 66,10
animtype = hard
hitflag = MAFP
guardflag = M
sparkno = -1
guard.sparkno = -1
sparkxy = 10,-150
hitsound = S3000,36
guardsound = s6,10; = S6,0
pausetime = 4,13
ground.hittime = 19
ground.type = low
ground.slidetime = 19
p2stateno = ifelse(enemy,var(0) = 1,4830,4095)
ground.velocity = -4,-9
air.velocity = -4,-9
fall = 1
fall.recover = 0
yaccel = .5
getpower = 0
palfx.time = 51
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8

[State 1110, 1]
type = HELPER
trigger1 = AnimElem = 9
name = "fire"
ID = 21040
pos = 0,0
postype = P1
stateno = 21040
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 3110, 3]
type = Helper
trigger1 = AnimElem = 9
ID = 9910
postype = P2
pos = 0,-95
stateno = 9910
keyctrl = 0
facing = 1
ownpal = 1
size.xscale = 0.7
size.yscale = 0.7

[State 3110, 3]
type = Helper
triggerALL = numhelper(9911) = 0
trigger1 = AnimElem = 33
ID = 9911
postype = P2
pos = -35,-95
stateno = 9911
keyctrl = 0
facing = 1
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 3110, 3]
type = Helper
triggerALL = numhelper(9912) = 0
trigger1 = AnimElem = 33
ID = 9912
postype = P2
pos = -35,-95
stateno = 9912
keyctrl = 0
facing = 1
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 3110, 3]
type = Helper
triggerALL = numhelper(9913) = 0
trigger1 = AnimElem = 33
ID = 9913
postype = P2
pos = -35,-95
stateno = 9913
keyctrl = 0
facing = 1
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 3110, 3]
type = Helper
triggerALL = numhelper(9914) = 0
trigger1 = AnimElem = 33
ID = 9914
postype = P2
pos = -35,-95
stateno = 9914
keyctrl = 0
facing = 1
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 3110, 3]
type = Helper
triggerALL = numhelper(9915) = 0
trigger1 = AnimElem = 33
ID = 9915
postype = P2
pos = -35,-95
stateno = 9915
keyctrl = 0
facing = 1
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 3110, 3]
type = Helper
triggerALL = numhelper(9916) = 0
trigger1 = AnimElem = 33
ID = 9916
postype = P2
pos = -35,-95
stateno = 9916
keyctrl = 0
facing = 1
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 3110, 3]
type = Helper
triggerALL = numhelper(9917) = 0
trigger1 = AnimElem = 33
ID = 9917
postype = P2
pos = -35,-95
stateno = 9917
keyctrl = 0
facing = 1
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 3110, 3]
type = Helper
triggerALL = numhelper(9918) = 0
trigger1 = AnimElem = 33
ID = 9918
postype = P2
pos = -35,-95
stateno = 9918
keyctrl = 0
facing = 1
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------bg helper
[Statedef 20000]
Type = S
MoveType = A
Physics = N
SprPriority = -100
Anim = 20000
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PalFx
Trigger1 = 1
Time = 1
add = -20,-20,-20
color = 50
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = AssertSpecial
Trigger1 = 1
Flag = Noshadow
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitOverRide
Trigger1 = 1
Attr = SCA, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = -1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = DestroySelf
Trigger1 = time = 100;210
IgnoreHitPause = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

;---------------------Ice Block
[Statedef 2300]
type = S
movetype = A
physics = S
anim = 2300
poweradd = ifelse(fvar(30) > 0,0,-1000)
juggle = 10
velset = 0
ctrl = 0

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
id = 9000
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 3000, hehe!]
type = NotHitBy
trigger1 = time < 40
value = SCA

[State 2100, bg]
type = assertspecial
trigger1 = time = [0,30]
flag = nobg
flag2 = nofg

[State 1100, dm spark]
type = Explod
trigger1 = AnimElem = 1
anim = f7010
scale = 0.5,0.5
ID = 1000
postype = p1
pos = 0,-120
bindtime = -1
sprpriority = 2
supermovetime = 30
ownpal = 1
removeongethit = 1

[State 1100, dm spark]
type = Explod
trigger1 = AnimElem = 1
anim = f7000
scale = 0.5,0.5
ID = 1000
postype = p1
pos = 0,-120
bindtime = -1
sprpriority = -2
supermovetime = 30
ownpal = 1
removeongethit = 1

[State 3009, pause]
type = SuperPause
trigger1 = Animelem = 1
time = 30
anim = -1
movetime = 30
darken = 0
p2defmul = 1

[State 1000, dm sound]
type = Playsnd
trigger1 = AnimElem = 1
value = f9000,0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 440,0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 12
value = 240,0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 12
value = 3000,42

[State 810, snd]
type = playsnd
trigger1 = animelem = 2
value = 3000,38

[State 2300, shake]
type = EnvShake
trigger1 = animelem = 13
time = 10
ampl = 4
freq = 60

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 2
id = 2305
sprpriority = 3
postype = P1
pos = -50,-190
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.5

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 2
projanim = 12305
projhitanim = 12305
projID = 3000
velocity = 0
projremovetime = 26
projpriority = 5
postype = p1
offset = 0,0
attr = S, HP
damage = 50,10
animtype = up
hitflag = MAFP
guardflag = M
sparkno = 2
guard.sparkno = 41
sparkxy = 60,-50
hitsound = S3000,39
guardsound = s6,10; = S6,0
pausetime = 0,3
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -5,-9
air.velocity = -5,-9
fall = 1
fall.recover = 0
yaccel = .5
getpower = 0
palfx.time = 57
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
air.juggle = 6

[State 2900, 1]
type = helper
trigger1 = AnimElem = 13
id = 1000
persistent = 0
name = "ice"
pos = 0,0
postype = P1
stateno = 2306
helpertype = normal
keyctrl = 0
ownpal = 1

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------
[Statedef 2306]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 9,0
ctrl = 0
anim = 12306

[State 1100, 1]
type = Helper
trigger1 = time = 0
id = 2306
sprpriority = 3
postype = P1
pos = -50,-190
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.5

[state 2901,1]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state 2901,1]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[State 2]
type = HitDef
trigger1 = time = 0
attr = S, HP
damage = 300,10
animtype = up
hitflag = MAFP
guardflag = M
sparkno = 2
guard.sparkno = 42
sparkxy = 0,-50
hitsound = S3000,39
guardsound = s6,10; = S6,0
pausetime = 0,13
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -3,-7
air.velocity = -3,-7
fall = 1
fall.recover = 0
yaccel = .5
getpower = 0
palfx.time = 57
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
air.juggle = 4
envshake.time = 5
envshake.ampl = 4
envshake.freq = 130
envshake.phase = 130
p1stateno = 2307
p2stateno = 4115

[state a]
type = changestate
trigger1 = FrontEdgeDist <= -10
trigger2 = movecontact
value = 2307

;------------------------------------------------------------------------
[Statedef 2307]
type    = S
movetype= H
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 2307

[State 1100, 1]
type = Helper
trigger1 = time = 0
id = 2095
sprpriority = 3
postype = P1
pos = 0,-190
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.5

[State 750,ex ]
type = null;Explod
trigger1 = animelem = 4,=5
anim = 2400
postype = p1
pos = 30,-60
vel = -5,-15-(random%3)
random = 12,0
sprpriority = -1
ownpal = 1

[State 750,ex ]
type = null;Explod
trigger1 = animelem = 4,=5
anim = 2401
postype = p1
pos = 40,-60
vel = -4,12+(random%3)
random = 12,0
removetime = 100
sprpriority = 5
ownpal = 1

[State 750,ex ]
type = null;Explod
trigger1 = animelem = 4,=5
anim = 2402
postype = p1
pos = 30,-60
vel = 6,-11-(random%3)
random = 12,10
removetime = 100
sprpriority = -1
ownpal = 1

[State 750,ex ]
type = null;Explod
trigger1 = animelem = 4,=5
anim = 2403
postype = p1
pos = 40,-60
removetime = 20
vel = 9,13+(random%3)
random = 10,5
removetime = 100
sprpriority = -1
ownpal = 1

[State 750,ex ]
type = null;Explod
trigger1 = animelem = 4,=5
anim = 2404
postype = p1
pos = 30,-60
removetime = 20
vel = -11,1+(random%3)
random = 10,15
removetime = 100
sprpriority = -1
ownpal = 1

[State 750,ex ]
type = null;Explod
trigger1 = animelem = 4,=5
anim = 2405
postype = p1
pos = 40,-60
vel = -12,-15-(random%3)
random = 12,10
sprpriority = -1
ownpal = 1

[State 750,ex ]
type = null;Explod
trigger1 = animelem = 4,=5
anim = 2406
postype = p1
pos = 30,-60
vel = 12,-4-(random%3)
random = 12,0
removetime = 100
sprpriority = 5
ownpal = 1

[State 750,ex ]
type = null;Explod
trigger1 = animelem = 4,=5
anim = 2407
postype = p1
pos = 40,-60
vel = 9,5+(random%3)
random = 12,10
removetime = 100
sprpriority = -1
ownpal = 1

[State 750,ex ]
type = null;Explod
trigger1 = animelem = 4,=5
anim = 2408
postype = p1
pos = 30,-60
removetime = 20
vel = 12,1+(random%3)
random = 10,5
removetime = 100
sprpriority = -1
ownpal = 1

[State 750,ex ]
type = null;Explod
trigger1 = animelem = 4,=5
anim = 2409
postype = p1
pos = 40,-60
removetime = 20
vel = 13,-2+(random%3)
random = 10,15
removetime = 100
sprpriority = -1
ownpal = 1

[State 750,ex ]
type = null;Explod
trigger1 = animelem = 4,=5
anim = 2410
postype = p1
pos = 30,-60
removetime = 20
vel = -10,-13-(random%3)
random = 10,15
removetime = 100
sprpriority = -1
ownpal = 1

[state a]
type = destroyself
trigger1 = animtime = 0

;==============================================================================
;---------------------Ice Block
[Statedef 2301]
type = S
movetype = A
physics = S
anim = 2300
poweradd = ifelse(fvar(30) > 0,0,-1000)
juggle = 10
velset = 0
ctrl = 0

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
id = 9000
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 3000, hehe!]
type = NotHitBy
trigger1 = time < 40
value = SCA

[State 2100, bg]
type = assertspecial
trigger1 = time = [0,30]
flag = nobg
flag2 = nofg

[State 1100, dm spark]
type = Explod
trigger1 = AnimElem = 1
anim = f7010;f100
scale = 0.5,0.5
ID = 1000
postype = p1
pos = 0,-120
bindtime = -1
sprpriority = 2
supermovetime = 30
ownpal = 1
removeongethit = 1

[State 1100, dm spark]
type = Explod
trigger1 = AnimElem = 1
anim = f7000;f101
scale = 0.5,0.5
ID = 1000
postype = p1
pos = 0,-120
bindtime = -1
sprpriority = -2
supermovetime = 30
ownpal = 1
removeongethit = 1

[State 3009, pause]
type = SuperPause
trigger1 = Animelem = 1
time = 30
anim = -1
movetime = 30
darken = 0
p2defmul = 1

[State 1000, dm sound]
type = Playsnd
trigger1 = AnimElem = 1
value = f9000,0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 440,0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 12
value = 240,0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 12
value = 3000,42

[State 810, snd]
type = playsnd
trigger1 = animelem = 2
value = 3000,38

[State 2300, shake]
type = EnvShake
trigger1 = animelem = 13
time = 10
ampl = 4
freq = 60

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 2
id = 2305
sprpriority = 3
postype = P1
pos = -50,-190
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.5

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 2
projanim = 12305
projhitanim = 12305
projID = 3000
velocity = 0
projremovetime = 26
projpriority = 5
postype = p1
offset = 0,0
attr = S, HP
damage = 50,10
animtype = up
hitflag = MAFP
guardflag = M
sparkno = 2
guard.sparkno = 42
sparkxy = 60,-50
hitsound = S3000,39
guardsound = s6,10; = S6,0
pausetime = 0,3
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -6,-10
air.velocity = -6,-10
fall = 1
fall.recover = 0
yaccel = .5
getpower = 0
palfx.time = 57
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
air.juggle = 6
;afterimage.time = -1
;afterimage.length = 20 
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 50,150,250
;afterimage.paladd =  0,0,0
;afterimage.palmul = .85,.75,.75 
;afterimage.timegap = 1
;afterimage.framegap = 1
;afterimage.trans = add

[State 2900, 1]
type = helper
trigger1 = AnimElem = 13
id = 1000
persistent = 0
name = "ice"
pos = 0,0
postype = P1
stateno = 2308
helpertype = normal
keyctrl = 0
ownpal = 1

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------
[Statedef 2308]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 12,-4
ctrl = 0
anim = 12306

[State 1100, 1]
type = Helper
trigger1 = time = 0
id = 2307
sprpriority = 3
postype = P1
pos = -50,-190
stateno = 1007
helpertype = normal
keyctrl = 0 
ownpal = 1
size.xscale =.5
size.yscale =.5

[state 2901,1]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state 2901,1]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[State 2]
type = HitDef
trigger1 = time = 0
attr = S, HP
damage = 300,10
animtype = up
hitflag = MAFP
guardflag = M
sparkno = 2
guard.sparkno = 42
sparkxy = 60,-50
hitsound = S3000,39
guardsound = s6,10; = S6,0
pausetime = 0,13
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -3,-7
air.velocity = -3,-7
fall = 1
fall.recover = 0
yaccel = .5
getpower = 0
palfx.time = 57
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
air.juggle = 4
envshake.time = 5
envshake.ampl = 4
envshake.freq = 130
envshake.phase = 130
p1stateno = 2307
p2stateno = 4115

[state a]
type = changestate
trigger1 = FrontEdgeDist <= -10
trigger2 = movecontact
value = 2307

;-----------------------------------------------------------------------
;大雪人
;-----------------------------------------------------------------------
[Statedef 3700]
Type      = S
Movetype  = A
Physics   = S
Ctrl      = 0
VelSet = 0,0
Anim      = 3700
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
SprPriority = 10

;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
id = 9000
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = prevstateno= 3810 && time = 0
id = 9000
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
x = 10

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 3
x = 15

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 23
trigger2 = AnimElem = 24
trigger3 = AnimElem = 25
x = -10

[State -1]
Type = NotHitBy
Trigger1 = Time < 50
Value = SCA
Time = 1

[State 1100, dm spark]
type = Explod
trigger1 = AnimElem = 1
anim = f7110
scale = 0.5,0.5
ID = 1000
postype = p1
pos = 40,-110
;bindtime = -1
sprpriority = 12
supermovetime = 30
ownpal = 1
removeongethit = 1

[State 3200, 4]
type = Explod
trigger1 = AnimElem = 1
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = AnimElem = 1
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 1100, dm spark]
type = Explod
trigger1 = AnimElem = 1
anim = f7100
scale = 0.5,0.5
ID = 1000
postype = p1
pos = 40,-110
;bindtime = -1
sprpriority = -2
supermovetime = 30
ownpal = 1
removeongethit = 1

[State 3009, pause]
type = SuperPause
trigger1 = Animelem = 1
time = 30
anim = -1
movetime = 30
darken = 0
p2defmul = 1

[State 3000,黑色底色]
type = Envcolor
trigger1 = animelem = 1
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 28
under = 1
supermove = 1

[State 3000, 1]
type = BGPalFX
trigger1 = time >= 25
time = 5
invertall = 1
mul = 0,0,0
ignorehitpause = 1
under = 2

[State 1000, dm sound]
type = Playsnd
trigger1 = AnimElem = 1
value = f9000,1

[State 2041, 2]
type = Afterimage
trigger1 = AnimElem = 5
time = 2
length = 10
FrameGap = 3
PalBright = 0,0,0
palcolor = 1
PalContrast = 170,170,255
PalAdd = 0,0,0
PalMul = 1,1,1
trans = none

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && time >= 0
time = 2

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = s3700,0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = s3700,1

[State 1100, 1]
type = Explod
trigger1 = animelem = 5
anim = 3705
ID = 3700
facing = 1
postype = p1
pos = 20,-40
bindtime = 1
sprpriority = 9
ownpal = 1
supermovetime = 9999

[State 1100, 1]
type = Explod
trigger1 = animelem = 5
anim = 3075
ID = 3700
vfacing = -1
postype = p1
pos = 20,-150
vel = 0,-1
bindtime = 1
sprpriority = 10
ownpal = 1
supermovetime = 9999

[State 3000, 5]
type = Explod
trigger1 = AnimElem = 9
anim = 3311
sprpriority = -4
postype = p1
pos = 80,0
bindtime = 1
supermove = 9999
ownpal = 1
removeongethit = 1
scale = 0.5,0.5

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 6
projanim = 3701
projscale = 1,1
projhitanim = 3701
projID = 3700
velocity = .5,0
projremovetime = 62
projpriority = 99999
projsprpriority = 9
postype = p1
offset = 50,-10
attr = S, HP
damage = 500,10
animtype = up
hitflag = MAFP
guardflag = M
sparkno = 2
guard.sparkno = 42
sparkxy = 60,-50
hitsound = S3000,36
guardsound = 6,2
pausetime = 0,0
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -1.5,-11
air.velocity = -1.5,-11
fall = 1
fall.recover.time = 100
yaccel = .5
getpower = 0
palfx.time = 57
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
air.juggle = 10

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------

;============================================================
[Statedef 24300]
type = A
movetype = I
physics = N
anim = 99999
velset = 0, 0
ctrl = 0

[State 3020, 1]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28001)
triggerall = teamside = 1
trigger1 = !time
anim = F28001
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28001)
triggerall = teamside = 1
trigger1 = !time
anim = F28001
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28002)
triggerall = teamside = 1
trigger1 = !time
anim = F28002
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28002)
triggerall = teamside = 1
trigger1 = !time
anim = F28002
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28003)
triggerall = teamside = 1
trigger1 = !time
anim = F28003
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28003)
triggerall = teamside = 1
trigger1 = !time
anim = F28003
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28004)
triggerall = teamside = 1
trigger1 = !time
anim = F28004
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28004)
triggerall = teamside = 1
trigger1 = !time
anim = F28004
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28005)
triggerall = teamside = 1
trigger1 = !time
anim = F28005
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28005)
triggerall = teamside = 1
trigger1 = !time
anim = F28005
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28006)
triggerall = teamside = 1
trigger1 = !time
anim = F28006
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28006)
triggerall = teamside = 1
trigger1 = !time
anim = F28006
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28007)
triggerall = teamside = 1
trigger1 = !time
anim = F28007
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28007)
triggerall = teamside = 1
trigger1 = !time
anim = F28007
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28011)
triggerall = teamside = 2
trigger1 = !time
anim = F28011
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28011)
triggerall = teamside = 2
trigger1 = !time
anim = F28011
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28012)
triggerall = teamside = 2
trigger1 = !time
anim = F28012
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28012)
triggerall = teamside = 2
trigger1 = !time
anim = F28012
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28013)
triggerall = teamside = 2
trigger1 = !time
anim = F28013
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28013)
triggerall = teamside = 2
trigger1 = !time
anim = F28013
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28014)
triggerall = teamside = 2
trigger1 = !time
anim = F28014
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28014)
triggerall = teamside = 2
trigger1 = !time
anim = F28014
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28015)
triggerall = teamside = 2
trigger1 = !time
anim = F28015
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28015)
triggerall = teamside = 2
trigger1 = !time
anim = F28015
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28016)
triggerall = teamside = 2
trigger1 = !time
anim = F28016
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28016)
triggerall = teamside = 2
trigger1 = !time
anim = F28016
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28017)
triggerall = teamside = 2
trigger1 = !time
anim = F28017
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28017)
triggerall = teamside = 2
trigger1 = !time
anim = F28017
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 4300]
type = RemoveExplod
trigger1 = root,StateNo != [3600,3620]
trigger1 = root,StateNo != 13900
trigger1 = root,stateno != [13600,13605]
trigger2 = root,StateNo = 13605 && root,animelemtime(4) = 1
id = 8000

[State Snd]
type = PlaySnd
trigger1 = root,StateNo != [3600,3620]
trigger1 = root,StateNo != 13900
trigger1 = root,stateno != [13600,13605]
trigger2 = root,StateNo = 13605 && root,animelemtime(4) = 1
value = F23997,3
persistent = 0

[State 4300]
type = Explod
triggerall = teamside = 1
triggerall = !NumExplod(4291)
trigger1 = root,StateNo != [3600,3620]
trigger1 = root,StateNo != 13900
trigger1 = root,stateno != [13600,13605]
trigger2 = root,StateNo = 13605 && root,animelemtime(4) = 1
anim = F24293
id = 4291
postype = back
pos = 0, 0
bindtime = -1
scale = 1,1
sprpriority = -11
ownpal = 1
persistent = 0
supermovetime = 99999
pausemovetime = 99999

[State 4300]
type = Explod
triggerall = !NumExplod(4291)
triggerall = teamside = 2
trigger1 = root,StateNo != [3600,3620]
trigger1 = root,StateNo != 13900
trigger1 = root,stateno != [13600,13605]
trigger2 = root,StateNo = 13605 && root,animelemtime(4) = 1
anim = F24294
id = 4291
postype = back
pos = 0, 0
bindtime = -1
scale = 1,1
sprpriority = -11
ownpal = 1
persistent = 0
supermovetime = 99999
pausemovetime = 99999

[State 4300]
type = DestroySelf
triggerall = Time > 0
trigger1 = root,StateNo != [3600,3620]
trigger1 = root,StateNo != 13900
trigger1 = root,stateno != [13600,13605]
trigger2 = root,StateNo = 13605 && root,animelemtime(4) = 1
;============================================================
;=======================================================================
[Statedef 24301]
type = A
movetype = I
physics = N
anim = 99999
velset = 0, 0
ctrl = 0

[State 191]
type = AssertSpecial
trigger1 = 1
flag = nobg
flag2 = nofg

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = F99910
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 4300]
type = RemoveExplod
trigger1 = root,stateno != [3800,3810]
trigger2 = root,StateNo = 3810 && root,animelemtime(22) = 1
trigger1 = root,stateno != [3900,3910]
trigger2 = root,StateNo = 3910 && root,animelemtime(22) = 1
trigger1 = root,stateno != [13500,13520]
id = 8000

[State Snd]
type = PlaySnd
trigger1 = root,stateno != [3800,3810]
trigger2 = root,StateNo = 3810 && root,animelemtime(22) = 1
trigger1 = root,stateno != [3900,3910]
trigger2 = root,StateNo = 3910 && root,animelemtime(22) = 1
trigger1 = root,stateno != [13500,13520]
value = F23997,3
persistent = 0

[State 4300]
type = Explod
triggerall = !NumExplod(4291)
trigger1 = root,stateno != [3800,3810]
trigger2 = root,StateNo = 3810 && root,animelemtime(22) = 1
trigger1 = root,stateno != [3900,3910]
trigger2 = root,StateNo = 3910 && root,animelemtime(22) = 1
trigger1 = root,stateno != [13500,13520]
anim = F24292
scale = 1.2,1
id = 4291
postype = back
pos = 0, 0
bindtime = -1
scale = 1,1
sprpriority = -11
ownpal = 1
persistent = 0
supermovetime = 99999
pausemovetime = 99999

[State 4300]
type = DestroySelf
triggerall = Time > 0
trigger1 = root,stateno != [3800,3810]
trigger2 = root,StateNo = 3810 && root,animelemtime(22) = 1
trigger1 = root,stateno != [3900,3910]
trigger2 = root,StateNo = 3910 && root,animelemtime(22) = 1
trigger1 = root,stateno != [13500,13520]

;============================================================
[Statedef 11111]
type = S
movetype = A
poweradd= 100
physics = S
anim = 1005
velset = 0,0
ctrl = 0
juggle   = ifelse(fvar(21)!=0,1,3)
;juggle = 10

[State 1000, 1]
type = Playsnd
trigger1 = AnimElem = 1
value = 1000,1

[State 1000, 1]
type = Playsnd
trigger1 = AnimElem = 5
value = 3000,40

[State 10013, ice]
type = null;Explod
trigger1 = AnimElem = 7
anim = 10013
ID = 10013
postype = p1
pos = 180,0
SprPriority = 4
IgnoreHitPause = 0
Persistent = 0
BindTime = 1
ownpal = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 5
projanim = 3045
projhitanim = 3045
projremovetime = 20
projID = 1000
projscale = 0.5,0.5
velocity = 0
projpriority = 1
postype = p1
offset = 0,0
attr = S, SP
damage = 60,10
animtype = hard
hitflag = MAFP
guardflag = MA
sparkno = 2
guard.sparkno = 41
sparkxy = 80,-50
hitsound = S3000,36
guardsound = S6,0
pausetime = 0,12
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -4,-6
air.velocity = -4,-6
fall = 1
fall.recover.time = 100
yaccel = .5
palfx.time = 40
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
air.juggle = 10

[State 3020, 3]
type = null;Projectile
trigger1 = AnimElem = 5
projanim = 3045
projhitanim = 3045
projremovetime = 20
projID = 1005
velocity = 4
projpriority = 1
postype = p1
offset = 0,0
attr = S, SP
damage = 100,10
animtype = hard
hitflag = MAFP
guardflag = MA
sparkno = 2
guard.sparkno = 41
sparkxy = 100,-50
hitsound = S3000,36
guardsound = 6,1
pausetime = 0,25;17
ground.hittime = 30;19
ground.type = high
ground.slidetime = 30;19
ground.velocity = -12
air.velocity = -4,-6
air.fall = 1
fall.recover.time = 100
yaccel = .5
palfx.time = 41
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
air.juggle = 0;10
afterimage.time = -1
afterimage.length = 20 
afterimage.palbright = 0,0,0
afterimage.palcontrast = 50,150,250
afterimage.paladd =  0,0,0
afterimage.palmul = .85,.75,.75 
afterimage.timegap = 1
afterimage.framegap = 1
afterimage.trans = add

[State 1000, state]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------
[Statedef 22222]
type = S
movetype = A
physics = S
anim = 1205
velset = 0,0
poweradd = 0
ctrl = 0
juggle   = ifelse(fvar(21)!=0,1,3)
;juggle = 10

[State 3005, width]
type = width
trigger1 = 1
edge = 10

[State 1000, 1]
type = Playsnd
trigger1 = AnimElem = 1
value = 400,1

[State 1000, 1]
type = Playsnd
trigger1 = AnimElem = 4
value = 3000,41

[State 1200, poos]
type = Posadd
trigger1 = time = [1,2]
trigger2 = time = [4,6]
trigger3 = animtime = 0
x = 15

[State 1200, poos]
type = Posadd
trigger1 = time = 3
trigger2 = time = 7
x = 6

[State 705, 2]
type = null;Explod
trigger1 = animelem = 2
anim = 3055
ID = 1200
sprpriority = 2
postype = p1
pos = 0,0
bindtime = 1

[State explod];X
type = Explod
trigger1 = AnimElem = 4
anim = 1226
id = 1006
sprpriority = -2
postype = p1
pos = 0,0
bindTime = 1
ownpal = 1
ignorehitpause = 1
scale = 0.5,0.5

[State explod];X
type = Explod
trigger1 = AnimElem = 4
anim = 1227
id = 1007
sprpriority = -2
postype = p1
pos = 0,0
bindTime = 1
ownpal = 1
ignorehitpause = 1
scale = 0.5,0.5

[State explod];X
type = ModifyExplod
trigger1 = AnimElem = 7
ID = 1007
sprpriority = 5

[State -2,]
type = null;Projectile
trigger1 = animelem = 2
projanim = 3055
projremovetime = 24
offset = 50,0
postype = p1

[State -2,]
type = null;Projectile
trigger1 = animelem = 2
projanim = 3055
projremovetime = 24
offset = 10,0
postype = p1
afterimage.time = -1
afterimage.length = 20 
afterimage.palbright = 0,0,0
afterimage.palcontrast = 50,150,250
afterimage.paladd =  0,0,0
afterimage.palmul = .85,.75,.75 
afterimage.timegap = 1
afterimage.framegap = 1
afterimage.trans = add

[State 1100, hitdef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, SA
damage = 80,10
animtype = hard
hitflag = MAF
guardflag = MA
sparkno = 2
guard.sparkno = 42
sparkxy = -10,-50
hitsound = S3000,36
guardsound = 6,1
pausetime = 8,9
ground.hittime = 17
ground.type = high
ground.slidetime = 17
ground.velocity = -12.3
air.velocity = -4,-6
air.fall = 1
yaccel = .5
air.juggle = 2;10
palfx.time = 36
palfx.mul = 220,220,255
palfx.sinadd = 64,48,48,32
palfx.add = 184,184,200
palfx.color = 8
forcestand = 1

[state 1200, var]
type = Varset
trigger1 = time = 0
var(7) = 0

[state 1200, var]
type = Varset
trigger1 = time > 1
trigger1 = movehit = 1
var(7) = 1

[State 1100, state]
type = Changestate
trigger1 = animtime = 0
value = 1206
