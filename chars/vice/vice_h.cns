;============================================================================================================================ 
; HYPER MOVES
;============================================================================================================================
;----------------------------------------------------------------------------------------------------------------------------
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 3100
poweradd = ifelse(fvar(30) > 0,0,-1000)
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
[State 3000, StopSND]
type = StopSND
trigger1 = 1
channel = 3

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,16
channel = 0
ignorehitpause = 1

[State 3000, BGPal]
type = BGPalFX
trigger1 = time = [0,4]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3000, NoFg]
type = AssertSpecial
trigger1 = time = [1,4]
flag = nofg

[State 3001, Pause]
type = SuperPause
trigger1 = time = 3
anim = -1
darken = 0
time = 27
movetime = 27
unhittable = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 3
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 3
anim = f7000
ID = 7000
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 35,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 3
anim = f7010
ID = 7010
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 35,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 3
value = f9000,0

[State 3000, Grab Attempt]
type = HitDef
trigger1 = AnimElem = 1
triggerall  = p2statetype != A
triggerall = p2stateno != [150,159]
attr = S, HT
hitflag = M
priority = 5, Miss
sparkno = -1         
sprpriority = 1
p2facing = 1
p1stateno = 3001
p2stateno = 3010
ground.velocity = 4,-3
fall = 1
fall.recover = 0
fall.xvelocity = 3.5
fall.yvelocity = -3.6
numhits = 0
getpower = 136,0

[State 3000, Vice Voice]
type = Playsnd
trigger1 = Animelem = 1, =2
value = 0,16
channel = 0

[State 3000, Grab Miss]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------
; Negative Gain DM - Grab Success
; 1st loop
;--------------------------------

[Statedef 3001]
type    = S
physics = S
movetype= A
anim = 3150
ctrl = 0
velset = 0,0

[State 3001, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 80
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 110,110,210
palpostbright = 3,5,7

[State 3001, BGPal]
type = BGPalFX
trigger1 = time = [0,4]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3001, NoFg]
type = AssertSpecial
trigger1 = time = [1,4]
flag = nofg

[State 3001, Pause]
type = SuperPause
trigger1 = time = 3
anim = -1
darken = 0
time = 27
movetime = 27
unhittable = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 3
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 3
anim = f7000
ID = 7000
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 35,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 3
anim = f7010
ID = 7010
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 35,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 3
value = f9000,0

[State 3001, StopSND]
type = StopSND
trigger1 = 1
channel = 3

[State 3001, WIDTH]
type = Width
trigger1 = time >= 40
edge = 50,70

[State 3001, BindToT 1]
type = BindToTarget
trigger1 = AnimElem = 3, >=0
trigger1 = AnimElem = 4, < 0
pos = 22,65,head

[State 3001, BindToT 2]
type = BindToTarget
trigger1 = AnimElem = 4, >=0
trigger1 = AnimElem = 6, < 0
pos = 25,65,head

[State 3001, BindToT 2]
type = BindToTarget
trigger1 = AnimElem = 6, >=0
trigger1 = AnimElem = 8, < 0
pos = 35,65,head

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 8, >=0
trigger1 = AnimElem = 9, < 0
pos = 37,-46

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 9, >=0
trigger1 = AnimElem = 10, < 0
pos = 40,-55

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 10, >=0
trigger1 = AnimElem = 11, < 0
pos = 37,-96

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 11, >=0
trigger1 = AnimElem = 12, < 0
pos = -25,-77

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 12, >=0
trigger1 = AnimElem = 13, < 0
pos = -39,-57

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 13, >=0
pos = -52,-9
time = 12

[State 3001, Shake It Baby]
type = Envshake
trigger1 = AnimElem = 13, =0
time = 20
freq = 70
ampl = -4

[State 3001, Grab Spark]
type = Explod
trigger1 = AnimElem = 6, =0
anim = F9
postype = P1
pos = 35, -65
sprpriority = 1
ownpal = 1
ontop = 0
bindtime = 1

[State 3001, BgPal]
type = BGPalFX
trigger1 = AnimElem = 6, =0
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3001, NoFg]
type = AssertSpecial
trigger1 = AnimElem = 6, =1
flag = nofg

[State 3001, Explod]; Strong Ground Wave - Background
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = animelem = 13, =1
anim = F66
pos = 0, 0
postype = p2
under = 1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = -1

[State 3001, Explod 2]; Strong Ground Wave - Foreground
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = animelem = 13, =1
anim = F67
pos = 0, 0
postype = p2
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = 3

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = animelem = 13, =1
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = animelem = 13, =1
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = animelem = 13, =0
value = F47, 0
volume = 20

[State 3001, Slam]
type = PlaySnd
trigger1 = animelem = 13, =1
value = 1,11
channel = 1

[State 3001, Bone]
type = PlaySnd
trigger1 = animelem = 13, =1
value = 1,12
channel = 2

[State 3001,Ground]
type = PosSet
trigger1 = AnimElem = 11, =0
y = 0

[State 3001, PosAdd]
type = PosAdd
trigger1 = animelem = 9
x = -12

[State 3001, SND 1]
type = Playsnd
trigger1 = Animelem = 1
value = 0,16
channel = 0

[State 3001, SND 2]
type = Playsnd
trigger1 = Animelem = 6
value = F800,0
channel = 1

[State 3001, SND 3]
type = Playsnd
trigger1 = Animelem = 10
value = 1,15
channel = 1

[State 3001, End]
type = ChangeState
trigger1 = animtime = 0
value = 3002
ctrl = 0

;---------
; 2nd loop
;---------

[Statedef 3002]
type    = S
physics = S
movetype= A
anim = 3151
ctrl = 0
velset = 0,0

[State 3002, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 35
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 110,110,210
palpostbright = 3,5,7

[State 3001, WIDTH]
type = Width
trigger1 = time >= 0
edge = 50,70

[State 3002, Floor]
type = PosSet
trigger1 = time = 0
y = 0

[State 3001, Vels]
type = VelSet
trigger1 = time = [8,28]
x = -2

[State 3001, Vels]
type = VelSet
trigger1 = time = 8
y = -5.5

[State 3001, Gravity]
type = Gravity
trigger1 = time = [9,28]

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 1, >=0
trigger1 = AnimElem = 2, < 0
pos = -33,-9

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 2, >=0
trigger1 = AnimElem = 3, < 0
pos = -27,-10

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 3, >=0
trigger1 = AnimElem = 4, < 0
pos = -10,-8

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 4, >=0
trigger1 = AnimElem = 5, < 0
pos = 20,-26

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 5, >=0
trigger1 = AnimElem = 6, < 0
pos = 37,-46

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 6, >=0
trigger1 = AnimElem = 7, < 0
pos = 40,-55

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 7, >=0
trigger1 = AnimElem = 8, < 0
pos = 37,-96

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 8, >=0
trigger1 = AnimElem = 9, < 0
pos = -25,-77

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 9, >=0
trigger1 = AnimElem = 10, < 0
pos = -39,-57

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 10, >=0
trigger1 = AnimElem = 11, < 0
pos = -35,-21

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 11, >=0
pos = -21,-10

[State 3001, Shake It Baby]
type = Envshake
trigger1 = Time = 29
time = 20
freq = 70
ampl = -4

[State 3002,Ground]
type = PosSet
trigger1 = time = 29
y = 0

[State 3002,Ground]
type = VelSet
trigger1 = time = 29
x = 0
y = 0

[State 3001, Explod]; Strong Ground Wave - Background
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 29
anim = F66
pos = -36, 0
postype = p1
under = 1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = -1

[State 3001, Explod 2]; Strong Ground Wave - Foreground
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 29
anim = F67
pos = -36, 0
postype = p1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = 3

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
value = F47, 0
volume = 20

[State 3002, Wind]
type = Playsnd
trigger1 = Animelem = 4, =1
value = 1,4
channel = 1

[State 3002, Laugh]
type = Playsnd
trigger1 = Animelem = 4, =3
value = 0,18
channel = 0

[State 3002, Slam]
type = PlaySnd
trigger1 = Time = 30
value = 1,11
channel = 1

[State 3002, Bone]
type = PlaySnd
trigger1 = Time = 30
value = 1,12
channel = 2

[State 3002, End]
type = ChangeState
trigger1 = time = 37 ;animtime = 0
value = 3003
ctrl = 0

;---------
; 3rd loop
;---------

[Statedef 3003]
type    = S
physics = S
movetype= A
anim = 3152
ctrl = 0
velset = 0,0

[State 3001, WIDTH]
type = Width
trigger1 = time >= 0
edge = 50,70

[State 3003, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 49
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 110,110,210
palpostbright = 3,5,7

[State 3003, Floor]
type = PosSet
trigger1 = time = 0
y = 0

[State 3003, Vels]
type = VelSet
trigger1 = time = [5,36]
x = -2.5

[State 3001, Vels]
type = VelSet
trigger1 = time = 5
y = -9

[State 3001, Gravity]
type = Gravity
trigger1 = time = [5,36]

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 1, >=0
trigger1 = AnimElem = 2, < 0
pos = -27,-10

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 2, >=0
trigger1 = AnimElem = 3, < 0
pos = -10,-8

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 3, >=0
trigger1 = AnimElem = 4, < 0
pos = 20,-26

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 4, >=0
trigger1 = AnimElem = 5, < 0
pos = 37,-46

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 5, >=0
trigger1 = AnimElem = 6, < 0
pos = 40,-55

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 6, >=0
trigger1 = AnimElem = 7, < 0
pos = 37,-96

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 7, >=0
trigger1 = AnimElem = 8, < 0
pos = -25,-77

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 8, >=0
trigger1 = AnimElem = 9, < 0
pos = -39,-57

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 9, >=0
trigger1 = AnimElem = 10, < 0
pos = -35,-21

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 10, >=0
pos = -5,-5

[State 3001, Shake It Baby]
type = Envshake
trigger1 = Time = 37
time = 20
freq = 70
ampl = -6

[State 3002,Ground]
type = PosSet
trigger1 = time = 37
y = 0

[State 3002, ground]
type = VelSet
trigger1 = time = 37
x = 0
y = 0

[State 3001, Explod]; Strong Ground Wave - Background
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 37
anim = F66
pos = -16, 0
postype = p1
under = 1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = -1

[State 3001, Explod 2]; Strong Ground Wave - Foreground
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 37
anim = F67
pos = -16, 0
postype = p1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = 3

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 37
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 37
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = time = 37
value = F47, 0
volume = 20

[State 3002, Grey Pillar]
type = Explod
trigger1 = Time = 37
anim = 3012
ontop = 1
postype = p1
pos = -16,0
bindtime = 1
trans = add

[State 3002, PillarSND]
type = PlaySnd
trigger1 = Time = 38
value = 1,27
channel = 2

[State 3002, Wind]
type = Playsnd
trigger1 = Animelem = 3, =1
value = 1,4
channel = 1

[State 3002, Wind]
type = PlaySnd
trigger1 = Time = 38
value = 1,15
channel = 1

[State 3002, Crush]
type = PlaySnd
trigger1 = Time = 38
value = 1,16
channel = 1

[State 3002, End]
type = ChangeState
trigger1 = animtime = 0
value = 3004
ctrl = 0

;----------
; Jump Away
;----------

[Statedef 3004]
type = S
physics = S
movetype = I
ctrl = 0
anim = 3153

[State 3001, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 34
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 110,110,210
palpostbright = 3,5,7

[State 3004, Floor]
type = PosSet
trigger1 = Time = 0
trigger2 = time = 42
y = 0

[State 3004, Jump]
type = VelSet
trigger1 = time = [10,41]
x = 4

[State 3004, Jump]
type = VelSet
trigger1 = time = 10
y = -8.5

[State 3004, Gravity]
type = Gravity
trigger1 = time = [11,41]

[State 3004, Wind]
type = PlaySnd
trigger1 = AnimElem = 4, =1
value = 1,26
channel = 2

[State 3004, Stop]
type = VelSet
trigger1 = time = 42
x = 0
y = 0

[state 3004, End]
type = ChangeState
trigger1 = time >= 30
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------
; Opponent Thrown By Negative Gain
;---------------------------------

[Statedef 3010]
type    = A
physics = N
movetype= H
sprpriority = 0
ctrl = 0
velset = 0,0

[State 1010, ChangeAnim]
type = Changeanim2
trigger1 = time = 0
value = 3155+var(55)*30000

[State 1010, Slam damage]
type = Lifeadd
trigger1 = animelem = 7
value = -88-20*(enemy, var(19)=1)
kill = 0

[State 1010, ChangeState]
type = ChangeState
trigger1 = p2stateno = 3002
value = 3011

;---------------------------------

[Statedef 3011]
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0

[State 1010, ChangeAnim]
type = Changeanim2
trigger1 = time = 0
value = 3156+var(55)*30000

[State 1010, Slam damage]
type = Lifeadd
trigger1 = animelem = 7
value = -98-20*(enemy,var(19)=1)
kill = 0

[State 3012, ChangeState]
type = SelfState
trigger1 = p2stateno = 3900
trigger1 = p2name = "vice"
value = 5020

[State 3012, ChangeState]
type = posset
trigger1 = p2stateno = 3100
trigger1 = p2name = "vice"
y= 0
x= 0

[State 3012, ChangeState]
type = SelfState
trigger1 = p2stateno = 3100
trigger1 = p2dist x >= 0
trigger1 = p2name = "vice"
value = 5001

[State 3012, ChangeState]
type = SelfState
trigger1 = p2stateno = 3100
trigger1 = p2name = "vice"
value = 5020

[State 3012, ChangeState]
type = velset
trigger1 = p2stateno = 3100
trigger1 = p2name = "vice"
x = 0
y = 0

[State 1010, ChangeState]
type = ChangeState
trigger1 = p2stateno = 3003
value = 3012

;---------------------------------

[Statedef 3012]
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0

[State 3012, ChangeAnim]
type = Changeanim2
trigger1 = time = 0
value = 3157+var(55)*30000

[State 3012, Slam damage]
type = Lifeadd
trigger1 = AnimElem = 7, > 3
value = -88-20*(enemy,var(19)=1)
persistent = 0

[State 3012, ChangeState]
type = SelfState
trigger1 = p2stateno = 3900
trigger1 = p2name = "vice"
value = 5020

[State 3012, ChangeState]
type = posset
trigger1 = p2stateno = 3100
trigger1 = p2name = "vice"
y= 0
x= 0

[State 3012, ChangeState]
type = SelfState
trigger1 = p2stateno = 3100
trigger1 = p2dist x >= 0
trigger1 = p2name = "vice"
value = 5001

[State 3012, ChangeState]
type = SelfState
trigger1 = p2stateno = 3100
trigger1 = p2name = "vice"
value = 5020

[State 3012, ChangeState]
type = velset
trigger1 = p2stateno = 3100
trigger1 = p2name = "vice"
x = 0
y = 0

[State 3012, ChangeState]
type = velset
trigger1 = p2stateno = 3100
trigger1 = p2name = "vice"
x = 0
y = 0

[State 3012, ChangeState]
type = SelfState
trigger1 = animtime = 0
value = 5030

;---------------------------------------------------------------------------------------------------------------------------
;-----------------------------
; Negative Gain - Grab attempt
;-----------------------------

[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 3100
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
[State 3100, SDMBg]
type = removeExplod
trigger1 = Time = 0
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 3100, StopSND]
type = StopSND
trigger1 = 1
channel = 3

[State 3100, StopSND]
type = posset
trigger1 = time = 0
y = 0

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,16
channel = 0
ignorehitpause = 1

[State 3100, BGPal]
type = BGPalFX
trigger1 = time = [0,4]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3100, NoFg]
type = AssertSpecial
trigger1 = time = [1,4]
flag = nofg

[State 3100, Pause]
type = SuperPause
trigger1 = time = 3
anim = -1
darken = 0
time = 27
movetime = 27
unhittable = 1

[State 3100, NoBg]
type = AssertSpecial
trigger1 = time = [5,28]
flag = nobg
flag2 = nofg

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 3
anim = f7100
ID = 7100
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 35,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 3
anim = f7110
ID = 7110
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 35,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=0
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3100, SDM Snd]
type = PlaySnd
trigger1 = time = 3
value = F9000,1

[State 3100, Grab Attempt]
type = HitDef
trigger1 = AnimElem = 1
attr = S, HT
hitflag = MAF
priority = 5, Miss
sparkno = -1         
sprpriority = 1
p2facing = 1
p1stateno = 3101
p2stateno = 3110
ground.velocity = 4,-3
fall = 1
fall.recover = 0
fall.xvelocity = 3.5
fall.yvelocity = -3.6
numhits = 0
getpower = 136,0

[State 3100, Vice Voice]
type = Playsnd
trigger1 = Animelem = 1, =2
value = 0,16
channel = 0

[State 3100, Grab Miss]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------
; Success - 1st loop
;-------------------

[Statedef 3101]
type    = S
physics = S
movetype= A
anim = 3150
ctrl = 0
sprpriority = 2
velset = 0,0

[State 3001, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 80
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 230,20,20
palpostbright = 3,5,7

[State 3101, BGPal]
type = BGPalFX
trigger1 = time = [0,4]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3101, NoFg]
type = AssertSpecial
trigger1 = time = [1,4]
flag = nofg

[State 3001, Pause]
type = SuperPause
trigger1 = time = 3
anim = -1
darken = 0
time = 27
movetime = 27
unhittable = 1

[State 3101, NoBg]
type = AssertSpecial
trigger1 = time = [5,28]
flag = nobg
flag2 = nofg

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 3
anim = f7100
ID = 7100
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 35,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 0
anim = f7110
ID = 7110
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 35,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3001, SDM Snd]
type = PlaySnd
trigger1 = time = 3
value = F9000,1

[State 3001, StopSND]
type = StopSND
trigger1 = 1
channel = 3

[State 3001, WIDTH]
type = Width
trigger1 = time >= 40
edge = 50,70

[State 3001, BindToT 1]
type = BindToTarget
trigger1 = AnimElem = 3, >=0
trigger1 = AnimElem = 4, < 0
pos = 22,65,head

[State 3001, BindToT 2]
type = BindToTarget
trigger1 = AnimElem = 4, >=0
trigger1 = AnimElem = 6, < 0
pos = 25,65,head

[State 3001, BindToT 2]
type = BindToTarget
trigger1 = AnimElem = 6, >=0
trigger1 = AnimElem = 8, < 0
pos = 35,65,head

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 8, >=0
trigger1 = AnimElem = 9, < 0
pos = 37,-46

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 9, >=0
trigger1 = AnimElem = 10, < 0
pos = 40,-55

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 10, >=0
trigger1 = AnimElem = 11, < 0
pos = 37,-96

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 11, >=0
trigger1 = AnimElem = 12, < 0
pos = -25,-77

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 12, >=0
trigger1 = AnimElem = 13, < 0
pos = -39,-57

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 13, >=0
pos = -52,-9
time = 12

[State 3001, Shake It Baby]
type = Envshake
trigger1 = AnimElem = 13, =0
time = 20
freq = 70
ampl = -4

[State 3001, Grab Spark]
type = Explod
trigger1 = AnimElem = 6, =0
anim = F9
postype = P1
pos = 35, -65
sprpriority = 1
ownpal = 1
ontop = 0
bindtime = 1

[State 3101, BgPal]
type = BGPalFX
trigger1 = AnimElem = 6, =0
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3101, NoFg]
type = AssertSpecial
trigger1 = AnimElem = 6, =1
flag = nofg

[State 3001, Explod]; Strong Ground Wave - Background
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 13, =0
anim = F66
pos = -51, 0
postype = p1
under = 1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = -1

[State 3001, Explod 2]; Strong Ground Wave - Foreground
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 13, =0
anim = F67
pos = -51, 0
postype = p1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = 3

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 13, =0
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 13, =0
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 13, =0
value = F47, 0
volume = 20

[State 3001, Slam]
type = PlaySnd
trigger1 = animelem = 13, =1
value = 1,11
channel = 1

[State 3001, Bone]
type = PlaySnd
trigger1 = animelem = 13, =1
value = 1,12
channel = 2

[State 3001,Ground]
type = PosSet
trigger1 = AnimElem = 11, =0
y = 0

[State 3001, PosAdd]
type = PosAdd
trigger1 = animelem = 9
x = -12

[State 3001, SND 2]
type = Playsnd
trigger1 = Animelem = 6
value = F800,0

[State 3001, SND 3]
type = Playsnd
trigger1 = Animelem = 10
value = 1,15
channel = 1

[State 3101, End]
type = ChangeState
trigger1 = animtime = 0
value = 3102
ctrl = 0

;---------
; 2nd loop
;---------

[Statedef 3102]
type    = S
physics = S
movetype= A
anim = 3151
ctrl = 0
velset = 0,0

[State 3102, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 35
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 230,20,20
palpostbright = 3,5,7

[State 3001, WIDTH]
type = Width
trigger1 = time >= 0
edge = 50,70

[State 3002, Floor]
type = PosSet
trigger1 = time = 0
y = 0

[State 3001, Vels]
type = VelSet
trigger1 = time = [8,28]
x = -2

[State 3001, Vels]
type = VelSet
trigger1 = time = 8
y = -5.5

[State 3001, Gravity]
type = Gravity
trigger1 = time = [9,28]

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 1, >=0
trigger1 = AnimElem = 2, < 0
pos = -33,-9

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 2, >=0
trigger1 = AnimElem = 3, < 0
pos = -27,-10

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 3, >=0
trigger1 = AnimElem = 4, < 0
pos = -10,-8

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 4, >=0
trigger1 = AnimElem = 5, < 0
pos = 20,-26

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 5, >=0
trigger1 = AnimElem = 6, < 0
pos = 37,-46

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 6, >=0
trigger1 = AnimElem = 7, < 0
pos = 40,-55

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 7, >=0
trigger1 = AnimElem = 8, < 0
pos = 37,-96

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 8, >=0
trigger1 = AnimElem = 9, < 0
pos = -25,-77

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 9, >=0
trigger1 = AnimElem = 10, < 0
pos = -39,-57

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 10, >=0
trigger1 = AnimElem = 11, < 0
pos = -35,-21

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 11, >=0
pos = -21,-10

[State 3001, Shake It Baby]
type = Envshake
trigger1 = Time = 29
time = 20
freq = 70
ampl = -4

[State 3002,Ground]
type = PosSet
trigger1 = time = 29
y = 0

[State 3002,Ground]
type = VelSet
trigger1 = time = 29
x = 0
y = 0

[State 3002, Explod]; Strong Ground Wave - Background
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 29
anim = F66
pos = -36, 0
postype = p1
under = 1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = -1

[State 3002, Explod 2]; Strong Ground Wave - Foreground
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 29
anim = F67
pos = -36, 0
postype = p1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = 3

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
value = F47, 0
volume = 20

[State 3002, Wind]
type = Playsnd
trigger1 = Animelem = 4, =1
value = 1,4
channel = 1

[State 3002, Slam]
type = PlaySnd
trigger1 = Time = 30
value = 1,11
channel = 1

[State 3002, Bone]
type = PlaySnd
trigger1 = Time = 30
value = 1,12
channel = 2

[State 3102, End]
type = ChangeState
trigger1 = time = 37 ;animtime = 0
value = 3103
ctrl = 0

;---------
; 3rd loop
;---------

[Statedef 3103]
type    = S
physics = S
movetype= A
anim = 3151
ctrl = 0
velset = 0,0

[State 3002, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 35
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 230,20,20
palpostbright = 3,5,7

[State 3001, WIDTH]
type = Width
trigger1 = time >= 0
edge = 50,70

[State 3002, Floor]
type = PosSet
trigger1 = time = 0
y = 0

[State 3001, Vels]
type = VelSet
trigger1 = time = [8,28]
x = -2

[State 3001, Vels]
type = VelSet
trigger1 = time = 8
y = -5.5

[State 3001, Gravity]
type = Gravity
trigger1 = time = [9,28]

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 1, >=0
trigger1 = AnimElem = 2, < 0
pos = -33,-9

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 2, >=0
trigger1 = AnimElem = 3, < 0
pos = -27,-10

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 3, >=0
trigger1 = AnimElem = 4, < 0
pos = -10,-8

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 4, >=0
trigger1 = AnimElem = 5, < 0
pos = 20,-26

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 5, >=0
trigger1 = AnimElem = 6, < 0
pos = 37,-46

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 6, >=0
trigger1 = AnimElem = 7, < 0
pos = 40,-55

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 7, >=0
trigger1 = AnimElem = 8, < 0
pos = 37,-96

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 8, >=0
trigger1 = AnimElem = 9, < 0
pos = -25,-77

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 9, >=0
trigger1 = AnimElem = 10, < 0
pos = -39,-57

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 10, >=0
trigger1 = AnimElem = 11, < 0
pos = -35,-21

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 11, >=0
pos = -21,-10

[State 3001, Shake It Baby]
type = Envshake
trigger1 = Time = 29
time = 20
freq = 70
ampl = -4

[State 3002,Ground]
type = PosSet
trigger1 = time = 29
y = 0

[State 3002,Ground]
type = VelSet
trigger1 = time = 29
x = 0
y = 0

[State 3002, Explod]; Strong Ground Wave - Background
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 29
anim = F66
pos = -36, 0
postype = p1
under = 1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = -1

[State 3002, Explod 2]; Strong Ground Wave - Foreground
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 29
anim = F67
pos = -36, 0
postype = p1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = 3

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
value = F47, 0
volume = 20

[State 3002, Wind]
type = Playsnd
trigger1 = Animelem = 4, =1
value = 1,4
channel = 1

[State 3002, Slam]
type = PlaySnd
trigger1 = Time = 30
value = 1,11
channel = 1

[State 3002, Bone]
type = PlaySnd
trigger1 = Time = 30
value = 1,12
channel = 2

[State 3102, End]
type = ChangeState
trigger1 = time = 37 ;animtime = 0
value = 3104
ctrl = 0

;---------
; 4th loop
;---------

[Statedef 3104]
type    = S
physics = S
movetype= A
anim = 3151
ctrl = 0
velset = 0,0

[State 3002, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 35
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 230,20,20
palpostbright = 3,5,7

[State 3001, WIDTH]
type = Width
trigger1 = time >= 0
edge = 50,70

[State 3002, Floor]
type = PosSet
trigger1 = time = 0
y = 0

[State 3001, Vels]
type = VelSet
trigger1 = time = [8,28]
x = -2

[State 3001, Vels]
type = VelSet
trigger1 = time = 8
y = -5.5

[State 3001, Gravity]
type = Gravity
trigger1 = time = [9,28]

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 1, >=0
trigger1 = AnimElem = 2, < 0
pos = -33,-9

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 2, >=0
trigger1 = AnimElem = 3, < 0
pos = -27,-10

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 3, >=0
trigger1 = AnimElem = 4, < 0
pos = -10,-8

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 4, >=0
trigger1 = AnimElem = 5, < 0
pos = 20,-26

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 5, >=0
trigger1 = AnimElem = 6, < 0
pos = 37,-46

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 6, >=0
trigger1 = AnimElem = 7, < 0
pos = 40,-55

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 7, >=0
trigger1 = AnimElem = 8, < 0
pos = 37,-96

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 8, >=0
trigger1 = AnimElem = 9, < 0
pos = -25,-77

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 9, >=0
trigger1 = AnimElem = 10, < 0
pos = -39,-57

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 10, >=0
trigger1 = AnimElem = 11, < 0
pos = -35,-21

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 11, >=0
pos = -21,-10

[State 3001, Shake It Baby]
type = Envshake
trigger1 = Time = 29
time = 20
freq = 70
ampl = -4

[State 3002,Ground]
type = PosSet
trigger1 = time = 29
y = 0

[State 3002,Ground]
type = VelSet
trigger1 = time = 29
x = 0
y = 0

[State 3002, Explod]; Strong Ground Wave - Background
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 29
anim = F66
pos = -36, 0
postype = p1
under = 1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = -1

[State 3002, Explod 2]; Strong Ground Wave - Foreground
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 29
anim = F67
pos = -36, 0
postype = p1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = 3

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = time = 29
value = F47, 0
volume = 20

[State 3002, Wind]
type = Playsnd
trigger1 = Animelem = 4, =1
value = 1,4
channel = 1

[State 3002, Slam]
type = PlaySnd
trigger1 = Time = 30
value = 1,11
channel = 1

[State 3002, Bone]
type = PlaySnd
trigger1 = Time = 30
value = 1,12
channel = 2

[State 3102, End]
type = ChangeState
trigger1 = time = 37 ;animtime = 0
value = 3105
ctrl = 0

;---------
; 5th loop
;---------

[Statedef 3105]
type    = S
physics = S
movetype= A
anim = 3152
ctrl = 0
velset = 0,0

[State 3001, WIDTH]
type = Width
trigger1 = time >= 0
edge = 50,70

[State 3003, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 49
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 230,20,20
palpostbright = 3,5,7

[State 3003, Floor]
type = PosSet
trigger1 = time = 0
y = 0

[State 3003, Vels]
type = VelSet
trigger1 = time = [5,36]
x = -2.5

[State 3001, Vels]
type = VelSet
trigger1 = time = 5
y = -9

[State 3001, Gravity]
type = Gravity
trigger1 = time = [5,36]

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 1, >=0
trigger1 = AnimElem = 2, < 0
pos = -27,-10

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 2, >=0
trigger1 = AnimElem = 3, < 0
pos = -10,-8

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 3, >=0
trigger1 = AnimElem = 4, < 0
pos = 20,-26

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 4, >=0
trigger1 = AnimElem = 5, < 0
pos = 37,-46

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 5, >=0
trigger1 = AnimElem = 6, < 0
pos = 40,-55

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 6, >=0
trigger1 = AnimElem = 7, < 0
pos = 37,-96

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 7, >=0
trigger1 = AnimElem = 8, < 0
pos = -25,-77

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 8, >=0
trigger1 = AnimElem = 9, < 0
pos = -39,-57

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 9, >=0
trigger1 = AnimElem = 10, < 0
pos = -35,-21

[State 3001, TBind 3]
type = Targetbind
trigger1 = AnimElem = 10, >=0
pos = -5,-5

[State 3001, Shake It Baby]
type = Envshake
trigger1 = Time = 37
time = 20
freq = 70
ampl = -6

[State 3002,Ground]
type = PosSet
trigger1 = time = 37
y = 0

[State 3002, ground]
type = VelSet
trigger1 = time = 37
x = 0
y = 0

[State 1000]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 37
anim = F63
facing = facing
ignorehitpause = 1
postype = p1
pos = -16, 0
sprpriority = 7

[State 3121, 1]
type = Helper
triggerall = StageVar(info.author) != "water"
trigger1 = time = 37
id = 8882
postype = p1
pos = -16, 0
sprpriority = 10
stateno = 11492
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 37
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 37
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = time = 37
value = F47, 0
volume = 20

[State 10100, 1]
type = Explod
trigger1 = Time = 37
anim = F14421
id = 14421
pos = -16,0
postype = p1
ownpal = 1
scale = 0.5,0.5
sprpriority = -3
ignorehitpause = 1
Trans = addalpha
Alpha = 200,220

[State 10100, 1]
type = Explod
trigger1 = Time = 37
anim = F14424
id = 12424
pos = -16,0
postype = p1
ownpal = 1
scale = 0.5,0.5
sprpriority = 8+time
ignorehitpause = 1
Trans = addalpha
Alpha = 200,220

[State 3002, PillarSND]
type = PlaySnd
trigger1 = Time = 38
value = 1,27
channel = 2

[State 3002, Laugh]
type = Playsnd
trigger1 = Animelem = 4, =3
value = 0,18
channel = 0

[State 3002, Wind]
type = Playsnd
trigger1 = Animelem = 3, =1
value = 1,4
channel = 1

[State 3002, Wind]
type = PlaySnd
trigger1 = Time = 38
value = 1,15
channel = 1

[State 3002, Crush]
type = PlaySnd
trigger1 = Time = 38
value = 1,16
channel = 1

[State 3002, End]
type = ChangeState
trigger1 = animtime = 0
value = 3106
ctrl = 0

;----------
; Jump Away
;----------

[Statedef 3106]
type = S
physics = S
movetype = I
ctrl = 0
anim = 3153

[State 3003, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 34
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 230,20,20
palpostbright = 3,5,7

[State 3004, Floor]
type = PosSet
trigger1 = Time = 0
trigger2 = time = 42
y = 0

[State 3004, Jump]
type = VelSet
trigger1 = time = [10,41]
x = 4

[State 3004, Jump]
type = VelSet
trigger1 = time = 10
y = -8.5

[State 3004, Gravity]
type = Gravity
trigger1 = time = [11,41]

[State 3004, Wind]
type = PlaySnd
trigger1 = AnimElem = 4, =1
value = 1,26
channel = 2

[State 3004, Stop]
type = VelSet
trigger1 = time = 42
x = 0
y = 0

[state 3004, End]
type = ChangeState
trigger1 = time >= 30
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------
; Opponent Thrown By Negative Gain
;---------------------------------

[Statedef 3110]
type    = A
physics = N
movetype= H
ctrl = 0
sprpriority = 0
velset = 0,0

[State 1010, ChangeAnim]
type = Changeanim2
trigger1 = time = 0
value = 3155+var(55)*30000

[State 1010, Slam damage]
type = Lifeadd
trigger1 = animelem = 7
value = -88-20*(enemy,var(19)=1)
kill = 0

[State 1010, ChangeState]
type = ChangeState
trigger1 = p2stateno = 3102
value = 3111

;---------------------------------

[Statedef 3111]
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0

[State 1010, ChangeAnim]
type = Changeanim2
trigger1 = time = 0
value = 3156+var(55)*30000

[State 1010, Slam damage]
type = Lifeadd
trigger1 = animelem = 7
value = -128-20*(enemy,var(19)=1)
kill = 0

[State 1010, ChangeState]
type = ChangeState
trigger1 = p2stateno = 3103
value = 3112

;---------------------------------

[Statedef 3112]
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0

[State 1010, ChangeAnim]
type = Changeanim2
trigger1 = time = 0
value = 3156+var(55)*30000

[State 1010, Slam damage]
type = Lifeadd
trigger1 = animelem = 7
value = -88-20*(enemy,var(19)=1)
kill = 0

[State 1010, ChangeState]
type = ChangeState
trigger1 = p2stateno = 3104
value = 3113


;---------------------------------

[Statedef 3113]
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0

[State 1010, ChangeAnim]
type = Changeanim2
trigger1 = time = 0
value = 3156+var(55)*30000

[State 1010, Slam damage]
type = Lifeadd
trigger1 = animelem = 7
value = -88-20*(enemy,var(19)=1)
kill = 0

[State 1010, ChangeState]
type = ChangeState
trigger1 = p2stateno = 3105
value = 3114

;---------------------------------

[Statedef 3114]
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0

[State 3012, ChangeAnim]
type = Changeanim2
trigger1 = time = 0
value = 3157+var(55)*30000

[State 3012, Slam damage]
type = Lifeadd
trigger1 = AnimElem = 7, > 3
value = -88-20*(enemy,var(19)=1)
persistent = 0

[State 3012, ChangeState]
type = SelfState
trigger1 = animtime = 0
value = 5030

;---------------------------------------------------------------------------------------------------------------------------
; Whitering Surface - DM
;---------------------------------------------------------------------------------------------------------------------------
; Weak Version
;---------------------------------------------------------------------------------------------------------------------------

[Statedef 3500]
type    = S
movetype= A
physics = S
juggle  = 15
velset = 0,0
sprpriority = 2
ctrl = 0
anim = 3001
poweradd = -1000

[State 3500, RunMute]
type = StopSND
trigger1 = 1
channel = 3

[State 3501, Air]
type = StateTypeSet
trigger1 = time = [30,58]
statetype = A

[State 3500, BGPal]
type = BGPalFX
trigger1 = time = [0,4]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3500, NoFg]
type = AssertSpecial
trigger1 = time = [1,4]
flag = nofg

[State 3500, Pause]
type = SuperPause
trigger1 = time = 3
anim = -1
darken = 0
time = 27
movetime = 27
unhittable = 1


[State 3500, NoBg]
type = AssertSpecial
trigger1 = time = [5,28]
flag = nobg
flag2 = nofg

[State 3500, DMBg]
type = Explod
trigger1 = Time = 3
anim = 7051
ID = 1000
postype = p1
pos = 45, -30
bindtime = -1
sprpriority = -2
supermovetime = 30
ownpal = 1
removeongethit = 1
scale = 1.075,1.075
supermove = 1
ignorehitpause = 1

[State 3500, DMFg]
type = Explod
trigger1 = Time = 13
anim = 7050
ID = 1000
postype = p1
pos = 45, -30
bindtime = -1
sprpriority = 2
supermovetime = 30
ownpal = 1
removeongethit = 1
ontop = 1
supermove = 1
ignorehitpause = 1

[State 3500, Vice Voice]
type = Playsnd
trigger1 = Animelem = 1, =2
value = 0,17
channel = 0

[State 3500, DM Snd]
type = PlaySnd
trigger1 = time = 3
value = 1,13
channel = 1
persistent = 0

[State 3500, Vel]
type = VelSet
trigger1 = time = 30
y = -8.6

[State 3500, Vel2]
type = VelSet
trigger1 = time = [30,57]
x = 3

[State 3500, Friction]
type = VelAdd
trigger1 = time = [31,37] ;[31,57]
y = 0.4

[State 3500, Friction]
type = VelAdd
trigger1 = time = [37,43] ;[31,57]
y = 0.55

[State 3500, Friction]
type = VelAdd
trigger1 = time = [44,57] ;[31,57]
y = 0.7

[State 3500, Ground]
type = PosSet
trigger1 = time = 58
y = 0

[State 3500, Stop]
type = VelSet
trigger1 = time = 58
x = 0
y = 0

[State 3500, Shadow]
type = AfterImage
trigger1 = Time = 0
time = 70
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 110,110,210
palpostbright = 3,5,7

[State 3500, Grab Attempt]
type = HitDef
trigger1 = AnimElem = 11
triggerall = p2stateno != [40,52]
triggerall = var(18) = 0 
attr = S, HT
hitflag = M
priority = 5, Miss
sparkno = -1
sparkxy = -5,-70
hitsound = S1,9        
sprpriority = 1
p2facing = 1
p1stateno = 3505
p2stateno = 3510
ground.velocity = -4,-3
fall = 1
fall.recover = 0
fall.xvelocity = -3.5
fall.yvelocity = -3.6
numhits = 0

[State 3500, NHB]
type = NotHitBy
trigger1 = 1
value = SCA, AP

[State 3500, NHB]
type = NotHitBy
trigger1 = time = [0,40]
value = SCA, AA, AT


[State 3500, Grab Miss]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------------------------------------
; Whitering Surface - DM
;---------------------------------------------------------------------------------------------------------------------------
; Strong Version
;---------------------------------------------------------------------------------------------------------------------------

[Statedef 3501]
type    = S
movetype= A
physics = S
juggle  = 15
velset = 0,0
ctrl = 0
anim = 3000
poweradd = ifelse(fvar(30) > 0,0,-1000)
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------
[State 3501, RunMute]
type = StopSND
trigger1 = 1
channel = 3
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 3501, Air]
type = nothitby
trigger1 = AnimElem = 11,<=1
value = SAC

[State 3501, BGPal]
type = BGPalFX
trigger1 = time = [0,4]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3501, NoFg]
type = AssertSpecial
trigger1 = time = [1,4]
flag = nofg

[State 3501, Pause]
type = SuperPause
trigger1 = time = 3
anim = -1
darken = 0
time = 27
movetime = 27
unhittable = 1

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 3
anim = f7000
ID = 7000
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 45, -30
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 3
anim = f7010
ID = 7010
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 45, -30
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 3
value = f9000,0

[State 3501, Vice Voice]
type = Playsnd
trigger1 = Animelem = 1, =2
value = 0,17
channel = 0

[State 3501, Air]
type = StateTypeSet
trigger1 = time = [30,50]
statetype = A

[State 3501, Vel]
type = VelSet
trigger1 = time = 30
y = -5.5

[State 3501, Vel2]
type = VelSet
trigger1 = time = [30,49]
x = 9.85

[State 3501, Friction]
type = Gravity
trigger1 = time = [31,49]

[State 3501, Ground]
type = PosSet
trigger1 = time = 50
y = 0

[State 3501, Stop]
type = VelSet
trigger1 = time = 50
x = 0
y = 0

[State 3501, Shadow]
type = AfterImage
trigger1 = Time = 0
time = 70
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 110,110,210
palpostbright = 3,5,7

[State 3501, Grab Attempt]
type = HitDef
trigger1 = AnimElem = 11
triggerall = p2stateno != [150,159]
triggerall = p2statetype != A
attr = S, HT
hitflag = M
priority = 5, Miss
sparkno = -1
sparkxy = -5,-70      
hitsound = 800,0
sprpriority = 1
p2facing = 1
p1stateno = 3505
p2stateno = 3510
ground.velocity = -4,-3
fall = 1
fall.recover = 0
fall.xvelocity = -3.5
fall.yvelocity = -3.6
numhits = 0

[State 3501, Grab Miss]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
; Whitering Surface DM - Grab Success
;------------------------------------

[Statedef 3505]
type    = S
physics = S
movetype= A
anim = 3010
ctrl = 0
velset = 0,0

[State 3505, Grab Spark]
type = Explod
trigger1 = time = 0
anim = F9
postype = P2
pos = -5,-70
sprpriority = 1
ownpal = 1
ontop = 0
bindtime = 1

[State 3505, BgPal]
type = BGPalFX
trigger1 = Time = 0
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3505, NoFg]
type = AssertSpecial
trigger1 = Time = 1
flag = nofg

[State 3505, Shadow]
type = AfterImage
trigger1 = Time = 0
time = 189
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 110,110,210
palpostbright = 3,5,7

[State 3505, Wind]
type = PlaySnd
trigger1 = animelem = 5, =1
trigger2 = animelem = 16, = 1
value = 1,10
channel = 1

[State 3505, Slam]
type = PlaySnd
trigger1 = animelem = 7, =1
trigger2 = AnimElem = 18, =1
value = 1,11
channel = 1

[State 3505, Bone]
type = PlaySnd
trigger1 = animelem = 7, =1
trigger2 = AnimElem = 18, =1
value = 1,12
channel = 2

[State 3505, Laugh]
type = PlaySnd
trigger1 = AnimElem = 27, =1 
value = 0,9
channel = 0

[State 3505, Crush]
type = PlaySnd
trigger1 = Time = 166
value = 1,16
channel = 1

[State 3505, Pillar]
type = PlaySnd
trigger1 = Time = 167
value = 1,27
channel = 2

[State 3505, StopSND]
type = StopSND
trigger1 = 1
channel = 3

[State 3505, Width]
type = Width
trigger1 = 1
edge = 55,0

[State 3505, Explod]; Strong Ground Wave - Background
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
anim = F66
pos = 88,0
postype = p1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = -1

[State 3505, Explod 2]; Strong Ground Wave - Foreground
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
anim = F67
pos = 88,0
postype = p1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = 3

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
value = F47, 0
volume = 20

[State 3505, Grey Pillar]
type = Explod
trigger1 = Time = 166
anim = 3012
ontop = 1
postype = p1
pos = 88,0
bindtime = 1
trans = add

[State 3505, Shake]
type = Envshake
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
time = 20
freq = 70
ampl = -4

[State 1601, TBind 1] ; OK
type = TargetBind
trigger1 = AnimElem = 1, >=0
trigger1 = AnimElem = 2, < 0
pos = 26,0

[State 1601, TBind 2] ; OK
type = TargetBind
trigger1 = AnimElem = 2, >=0
trigger1 = AnimElem = 3, < 0
pos = 18,-90

[State 1601, TBind 3] ; OK
type = TargetBind
trigger1 = AnimElem = 3, >=0
trigger1 = AnimElem = 4, < 0
pos = 4,-114

[State 1601, TBind 4] ; OK
type = TargetBind
trigger1 = AnimElem = 4,>=0
trigger1 = AnimElem = 5,< 0
pos = -19,-116

[State 1601, TBind 5] ; OK
type = TargetBind
trigger1 = AnimElem = 5,>=0
trigger1 = AnimElem = 6,< 0
pos = 24,-104

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 6,>=0
trigger1 = AnimElem = 7,< 0
pos = 37,-80

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 7,>=0
trigger1 = AnimElem = 8,< 0
pos = 87,-5

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 8,>=0
trigger1 = AnimElem = 9,< 0
pos = 88,-4

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 9,>=0
trigger1 = AnimElem = 10,< 0
pos = 72,-2

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 10,>=0
trigger1 = AnimElem = 11,< 0
pos = 44,-14

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 11,>=0
trigger1 = AnimElem = 12,< 0
pos = 45,-40

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 12,>=0
trigger1 = AnimElem = 13,< 0
pos = 26,0

; Second Crush

[State 1601, TBind 1] ; OK
type = TargetBind
trigger1 = AnimElem = 13, >=0
trigger1 = AnimElem = 14, < 0
pos = 18,-90

[State 1601, TBind 2] ; OK
type = TargetBind
trigger1 = AnimElem = 14, >=0
trigger1 = AnimElem = 15, < 0
pos = 4,-114

[State 1601, TBind 3] ; OK
type = TargetBind
trigger1 = AnimElem = 15, >=0
trigger1 = AnimElem = 16, < 0
pos = -19,-116

[State 1601, TBind 4] ; OK
type = TargetBind
trigger1 = AnimElem = 16,>=0
trigger1 = AnimElem = 17,< 0
pos = 24,-104

[State 1601, TBind 5] ; OK
type = TargetBind
trigger1 = AnimElem = 17,>=0
trigger1 = AnimElem = 18,< 0
pos = 37,-80

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 18,>=0
trigger1 = AnimElem = 19,< 0
pos = 87,-5

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 19,>=0
trigger1 = AnimElem = 20,< 0
pos = 88,-4

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 20,>=0
trigger1 = AnimElem = 21,< 0
pos = 72,-2

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 21,>=0
trigger1 = AnimElem = 22,< 0
pos = 44,-14

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 22,>=0
trigger1 = AnimElem = 23,< 0
pos = 45,-40

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 23,>=0
trigger1 = AnimElem = 24,< 0
pos = 26,0

; Orochi Mithan's Robe

[State 1705, TBind 1]
type = TargetBind
trigger1 = AnimElem = 24, >=0
trigger1 = AnimElem = 25, < 0
pos = 18,-90

[State 1705, TBind 1]
type = TargetBind
trigger1 = AnimElem = 25, >=0
trigger1 = AnimElem = 26, < 0
pos = 18,-119

[State 1705, TBind 2]
type = TargetBind
trigger1 = AnimElem = 26, >=0
trigger1 = AnimElem = 27, < 0
pos = -10,-124

[State 1705, TBind 3]
type = TargetBind
trigger1 = AnimElem = 27, >=0
trigger1 = AnimElem = 28, < 0
pos = 13,-110

[State 1706, TBind]
type = TargetBind
trigger1 = AnimElem = 28, >=0
trigger1 = AnimElem = 29, < 0
pos = 36,-80

[State 1706, TBind]
type = TargetBind
trigger1 = AnimElem = 29, >=0
trigger1 = AnimElem = 31, < 0
pos = 89,-6

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 121
x = 0
y = -18

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 122
x = 3
y = -9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 123
x = 2
y = -9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 124
x = 2
y = -8

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 125
x = 2
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 126
x = 3
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 127
x = 2
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 128
x = 3
y = -6

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 129
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 130
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 131
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 132
x = 3
y = -4

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 133
x = 2
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 134
x = 3
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 135
x = 2
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 136
x = 3
y = -2

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 137
x = 2
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 138
x = 3
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 139 ; Maximum Y Position
x = 2
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = [140,141]
x = 2
y = 0

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 141
x = 5
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 142
x = 3
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 143
x = 2
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 144
x = 2
y = 2

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 145
x = 2
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 146
x = 3
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 147
x = 2
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 148
x = 3
y = 4

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 149
x = 2
y = 5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 150
x = 3
y = 5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 151
x = 3
y = 6

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 152
x = 2
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 153
x = 3
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 154
x = 2
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 155
x = 3
y = 8

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 156
x = 2
y = 9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 157
x = 3
y = 9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = [158,161]
x = 2
y = 9

[State 1700, Ground]
type = PosSet
trigger1 = time = 162
y = 0

[State 3505, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------
; Enemy thrown by Whithering Surface DM
;--------------------------------------

[Statedef 3510]
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0

[State 3510, ChangeAnim]
type = Changeanim2
trigger1 = time = 0
value = 3011+var(55)*30000

[State 3510, Slam damage]
type = Lifeadd
trigger1 = time = 32
trigger2 = time = 86
value = -88-20*(enemy,var(19)=1)
kill = 0

[State 3510, Slam damage]
type = Lifeadd
trigger1 = time = 166
value = -88-20*(enemy,var(19)=1)

[State 3510, Camera]
type = ScreenBound
trigger1 = time <= 115

[State 3510, ChangeState]
type = SelfState
trigger1 = p2stateno = 3900
trigger1 = p2name = "vice"
value = 5020

[State 3510, ChangeState]
type = SelfState
trigger1 = AnimTime = 0
value = 5030

;--------------------------------------------------------------------------------------------------------------------------
; Whithering Surface - SDM
;--------------------------------------------------------------------------------------------------------------------------

;--------------------------------------
; Whithering Surface SDM - Grab attempt
;--------------------------------------

[Statedef 14000]
type    = S
movetype= A
physics = S
juggle  = 15
velset = 0,0
ctrl = 0
anim = 3000
poweradd = ifelse(fvar(30) > 0,-1000,-2000)
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
[State 4000, RunMute]
type = StopSND
trigger1 = 1
channel = 3
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 3501, Air]
type = StateTypeSet
trigger1 = time = [30,50]
statetype = A

[State 3501, Air]
type = nothitby
trigger1 = AnimElem = 11,<=1
value = SAC

[State 4000, BGPal]
type = BGPalFX
trigger1 = time = [0,4]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 4000, NoFg]
type = AssertSpecial
trigger1 = time = [1,4]
flag = nofg

[State 4000, Pause]
type = SuperPause
trigger1 = time = 3
anim = -1
darken = 0
time = 27
movetime = 27
unhittable = 1

[State 3200, 4]
type = Explod
trigger1 = time=3
anim = f996
scale=0.5,0.5
id = 996
postype = p1
pos=-25,60
sprpriority = 6
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3200, 4]
type = Explod
trigger1 = time=3
anim = f995
scale=0.5,0.5
id = 995
postype = p1
pos=-25,60
sprpriority = -1
supermove = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 3
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 3
anim = f7100
ID = 7100
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 45, -30
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 3
anim = f7110
ID = 7110
scale = 0.5,0.5
ownpal = 1
facing = 1
postype = p1
pos = 45, -30
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = Time = 3
value = f9000,1

[State 4000, Vice Voice]
type = Playsnd
trigger1 = Animelem = 1, =2
value = 0,17
channel = 0

[State 4000, Wind]
type = PlaySnd
trigger1 = Time = 30
value = 1,26
channel = 2

[State 4000, Vel]
type = VelSet
trigger1 = time = 30
y = -5.5

[State 4000, Vel2]
type = VelSet
trigger1 = time = [30,49]
x = 9.85

[State 4000, Friction]
type = Gravity
trigger1 = time = [31,49]

[State 4000, Ground]
type = PosSet
trigger1 = time = 50
y = 0

[State 4000, Stop]
type = VelSet
trigger1 = time = 50
x = 0
y = 0

[State 4001, Shadow]
type = AfterImage
trigger1 = Time = 0
time = 70
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 220,30,30
palpostbright = 3,5,7

[State 4000, Grab Attempt]
type = HitDef
triggerall  = p2statetype != A
triggerall = p2stateno != [150,159]
trigger1 = AnimElem = 11
attr = S, HT
hitflag = M
priority = 5, Miss
sparkno = -1
sparkxy = -5,-70      
hitsound = S1,9
sprpriority = 1
p2facing = 1
p1stateno = 14001
p2stateno = 14010
ground.velocity = -4,-3
fall = 1
fall.recover = 0
fall.xvelocity = -3.5
fall.yvelocity = -3.6
numhits = 0

[State 4000, Grab Miss]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------
; Whitering Surface SDM - Grab Success
;-------------------------------------

[Statedef 14001]
type    = S
physics = S
movetype= A
anim = 3020
ctrl = 0
velset = 0,0

[State 3505, Grab Spark]
type = Explod
trigger1 = time = 0
anim = F9
postype = P2
pos = -5,-70
sprpriority = 1
ownpal = 1
ontop = 0
bindtime = 1

[State 4001, BgPal]
type = BGPalFX
trigger1 = Time = 0
time = 1
add = 255,255,255
ignorehitpause = 1

[State 4001, NoFg]
type = AssertSpecial
trigger1 = Time = 1
flag = nofg

[State 4001, Shadow]
type = AfterImage
trigger1 = Time = 0
time = 386
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 230,20,20
palpostbright = 3,5,7
ignorehitpause = 1
pausemovetime = 9999

[State 3505, StopSND]
type = StopSND
trigger1 = 1
channel = 3

[State 3505, Width]
type = Width
trigger1 = 1
edge = 55,0

[State 3505, Explod]; Strong Ground Wave - Background
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
trigger4 = AnimElem = 40
anim = F66
pos = 88,0
postype = p1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = -1

[State 3505, Explod 2]; Strong Ground Wave - Foreground
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
trigger4 = AnimElem = 40
anim = F67
pos = 88,0
postype = p1
removetime = -2
bindtime = 1
ontop = 0
ownpal = 1
sprpriority = 3

[State 1000]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 73
anim = F63
facing = facing
ignorehitpause = 1
postype = p1
pos = 88, 0
sprpriority = 7

[State 3121, 1]
type = Helper
triggerall = StageVar(info.author) != "water"
trigger1 = AnimElem = 73
id = 8882
postype = p1
pos = 88, 0
sprpriority = 10
stateno = 11492
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
trigger4 = AnimElem = 40
trigger5 = AnimElem = 73
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
trigger4 = AnimElem = 40
trigger5 = AnimElem = 73
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
trigger4 = AnimElem = 40
trigger5 = AnimElem = 73
value = F47, 0
volume = 20

[State 3505, Shake]
type = Envshake
trigger1 = AnimElem = 7
trigger2 = AnimElem = 18
trigger3 = AnimElem = 29
trigger4 = AnimElem = 40
trigger5 = AnimElem = 73
time = 20
freq = 70
ampl = -4

[State 1601, TBind 1] ; OK
type = TargetBind
trigger1 = AnimElem = 1, >=0
trigger1 = AnimElem = 2, < 0
pos = 26,0

[State 1601, TBind 2] ; OK
type = TargetBind
trigger1 = AnimElem = 2, >=0
trigger1 = AnimElem = 3, < 0
pos = 18,-90

[State 1601, TBind 3] ; OK
type = TargetBind
trigger1 = AnimElem = 3, >=0
trigger1 = AnimElem = 4, < 0
pos = 4,-114

[State 1601, TBind 4] ; OK
type = TargetBind
trigger1 = AnimElem = 4,>=0
trigger1 = AnimElem = 5,< 0
pos = -19,-116

[State 1601, TBind 5] ; OK
type = TargetBind
trigger1 = AnimElem = 5,>=0
trigger1 = AnimElem = 6,< 0
pos = 24,-104

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 6,>=0
trigger1 = AnimElem = 7,< 0
pos = 37,-80

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 7,>=0
trigger1 = AnimElem = 8,< 0
pos = 87,-5

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 8,>=0
trigger1 = AnimElem = 9,< 0
pos = 88,-4

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 9,>=0
trigger1 = AnimElem = 10,< 0
pos = 72,-2

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 10,>=0
trigger1 = AnimElem = 11,< 0
pos = 44,-14

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 11,>=0
trigger1 = AnimElem = 12,< 0
pos = 45,-40

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 12,>=0
trigger1 = AnimElem = 13,< 0
pos = 26,0

; Second Crush

[State 1601, TBind 1] ; OK
type = TargetBind
trigger1 = AnimElem = 13, >=0
trigger1 = AnimElem = 14, < 0
pos = 18,-90

[State 1601, TBind 2] ; OK
type = TargetBind
trigger1 = AnimElem = 14, >=0
trigger1 = AnimElem = 15, < 0
pos = 4,-114

[State 1601, TBind 3] ; OK
type = TargetBind
trigger1 = AnimElem = 15, >=0
trigger1 = AnimElem = 16, < 0
pos = -19,-116

[State 1601, TBind 4] ; OK
type = TargetBind
trigger1 = AnimElem = 16,>=0
trigger1 = AnimElem = 17,< 0
pos = 24,-104

[State 1601, TBind 5] ; OK
type = TargetBind
trigger1 = AnimElem = 17,>=0
trigger1 = AnimElem = 18,< 0
pos = 37,-80

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 18,>=0
trigger1 = AnimElem = 19,< 0
pos = 87,-5

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 19,>=0
trigger1 = AnimElem = 20,< 0
pos = 88,-4

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 20,>=0
trigger1 = AnimElem = 21,< 0
pos = 72,-2

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 21,>=0
trigger1 = AnimElem = 22,< 0
pos = 44,-14

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 22,>=0
trigger1 = AnimElem = 23,< 0
pos = 45,-40

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 23,>=0
trigger1 = AnimElem = 24,< 0
pos = 26,0

; Third Crush

[State 1601, TBind 1] ; OK
type = TargetBind
trigger1 = AnimElem = 24, >=0
trigger1 = AnimElem = 25, < 0
pos = 18,-90

[State 1601, TBind 2] ; OK
type = TargetBind
trigger1 = AnimElem = 25, >=0
trigger1 = AnimElem = 26, < 0
pos = 4,-114

[State 1601, TBind 3] ; OK
type = TargetBind
trigger1 = AnimElem = 26, >=0
trigger1 = AnimElem = 27, < 0
pos = -19,-116

[State 1601, TBind 4] ; OK
type = TargetBind
trigger1 = AnimElem = 27,>=0
trigger1 = AnimElem = 28,< 0
pos = 24,-104

[State 1601, TBind 5] ; OK
type = TargetBind
trigger1 = AnimElem = 28,>=0
trigger1 = AnimElem = 29,< 0
pos = 37,-80

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 29,>=0
trigger1 = AnimElem = 30,< 0
pos = 87,-5

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 30,>=0
trigger1 = AnimElem = 31,< 0
pos = 88,-4

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 31,>=0
trigger1 = AnimElem = 32,< 0
pos = 72,-2

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 32,>=0
trigger1 = AnimElem = 33,< 0
pos = 44,-14

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 33,>=0
trigger1 = AnimElem = 34,< 0
pos = 45,-40

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 34,>=0
trigger1 = AnimElem = 35,< 0
pos = 26,0

; Orochi Mithan's Robe

[State 1705, TBind 1]
type = TargetBind
trigger1 = AnimElem = 35, >=0
trigger1 = AnimElem = 36, < 0
pos = 18,-90

[State 1705, TBind 1]
type = TargetBind
trigger1 = AnimElem = 36, >=0
trigger1 = AnimElem = 37, < 0
pos = 18,-119

[State 1705, TBind 2]
type = TargetBind
trigger1 = AnimElem = 37, >=0
trigger1 = AnimElem = 38, < 0
pos = -10,-124

[State 1705, TBind 3]
type = TargetBind
trigger1 = AnimElem = 38, >=0
trigger1 = AnimElem = 39, < 0
pos = 13,-110

[State 1706, TBind]
type = TargetBind
trigger1 = AnimElem = 39, >=0
trigger1 = AnimElem = 40, < 0
pos = 36,-80

[State 1706, TBind]
type = TargetBind
trigger1 = AnimElem = 40, >=0
trigger1 = AnimElem = 42, < 0
pos = 89,-6

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 42,>=0
trigger1 = AnimElem = 43,< 0
pos = 72,-2

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 43,>=0
trigger1 = AnimElem = 44,< 0
pos = 44,-14

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 44,>=0
trigger1 = AnimElem = 45,< 0
pos = 45,-40

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 45,>=0
trigger1 = AnimElem = 46,< 0
pos = 26,0

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 46,>=0
trigger1 = AnimElem = 47,< 0
pos = 24,0

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 47,>=0
trigger1 = AnimElem = 48,< 0
pos = 17,0

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 48,>=0
trigger1 = AnimElem = 49,< 0
pos = 4,0

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 49,>=0
trigger1 = AnimElem = 50,< 0
pos = -11,0

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 50,>=0
trigger1 = AnimElem = 51,< 0
pos = -20,0

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 51,>=0
trigger1 = AnimElem = 52,< 0
pos = -17,-107

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 52,>=0
trigger1 = AnimElem = 53,< 0
pos = -19,-112

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 53,>=0
trigger1 = AnimElem = 54,< 0
pos = -33,-89

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 54,>=0
trigger1 = AnimElem = 55,< 0
pos = 25,-20

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 55,>=0
trigger1 = AnimElem = 56,< 0
pos = 61,-41

[State 1601, TBind 6] ; OK
type = TargetBind
trigger1 = AnimElem = 56,>=0
trigger1 = AnimElem = 57,< 0
pos = 58,0

; Orochi Mithan's Robe

[State 1705, TBind 1]
type = TargetBind
trigger1 = AnimElem = 63, >=0
trigger1 = AnimElem = 64, < 0
pos = 18,-119

[State 1705, TBind 2]
type = TargetBind
trigger1 = AnimElem = 64, >=0
trigger1 = AnimElem = 65, < 0
pos = -10,-124

[State 1705, TBind 3]
type = TargetBind
trigger1 = AnimElem = 65, >=0
trigger1 = AnimElem = 66, < 0
pos = 11,-113

; 360 Motion Spin

[State 1705, TBind 3]
type = TargetBind
trigger1 = AnimElem = 66, >=0
trigger1 = AnimElem = 67, < 0
pos = 30,-47

[State 1705, TBind 3]
type = TargetBind
trigger1 = AnimElem = 67, >=0
trigger1 = AnimElem = 68, < 0
pos = -6,-31

[State 1705, TBind 3]
type = TargetBind
trigger1 = AnimElem = 68, >=0
trigger1 = AnimElem = 69, < 0
pos = -25,-73

[State 1705, TBind 3]
type = TargetBind
trigger1 = AnimElem = 69, >=0
trigger1 = AnimElem = 70, < 0
pos = 8,-100

[State 1705, TBind 2]
type = TargetBind
trigger1 = AnimElem = 70, >=0
trigger1 = AnimElem = 71, < 0
pos = -10,-124

[State 1705, TBind 3]
type = TargetBind
trigger1 = AnimElem = 71, >=0
trigger1 = AnimElem = 72, < 0
pos = 11,-113

[State 1706, TBind]
type = TargetBind
trigger1 = AnimElem = 72, >=0
trigger1 = AnimElem = 73, < 0
pos = 36,-80
time = 3

[State 1706, TBind]
type = TargetBind
trigger1 = AnimElem = 73, >=0
trigger1 = AnimElem = 75, < 0
pos = 89,-6

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 185 ;121
x = 0
y = -18

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 186
x = 3
y = -9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 187
x = 2
y = -9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 188
x = 2
y = -8

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 189
x = 2
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 190
x = 3
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 191
x = 2
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 192
x = 3
y = -6

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 193
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 194
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 195
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 196
x = 3
y = -4

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 197
x = 2
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 198
x = 3
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 199
x = 2
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 200
x = 3
y = -2

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 201
x = 2
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 202
x = 3
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 203 ; Maximum Y Position
x = 2
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = [204,205]
x = 2
y = 0

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 206
x = 5
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 207
x = 3
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 208
x = 2
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 209
x = 2
y = 2

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 210
x = 2
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 211
x = 3
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 212
x = 2
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 213
x = 3
y = 4

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 214
x = 2
y = 5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 215
x = 3
y = 5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 216
x = 3
y = 6

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 217
x = 2
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 218
x = 3
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 219
x = 2
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 220
x = 3
y = 8

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 221
x = 2
y = 9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 222
x = 3
y = 9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = [223,226]
x = 2
y = 9

[State 1700, Ground]
type = PosSet
trigger1 = time = 227
y = 0

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 302
x = 0
y = -18

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 303
x = 3
y = -9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 304
x = 2
y = -9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 305
x = 2
y = -8

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 306
x = 2
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 307
x = 3
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 308
x = 2
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 309
x = 3
y = -6

; Orochi Mithan's Robe

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 318
x = 0
y = -18

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 319
x = 3
y = -9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 320
x = 2
y = -9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 321
x = 2
y = -8

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 322
x = 2
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 323
x = 3
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 324
x = 2
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 325
x = 3
y = -6

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 326
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 327
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 328
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 329
x = 3
y = -4

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 330
x = 2
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 331
x = 3
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 332
x = 2
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 333
x = 3
y = -2

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 334
x = 2
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 335
x = 3
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 336 ; Maximum Y Position
x = 2
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 337
x = 5
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 338
x = 3
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 339
x = 2
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 340
x = 2
y = 2

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 341
x = 2
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 342
x = 3
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 343
x = 2
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 344
x = 3
y = 4

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 345
x = 2
y = 5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 346
x = 3
y = 5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 347
x = 3
y = 6

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 348
x = 2
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 349
x = 3
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 350
x = 2
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 351
x = 3
y = 8

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 352
x = 2
y = 9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 353
x = 3
y = 9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = [354,359]
x = 2
y = 9

[State 1705, Ground]
type = PosSet
trigger1 = time = 360
y = 0

[State 4001, Grab Spark]
type = Explod
trigger1 = time = 310
anim = F9
postype = P1
pos = 16, -121
ownpal = 1
ontop = 1
bindtime = 1

[State 4001, Grab Snd]
type = PlaySnd
trigger1 = time = 310
value = F800,0 
channel = 1

[State 10100, 1]
type = Explod
trigger1 = Time = 365
anim = F14421
id = 14421
pos = 88,0
postype = p1
ownpal = 1
scale = 0.5,0.5
sprpriority = -3
ignorehitpause = 1
Trans = addalpha
Alpha = 200,220

[State 10100, 1]
type = Explod
trigger1 = Time = 365
anim = F14424
id = 12424
pos = 88,0
postype = p1
ownpal = 1
scale = 0.5,0.5
sprpriority = 8+time
ignorehitpause = 1
Trans = addalpha
Alpha = 200,220

[State 4001, Pillar]
type = PlaySnd
trigger1 = Time = 366
value = 1,27
channel = 2

[State 4001, Wind]
type = PlaySnd
trigger1 = animelem = 5, =1
trigger2 = animelem = 16, =1
trigger3 = animelem = 27, =1
value = 1,10
channel = 1

[State 4001, Slam]
type = PlaySnd
trigger1 = AnimElem = 7, =1
trigger2 = AnimElem = 18, =1
trigger3 = AnimElem = 29, =1
trigger4 = AnimElem = 40, =1
value = 1,11
channel = 1

[State 4001, Bone]
type = PlaySnd
trigger1 = AnimElem = 7, =1
trigger2 = AnimElem = 18, =1
trigger3 = AnimElem = 29, =1
trigger4 = AnimElem = 40, =1
value = 1,12
channel = 2

[State 4001, Laugh]
type = PlaySnd
trigger1 = AnimElem = 33, =1 
value = 0,19
channel = 0

[State 4001, Wind]
type = PlaySnd
trigger1 = AnimElem = 55, =1
value = 1,10
channel = 1

[State 4001, Wind2]
type = PlaySnd
trigger1 = AnimElem = 65, =1
value = 1,28
channel = 1

[State 4001, Voice]
type = PlaySnd
trigger1 = AnimElem = 66, =1
value = 0,10
channel = 0

[State 4001, Crush]
type = PlaySnd
trigger1 = Time = 365
value = 1,16
channel = 1

[State 4001, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------
; Enemy thrown by Whithering Surface SDM
;---------------------------------------

[Statedef 14010]
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0

[State 4010, ChangeAnim]
type = Changeanim2
trigger1 = time = 0
value = 3021+var(55)*30000

[State 4010, Slam damage]
type = Lifeadd
trigger1 = time = 39
trigger2 = time = 96
trigger3 = time = 152
trigger4 = time = 228
value = -59-14*(enemy,var(19)=1)
kill = 0

[State 3510, Slam damage]
type = Lifeadd
trigger1 = time = 310
value = -117-25*(enemy,var(19)=1)
kill = 0

[State 3510, Slam damage]
type = Lifeadd
trigger1 = time = 364
value = -117-25*(enemy,var(19)=1)

[State 4010, Camera]
type = ScreenBound
trigger1 = time <= 115

[State 2010, PosSet]
type = PosSet
trigger1 = time = 289
y = -60

[State 2010, XVelocity]
type = VelSet
trigger1 = time = [289,310]
x = -1

[State 2010, YVelocity]
type = PosAdd
trigger1 = time = 291 ;80
trigger1 = time = [289, 292]
y = -9

[State 2010, YVelocity]
type = PosAdd
trigger1 = time = 289
trigger2 = time = 293
y = -7

[State 2010, YVelocity]
type = PosAdd
trigger1 = time = 294
y = -6

[State 2010, YVelocity]
type = PosAdd
trigger1 = time = 290
trigger2 = time = 295
trigger3 = time = 296
y = -5

[State 2010, YVelocity]
type = PosAdd
trigger1 = time = 298
y = -4

[State 2010, YVelocity]
type = PosAdd
trigger1 = time = 297
y = -3

[State 2010, YVelocity]
type = PosAdd
trigger1 = time = 292
trigger2 = time = [299,302]
y = -2

[State 2010, YVelocity]
type = PosAdd
trigger1 = time = [303,305]
trigger2 = time = 308
y = -1

[State 2010, YVelocity]
type = PosAdd
trigger1 = time = [306,307]
y = 0

[State 666, YVelocity]
type = PosAdd
trigger1 = time = [309,310]
y = 1

[State 4010, ChangeState]
type = SelfState
trigger1 = AnimTime = 0
value = 5030

;--------------------------------------------------------------------------------------------------------------------------
; Whithering Atlas - HSDM / MAX2
;--------------------------------------------------------------------------------------------------------------------------
[Statedef 3900]
type    = A
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 4000
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,3499]) && time = 0
trigger2 = prevstateno = 3950&& time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [3500,3599]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------

[State 6000, RunMute]
type = StopSND
trigger1 = 1
channel = 3

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 6000, Freeze]
type = Posadd
trigger1 = prevstateno = 3505
trigger1 = time = 0
y = -80

[State 6000, Freeze]
type = PosFreeze
trigger1 = time = [0,29]

[State 6000, BGPal]
type = BGPalFX
trigger1 = time = [0,3]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 6000, NoFg]
type = AssertSpecial
trigger1 = time = [1,3]
flag = nofg
;--------------------------------------

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;---------------------------------------------------------
;-------------------------------------------------------------
[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;---------------------------------------------------------------
;-----------------------------------------------
[State a];SC/DC 取消1技gc
type = VarAdd
trigger1 = prevstateno = [1000,3999]
fvar(29) = -1000
persistent = 0

[State 6000, Pause]
type = SuperPause
trigger1 = time = 1
anim = -1
pos = 15, -90
darken = 0
time = 27
movetime = 27
unhittable = 1
poweradd = - 2000

[State 6000, NoBg]
type = AssertSpecial
trigger1 = time = [4,27]
flag = nobg
flag2 = nofg

[State 6000, HSDMBg]
type = Explod
trigger1 = Time = 1
anim = F7300
ID = 7300
postype = p1
pos = 15, -90
bindtime = -1
sprpriority = -2
supermovetime = 30
ownpal = 1
removeongethit = 1
supermove = 1
ignorehitpause = 1

[State 6000, HSDMFg]
type = Explod
trigger1 = Time = 1
anim = F7310
ID = 7310
postype = p1
pos = 15, -90
bindtime = -1
sprpriority = 2
supermovetime = 30
ownpal = 1
removeongethit = 1
ontop = 1
supermove = 1
ignorehitpause = 1

[State 6000, HSDM Snd]
type = PlaySnd
trigger1 = time = 1
value = F9000,2

[State 6000, Vice Voice]
type = Playsnd
trigger1 = Animelem = 1, =2
value = 0,19
channel = 0

[State 6000, Wind]
type = PlaySnd
trigger1 = Time = 30
value = 1,26
channel = 2

[State 6000, Shadow]
type = AfterImage
trigger1 = Time = 0
time = 50
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 245,245,1
palpostbright = 3,5,7

[State 6000, Grab Attempt]
type = HitDef
trigger1 = AnimElem = 1
attr = A, HT
hitflag = AF
priority = 5, Miss
sparkno = -1
sparkxy = -5,-70
sprpriority = 1
p2facing = 1
p1stateno = 3901
p2stateno = 3910
ground.velocity = -4,-3
fall = 1
fall.recover = 0
fall.xvelocity = -3.5
fall.yvelocity = -3.6
numhits = 0

[State 6000, Air Anim]
type = ChangeAnim
trigger1 = Time = 30
value = 41
elem = 4

[State 6000, Vel]
type = VarSet
trigger1 = time = 0
fv = 3
value = fvar(1)

[State 6000, Vel]
type = VarSet
trigger1 = time = 0
fv = 4
value = fvar(2)

[State 6000, Vel]
type = VelSet
trigger1 = time >= 30
x = fvar(3)

[State 6000, Vel]
type = VelSet
trigger1 = time = 30
y = fvar(4)

[State 6000, Vel]
type = Gravity
trigger1 = time >= 31

[State 6000, Jump]
type = ChangeState
trigger1 = Time >= 30
trigger1 = Pos Y >= 0
value = 52

;--------------------------------------------------------------------------------------------------------------------------
; Whithering Atlas - Success
;--------------------------------------------------------------------------------------------------------------------------

[Statedef 3901]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = -2000
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,3499]) && time = 0
trigger2 = prevstateno = 3950&& time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [3500,3599]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
[State 6001, Air Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 4001

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
[State 6001, RunMute]
type = StopSND
trigger1 = 1
channel = 3

[State 6001, BGPal]
type = BGPalFX
trigger1 = time = [0,3]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 6001, NoFg]
type = AssertSpecial
trigger1 = time = [1,3]
flag = nofg
;--------------------------------------

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;---------------------------------------------------------
;-------------------------------------------------------------
[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;---------------------------------------------------------------
;-----------------------------------------------
[State a];SC/DC 取消1技gc
type = VarAdd
trigger1 = prevstateno = [1000,3999]
fvar(29) = -1000
persistent = 0

[State 6001, Pause]
type = SuperPause
trigger1 = time = 1
anim = -1
darken = 0
time = 27
movetime = 27
unhittable = 1

[State 6001, NoBg]
type = AssertSpecial
trigger1 = time >3
flag = nobg
flag2 = nofg

[State 6001, HSDMBg]
type = Explod
trigger1 = Time = 1
anim = F7300
ID = 7300
postype = p1
pos = 15, -90
bindtime = -1
sprpriority = -2
supermovetime = 30
ownpal = 1
removeongethit = 1
supermove = 1
ignorehitpause = 1

[State 6000, HSDMFg]
type = Explod
trigger1 = Time = 1
anim = F7310
ID = 7310
postype = p1
pos = 15, -90
bindtime = -1
sprpriority = 2
supermovetime = 30
ownpal = 1
removeongethit = 1
ontop = 1
supermove = 1
ignorehitpause = 1

[State 6001, HSDM Snd]
type = PlaySnd
trigger1 = time = 1
value = F9000,2

[State 6001, Vice Voice]
type = Playsnd
trigger1 = Animelem = 1, =2
value = 0,19
channel = 0

[State 1000, 3]
type = PosSet
trigger1 = time = 0
x = 0

[State 6001, Freeze]
type = PosFreeze
trigger1 = time = [0,32]

[State 6001, Bind]
type = TargetBind
trigger1 = AnimElem = 1, >=0
trigger1 = AnimElem = 4, < 0
pos = 35,-10

[State 6001, Bind]
type = TargetBind
trigger1 = AnimElem = 4, >=0
trigger1 = AnimElem = 5, < 0
pos = 18,-94

[State 6001, Bind]
type = TargetBind
trigger1 = AnimElem = 5, >=0
trigger1 = AnimElem = 6, < 0
pos = 26,-95

[State 6001, Bind]
type = TargetBind
trigger1 = AnimElem = 6, >=0
trigger1 = AnimElem = 7, < 0
pos = 37,-70

[State 6001, Bind]
type = TargetBind
trigger1 = AnimElem = 7, >=0
pos = 24,-34

[State 6001, Vel]
type = VelSet
trigger1 = time = 33
y = 1.5

[State 6001, Accel]
type = VelAdd
trigger1 = time >=34
y = 0.49

[State 6001, Wind]
type = PlaySnd
trigger1 = Time = 30
value = 1,26
channel = 2

[State 6001, Shadow]
type = AfterImage
trigger1 = Time = 0
time = 50
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 245,245,1
palpostbright = 3,5,7

[State 6001,End]
type = ChangeState
trigger1 = Time > 7
trigger1 = Pos Y >=0
value = 3902

;-------------------------------
; Whithering Atlas - Second Part
;-------------------------------

[Statedef 3902]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0

[State 6002, NoFg]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 3505, Shake]
type = Envshake
trigger1 = time = 0
time = 20
freq = 70
ampl = -4

[State 6004, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 60
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 245,245,1
palpostbright = 3,5,7

[State 6002, Knockdown]
type = PlaySnd
trigger1 = time = 1
value = 1,12
channel = 1

[State 1000]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
anim = F66
facing = facing
ignorehitpause = 1
postype = p1
pos = 32,0
sprpriority = 7

[State 1000]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
anim = F67
facing = facing
ignorehitpause = 1
postype = p1
pos = 32,0
sprpriority = 7

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 3
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = AnimElem = 3
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = animelem = 3
value = F47, 0
volume = 20

[State 6002, Grey Pillar]
type = Explod
trigger1 = Time = 0
anim = 3012
ontop = 1
postype = p1
pos = 24,0
bindtime = 1
trans = add

[State 6002, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 4002

[State 6002, Position]
type = PosSet
trigger1 = time = 0
y = 25

[State 6002, Position]
type = PosSet
trigger1 = time = 10
y = -90

[State 6002, Laugh]
type = PlaySnd
trigger1 = time = 43
value = 0,18
channel = 0

[State 6002, Vel]
type = VelSet
trigger1 = time = 43
y = 1

[State 6002, Accel]
type = VelAdd
trigger1 = time >=44
y = 0.5

[State 6002,End]
type = ChangeState
trigger1 = Time > 20
trigger1 = Pos Y >=0
value = 3903

;-----------------------
; Whithering Atlas - End
;-----------------------

[StateDef 3903]
type = S
movetype = I
physics = S
juggle  = 0
velset = 0,0
ctrl = 0

[State 6003, NoFg]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 3505, Shake]
type = Envshake
trigger1 = time = 0
time = 20
freq = 70
ampl = -6

[State 1000]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
anim = F63
facing = facing
ignorehitpause = 1
postype = p1
pos = 0,0
sprpriority = 7

[State 3121, 1]
type = Helper
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
id = 8882
postype = p1
pos = 0, 0
sprpriority = 10
stateno = 11492
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f25
id = 7400
pos = -10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f25
id = 7400
facing = -1
pos = 10,0
postype = p2
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
value = F47, 0
volume = 20

[State 6003, Knockdown]
type = PlaySnd
trigger1 = time = 1
value = 1,8
channel = 1

[State 6003, Hit Spark]
type = Explod
trigger1 = time = 1
anim = F3
postype = p1
pos = 5, -10
bindtime = 1
ignorehitpause = 1
ontop = 1
ownpal = 1

[State 10100, 1]
type = Explod
trigger1 = Time = 0
anim = F14421
id = 14421
pos = 0,0
postype = p1
ownpal = 1
scale = 0.5,0.5
sprpriority = -3
ignorehitpause = 1
Trans = addalpha
Alpha = 200,220

[State 10100, 1]
type = Explod
trigger1 = Time = 0
anim = F14424
id = 12424
pos = 0,0
postype = p1
ownpal = 1
scale = 0.5,0.5
sprpriority = 8+time
ignorehitpause = 1
Trans = addalpha
Alpha = 200,220

[State 6003, Pillar]
type = PlaySnd
trigger1 = Time = 1
value = 1,27
channel = 2

[State 6003, Ground]
type = PosSet
trigger1 = time = 0
y = 0

[State 6003, Anim]
type = ChangeAnim
trigger1 = time = 0
value = 4003

[State 6003, End]
type = ChangeState
trigger1 = Time = 12
value = 3904

;-----
; Jump 
;-----

[Statedef 3904]
type = S
physics = S
movetype = I
ctrl = 0
anim = 3153

[State 6004, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 34
trans = add1
timegap = 1
framegap = 3
length = 9
palinvertall = 0
palbright = 50,50,50
palcontrast = 245,245,1
palpostbright = 3,5,7

[State 6004, Floor]
type = PosSet
trigger1 = Time = 0
trigger2 = time = 42
y = 0

[State 3004, Jump]
type = VelSet
trigger1 = time = [10,41]
x = -4

[State 3004, Jump]
type = VelSet
trigger1 = time = 10
y = -8.5

[State 3004, Gravity]
type = Gravity
trigger1 = time = [11,41]

[State 3004, Wind]
type = PlaySnd
trigger1 = AnimElem = 4, =1
value = 1,26
channel = 2

[State 3004, Stop]
type = VelSet
trigger1 = time = 42
x = 0
y = 0

[State 6004, State]
type = RemoveExplod
trigger1 = AnimElem = 10 && NumExplod(7100)
ID = 7100

[State 6003, NoFg]
type = AssertSpecial
trigger1 = AnimElem = 1,>= 0&& AnimElem = 10 < 0
flag = nofg

[state 3004, End]
type = ChangeState
trigger1 = time >= 30
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------
; Enemy thrown by Whithering Atlas
;---------------------------------

[Statedef 3910]
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0

[State 6010, ChangeAnim]
type = Changeanim2
trigger1 = time = 0
value = 4010+var(55)*30000

[State 6010, Camera]
type = ScreenBound
trigger1 = 1

[State 6010, LieDown]
type = ChangeState
trigger1 = p2stateno = 3902
value = 3911

[Statedef 3911]
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0

[State 6011, Slam damage]
type = Lifeadd
trigger1 = time = 0
value = -276 -45*(enemy,var(19)=1)

[State 6011, Anim]
type = ChangeAnim2
trigger1 = time = 0
value = 4011+var(55)*30000

[State 6011, Ground]
type = PosSet
trigger1 = time = 0
y = 0

[State 6011, Hit]
type = ChangeState
trigger1 = p2stateno = 3903
value = 3912

[Statedef 3912]
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0

[State 6011, Slam damage]
type = Lifeadd
trigger1 = time = 0
value = -255 -65*(enemy,var(19)=1)

[State 6012, Anim]
type = ChangeAnim2
trigger1 = time = 0
value = 4012+var(55)*30000

[State 6012, Anim]
type = ChangeAnim
trigger1 = time = 12
value = 5050+var(55)*30000

[State 6012, Vel]
type = VelSet
trigger1 = time = 12
y = -5

[State 6012, Vel]
type = VelAdd
trigger1 = time >= 12
y = .51

[State 6012, Vel]
type = VelSet
trigger1 = time >= 12
x = -3

[State 6012, ChangeState]
type = SelfState
trigger1 = time > 16
trigger1 = Pos Y >= 0
value = 5100

;------------------------------------------------------------------------
[Statedef 3950]
type    = A
physics = N
movetype= A
anim = 1020
ctrl = 0
velset = 0,0
facep2 = 1
juggle = 1

[State 1700, Var] ; Reset
type = VarSet
trigger1 = time = 0
v = 17
value = 0

[State 1700, Camera]
type = ScreenBound
trigger1 = time >=0
value = 1

[State 1700, StopSND]
type = StopSND
trigger1 = 1
channel = 3

[State 1700, Camera]
type = ScreenBound
trigger1 = time >=0
value = 1

[State 1700, Wind SND]
type = Playsnd
trigger1 = Animelem = 3, =1
value = 1,4

[State 1700, GRAB]
type = Hitdef
trigger1 = animelem = 5
trigger1 = animelemtime(5) < 8
attr = A, ST
hitflag = AF
priority = 7, Miss
sparkno = -1
sparkxy = 5,-80
sprpriority = 2
p2facing = 1
p1stateno = 3901
p2stateno = 3910
air.velocity = -4,-3
ground.velocity = 4,-3
fall = 1
fall.xvelocity = -3.5
fall.yvelocity = -3.6
fall.recover = 0
getpower = 136,0

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 7
x = 0
y = -18

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 8
x = 3
y = -9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 9
x = 2
y = -9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 10
x = 2
y = -8

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 11
x = 2
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 12
x = 3
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 13
x = 2
y = -7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 14
x = 3
y = -6

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 15
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 16
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 17
x = 2
y = -5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 18
x = 3
y = -4

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 19
x = 2
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 20
x = 3
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 21
x = 2
y = -3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 22
x = 3
y = -2

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 23
x = 2
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 24
x = 3
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 25 ; Maximum Y Position
x = 2
y = -1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 26
x = 5
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 27
x = 3
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 28
x = 2
y = 1

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 29
x = 2
y = 2

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 30
x = 2
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 31
x = 3
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 32
x = 2
y = 3

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 33
x = 3
y = 4

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 34
x = 2
y = 5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 35
x = 3
y = 5

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 36
x = 3
y = 6

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 37
x = 2
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 38
x = 3
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 39
x = 2
y = 7

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 40
x = 3
y = 8

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 41
x = 2
y = 9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time = 42
x = 3
y = 9

[State 1700, PosAdd]
type = PosAdd
trigger1 = time >= 43
x = 2
y = 9

[State 1700, ChangeState]
type = ChangeState
trigger1 = time > 10
trigger1 = Pos y >= 0
value = 1701
ctrl = 0

;-| 血の觉醒 |---------------------------------------------------------
;------------------------------
[statedef 3700]
type = S
movetype = A
physics = N
juggle = 0
anim = 3700
ctrl = 0
velset = 0,0
sprpriority = 0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
;--------------------------------------

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 1
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;---------------------------------------------------------
;-------------------------------------------------------------
[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 1
helpertype = normal
stateno = 24301
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;---------------------------------------------------------------
;-----------------------------------------------
[State a];SC/DC 取消1技gc
type = VarAdd
trigger1 = prevstateno = [1000,3999]
fvar(29) = -1000
persistent = 0

[state 4500,superpause]
type = superpause
trigger1 = time = 0
time = 100
movetime = 100
poweradd = -2000
anim = -1
darken = 0

[state x]
type = varset
trigger1 = time = 0
fv = 32
value = 0
ignorehitpause = 1

[state 4500]
type = Envcolor
trigger1 = 1
value = 0,0,0
under = 1
ignorehitpause = 1

[state 4500]
type = nothitby
trigger1 = 1
value = SCA

[state 4500]
type = playsnd
trigger1 = time = 0
value = F9000,3

[state 4500]
type = playsnd
trigger1 = animelem = 4
value = 15555,1

[state 4500]
type = playsnd
trigger1 = animelem = 16
value = 15555,2

[state 4500]
type = playsnd
trigger1 = animelem = 18
value = 15555,3

[state 4500]
type = playsnd
trigger1 = animelem = 18
value = 15555,4

[state 4500,必杀闪光1]
type = Explod
trigger1 = time = 0
anim = F7300
ID = 7300
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 0,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = time = 0
anim = F7310
ID = 7310
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 0,-80
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[state 4500]
type = Explod
trigger1 = animelem = 11
anim = 3701
ID = 3701
pos = -10,-95
postype = p1
bindtime = -1
ownpal = 1
sprpriority = 100
;removetime = 31
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[state 4500]
type = Explod
trigger1 = animelem = 16
anim = 3702
ID = 3702
pos = 0,-80
postype = p1
ownpal = 1
scale = .5,.5
sprpriority = 100
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[state 4500]
type = Explod
trigger1 = time = 100
anim = 3703
ID = 3703
pos = 0,0
postype = back
ownpal = 1
scale = .52,.52
sprpriority = 100
bindtime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State explod]
type = explod
trigger1 = time = 106
anim = 3704
sprpriority = 120
postype = back
pos = 2/2,243
bindtime = 1
under = 0
ownpal = 1
scale = .5,.5

[State explod]
type = explod
trigger1 = time = 107
anim = 3704
sprpriority = 120
postype = back
pos = 156/2,243
bindtime = 1
under = 0
ownpal = 1
scale = .5,.5

[State explod]
type = explod
trigger1 = time = 108
anim = 3704
sprpriority = 120
postype = back
pos = 240/2,243
bindtime = 1
under = 0
ownpal = 1
scale = .5,.5

[State explod]
type = explod
trigger1 = time = 109
anim = 3704
sprpriority = 120
postype = back
pos = 276/2,243
bindtime = 1
under = 0
ownpal = 1
scale = .5,.5

[State explod]
type = explod
trigger1 = time = 110
anim = 3704
sprpriority = 120
postype = back
pos = 336/2,243
bindtime = 1
under = 0
ownpal = 1
scale = .5,.5

[State explod]
type = explod
trigger1 = time = 111
anim = 3704
sprpriority = 120
postype = back
pos = 430/2,243
bindtime = 1
under = 0
ownpal = 1
scale = .5,.5

[State explod]
type = explod
trigger1 = time = 112
anim = 3704
sprpriority = 120
postype = back
pos = 488/2,243
bindtime = 1
under = 0
ownpal = 1
scale = .5,.5

[State explod]
type = null;explod
trigger1 = time = 113
anim = 3704
sprpriority = 120
postype = back
pos = 580/2,243
bindtime = 1
under = 0
ownpal = 1
scale = .5,.5

[State explod]
type = explod
trigger1 = time = 114
anim = 3704
sprpriority = 120
postype = back
pos = 640/2,243
bindtime = 1
under = 0
ownpal = 1
scale = .5,.5

[State explod]
type = explod
trigger1 = time = 115
anim = 3704
sprpriority = 120
postype = back
pos = 740/2,243
bindtime = 1
under = 0
ownpal = 1
scale = .5,.5

[State explod]
type = explod
trigger1 = time = 116
anim = 3704
sprpriority = 120
postype = back
pos = 820/2,243
bindtime = 1
under = 0
ownpal = 1
scale = .5,.5

[State explod]
type = explod
trigger1 = time = 106
anim = 3705
sprpriority = -20
postype = back
pos = 2/2,212
bindtime = 1
under = 0
ownpal = 1
scale = 0.5,0.5

[State explod]
type = explod
trigger1 = time = 108
anim = 3705
sprpriority = -20
postype = back
pos = 240/2,212
bindtime = 1
under = 0
ownpal = 1
scale = 0.5,0.5

[State explod]
type = explod
trigger1 = time = 110
anim = 3705
sprpriority = -20
postype = back
pos = 336/2,212
bindtime = 1
under = 0
ownpal = 1
scale = 0.5,0.5

[State explod]
type = explod
trigger1 = time = 112
anim = 3705
sprpriority = -20
postype = back
pos = 488/2,212
bindtime = 1
under = 0
ownpal = 1
scale = 0.5,0.5

[State explod]
type = explod
trigger1 = time = 114
anim = 3705
sprpriority = -20
postype = back
pos = 640/2,212
bindtime = 1
under = 0
ownpal = 1
scale = 0.5,0.5

[State explod]
type = explod
trigger1 = time = 116
anim = 3705
sprpriority = -20
postype = back
pos = 820/2,212
bindtime = 1
under = 0
ownpal = 1
scale = 0.5,0.5

[state 4500,hitdef]
type = hitdef
trigger1 = animelem = 18
attr = S,HP
animtype = hard
hitflag = MAFD
guardflag = M
ground.type = high
air.type = low
getpower = 50
damage = 650,125
pausetime = 0,15
guard.pausetime = 0,15
sparkno = 3
guard.sparkno = 42
sparkxy = -15,-65
hitsound   = 5,3
guardsound = 6,2
p2stateno = ifelse(p2statetype != A,4215,4115)
fall = 1

[state 4500,changestate]
type = changestate
trigger1 = !animtime
value = 3710

;------------------------------------------------------------------------------
[statedef 3710]
type = C
movetype = I
physics = N
anim = 3710
ctrl = 0
vel = 0,0
sprpriority = 0

[state 4501]
type = posset
trigger1 = time = 0
x = enemy,pos x - 40
y = 0

[state changestate]
type = changestate
trigger1 =!animtime
value = 0
Ctrl = 1

;============================================================
[Statedef 24300]
type = A
movetype = I
physics = N
anim = 99999
velset = 0, 0
ctrl = 0

[State 3020, 1]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28001)
triggerall = teamside = 1
trigger1 = !time
anim = F28001
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28001)
triggerall = teamside = 1
trigger1 = !time
anim = F28001
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28002)
triggerall = teamside = 1
trigger1 = !time
anim = F28002
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28002)
triggerall = teamside = 1
trigger1 = !time
anim = F28002
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28003)
triggerall = teamside = 1
trigger1 = !time
anim = F28003
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28003)
triggerall = teamside = 1
trigger1 = !time
anim = F28003
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28004)
triggerall = teamside = 1
trigger1 = !time
anim = F28004
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28004)
triggerall = teamside = 1
trigger1 = !time
anim = F28004
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28005)
triggerall = teamside = 1
trigger1 = !time
anim = F28005
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28005)
triggerall = teamside = 1
trigger1 = !time
anim = F28005
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28006)
triggerall = teamside = 1
trigger1 = !time
anim = F28006
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28006)
triggerall = teamside = 1
trigger1 = !time
anim = F28006
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28007)
triggerall = teamside = 1
trigger1 = !time
anim = F28007
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28007)
triggerall = teamside = 1
trigger1 = !time
anim = F28007
id = 8000
postype = back
pos = -427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28011)
triggerall = teamside = 2
trigger1 = !time
anim = F28011
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28011)
triggerall = teamside = 2
trigger1 = !time
anim = F28011
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28012)
triggerall = teamside = 2
trigger1 = !time
anim = F28012
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28012)
triggerall = teamside = 2
trigger1 = !time
anim = F28012
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28013)
triggerall = teamside = 2
trigger1 = !time
anim = F28013
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28013)
triggerall = teamside = 2
trigger1 = !time
anim = F28013
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28014)
triggerall = teamside = 2
trigger1 = !time
anim = F28014
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28014)
triggerall = teamside = 2
trigger1 = !time
anim = F28014
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28015)
triggerall = teamside = 2
trigger1 = !time
anim = F28015
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28015)
triggerall = teamside = 2
trigger1 = !time
anim = F28015
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28016)
triggerall = teamside = 2
trigger1 = !time
anim = F28016
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28016)
triggerall = teamside = 2
trigger1 = !time
anim = F28016
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28017)
triggerall = teamside = 2
trigger1 = !time
anim = F28017
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 191, Wood 1]
type = Explod
triggerall = !numexplod(28017)
triggerall = teamside = 2
trigger1 = !time
anim = F28017
id = 8000
postype = back
pos = 427, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 4300]
type = RemoveExplod
trigger1 = root,stateno != [3900,3904]
trigger2 = root,StateNo = 3904 && root,animelemtime(3) = 1
trigger1 = root,stateno != 3810
trigger2 = root,StateNo = 3810 && root,animelemtime(22) = 1
trigger1 = root,stateno != [3600,3610]
id = 8000

[State Snd]
type = PlaySnd
trigger1 = root,stateno != [3900,3904]
trigger2 = root,StateNo = 3904 && root,animelemtime(3) = 1
trigger1 = root,stateno != 3810
trigger2 = root,StateNo = 3810 && root,animelemtime(22) = 1
trigger1 = root,stateno != [3600,3610]
value = F23997,3
persistent = 0

[State 4300]
type = Explod
triggerall = !NumExplod(4291)
triggerall = teamside = 1
trigger1 = root,stateno != [3900,3904]
trigger2 = root,StateNo = 3904 && root,animelemtime(3) = 1
trigger1 = root,stateno != 3810
trigger2 = root,StateNo = 3810 && root,animelemtime(22) = 1
trigger1 = root,stateno != [3600,3610]
anim = F24293
id = 4291
postype = back
pos = 0, 0
bindtime = -1
scale = 1,1
sprpriority = -11
ownpal = 1
persistent = 0
supermovetime = 99999
pausemovetime = 99999

[State 4300]
type = Explod
triggerall = !NumExplod(4291)
triggerall = teamside = 2
trigger1 = root,stateno != [3900,3904]
trigger2 = root,StateNo = 3904 && root,animelemtime(3) = 1
trigger1 = root,stateno != 3810
trigger2 = root,StateNo = 3810 && root,animelemtime(22) = 1
trigger1 = root,stateno != [3600,3610]
anim = F24294
id = 4291
postype = back
pos = 0, 0
bindtime = -1
scale = 1,1
sprpriority = -11
ownpal = 1
persistent = 0
supermovetime = 99999
pausemovetime = 99999

[State 4300]
type = DestroySelf
triggerall = Time > 0
trigger1 = root,stateno != [3900,3904]
trigger2 = root,StateNo = 3904 && root,animelemtime(3) = 1
trigger1 = root,stateno != 3810
trigger2 = root,StateNo = 3810 && root,animelemtime(22) = 1
trigger1 = root,stateno != [3600,3610]
;============================================================
[Statedef 24301]
type = A
movetype = I
physics = N
anim = 99999
velset = 0, 0
ctrl = 0

[State 191]
type = AssertSpecial
trigger1 = 1
flag = nobg
flag2 = nofg
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = F99910
id = 8000
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -999
pausemovetime = 999999
supermovetime = 999999

[State 4300]
type = RemoveExplod
trigger1 = root,stateno != [3700,3710]
trigger2 = root,StateNo = 3710 && root,animelemtime(7) = 1
id = 8000

[State Snd]
type = PlaySnd
trigger1 = root,stateno != [3700,3710]
trigger2 = root,StateNo = 3710 && root,animelemtime(7) = 1
value = F23997,3
persistent = 0

[State 4300]
type = Explod
triggerall = !NumExplod(4291)
trigger1 = root,stateno != [3700,3710]
trigger2 = root,StateNo = 3710 && root,animelemtime(7) = 1
anim = F24292
scale = 1.2,1
id = 4291
postype = back
pos = 0, 0
bindtime = -1
sprpriority = -11
ownpal = 1
persistent = 0
supermovetime = 99999
pausemovetime = 99999

[State 4300]
type = DestroySelf
triggerall = Time > 0
trigger1 = root,stateno != [3700,3710]
trigger2 = root,StateNo = 3710 && root,animelemtime(7) = 1
;============================================================
;----------------------------------------------------------------------------------------------------------------------------
[Statedef 11111]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1500

[State 3000, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 20
trigger1 = prevstateno = 1400 || prevstateno = 1200 || prevstateno = 1300
ignorehitpause = 1
time = 1
add = 180,180,180
sinadd = -100,-100,-100, 2
ignorehitpause = 1

[State 210, IL]
type = poweradd
trigger1 = prevstateno = 1400 || prevstateno = 1200 || prevstateno = 1300
trigger1 = time = 0
value = -500

[State 1800, Axis]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 8

[State 1800, Axis]
type = PosAdd
trigger1 = AnimElem = 4
x = 6

[State 1800, Axis]
type = PosAdd
trigger1 = AnimElem = 6
x = 10

[State 1800, Axis]
type = PosAdd
trigger1 = AnimElem = 7
x = 5

[State 1800, Axis]
type = PosAdd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 9, =0
trigger3 = AnimElem = 9, =1
x = 4

[State 1800, Axis]
type = PosAdd
trigger1 = AnimElem = 10
x = 3

[State 1800, StopSND]
type = StopSND
trigger1 = 1
channel = 3

[State 1800, Voice]
type = PlaySnd
trigger1 = animelem = 3, =1
value = 0,12
channel = 0

[State 1800, Wind]
type = PlaySnd
trigger1 = AnimElem = 6, =1
value = 1,25
channel = 1

[State 1800, Grab Attempt]
type = HitDef
trigger1 = AnimElem = 8
trigger2 = AnimElem = 9 && !movecontact
attr = S, ST
hitflag = MA
guardflag = M
damage = 36
priority = 4, Miss
sparkno = 9
sparkxy = 5,-40
guard.sparkno = 42
sprpriority = 1
p2facing = 1
hitsound = 800,0
p1stateno = 1801
p2stateno = 1810
numhits = 0
air.velocity = 7,-4
ground.velocity = 7,-4
fall = 1
fall.xvelocity = -3.5
fall.yvelocity = -3.6
fall.recover = 0
ID = 1800
guard.dist = 50
getpower = 136,0

[State 1800, Grab Miss]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------------------------------------
[Statedef 22222]
Type = A
MoveType = A
Physics = N
anim = 1400
sprpriority = 2
ctrl = 0
juggle = 7

[State 1350, Facing]
type = Turn
triggerall = p2movetype !=H
triggerall = time = 0
trigger1 = Facing = (enemynear, facing)
ignorehitpause = 1
persistent = 0

[State 1350, voice]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 0,15
channel = 0
persistent = 0

[State 1300, Slash FX]
type = PlaySnd
trigger1 = AnimElem = 4,=1
trigger2 = AnimElem = 9,=1
trigger3 = AnimElem = 14,=1
value = 1,20
channel = 1

[State 1350, Freeze]
type = PosFreeze
trigger1 = time = [0,11]

[State 6000, Vel]
type = VarSet
trigger1 = time = 0
fv = 3
value = fvar(1)

[State 6000, Vel]
type = VarSet
trigger1 = time = 0
fv = 4
value = fvar(2)

[State 6000, Vel]
type = VelSet
triggerall = prevstateno = 105
trigger1 = time >= 11
x = -6.5

[State 6000, Vel]
type = VelSet
triggerall = prevstateno = 105
trigger1 = time = 11
y = 2

[State 6000, Vel]
type = VelSet
triggerall = prevstateno != 105
trigger1 != (Facing = enemynear, facing)
trigger1 = time >= 11
x = -fvar(3) - 2.0

[State 6000, Vel]
type = VelSet
triggerall = prevstateno != 105
trigger1 = (Facing = enemynear, facing)
trigger1 = time >= 11
x = fvar(3) + 2.0

[State 6000, Vel]
type = VelSet
triggerall = prevstateno != 105
trigger1 = time = 11
y = fvar(4)

[State 1350,Gravity]
type = VelAdd
trigger1 = time >= 12
y = 0.57

[State 1350,Blood]
type = null;Explod
trigger1 = movehit = 1
anim = 1450
ID = 1450
pos = var(15)+67, var(16)
postype = P1
sprpriority = 2
ontop = 1
bindtime = 1
removetime = -2
pausemovetime = 0
ownpal = 1

[State 1350, Explod]
type = Explod
trigger1 = Time = 12
trigger2 = Time = 18
trigger3 = Time = 24
trigger4 = Time = 30
anim = 1350
ID = 1350
pos = 63, -64
postype = P1
sprpriority = 2
ontop = 1
bindtime = -1
removetime = -2
pausemovetime = 0
ownpal = 1
removeongethit = 1

[State 1300,Explod]
type = Explod
trigger1 = Time = 13
trigger2 = Time = 19
trigger3 = Time = 25
trigger4 = Time = 31
anim = 1360
ID = 1360
pos = 41, -95
postype = P1
sprpriority = 2
ontop = 1
bindtime = -1
removetime = -2
pausemovetime = 0
ownpal = 1
removeongethit = 1

[State 1300,Explod]
type = Explod
trigger1 = Time = 14
trigger2 = Time = 20
trigger3 = Time = 26
trigger4 = Time = 32
anim = 1370
ID = 1370
pos = 40, -31
postype = P1
sprpriority = 2
ontop = 1
bindtime = -1
removetime = -2
pausemovetime = 0
ownpal = 1
removeongethit = 1

[State 1350, VarSet]
type = VarSet
trigger1 = AnimElem = 9
trigger2 = AnimElem = 16
trigger3 = AnimElem = 24
v = 15
value = -10

[State 1350, VarSet]
type = VarSet
trigger1 = AnimElem = 9
trigger2 = AnimElem = 16
trigger3 = AnimElem = 24
v = 16
value = -80

[State 1350, VarSet]
type = VarSet
trigger1 = AnimElem = 11
trigger2 = AnimElem = 19
v = 15
value = -15

[State 1350, VarSet]
type = VarSet
trigger1 = AnimElem = 11
trigger2 = AnimElem = 19
v = 16
value = -60

[State 1350, VarSet]
type = VarSet
trigger1 = AnimElem = 14
trigger2 = AnimElem = 21
v = 15
value = -10

[State 1350, VarSet]
type = VarSet
trigger1 = AnimElem = 14
trigger2 = AnimElem = 21
v = 16
value = -40

[State 1350, hit def]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
trigger3 = AnimElem = 9
trigger4 = AnimElem = 11
trigger5 = AnimElem = 14
trigger6 = AnimElem = 16
trigger7 = AnimElem = 19
trigger8 = AnimElem = 21
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Hard
ground.type = High
air.type = low
priority = 5, hit
damage = 21,7
getpower = 45,45
givepower = 15,15
sparkno = 5
guard.sparkno = 42
sparkxy = var(15), var(16) 
hitsound = S1,24
guardsound = S1,7
pausetime = 2,2
guard.pausetime = 2,2
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -7.0
air.velocity = -7.0,-3.5
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -7
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7

[State 1350,ChangeState]
type = ChangeState
trigger1 = pos y > 0
value = 1351
ctrl = 0

;-----------------------------------------------------------------------
[Statedef 2500]
type    = S
movetype= A
physics = S
juggle  = 15
velset = 0,0
ctrl = 0
anim = 6500
poweradd = ifelse(fvar(30) > 0,0,-1000)
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 2200, 8]
type = SuperPause
trigger1 = animelem = 3
time = 27
movetime = 27
anim = -1
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 3
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = animelem = 3
anim = f7000
scale = .5,.5
ownpal = 1
facing = 1
postype = p1
pos = 5, -70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = animelem = 3
anim = f7010
scale = .5,.5
ownpal = 1
facing = 1
postype = p1
pos = 5, -70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 1]
type = PlaySnd
trigger1 = animelem = 3
value = F9000, 0

[State 4600, Vel2]
type = VelSet
trigger1 = animelemTIME(4) >= 0
x = 7

[State 4600, Vel2]
type = VelADD
trigger1 = animelemTIME(4) >= 0
x = .2

[State 4600, Shadow]
type = AfterImage
trigger1 = !Time
time =30
length = 10
PalBright   =   0,  0,  0
PalContrast = 240,255,255
palpostbright = -80,-80,-80
PalMul = 0.9,0.9,0.9
timegap = 1
flamegap = 1
trans = add

[State 1400, hit def]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Back
ground.type = High
air.type = LOW
air.animtype = UP
fall.animtype = Back
priority = 5, hit
damage = 30,5
getpower = 45,45
givepower = 15,15
sparkno = 5
sparkxy = -3,-75 ; 5,-80
hitsound = 4,1
guard.sparkno = 42
guardsound = 6,1	
pausetime = 4,15
slidetime = 25
hittime = 25
guard.ctrltime = 15
guard.velocity = -10
snap = 80,0
P2FACING = 1
guard.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
ground.velocity = -5
air.velocity = -2,-2
p1stateno = 2510
p2stateno = 2520
KILL = 0

[State 4600, NHB2]
type = NotHitBy
trigger1 = animelemTIME(4) < 0
value = SCA

[State 4600, NHB]
type = NotHitBy
trigger1 = animelemTIME(4) >= 0
value = SCA

[State 4600, Next]
type = ChangeState
trigger1 = time > 55
trigger2 = moveguarded
value = 2505
ctrl = 0

;-------------------------------------------
[Statedef 2505]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 6505

[State 4600, Vel2]
type = VelSet
trigger1 = TIME = 0
x = 2

[State 4601, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------
[Statedef 2510]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 6510

[State 810, 3]
type = TargetBind
Trigger1 = TIME < 6
pos = 80, 0

[State 4600, Vel2]
type = VelSet
trigger1 = ANIMELEMTIME(6) >= 0 && ANIMELEMTIME(27) < 0
x = 3

[State 4600, Vel2]
type = VelSet
trigger1 = ANIMELEMTIME(27) = 0
x = 4

[State 4600, Vel2]
type = VelSet
trigger1 = ANIMELEMTIME(28) >= 0 && ANIMELEMTIME(30) < 0
x = 0

[State 4600, Vel2]
type = VelSet
trigger1 = ANIMELEMTIME(30) >= 0
x = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 10
trigger2 = animelem = 20
anim = 6511
sprpriority = 5
postype = p1
pos = -25, 4
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 16
anim = 6512
sprpriority = 5
postype = p1
pos = -25, 4
bindtime = 1
supermove = 1
under = 0
ownpal = 0

[State 1000, 5]
type = Explod
trigger1 = animelem = 26
anim = 6513
sprpriority = 5
postype = p1
pos = 5, 0
bindtime = 1
supermove = 1
REMOVETIME = 18
under = 0
ownpal = 0

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 10
trigger2 = AnimElem = 15
trigger3 = AnimElem = 20
trigger4 = AnimElem = 27
value = 1,6
ignorehitpause = 1

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 32
value = 0,13

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 34
value = 1,22

[State 1400, hit def]
type = HitDef
trigger1 = AnimElem = 11
trigger2 = AnimElem = 16
trigger3 = AnimElem = 21
attr = S, HA
damage = 30,5
animtype = HARD
hitflag = MAF
guardflag = MA
sparkno = 5
guard.sparkno = 42
sparkxy = -40,-20
hitsound = 4,3
guardsound = 6,1
pausetime = 7,9
ground.hittime = 17
ground.type = LOW
ground.slidetime = 17
ground.velocity = -2
air.velocity = -2,-3
guard.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
P2STATENO = 2530
air.fall = 0
getpower = 0
yaccel = .5

[State 1400, hit def]
type = HitDef
trigger1 = AnimElem = 27
attr = S, HA
damage = 50,5
animtype = HARD
hitflag = MAF
guardflag = MA
sparkno = 5
guard.sparkno = 42
sparkxy = -40,-90
hitsound = 4,2
guardsound = 6,1
pausetime = 12,10
ground.hittime = 17
ground.type = high
ground.slidetime = 17
ground.velocity = -3,-10
air.velocity = -3,-10
guard.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
FALL = 1
air.fall = 1
getpower = 0

[State 1250, 0]
type = Envcolor
trigger1 = AnimElem = 11
persistent = 0
ignorehitpause = 1
value = 255, 255, 255
time = 3
under = 1
supermove = 1

[State 1250, 0]
type = Envcolor
trigger1 = MOVEHIT
trigger1 = AnimElem = 16
persistent = 0
ignorehitpause = 1
value = 255, 255, 255
time = 3
under = 1
supermove = 1

[State 1250, 0]
type = Envcolor
trigger1 = MOVEHIT
trigger1 = AnimElem = 21
persistent = 0
ignorehitpause = 1
value = 255, 255, 255
time = 3
under = 1
supermove = 1

[State 1250, 0]
type = Envcolor
trigger1 = MOVEHIT
trigger1 = AnimElem = 27
persistent = 0
ignorehitpause = 1
value = 255, 255, 255
time = 3
under = 1
supermove = 1

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 33, = 1
projanim = 6514
projhitanim = 6515
projID = 6514
afterimage.time = 60
afterimage.length = 4
afterimage.palbright = 0,0,0
afterimage.palcontrast = 240,240,255
afterimage.palpostbright = -80,-80,-80
afterimage.timegap = 1
afterimage.framegap = 1
afterimage.trans = add
velocity = 8
projpriority = 1
postype = p1
offset = 50,0
attr = S, HP
damage = 100,10
animtype = DIAGUP
hitflag = MAFP
guardflag = MA
sparkno = 5
guard.sparkno = 42
sparkxy = 20,-65
hitsound = S1,16
guardsound = 6,2
pausetime = 0,13
ground.hittime = 15
ground.type = high
ground.slidetime = 15
ground.velocity = -5,-6
air.velocity = -5,-6
fall = 1
yaccel = .5
getpower = 0

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = PROJHIT =1
value = 1,16

[State 4601, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------
[Statedef 2520]
type = S
movetype = H
physics = N
velset = 0,0

[State 865, 2]
type = Velset
trigger1 = ANIMELEM = 2
x = -1.5

[State 865, 2]
type = Velset
trigger1 = ANIMELEM = 4
x = 0

[State 865, 4]
type = ChangeAnim2
trigger1 = Time = 0
value = 6520+var(55)*30000

[State 865, 5]
type = SelfState
trigger1 = Animtime = 0
value = 5100

;-----------------------------------------------------------------------
[Statedef 2530]
type = S
movetype = H
physics = N
velset = 0,0

[State 865, 2]
type = Velset
trigger1 = ANIMELEM = 2
x = -2.5

[State 865, 2]
type = Velset
trigger1 = ANIMELEM = 4
x = 0

[State 865, 4]
type = ChangeAnim2
trigger1 = Time = 0
value = 6530+var(55)*30000

[State 865, 5]
type = SelfState
trigger1 = Animtime = 0
value = 5100

;--------------------------------------------------------------------------------
[Statedef 3800]
type    = S                      
movetype= A                    
physics = N                    
juggle  = 0                                 
ctrl = 0                       
anim = 3800
poweradd = -2000
sprpriority = 2 
velset = 0,0
facep2 = 1

;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a]
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================

[State 0, ReversalDef]
type = ReversalDef
triggerall = numenemy
triggerall = enemynear, movetype = A
trigger1 = (animelemno(0) = [2,22])
reversal.attr = SCA,NA,SA,HA
hitflag = MAF
pausetime = 12,0
sparkno = 42
sparkxy = 10,-10
hitsound =6, 1
persistent = 1
guard.dist = 0 
p1stateno = 3810
p2stateno = 3870
id = 3000

[State 20, 1]
type = VelSet
trigger1 = animelem = 2
x = 2.6171875

[State 20, 1]
type = VelSet
trigger1 = animelem = 23
x = 0

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 23
value = 3800,0

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
[Statedef 3810]
type = S                    
movetype= A                    
physics = N                     
juggle  = 10                             
ctrl = 0                       
anim = 3810
poweradd= 0                         
sprpriority = 2
facep2 = 1
velset = 0,0
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------

[State 200, snd]
type=playsnd
trigger1= animelem=1
value=200,15
channel=0  

[State 2000, 0]
type = NotHitBy
trigger1 = (animelemno(0) = [1, 2])
value = SCA

[State 2010, AssertSpecial]
type = AssertSpecial
trigger1 = time = [6,34]
flag = noBG
flag2 = noFG

[State 13000, EnvColor]
type = EnvColor
trigger1 = time = 6
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0
;--------------------------------------

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;---------------------------------------------------------
[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;---------------------------------------------------------------

;-----------------------------------------------
[State a];SC/DC 取消1技gc
type = VarAdd
trigger1 = prevstateno = [1000,3999]
fvar(29) = -1000
persistent = 0

[State 2200, 8]
type = SuperPause
trigger1 = Time = 6
time = 33
movetime = 33
anim = -1
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = Time = 6
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = Time = 6
anim = f7300
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 5,-50
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = Time = 6
anim = f7310
scale = 1,1
ownpal = 1
facing = 1
postype = p1
pos = 5,-50
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 1]
type = PlaySnd
trigger1 = Time = 6
value = F9000, 2

[State 801, fat]
type = Width
trigger1 = 1
edge = 64,64

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(1) >= 0 && animelemtime(6) < 0
ID = 3000
pos = 60, 0

[State 801, fly p2]
type = TargetState
trigger1 = animelem = 1
value = 3850
ignorehitpause = 3
ID = 3000

[State 801, fly p2]
type = TargetState
trigger1 = animelem = 6
value = 3851
ignorehitpause = 3
ID = 3000

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
ID = 3000
pos = 40, 0

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(7) >= 0 && animelemtime(8) < 0
ID = 3000
pos = 44, -133

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(8) >= 0 && animelemtime(9) < 0
ID = 3000
pos = 47, -110

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(9) >= 0 && animelemtime(10) < 0
ID = 3000
pos = -20, -52

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(10) >= 0 && animelemtime(11) < 0
ID = 3000
pos = -23, -41

[State 200, snd]
type=playsnd
trigger1= animelem=10
value=3800,1
channel=0  

[State 300, Land]
type = PlaySnd
trigger1 = animelem = 11
value = 3800,2
persistent = 0

[State 801, fly p2]
type = TargetState
trigger1 = animelem = 11
value = 3852
ignorehitpause = 1
ID = 3000

[State 801, 10]
type = turn
Trigger1 = animelem = 13

[State 1040, go]
type = VelSet
Trigger1 = animelem = 16
x = 5

[State 1040, go]
type = VelSet
Trigger1 = animelem = 18
x = 0

[State 200, snd]
type=playsnd
trigger1= animelem=15 
value=3800,3
channel=0  

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 16
value = 3800,4
volume = -200

[State 801, Damage]
Type = TargetLifeAdd
trigger1 = animelem = 20
trigger2 = animelemtime(20) = 31
trigger3 = animelemtime(20) = 61
trigger4 = animelemtime(20) = 91
trigger5 = animelemtime(20) = 121
value = -90
kill = 0
ID = 3000

[State 801, Damage]
Type = TargetLifeAdd
trigger1 = animelemtime(20) = 151
value = -90
ID = 3000

[State 801, fly p2]
type = TargetState
trigger1 = animelem = 20
value = 3853
ignorehitpause = 3
ID = 3000

[State 801, fly p2]
type = TargetState
trigger1 = animelem = 21
value = 3854
ignorehitpause = 3
ID = 3000

[State 191, Wood 1]
type = Explod
trigger1=animelemtime(20) = 1
anim = F99910
id = 3700
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state a]
type = removeexplod
trigger1=animelemtime(20) = 151
ID = 3700

[State 220, Explod]
type = Explod
trigger1 = animelem = 20
trigger2 = animelemtime(20) = 31
trigger3 = animelemtime(20) = 61
trigger4 = animelemtime(20) = 91
trigger5 = animelemtime(20) = 121
trigger6 = animelemtime(20) = 151
anim = 1450
pos = 88,0
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 1
random = 30,30

[State 220, Explod]
type = Explod
trigger1 = animelem = 20
trigger2 = animelemtime(20) = 61
trigger3 = animelemtime(20) = 121
anim = F5
pos = 78,0
postype = p1  ;p2,front,back,left,right
facing = -1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 1
random = 10,30

[State 220, Explod]
type = Explod
trigger1 = animelemtime(20) = 31
trigger2 = animelemtime(20) = 91
trigger3 = animelemtime(20) = 151
anim = F5
pos = 78,0
postype = p1  ;p2,front,back,left,right
facing = -1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 1
random = 10,30

[State 220, Explod]
type = Explod
trigger1 = animelemtime(20) = 151
anim = 3830
pos = 102,33
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 1

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 20
trigger2 = animelemtime(20) = 31
trigger3 = animelemtime(20) = 61
trigger4 = animelemtime(20) = 91
trigger5 = animelemtime(20) = 121
value = 3800,5

[State 5100, 10]
type = PlaySnd
trigger1 = animelemtime(20) = 151
value = 3800,6

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1    

;----------------------------------------------------------------------------------
[StateDef 3850]
Type = A
MoveType =  H
VelSet = 0, 0
sprpriority = 4 
Ctrl = 0

[State 245]
type = Nothitby
trigger1 = 1
value = SCA

[State 811]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 811, Anim]
Type = ChangeAnim2
Trigger1 = !Time
Value = 3850+var(55)*30000

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;-------------------------------------------------------------------------------
[StateDef 3851]
Type = A
MoveType =  H
VelSet = 0, 0
sprpriority = 4 
Ctrl = 0

[State 245]
type = Nothitby
trigger1 = 1
value = SCA

[State 811]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 811, Anim]
Type = ChangeAnim2
Trigger1 = !Time
Value = 3851+var(55)*30000

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------------
[StateDef 3852]
Type = A
MoveType =  H
VelSet = 7, 0
sprpriority = 4 
Ctrl = 0

[State 245]
type = Nothitby
trigger1 = 1
value = SCA

[State 811, Anim]
Type = ChangeAnim2
Trigger1 = !Time
triggerall = !SelfAnimExist(5161+var(55)*30000) 
Value = 3852+var(55)*30000

[State 811]
type = posset
trigger1 = !time
y = 0

[State 811]
type = posset
trigger1 = SelfAnimExist(5101+var(55)*30000)
trigger1 = SelfAnimExist(5161+var(55)*30000)
Trigger1 = Time = 9
y = 20

[State 811]
type = posset
trigger1 = SelfAnimExist(5101+var(55)*30000)
trigger1 = SelfAnimExist(5161+var(55)*30000)
trigger1 = time = 17
y = 0

[State 1505, Anim 5050] 
type = ChangeAnim
Trigger1 = !Time
trigger1 = SelfAnimExist(5101+var(55)*30000)
trigger1 = SelfAnimExist(5161+var(55)*30000)
value = 5101+var(55)*30000

[State 700,0]
type = ChangeAnim
triggerall = anim = 5101+var(55)*30000
trigger1 = time < 9
value = anim+var(55)*30000

[State 1505, Anim 5050] 
type = ChangeAnim
triggerall = anim = 5101+var(55)*30000
Trigger1 = Time = 9
trigger1 = SelfAnimExist(5161+var(55)*30000)
trigger1 = SelfAnimExist(5111+var(55)*30000)
value = 5161+var(55)*30000

[State 1505, Anim 5050] 
type = ChangeAnim
triggerall = anim = 5161+var(55)*30000
Trigger1 = Time = 17
trigger1 = SelfAnimExist(5111+var(55)*30000)
value = 5111+var(55)*30000

[State 5110, 11] ;If just died
type = SelfState
triggerall = alive
trigger1 = time = 300
value = 5120

[State 20, 1]
type = VelSet
trigger1 = time = 18
x = 0

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = time = 300
value = 5150

;------------------------------------------------------------------------------
[StateDef 3853]
Type = A
MoveType =  H
VelSet = 0, 0
sprpriority = 4 
Ctrl = 0

[State 245]
type = Nothitby
trigger1 = 1
value = SCA

[State 811]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 811, Anim]
Type = ChangeAnim
Trigger1 = !Time
Value = 10000

;-------------------------------------------------------------------------------
[StateDef 3854]
Type = A
MoveType =  H
VelSet = 0, 0
sprpriority = 4 
Ctrl = 0

[State 245]
type = Nothitby
trigger1 = 1
value = SCA

[State 811]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 1505, Anim 5050] 
type = ChangeAnim
Trigger1 = !Time
trigger1 = SelfAnimExist(5111+var(55)*30000)
value = 5111+var(55)*30000

[State 1505, Anim 5050] 
type = ChangeAnim
Trigger1 = !Time
trigger1 = !SelfAnimExist(5111+var(55)*30000)
value = 5110+var(55)*30000

[State 5110, 11] 
type = SelfState
triggerall = alive
trigger1 = time = 136
value = 5120

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = time = 136
value = 5150

;---------------------------------------------------------------------------
[Statedef 3870]
type = A
movetype = H
physics = N
velset = 0, 0
ctrl = 0

[State 1580]
type = selfstate
trigger1 = IsHelper
value = prevstateno
ignorehitpause = 0

[State 700,0]
type = ChangeAnim
trigger1 = 1
value = anim+var(55)*30000
elem = AnimElemNo(0)

[State 700,2]
type = PosAdd
trigger1 = Time%2=0
x = -1

[State 700,2]
type = PosAdd
trigger1 = Time%2=1
x = 1

[State 970,3]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 820,Screenbound]
type = screenbound
Trigger1 = 1
value = 1
movecamera = 0,0

[State 1420,2]
type = PosSet
trigger1 = Time > 100
y = 0

[State 920,1]
type = SelfState
trigger1 = Time > 100
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 3600]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3600
ctrl     = 0
poweradd = 0
sprpriority = 2
;--------------------------------------SC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [1000,1999]) && time = 0
persistent = 0
anim = f7500
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;--------------------------------------

;--------------------------------------DC
[State 9000, 5]
type = Explod
trigger1 = (prevstateno = [2000,2999]) && time = 0
persistent = 0
anim = f7550
pos = 0,80
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 99999
ownpal = 1
;-----------------------------------------------
;爆气取消=====================================================================
[State a]
type = palfx
triggerall = fvar(30) > 0
trigger1 = time <= 5
trigger2 = prevstateno = [1000,1999]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

[State a];爆气中扣除爆气槽
type = varadd
triggerall = fvar(30) >=120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = -2000

[State a];防止爆气条低于120(不同技能数字有区别)不出现字幕
type = varset
triggerall = fvar(30) > 0
triggerall = fvar(30) <120
trigger1 = time = 0
trigger2 = prevstateno = [1000,1999]
fvar(30) = 1

;============================================================================
;--------------------------------------

[State -2, Helper]
type = Helper
triggerall = !numhelper(40005)
trigger1 = time = 11
helpertype = normal
ID = 40005
stateno = 40005
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;---------------------------------------------------------
;-------------------------------------------------------------
[State 3900]
type = Helper
triggerall = (!numhelper(4300))
trigger1 = Time = 11
helpertype = normal
stateno = 24300
id = 4300
postype = Left
pos = 0, 0
keyctrl = 0
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
;---------------------------------------------------------------
;-----------------------------------------------
[State a];SC/DC 取消1技gc
type = VarAdd
trigger1 = prevstateno = [1000,3999]
fvar(29) = -1000
persistent = 0

[State 2000, KEZ~]
type = SuperPause
trigger1 = animelem = 3
anim = -1
poweradd = -2000
movetime = 32
time = 32
darken = 0

[State 6000,黑色底色]
type = Envcolor
trigger1 = animelem = 3
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 33
under = 1
supermove = 1

[state 4500,必杀闪光1]
type = Explod
trigger1 = animelem = 3
anim = f7300
ID = 7300
ownpal = 1
facing = 1
postype = p1
pos = -30,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = -5
ignorehitpause = 1

[state 4500,必杀闪光2]
type = Explod
trigger1 = animelem = 3
anim = f7310
ID = 7310
ownpal = 1
facing = 1
postype = p1
pos = -30,-70
bindtime = -1
supermove = 1
pausemove = 1
sprpriority = 5
ignorehitpause = 1

[State 3500, 6]
type = PlaySnd
trigger1 = animelem = 3
value = f9000,2

[State 1000, HitBy]
type = HitBy
trigger1 = 1
value = SA,HA,NP,HP,NT,ST,HT

[State 2000,]
type = PlaySnd
trigger1 = time = 0
value = s15555,3

[State 1000, ]
type = PlaySnd
trigger1 = animelem = 6
value = F100,0
channel = 0

[State 3000, u]
type = VelSet
trigger1 = AnimElem = 6,>=0
x = 9

[State 1000, AfterImage]
type = AfterImage
trigger1 = animelem = 6
time = 2
length = 11
timegap = 1
paladd = 60,20,100
PalContrast = 220,200,350
palcolor = 0
framegap = 3

[State 3000, fterimagetime]
type = Afterimagetime
trigger1 = AnimElemtime(6) >= 0
trigger1 = gametime%2 = 0
time = 2

[State 1000, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 1
under = 1
persistent = 0
ignorehitpause = 1

[State 1950]
type = HitDef
trigger1 = Time = 0
attr = S,HA
getpower = 0,0
givepower = 0,0
damage = 0,0
numhits = 0
animtype = hard
hitflag = MAF
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = -1
sparkxy = 0,-45
hitsound = -1
guardsound = 6,2
guard.sparkno = 42
guard.velocity = -12
air.juggle = 0
ground.type = low
ground.slidetime = 30
ground.hittime = 15
ground.velocity = -7,-6
air.velocity = -7,-6
p2facing = 1
fall.recover = 0
fall = 1
yaccel = .65

[State 800, 火花]
type = Explod
trigger1 = Projhit =1
anim = f9
postype = P2
pos = 0, -60
random = 30,30
sprpriority = 5
ownpal = 1
supermovetime=99999
pausemovetime=99999
ignorehitpause=1

[State 1000, p2GCRUSH]
type = targetstate
trigger1 = movehit
persistent = 0
ignorehitpause = 0
value = 3620
ctrl = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = movehit
persistent = 0
ignorehitpause = 0
value = 3610
ctrl = 0

[State 3000, Xe[gX]
type = ChangeState
trigger1 = time = 100
trigger2 = MoveGuarded
value = 3601

;-------------------------------------------------------------------------------
[Statedef 3610]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3610
ctrl     = 0
poweradd = 0
sprpriority = 2

[State 1000, 3]
type = PosSet
trigger1 = time = 0
x = 0

[State 3310]
type = posadd
trigger1 = time = 0
trigger1 = backedgebodydist > 60
x = -20

[State 1000, ]
type = PlaySnd
trigger1 = time = 0
value = F800,0

[State 1000, BGPalFX]
type = BGPalFX
trigger1 = time = [0,140]
time = 2
add = 0,0,0
mul = 0,0,0
color = 0
ignorehitpause = 1

[State 1000, BGPalFX]
type = BGPalFX
trigger1 = time = 140
time = 40
add = 0,0,0
mul = -256,-256,-256
sinadd =  256,256,256,51
invertall = 1
color = 256

[State 1000]
type = Explod
trigger1 = time = 140
anim = F63
facing = facing
ignorehitpause = 1
postype = p1
pos = 40, 0
sprpriority = 7

[State 3121, 1]
type = Helper
trigger1 = time = 140
id = 8882
postype = p1
pos = 40, 0
sprpriority = 10
stateno = 11492
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State 10100, 1]
type = Explod
trigger1 = time = 140
anim = F14421
id = 14421
pos = 40,-5
postype = p1
ownpal = 1
scale = 0.5,0.5
sprpriority = -3
ignorehitpause = 1
Trans = addalpha
Alpha = 200,220

[State 10100, 1]
type = Explod
trigger1 = time = 140
anim = F14424
id = 12424
pos = 40,-5
postype = p1
ownpal = 1
scale = 0.5,0.5
sprpriority = 8+time
ignorehitpause = 1
Trans = addalpha
Alpha = 200,220

[State 1000, Explod]
type = Explod
trigger1 = time = 20
trigger2 = time = 40
trigger3 = time = 60
anim = 3012
pos = 40,5
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9
scale = 1,1.05

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = 20
trigger2 = time = 40
trigger3 = time = 60
trigger4 = time = 144
value = S3000,3

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = 20
trigger2 = time = 40
trigger3 = time = 60
trigger4 = time = 144
value = S3300,2
volume = 170

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = 144
value = F5,4

[State 1000, EnvColor]
type = EnvColor
trigger1 = time = 20
trigger2 = time = 40
trigger3 = time = 60
trigger4 = time = 144
value = 255,255,255
time = 1
under = 1

[State 1000, EnvShake]
type = EnvShake
trigger1 = time = 20
trigger2 = time = 40
trigger3 = time = 60
time = 10
freq = 100
ampl = -4

[State 1000, EnvShake]
type = EnvShake
trigger1 = time = 144
time = 20
freq = 100
ampl = -4

[State 1000, Explod]
type = Explod
trigger1 = time = [90,110]
trigger1 = gametime%2 = 0
anim = f6
pos = 40,-80
postype = p1
facing = 1
vfacing = 1
bindtime = 1
random = 100,100
removetime = -2
sprpriority = 9
ownpal = 1

[State 191, Wood 1]
type = Explod
trigger1 = animelem = 12
anim = F99910
id = 3700
postype = back
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state a]
type = removeexplod
trigger1 = animelem = 14
ID = 3700

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = [90,110]
trigger1 = gametime%3 = 0
value = F4,2

[State 1000, TargetBind]
type = TargetBind
trigger1 = animelem = 1
pos = 34,0

[State 1000, TargetBind]
type = TargetBind
trigger1 = animelem = 2
pos = 25,-10

[State 1000, TargetBind]
type = TargetBind
trigger1 = animelem = 3
pos = 43,-105

[State 1000, TargetBind]
type = TargetBind
trigger1 = animelem = 4
pos = 31,-97

[State 1000, TargetBind]
type = TargetBind
trigger1 = animelem = 5
pos = 31,-97

[State 1000, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = time = 20
trigger2 = time = 40
trigger3 = time = 60
value = -120
kill = 0
absolute = 0

[State 1000, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = time = [90,110]
trigger1 = gametime%3 = 0
value = -35
kill = 0
absolute = 0

[State 1000, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = time = 144
value = -200
kill = 1
absolute = 0

[State 810, qbg`]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NT
damage = 0,100
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 10,12
sparkno = -1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -1.5,-11
air.velocity = -1.5,-11
yaccel = .5
air.type = High
air.hittime = 12
fall = 1
fall.recover = 0
p2stateno = 4215

[State 1000, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 3620]
type    = S
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3620+var(55)*30000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 3601]
type = S
movetype = A
physics = S
anim = 3601
poweradd = 0
velset = 0,0
ctrl = 0

[State 2001, vel]
type = Velset
trigger1 = time = 0
x = 6

[State 2001, vel]
type = Velset
trigger1 = time = 2
x = 4

[State 2001, vel]
type = Velset
trigger1 = time = 4
x = 2

[State 1000, AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State 200, 3]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1