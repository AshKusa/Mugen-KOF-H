; Common State file for M.U.G.E.N beta 2019
;===========================================================================
;计分系统20070602
;===========================================================================
;---------------------------------------------------------------------------
; Stand 站立基本姿势
;---------------------------------------------------------------------------
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State -3, 4]
type = changestate
triggerall = roundstate <=2
triggerall = var(1)=4
trigger1 = 1
value = 95196

[State 170, 2]
type=CtrlSet
trigger1=var(1)=5
value = 1

[State 0, 1]
type = CtrlSet
trigger1 = time =0
value =0

[State 0, 1]
type = CtrlSet
trigger1 = RoundState =3
value =1

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050
;---------------------------------------------------------------------------
; Stand to Crouch
;---------------------------------------------------------------------------
[Statedef 10]
type = C
physics = C
anim = 10

[State 0]
type = VelMul
trigger1 = Time = 0
x = .75

[State 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
;---------------------------------------------------------------------------
[Statedef 11]
type = C
physics = C
anim = 11
sprpriority = 0

[State 0, 1]
type = CtrlSet
triggerall = fvar(20)=1
trigger1 = time =0
value =0

[State 0] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

[State 0]
type = CtrlSet
trigger1 = var(51) = 1 && !Ctrl
trigger1 = time > 20
value = 1
;---------------------------------------------------------------------------
; Crouch to Stand
;---------------------------------------------------------------------------
[Statedef 12]
type = S
physics = S
anim = 12

[State 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; Walk
;---------------------------------------------------------------------------
[Statedef 20]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = CtrlSet
triggerall = fvar(20)=1
trigger1 = time =0
value =0

[State 0]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 0]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 0]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 0]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21
;---------------------------------------------------------------------------
; Jump Start
;---------------------------------------------------------------------------
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40,起跳瞬间灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 3
anim = f50
id = 50
pos = 0,0
scale =.45,.45
ontop = 0
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 40, 跳起的水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = Time = 1
anim = F22
facing = -1
postype = p1
pos = 0,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 40, 水花声效]
type = PlaySnd
trigger1 = StageVar(info.author) = "water"
trigger1 = Time = 1
value = F47,1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
; AirJump Start
;---------------------------------------------------------------------------
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 44

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = 41

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1
;---------------------------------------------------------------------------
; Jump Up
;---------------------------------------------------------------------------
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3
;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
;---------------------------------------------------------------------------
[Statedef 51]
type    = A
physics = A

[State 51, 1]
type = Null
trigger1 = 1
;---------------------------------------------------------------------------
; Jump Land
;---------------------------------------------------------------------------
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47
velset = 0,0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; RUN_FWD
;---------------------------------------------------------------------------
[Statedef 100]
type = S
physics = S
anim = 100
sprpriority = 1

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 0]
type = PlaySnd
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
value = F100,0
loop = 1
channel = 10

[State 191, Spray Anim P1]
type = Explod
trigger1 = time >= 0 && timemod = 10,0
trigger1 = StageVar(info.author) = "water"
ID = 20
anim = F21
postype = p1
pos = -10,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 100, S]
type = PlaySnd
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
value = F100,1
channel = 10
loop =1

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = 0
;--------------------------------------------------------------
; RUN_BACK
;--------------------------------------------------------------
[Statedef 105]
type = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 0]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 191, Spray Anim P1]
type = Explod
trigger1 = time = 0
trigger1 = StageVar(info.author) = "water"
anim = F21
postype = p1
pos = 0,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 100, 3]
type = PlaySnd
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
value = f47,1

[State 100, 3]
type = PlaySnd
trigger1 = time = 0
value = F105, 0

[State 0]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106
;--------------------------------------------------------------
; RUN_BACK2 (land)
;--------------------------------------------------------------
[Statedef 106]
type = S
physics = S
ctrl = 0
anim = 47

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 100, 3]
type = PlaySnd
trigger1 = time = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 106, 3];小灰尘
type = GameMakeAnim
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 2
value = 125
pos = -5,-2
spacing = 1

[State 0];小水花
type = GameMakeAnim
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 1
value = 21
pos = 0, 0
under = 0

[State 106, 4]
type = ChangeState
trigger1 = Time = 7
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; RUN_UP
;---------------------------------------------------------------------------
[Statedef 110]
type = S
physics = N
ctrl = 0

[State 0]
	type = ChangeAnim
	trigger1 = Time = 0
	value = 110

[State 0]
	type = HitBy
	trigger1 = Time = 0
	value = SCA, NT, ST, HT
	time = 30

[State 0]
	type = VelSet
	trigger1 = Time = 0
	x = 0
	z = -7

[State 0]
	type = VelMul
	trigger1 = 1
	z = 0.8

[State 0]
	type = VelSet
	trigger1 = AnimTime = -8
	z = 0

[State 0]
	type = ChangeState
	trigger1 = AnimTime = 0
	value = 0
	ctrl = 1
;---------------------------------------------------------------------------
; RUN_DOWN
;---------------------------------------------------------------------------
[Statedef 115]
type = S
physics = N
ctrl = 0

[State 0]
	type = ChangeAnim
	trigger1 = Time = 0
	value = 110

[State 0]
	type = HitBy
	trigger1 = Time = 0
	value = SCA, NT, ST, HT
	time = 30

[State 0]
	type = VelSet
	trigger1 = Time = 0
	x = 0
	z = 7

[State 0]
	type = VelMul
	trigger1 = 1
	z = 0.8

[State 0]
	type = VelSet
	trigger1 = AnimTime = -8
	z = 0

[State 0]
	type = ChangeState
	trigger1 = AnimTime = 0
	value = 0
	ctrl = 1
;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave State type unchanged
physics = U ;Leave physics unchanged

[State 0]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (Statetype = C) + (Statetype = A) * 2

[State 0]
type = StateTypeSet
trigger1 = Time = 0 && Statetype = S
physics = S

[State 0]
type = StateTypeSet
trigger1 = Time = 0 && Statetype = C
physics = C

[State 0]
type = StateTypeSet
trigger1 = Time = 0 && Statetype = A
physics = A

[State 0]
type = StateTypeSet
trigger1 = Statetype = S && command = "holddown"
Statetype = C
physics = C

[State 0]
type = StateTypeSet
trigger1 = Statetype = C && command != "holddown"
Statetype = S
physics = S

[State 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (Statetype = C) + (Statetype = A)*2

[State 0]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 0]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 0]
type = ChangeState
trigger1 = command = "holddown"
value = 131

[State 0]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 0]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 0]
type = ChangeState
trigger1 = command != "holddown"
value = 130

[State 0]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 0]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 0]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 0]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 0]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 0]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 0]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 0]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 0]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave State type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 0]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (Statetype = C) + (Statetype = A) * 2

[State 0]
type = StateTypeSet
trigger1 = Time = 0 && Statetype = S
physics = S

[State 0]
type = StateTypeSet
trigger1 = Time = 0 && Statetype = C
physics = C

[State 0]
type = StateTypeSet
trigger1 = Time = 0 && Statetype = A
physics = A

[State 0]
type = StateTypeSet
trigger1 = Statetype = S && command = "holddown"
Statetype = C
physics = C

[State 0]
type = StateTypeSet
trigger1 = Statetype = C && command != "holddown"
Statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (Statetype = C)*11 + (Statetype = A)*51

;---------------------------------------------------------------------------
; STAND GUARD HIT (shaking/get hit)
[Statedef 150]
type = S
movetype = H
physics = N
velset = 0,0

[State 0]
	type = ChangeAnim
	trigger1 = 1
	value = 150

[State 0]
	type = ChangeState
	trigger1 = HitShakeOver
	value = 151 + 2 * (command = "holddown")

[State 0]
	type = StateTypeSet
	trigger1 = Statetype = S && command = "holddown"
	Statetype = C
	physics = C

[State 0]
	type = StateTypeSet
	trigger1 = Statetype = C && command != "holddown"
	Statetype = S
	physics = S

[State 0]
	type = ForceFeedback
	trigger1 = time = 0
	waveform = square
	time = 3


;options
;-------------------------------------
;防御破坏 (GUARD CRUSH)
;-------------------------------------
[State 0]
type = PalFx
triggerall = GameTime%10 = 1
trigger1 = NumHelper(90900)
trigger1 = Helper(90900),var(36) >= 40
trigger2 = NumHelper(90901)
trigger2 = Helper(90901),var(36) >= 40
trigger3 = NumHelper(90902)
trigger3 = Helper(90902),var(36) >= 40
time = 2
add = 200, 0, 0

[State 0]
type = ChangeState
triggerall = Alive
trigger1 = NumHelper(90900)
trigger1 = Helper(90900), var(36) >= 50
trigger2 = NumHelper(90901)
trigger2 = Helper(90901), var(36) >= 50
trigger3 = NumHelper(90902)
trigger3 = Helper(90902), var(36) >= 50
IgnoreHitPause = 1
value = 190010
;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type = S
movetype = H
physics = S
anim = 150

[State 0]
	type = HitVelSet
	trigger1 = Time = 0
	x = 1

[State 0]
	type = VelSet
	trigger1 = Time = GetHitVar(slidetime)
	trigger2 = HitOver
	x = 0

[State 0]
	type = VelSet
	trigger1 = NumExplod(1196150)
	x = 0

[State 0]
	type = CtrlSet
	trigger1 = Time >= GetHitVar(CtrlTime) * Ifelse(NumExplod(1196150), 0.50, 1)
	value = 1

[State 0]
	type = StateTypeSet
	trigger1 = Statetype = S && command = "holddown"
	Statetype = C
	physics = C

[State 0]
	type = StateTypeSet
	trigger1 = Statetype = C && command != "holddown"
	Statetype = S
	physics = S

[State 0]
	type = ChangeState
	trigger1 = HitOver
	value = 130
	ctrl = 1


;---------------------------------------------------------------------------
; C GUARD HIT (shaking)
[Statedef 152]
type = C
movetype = H
physics = N
velset = 0,0

[State 0]
	type = ChangeAnim
	trigger1 = 1
	value = 151

[State 0]
	type = ChangeState
	trigger1 = HitShakeOver
	value = 151 + 2*(command = "holddown")

[State 0]
	type = StateTypeSet
	trigger1 = Statetype = S && command = "holddown"
	Statetype = C
	physics = C

[State 0]
	type = StateTypeSet
	trigger1 = Statetype = C && command != "holddown"
	Statetype = S
	physics = S

[State 0]
	type = ForceFeedback
	trigger1 = time = 0
	waveform = square
	time = 4

;options
;-------------------------------------
;防御破坏 (GUARD CRUSH)
;-------------------------------------
[State 0]
type = PalFx
triggerall = GameTime%10 = 1
trigger1 = NumHelper(90900)
trigger1 = Helper(90900),var(36) >= 40
trigger2 = NumHelper(90901)
trigger2 = Helper(90901),var(36) >= 40
trigger3 = NumHelper(90902)
trigger3 = Helper(90902),var(36) >= 40
time = 2
add = 200, 0, 0

[State 0]
type = ChangeState
triggerall = Alive
trigger1 = NumHelper(90900)
trigger1 = Helper(90900), var(36) >= 50
trigger2 = NumHelper(90901)
trigger2 = Helper(90901), var(36) >= 50
trigger3 = NumHelper(90902)
trigger3 = Helper(90902), var(36) >= 50
IgnoreHitPause = 1
value = 190010

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type = C
movetype = H
physics = C
anim = 151

[State 0]
	type = HitVelSet
	trigger1 = Time = 0
	x = 1

[State 0]
	type = VelSet
	trigger1 = Time = GetHitVar(slidetime)
	trigger2 = HitOver
	x = 0

[State 0]
	type = CtrlSet
	trigger1 = Time >= GetHitVar(CtrlTime)
	value = 1

[State 0]
	type = StateTypeSet
	trigger1 = Statetype = S && command = "holddown"
	Statetype = C
	physics = C

[State 0]
	type = StateTypeSet
	trigger1 = Statetype = C && command != "holddown"
	Statetype = S
	physics = S

[State 0]
	type = ChangeState
	trigger1 = HitOver
	value = 131
	ctrl = 1
;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type = A
movetype = H
physics = N
velset = 0,0

[State 0]
	type = ChangeAnim
	trigger1 = 1
	value = 152

[State 0]
	type = ChangeState
	trigger1 = HitShakeOver
	value = 155 ;AGUARDHIT2

[State 0]
	type = ForceFeedback
	trigger1 = time = 0
	waveform = square
	time = 4
;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type = A
movetype = H
physics = N
anim = 152

[State 0]
	type = HitVelSet
	trigger1 = Time = 0
	x = 1
	y = 1

[State 0]
	type = VelAdd
	trigger1 = !NumExplod(1196150)
	y = Const(movement.yaccel)

[State 0]
	type = NotHitBy
	trigger1 = NumExplod(1196150)
	value = SCA

[State 0]
	type = velset
	trigger1 = NumExplod(1196150)
	trigger1 = Time >= GetHitVar(CtrlTime) * 0.5
	x = -2
	y = -4

[State 0]
	type = PosFreeze
	trigger1 = NumExplod(1196150)
	trigger1 = Time <= GetHitVar(CtrlTime) * 0.5

[State 0]
	type = ChangeState
	trigger1 = NumExplod(1196150)
	trigger1 = Time >= GetHitVar(CtrlTime) * 0.5
	value = 140
	IgnoreHitPause = 1

[State 0]
	type = CtrlSet
	trigger1 = Time >= GetHitVar(CtrlTime)
	value = 1

[State 0]
	type = VarSet
	trigger1 = 1
	sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 0]
	type = VelSet
	trigger1 = sysvar(0)
	y = 0

[State 0]
	type = PosSet
	trigger1 = sysvar(0)
	y = 0

[State 0]
	type = ChangeState
	trigger1 = sysvar(0)
	trigger1 = command = "holdback"
	trigger1 = inguarddist
	value = 130

[State 0]
	type = ChangeState
	trigger1 = sysvar(0)
	value = 52
;---------------------------------------------------------------------------
; LOSE (Time over)
;---------------------------------------------------------------------------
[Statedef 170]
type = S
ctrl = 0
anim = Ifelse(SelfAnimExist(170), 170, 175)
velset = 0,0

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
; DRAWGAME (Time over)
;---------------------------------------------------------------------------
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 0]
type = ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 0]
type = ChangeAnim
trigger1 = Time = 0
value = 175

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; PREINTRO
;---------------------------------------------------------------------------
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191
;---------------------------------------------------------------------------
; INTRO (override this State to give character an intro)
;---------------------------------------------------------------------------
[Statedef 191]
type = S
ctrl = 0

[State 191, 1]
type = ChangeState
trigger1 = Time = 0
value = 0
;---------------------------------------------------------------------------
; HITG_SHAKE
;---------------------------------------------------------------------------

[Statedef 5000]
type = S
movetype = H
physics = N
velset = 0, 0

[State 0] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000+var(55)*30000,5010+var(55)*30000) + GetHitVar(animtype)

[State 0] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+var(55)*30000

[State 0] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist((5047+var(55)*30000) + GetHitVar(animtype)))
value = (5047+var(55)*30000) + GetHitVar(animtype);5051 - 4 

[State 0] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 0] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
Statetype = a

[State 0]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;HITG_SLIDE

[State 0]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000+var(55)*30000
trigger2 = anim = 5010+var(55)*30000
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001+var(55)*30000
trigger2 = anim = 5011+var(55)*30000
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012+var(55)*30000
trigger2 = anim = 5002+var(55)*30000
trigger3 = anim = 5030+var(55)*30000
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;----------------
; U
[State 0]
Type = EnvShake
trigger1 = time = 0
time = 3
freq = 90
ampl = Ifelse((Enemy,HitDefAttr=SCA,HA,HP,HT), 3, Ifelse((Enemy,HitDefAttr=SCA,NA,NP,NT), 0, 2))
phase = 4
;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = (5005+var(55)*30000) + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

;[State 0]
;	type = DefenceMulSet
;	trigger1 = HitOver
;	value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type = C
movetype = H
physics = N
velset = 0,0

[State 0] ;Anim for HIT_LIGHT to HIT_HARD
	type = ChangeAnim
	trigger1 = Time = 0
	trigger1 = GetHitVar(animtype) != [3,5]
	value = (5020+var(55)*30000) + GetHitVar(animtype)

[State 0] ;Anim for HIT_BACK
	type = ChangeAnim
	trigger1 = Time = 0
	trigger1 = GetHitVar(animtype) = [3,5]
	value = 5030+var(55)*30000

[State 0] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
	type = ChangeAnim
	trigger1 = Time = 0
	trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist((5047+var(55)*30000) + GetHitVar(animtype)))
	value = (5047+var(55)*30000) + GetHitVar(animtype);5051 - 4 + type

[State 0] ;Freeze anim
	type = ChangeAnim
	trigger1 = Time > 0
	value = anim

[State 0] ;State type gets set to aerial if getting hit up
	type = StateTypeSet
	triggerall = Time = 0
	trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
	trigger2 = Pos Y != 0
	Statetype = a

[State 0]
	type = ChangeState
	trigger1 = HitShakeOver
	trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
	value = 5011 ;HITC_SLIDE

[State 0]
	type = ChangeState
	trigger1 = HitShakeOver
	value = 5030

[State 5010, FFB Light]
	type = ForceFeedback
	trigger1 = anim = 5020+var(55)*30000
	persistent = 0
	time = 6
	waveform = square

[State 5010, FFB Medium]
	type = ForceFeedback
	trigger1 = anim = 5021+var(55)*30000
	persistent = 0
	time = 8
	waveform = sinesquare
	ampl = 110,-1,-.3

[State 5010, FFB Hard]
	type = ForceFeedback
	trigger1 = anim = 5022+var(55)*30000
	persistent = 0
	time = 15
	waveform = sinesquare
	ampl = 140

;----------------
;----------------
; U
[State 0]
	Type = EnvShake
	trigger1 = time = 0
	time = 3
	freq = 90 ;; << shake_speed (0-180)
	ampl = Ifelse((Enemy,HitDefAttr=SCA,HA,HP,HT), 3, Ifelse((Enemy,HitDefAttr=SCA,NA,NP,NT), 0, 2))
	phase = 4 ;; << phase_offset

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = (5025+var(55)*30000) + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

;[State 0]
;	type = DefenceMulSet
;	trigger1 = HitOver
;	value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type = A
movetype = H
physics = N
velset = 0,0

[State 0] ;Anim for HIT_LIGHT to HIT_HARD
	type = ChangeAnim
	trigger1 = Time = 0
	trigger1 = GetHitVar(animtype) != [3,5]
	value = ifelse((GetHitVar(airtype) = 1),5000+var(55)*30000,5010+var(55)*30000) + GetHitVar(animtype)

[State 0] ;Anim for HIT_BACK
	type = ChangeAnim
	trigger1 = Time = 0
	trigger1 = GetHitVar(animtype) = [3,5]
	value = 5030+var(55)*30000

[State 0] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
	type = ChangeAnim
	trigger1 = Time = 0
	trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist((5047+var(55)*30000) + GetHitVar(animtype)))
	value = (5047+var(55)*30000) + GetHitVar(animtype);5051 - 4 + type

[State 0]
	type = ChangeAnim
	trigger1 = Time > 0
	value = anim

[State 0]
	type = ChangeState
	trigger1 = HitShakeOver
	value = 5030

[State 5020, FFB Light]
	type = ForceFeedback
	trigger1 = anim = 5000+var(55)*30000
	trigger2 = anim = 5010+var(55)*30000
	persistent = 0
	time = 6
	waveform = square

[State 5020, FFB Medium]
	type = ForceFeedback
	trigger1 = anim = 5001+var(55)*30000
	trigger2 = anim = 5011+var(55)*30000
	persistent = 0
	time = 8
	waveform = sinesquare
	ampl = 110,-1,-.3

[State 5020, FFB Hard]
	type = ForceFeedback
	trigger1 = anim = 5012+var(55)*30000
	trigger2 = anim = 5002+var(55)*30000
	trigger3 = anim = 5030+var(55)*30000
	trigger4 = anim = [5051+var(55)*30000,5059+var(55)*30000]
	persistent = 0
	time = 15
	waveform = sinesquare
	ampl = 140

;----------------
[State 0]
	Type = EnvShake
	trigger1 = time = 0
	time = 3
	freq = 90 ;; << shake_speed (0-180)
	ampl = Ifelse((Enemy,HitDefAttr=SCA,HA,HP,HT), 3, Ifelse((Enemy,HitDefAttr=SCA,NA,NP,NT), 0, 2))
	phase = 4 ;; << phase_offset

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State -2, 1];地面水花移除
type = removeexplod
trigger1 = Time = 0
ID = 20

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;----------------
; U
[State 0]
	Type = EnvShake
	trigger1 = time = 0
	time = 3
	freq = 90 ;; << shake_speed (0-180)
	ampl = Ifelse((Enemy,HitDefAttr=SCA,HA,HP,HT), 3, Ifelse((Enemy,HitDefAttr=SCA,NA,NP,NT), 0, 2))
	phase = 4 ;; << phase_offset

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035+var(55)*30000)
trigger1 = Anim != [5051+var(55)*30000,5059+var(55)*30000] ;Not if in hit up anim
trigger1 = Anim != 5090+var(55)*30000 ;Not if hit off ground anim
value = 5035+var(55)*30000

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035+var(55)*30000 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035+var(55)*30000 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040, 0];--------20101214增补的无敌代码，避免无谓的浮空追击
type = NotHitBy
trigger1 = 1
value = SCA

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040+var(55)*30000
trigger2 = Time = 0
trigger2 = Anim != 5035+var(55)*30000
value = 5040+var(55)*30000

[State 5040, 3]
type = CtrlSet
trigger1 = 1;HitOver
value = 0;1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = !NumExplod(200000)
trigger1 = time >= 10
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = !NumExplod(200000)
trigger1 = time >= 10
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = !NumExplod(200000)
trigger1 = time >= 10
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
anim = F4017
postype = p1
pos = -15,3
sprpriority = 3
supermove = 2
Bindtime = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035+var(55)*30000
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035+var(55)*30000
trigger2 = (Anim != [5051+var(55)*30000, 5059+var(55)*30000]) && (Anim != [5061+var(55)*30000, 5069+var(55)*30000])
trigger2 = Anim != 5090+var(55)*30000 ;Not if hit off ground anim
value = 5050+var(55)*30000

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050+var(55)*30000,5059+var(55)*30000]
trigger1 = Vel Y >= ifelse(anim = 5050+var(55)*30000, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = (anim+var(55)*30000)+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5070, 1]
type = ChangeAnim 
trigger1 = 1
value = 5070+var(55)*30000

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081+var(55)*30000,5089+var(55)*30000]) || (anim = [5111+var(55)*30000,5119+var(55)*30000])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090+var(55)*30000
trigger1 = !SelfAnimExist(5090+var(55)*30000)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)+Var(55)*30000

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type = L
movetype = H
physics = N

[State 0]
	type = VelSet
	trigger1 = Time = 0
	trigger1 = GetHitVar(fall.yvel) = 0
	trigger1 = vel x > 1
	x = 1

[State 0]
	type = FallEnvShake
	trigger1 = Time = 0

[State 0]
	type = VarSet
	trigger1 = Time = 0
	sysvar(1) = floor(vel y)

[State 0]
	type = ChangeAnim
	triggerall = time = 0
	trigger1 = (anim != [5051+var(55)*30000,5059+var(55)*30000]) && (anim != [5061+var(55)*30000,5069+var(55)*30000])
	trigger2 = !SelfAnimExist((5100+var(55)*30000) + (anim % 10))
	value = 5100+var(55)*30000

[State 0]
	type = ChangeAnim
	trigger1 = time = 0
	trigger1 = (anim = [5051+var(55)*30000,5059+var(55)*30000]) || (anim = [5061+var(55)*30000,5069+var(55)*30000])
	trigger1 = SelfAnimExist((5100+var(55)*30000) + (anim % 10))
	value = (5100+var(55)*30000) + (anim % 10)

[State 0]
	type = PosSet
	trigger1 = Time = 0
	y = 0

[State 0]
	type = VelSet
	trigger1 = Time = 0
	y = 0

[State 0]
	type = VelMul
	trigger1 = Time = 0
	x = 0.75

[State 0]
	type = ChangeState
	trigger1 = Time = 0
	trigger1 = GetHitVar(fall.yvel) = 0
	value = 5110 ;HIT_LIEDOWN

[State 0]
	type = Helper;GameMakeAnim
triggerall = StageVar(info.author) != "water"
        triggerall = (sysvar(1) > 14)
	trigger1 = Time = 1
	stateno = 18007
	pos = 0, 0

[State 0]
	type = GameMakeAnim
trigger1 = StageVar(info.author) != "water"
	trigger1 = Time = 1
	value = 60 + (sysvar(1) > 5)
	pos = 0, 0
	under = sysvar(1) <= 14

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
	trigger1 = Time = 0
        triggerall = (sysvar(1) > 14)
anim = f25
id = 2100
sprpriority = -2
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
	trigger1 = Time = 0
        triggerall = (sysvar(1) > 14)
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 0];掉地溅起的水花
	type = GameMakeAnim
trigger1 = StageVar(info.author) = "water"
	trigger1 = Time = 1
	value = 22 + (sysvar(1) > 5) ;+ (sysvar(1) > 14)
	pos = 0, 0
	under = 0;sysvar(1) <= 14

[State 0]
	type = HitFallDamage
	trigger1 = Time = 3

[State 0];掉地溅起的水花声效
	type = PlaySnd
trigger1 = StageVar(info.author) = "water"
triggerall = (sysvar(1) > 5)+ (sysvar(1) < 14)
	trigger1 = Time = 1
	value = F5000,10

[State 0];掉地溅起的水花声效
	type = PlaySnd
trigger1 = StageVar(info.author) = "water"
triggerall = (sysvar(1) > 14)
	trigger1 = Time = 1
	value = F5000,11

[State 0]
	type = PlaySnd
	trigger1 = Time = 1
trigger1 = StageVar(info.author) != "water"
	value = F5000, (sysvar(1) > 5) 

[State 183, 3]
type = EnvShake
trigger1 = time = 1
persistent = 0
ignorehitpause = 1
freq = 180
ampl = 4
phase = 160
time = 15

[State 0]
	type = PosFreeze
	trigger1 = 1

[State 0]
	type = ChangeState
	trigger1 = AnimTime = 0
	value = 5101

[State 0]
	type = ForceFeedback
	trigger1 = Time = 0
	waveform = sinesquare
	ampl = 128,-3,-.2,.005
	time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101+var(55)*30000,5109+var(55)*30000]
trigger2 = !SelfAnimExist((5160+var(55)*30000) + (anim % 10))
value = 5160+var(55)*30000

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101+var(55)*30000,5109+var(55)*30000]
trigger1 = SelfAnimExist((5160+var(55)*30000) + (anim % 10))
value = (5160+var(55)*30000) + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
	type = FallEnvShake
	trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from State 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist((5110+var(55)*30000) + (anim % 10))
trigger1 = anim = [5081+var(55)*30000,5089+var(55)*30000]
value = (5110+var(55)*30000) + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110+var(55)*30000,5119+var(55)*30000] ;Not already changed anim
trigger1 = anim != [5161+var(55)*30000,5169+var(55)*30000]
trigger2 = !SelfAnimExist((5170+var(55)*30000) + (anim % 10))
value = 5170+var(55)*30000

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110+var(55)*30000,5119+var(55)*30000] ;Not already changed anim
trigger1 = anim = [5161+var(55)*30000,5169+var(55)*30000]
trigger1 = SelfAnimExist((5170+var(55)*30000) + (anim % 10))
value = (5170+var(55)*30000) + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 0];掉地溅起的水花声效
	type = PlaySnd
trigger1 = StageVar(info.author) = "water"
triggerall = (sysvar(1) > 5)+ (sysvar(1) < 14)
	trigger1 = Time = 0
	trigger1 = !SysVar(0)
	value = F5000,10

[State 0];掉地溅起的水花声效
	type = PlaySnd
trigger1 = StageVar(info.author) = "water"
triggerall = (sysvar(1) > 14)
	trigger1 = Time = 1
	value = F5000,11

[State 5110, 6]
	type = PlaySnd
trigger1 = StageVar(info.author) != "water"
	trigger1 = Time = 0
	trigger1 = !SysVar(0)
;win.;	value = F7, (sysvar(1) > 5)
	value = F5000, (sysvar(1) > 5)

[State 0]
	type = GameMakeAnim
trigger1 = StageVar(info.author) != "water"
	trigger1 = Time = 1
	value = 60 + (sysvar(1) > 5)
	pos = 0, 0
	under = sysvar(1) <= 14

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 1
anim = F4017
postype = p1
pos = -40,3
sprpriority = 3
supermove = 2
Bindtime = 1

[State 5110, addtion]
	type = EnvShake
	trigger1 = Time = 0
	time = 5
	ampl = 2

[State 5110, 7]
	type = Helper;GameMakeAnim
triggerall = StageVar(info.author) != "water"
	trigger1 = Time = 0
        triggerall = (sysvar(1) > 14)
	stateno = 18007
	pos = 0, 0

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
	trigger1 = Time = 0
        triggerall = (sysvar(1) > 14)
anim = f25
id = 2100
sprpriority = -2
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
	trigger1 = Time = 0
        triggerall = (sysvar(1) > 14)
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 0];掉地溅起的水花
	type = GameMakeAnim
trigger1 = StageVar(info.author) = "water"
	trigger1 = Time = 0
	trigger1 = !SysVar(0)
	value = 22 + (sysvar(1) > 5) ;+ (sysvar(1) > 14)
	pos = 0, 0
	under = 0;sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171+var(55)*30000,5179+var(55)*30000]
triggerall = SelfAnimExist((5110+var(55)*30000) + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = (5110+var(55)*30000) + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111+var(55)*30000,5119+var(55)*30000]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110+var(55)*30000

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110+var(55)*30000,5119+var(55)*30000]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 5110, 死者不绑定在镜头中]
type =ScreenBound
trigger1 = roundstate>=3
value=0

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111+var(55)*30000,5119+var(55)*30000]
trigger2 = !SelfAnimExist((5120+var(55)*30000) + (anim % 10))
value = 5120+var(55)*30000

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111+var(55)*30000,5119+var(55)*30000]
trigger1 = SelfAnimExist((5120+var(55)*30000) + (anim % 10))
value = (5120+var(55)*30000) + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type = L
movetype = H
physics = N
sprpriority = -3

[State a]
type = StateTypeSet
trigger1 = enemy,Stateno != 99972
movetype = H

[State 0] ;Normal anim
	type = ChangeAnim
	triggerall = Time = 0
	triggerall = SelfAnimExist(5140+var(55)*30000)
	trigger1 = (anim != [5111+var(55)*30000,5119+var(55)*30000]) && (anim != [5171+var(55)*30000,5179+var(55)*30000])
	trigger2 = !SelfAnimExist((5140+var(55)*30000) + (anim % 10))
	value = 5140+var(55)*30000

[State 0] ;Hit up type anim
	type = ChangeAnim
	trigger1 = Time = 0
	trigger1 = (anim = [5111+var(55)*30000,5119+var(55)*30000]) || (anim = [5171+var(55)*30000,5179+var(55)*30000])
	trigger1 = SelfAnimExist((5140+var(55)*30000) + (anim % 10))
	value = (5140+var(55)*30000) + (anim % 10)

[State 0] ;Match over anim
	type = ChangeAnim
	persistent = 0
	;trigger1 = Time = 0
	trigger1 = MatchOver = 1
	trigger1 = Anim = [5140+var(55)*30000,5149+var(55)*30000]
	trigger1 = SelfAnimExist(anim+10)
	value = anim+10+Var(55)*30000

[State 0] ;Switch to 5110 if liedead anim does not exist
	type = ChangeAnim
	trigger1 = Time = 0
	trigger1 = Anim != [5140+var(55)*30000,5159+var(55)*30000]
	trigger1 = Anim != [5110+var(55)*30000,5119+var(55)*30000]
	value = 5110+var(55)*30000

[State 0] ;Friction
	type = VelMul
	trigger1 = 1
	x = 0.85

[State 0] ;Friction
	type = VelSet
	trigger1 = Vel x < .05
	persistent = 0
	x = 0

[State 0]
	type = NotHitBy
	trigger1 = 1
	value = SCA
	time = 1

[State 5110, 死者不绑定在镜头中]
type =ScreenBound
trigger1 = roundstate>=3
value=0

[State 5110, 4]
type = ChangeState
trigger1 = teammode = simul && RoundState =2
value = 5950
ignorehitpause = 1

;---------------------------------------------------------------------------
[Statedef 5151]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 5]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140+var(55)*30000,5159+var(55)*30000]
trigger1 = Anim != [5110+var(55)*30000,5119+var(55)*30000]
value = 5110+var(55)*30000

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5110, 死者不绑定在镜头中]
type =ScreenBound
trigger1 = roundstate>=3
value=0

[State 1250n state]
type =changestate
triggerall = !alive
trigger1 = time = 3
value=5150

;-----------------------------------------------------------------------
[Statedef 5950]
type    = L
movetype= H
physics = N
sprpriority = -3
VelSet = 0,0

[state a]
type = Trans
trigger1 = time >2
trans = addalpha
alpha = 306-(time*10), (time*10)

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 170, 2]
type=AssertSpecial
trigger1=time >=15
flag=invisible

[State 5150, 8]
type = Turn
trigger1 = time >= 15 && P2Dist x<0;40

[State 5150, 8]
type = DestroySelf
trigger1 = time = 1

[State 5150, 8]
type =changestate
trigger1 = time = 20
value = 5951

;---------------------------------------------------------------------------
[Statedef 5951]
type    = L
movetype= H
physics = N
sprpriority = 0
ctrl = 0
anim = 99999

[State -3, 000]
type = CtrlSet
trigger1 = RoundState =3
value = 0

[State 9990, 4.1]
type = Lifeset
trigger1 = RoundState = 3
value = 0

[State 6000, 4]
type = PlayerPush
trigger1 = 1
ignorehitpause = 1
value = 0

[State 170, 1]
type = width
trigger1 = 1
ignorehitpause = 1
edge = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State 10000, offSet]
type = velSet
trigger1 = roundstate = 2
ignorehitpause = 1
x = partner,vel x
y = 0 

[State 10000, offSet]
type = posSet
trigger1 = roundstate = 2
ignorehitpause = 1
x = partner,pos x 
y = 0 

[State 10000, offSet]
type = posSet
trigger1 = roundstate != 2
x = -1000
y = 0 

[State 10000, offSet]
type = changeanim
trigger1 = roundstate >= 3
value = 5110

[State 9990, 4.2]
type = AssertSpecial
trigger1 = roundstate >= 3
flag = invisible

[State 9990, 2]
type = turn
trigger1 = partner, facing != facing

[State 9990, 3]
type = screenbound
trigger1 = 1
value = 0

[State -3, 000]
type = ChangeState
trigger1 = Win ||DrawGame
value = 5150

[State -3, 000]
type = changestate
trigger1 = enemy,Win;roundstate > 2
value = 5150

[State -3, 000]
type = StateTypeSet
trigger1 = partner,movetype =A
movetype = A

[State -3, 000]
type = StateTypeSet
trigger1 = partner,movetype =H
movetype = H

[State -3, 000]
type = StateTypeSet
trigger1 = partner,movetype =I
movetype = I

[State -3, 000]
type = StateTypeSet
trigger1 = partner,stateType =A
stateType = A

[State -3, 000]
type = StateTypeSet
trigger1 = partner,stateType =C
stateType = C

[State -3, 000]
type = StateTypeSet
trigger1 = partner,stateType =S
stateType = S

[State -3, 000]
type = StateTypeSet
trigger1 = partner,stateType =L
stateType = L

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035+var(55)*30000
trigger1 = AnimTime = 0
value = 5050+var(55)*30000

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = A
movetype= H
physics = A
anim = 5200+var(55)*30000

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -.15
y = -3.5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 6]
type = GameMakeAnim
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

[State 0];小水花
type = GameMakeAnim
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 1
value = 22
pos = 0, 0
under = 0

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210+var(55)*30000
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 5250]
type    = S
movetype= H
physics = S

[State 1203, 5]
type = nothitby
trigger1 = 1
value = SCA

[State 153, 4]
type = statetypeset
trigger1 = animtime = 0
value = L

[State 870, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 870, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
ignorehitpause = 1

[State 870]
type = ChangeAnim
Trigger1 = Time = 0
trigger1 = SelfAnimExist(5950+var(55)*30000)
value = 5950+var(55)*30000

[State 870]
type = ChangeState
trigger1 = Animtime = 0
trigger1 = SelfAnimExist(5950+var(55)*30000)
value = 5251

[State 870]
type = SelfState
trigger1 = Animtime = 0
trigger1 = !SelfAnimExist(5250+var(55)*30000)
value = 5110

;-------------------------------------------------------------------------------
[Statedef 5251]
type    = L
movetype= H
physics = N

[State 6010, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 10
freq = 110
ampl = -4

[State 899]
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5111+var(55)*30000)
value = 5111+var(55)*30000

[State 5251]
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110+var(55)*30000,5119+var(55)*30000]
trigger1 = anim != [5161+var(55)*30000,5169+var(55)*30000]
trigger2 = !SelfAnimExist(5170 + (anim % 10)+var(55)*30000)
value = 5170+var(55)*30000

[State 5251]
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110+var(55)*30000,5119+var(55)*30000]
trigger1 = anim = [5161+var(55)*30000,5169+var(55)*30000]
trigger1 = SelfAnimExist(5170 + (anim % 10)+var(55)*30000)
value = 5170 + (anim % 10)+var(55)*30000

[State 5251]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5251]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5251]
type = ChangeAnim
persistent = 0
triggerall = anim = [5171+var(55)*30000,5179+var(55)*30000]
triggerall = SelfAnimExist(5111+var(55)*30000)
trigger1 = AnimTime = 0
trigger2 = SysVar(0)
value = 5111+var(55)*30000

[State 5251]
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111+var(55)*30000,5119+var(55)*30000]
trigger1 = AnimTime = 0
trigger2 = SysVar(0)
value = 5110+var(55)*30000

[State 5251]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5251]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5251]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 3680]
type = selfstate
trigger1 = alive
trigger1 = Time = 70
value = 5120

[State 5251]
type = selfstate
trigger1 = !alive
trigger1 = Time = 10
value = 5150

;---------------------------------------------------------------------------
; Dizzy
[Statedef 5300]
type    = S
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = Hitfallset
trigger1 = 1
value = 0

[State 3108, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 5300+Var(55)*30000

[State 3108, 1]
type = selfstate
trigger1 = Time >= 180
value = 0
ctrl = 0

;-----------------------------------------------------------------
[Statedef 5460]
type = L
movetype = H
physics = N
velset = 0, 0

[State 2160, 33]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = F66
sprpriority = -10
postype = p1
pos = 0,0
bindtime = 1

[State 2160, 34]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = F67
sprpriority = 2
postype = p1
pos = 0,0
bindtime = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 0
anim = f25
id = 2100
sprpriority = -2
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 0
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0 
value = F7,0
volume = 0

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 0 
value = F5000,11

[State a]
type = PalFX
trigger1 = time = 0
time = 0
add = 0,0,0

[State 0, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 15
ampl = -8

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5100+Var(55)*30000+ifelse(SelfAnimexist(5101+Var(55)*30000),1,0)

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 5461

;------------------------------------------------------------------------
[Statedef 5461]
type = A
movetype = H
physics = N
velset = 0, 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = IfElse(((enemynear,Pos X - Pos X) * facing < 0),1.8,-1.8)
y = -3

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5160+Var(55)*30000+ifelse(SelfAnimexist(5161+Var(55)*30000),1,0)

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .55

[State 0, SelfState]
type = SelfState
trigger1 = Pos Y >= -2 && Vel Y > 4
value = 5110

;------------------------------------------------------
;CODE FROM JFCT555
;------------------------------------------------------
; Wire Attack (P2 - Shaking from the hit)被防御反击时撞墙
;------------------------------------------------------

[Statedef 55351]
type    = A
movetype= H
physics = N
velset = 0,0

[State 351, 2]
type = ChangeAnim
trigger1 = time = 0
value = 55351+var(55)*30000

[State 351, 3]
type = PlayerPush
trigger1 = 1
value = 0

[State 351, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 55352

;------------------------------------------------------
; Wire Attack (P2 - Flying through the air)
;------------------------------------------------------

[Statedef 55352]
type    = A
movetype= H
physics = N
velset = -16,0

[State 352, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 352, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 352, No scroll]
type = ScreenBound
triggerall = Pos y < -240
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 352, Hit wall]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 10
;trigger2 = FrontEdgeBodyDist <= 10
value = 55353

;------------------------------------------------------
; Wire Attack (P2 - Hit wall)
;------------------------------------------------------

[Statedef 55353]
type    = A
movetype= H
physics = N

[State 353, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 12
freq = 120
ampl = -6

[State 353, LifeAdd]
type = LifeAdd
trigger1 = time = 1
value = -10

[State 353, Pos]
type = PosAdd
trigger1 = Time = 0
x = -20 - BackEdgeBodyDist
y = 0

[State 353, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 353, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, 撞墙声音]
type = PlaySnd
trigger1 = Time = 0
value = F5000,2

[State 1027, 撞墙震动]
type = envshake
trigger1 = !Time
time = 10

[State 296, 撞墙火花]
type = Explod
trigger1 = Time = 0
anim = F70
pos = -10,-50
postype = p1
sprpriority = -1
supermove = 1
bindtime = 1
ownpal = 1
removeongethit = 1

[State 353, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 55354+var(55)*30000

[State 353, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 55354

;------------------------------------------------------
; Wire Attack (P2 - Bounce off wall)
;------------------------------------------------------

[Statedef 55354]
type    = A
movetype= H
physics = N

[State 354, 1]
type = NotHitBy
trigger1 = 1
value = SCA,SA,HA,SP,HP,ST,HT

[State 364, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 354, Vel Y]
type = VelSet
trigger1 = Time = 0
x = -2
y = -5

[State 354, Gravity]
type = VelAdd
trigger1 = 1
y = 0.5

[State 354, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
value = 5050+var(55)*30000

[State 354, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050+var(55)*30000 && Animtime = 0
trigger1 = SelfAnimExist(5060+var(55)*30000)
persistent = 0
value = 5060+var(55)*30000

[State 364, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 55552+var(55)*30000 && Pos y >= 0
trigger1 = SelfAnimExist(5062+var(55)*30000)
persistent = 0
value = 5062+var(55)*30000

[State 354, Reduce Vel X]
type = Velset
triggerall = SelfAnimExist(55552+var(55)*30000)
trigger1 = (Vel y > 0) && (Pos y >= 0)
x = 1

[State 354, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------------------------------------------
; Counter Wire Attack (P2 - Shaking from the hit)攻击状态被击打撞墙
;------------------------------------------------------

[Statedef 55361]
type    = A
movetype= H
physics = N
velset = 0,0

[State 361, 2]
type = ChangeAnim
trigger1 = time = 0
value = 55351+var(55)*30000

[State 361, 3]
type = PlayerPush
trigger1 = 1
value = 0

[State 351, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 55362

;------------------------------------------------------
; Counter Wire Attack (P2 - Flying through the air)
;------------------------------------------------------

[Statedef 55362]
type    = A
movetype= H
physics = N
velset = -16,-2

[State 362, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 362, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 362, No scroll]
type = ScreenBound
triggerall = Pos y < -240
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 352, Hit wall]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 55363

[State 362, Hit ground]
type = null ;SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------------------------------------------
; Counter Wire Attack (P2 - Hit wall)
;------------------------------------------------------

[Statedef 55363]
type    = A
movetype= H
physics = N

[State 363, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 12
freq = 120
ampl = -6

[State 363, LifeAdd]
type = LifeAdd
trigger1 = time = 1
value = -50

[State 363, Turn]
type = Turn
trigger1 = (Time = 3) && (FrontEdgeBodyDist <= 10)

[State 363, Pos]
type = PosAdd
trigger1 = Time = 0
x = 5 - BackEdgeBodyDist

[State 363, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 363, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, 撞墙声音]
type = PlaySnd
trigger1 = Time = 0
value = F5000,2

[State 1027, 撞墙震动]
type = envshake
trigger1 = !Time
time = 10

[State 296, 撞墙火花]
type = Explod
trigger1 = Time = 0
anim = F70
pos = -10,-50
postype = p1
sprpriority = -1
supermove = 1
bindtime = 1
ownpal = 1
removeongethit = 1

[State 363, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 55364+var(55)*30000

[State 363, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 55364

;------------------------------------------------------
; Counter Wire Attack (P2 - Bounce off wall)
;------------------------------------------------------

[Statedef 55364]
type    = A
movetype= H
physics = N

[State 364, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -12
x = 3.1

[State 364, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 364, Gravity]
type = VelAdd
trigger1 = 1
y = .49

[State 364, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052+var(55)*30000)
value = 5050+var(55)*30000

[State 364, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052+var(55)*30000)
value = 5052+var(55)*30000

[State 364, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050+var(55)*30000 && Animtime = 0
trigger1 = SelfAnimExist(5060+var(55)*30000)
persistent = 0
value = 5060+var(55)*30000

[State 364, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052+var(55)*30000 && Animtime = 0
trigger1 = SelfAnimExist(5062+var(55)*30000)
persistent = 0
value = 5062+var(55)*30000

[State 364, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;被冲击吹飞状态
;---------------------------------------------------------------------------
[Statedef 55371]
type    = A
movetype= H
physics = N
velset = -10,-7.5
ctrl = 0
sprpriority = 0

[State 1003, Pause]
type = Pause
triggerall = roundstate = 2
triggerall = time = [1,11] 
trigger1 = (GameTime%2)=0
time = 2

[State 1000, Gravity]
type = Veladd
trigger1 = 1
y = .75

[State 820, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5160+var(55)*30000)
value = 55371+var(55)*30000

[State 1950, 1]
type = ChangeAnim
Trigger1 = Time = 0
trigger1 = SelfAnimExist(5160+var(55)*30000)
value = 5160+var(55)*30000

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1060, SelfState]
type = ChangeState
trigger1 = time > 12
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 55372

;-------------------------------------------
;倒地滑行
;-------------------------------------------
[Statedef 55372]
type    = S
movetype= H
physics = N
velset = -3,0
ctrl = 0
sprpriority = 0

[State 5100, 8]
type = GameMakeAnim
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
value = 61
pos = 0, -15
under = 1

[State 5100, 8]
type = GameMakeAnim
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 0
value = 23
pos = 0, -15
under = 0

[State 1027, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
trigger2 = Time = 9
value = f5000,ifelse(StageVar(info.author) = "water",10,1)

[State 902]
type = GameMakeAnim
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 1
trigger2 = Time = 9
pos = 0, 0
value = 125
under = 0

[State 0];小水花
type = GameMakeAnim
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 1
trigger2 = Time = 9
trigger3 = Time = 17
spacing = 4
value = 21
pos = 0, 0
under = 0

[State 1950, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 55372+var(55)*30000

[State 1000, pos]
type = PosSet
Trigger1 = Time = 0
y = 0

[State 810, Turn]
type = Turn
trigger1 = Time = 0

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = SelfAnimExist(5110+var(55)*30000)
value = 5110+var(55)*30000

[State 1060, SelfState]
type = SelfState
trigger1 = Time > 23
value = 5081

;---------------------------------------------------------------------------
;被冲击破防状态
;---------------------------------------------------------------------------
[Statedef 55381]
type = S
movetype = H
physics = S
sprpriority = 1
velset = 0,0
ctrl = 0

[State 5910, HitFallSet]
type = HitFallSet
trigger1 = Time = 0
value = 0
xvel = 0
yvel = 0

[State 5910, ChangeAnim]
type = ChangeAnim
trigger1 = !hitshakeover
value = 5002+var(55)*30000

[State 5910, ChangeAnim]
type = ChangeAnim
trigger1 = hitshakeover
trigger1 = anim = 5002+var(55)*30000 && animtime = 0
value = 5007+var(55)*30000

[State 5910, ChangeAnim]
type = HitVelSet
trigger1 = hitshakeover
x = 1
persistent = 0

[State 5910, SelfState]
type = SelfState
trigger1 = hitover
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Continue?
;---------------------------------------------------------------------------
[Statedef 5500]
type = S
ctrl = 0
anim = 0
velset = 0, 0
sprpriority = 1

[State 0] 
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5300)
value = 5300

;---------------------------------------------------------------------------
[Statedef 5900]
type = S

[State 5900, 1]
type = changestate
trigger1 = RoundsExisted = 0
trigger1 = TeamMode = Turns
trigger1 = RoundNo > 0
value = 190

[State 5900, 2] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 3] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 4] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

;==============================================================
;var(59)
;==============================================================
[Statedef 195900]
type = S

[State 0]
	type = VarSet
	trigger1 = var(59) = 0 
	var(59) = 1000

[State 0] 
	type = ChangeState
	trigger1 = var(59) != 0
	trigger1 = RoundNo = 1
	value = 190000

;==============================================================
;计分程序的初始化
;==============================================================
[Statedef 190000]
ctrl = 0

[State 0]
	type = AssertSpecial
	trigger1 = 1
	flag = Intro

[State 0]
	type = ChangeState
	trigger1 = Time = 0
	value = 190
;--------------------------------------------------------------
; add004 working...
;--------------------------------------------------------------
;--------------------------------------------------------------
; (shaving KO.)
;--------------------------------------------------------------
[Statedef 195200]
type = S
movetype = H
physics = N
velset = IsHelper * -2, 0

[State 0]
	type = NotHitBy
	trigger1 = 1
	value = SCA
	time = 1

[State 0] 
	type = ChangeAnim
	Trigger1 = time = 0
	value = Ifelse(Statetype=S,5002,5022)

[State 0] 
	type = ChangeAnim
	Trigger1 = Anim = 5002
	Trigger1 = (AnimTime=0)||(Time>18)
	value = 5022

[State 0] 
	type = ChangeAnim
	Trigger1 = Anim = 5022
	Trigger1 = (AnimTime=0)||(Time>36)
	value = 5080

[State 0] 
	type = ChangeAnim
	Trigger1 = Anim = 5080
	Trigger1 = (AnimTime=0)||(Time>52)
	value = 5110

[State 0]
	type = SelfState
	Trigger1 = Anim = 5110
	Trigger1 = (AnimTime=0)||(Time>42)
	value = 5110
;--------------------------------------------------------------
;--------------------------------------------------------------
;P1 GUARD CRUSH 防御破坏
;--------------------------------------------------------------
;--------------------------------------------------------------

[Statedef 190010]
type = U
physics = U
velset = 0, 0

[State 0]
type = AssertSpecial
trigger1 = time <= 10
flag = NoFG
flag2 = NoBG
flag3 = NoBarDisplay
IgnoreHitPause = 1
supermovetime = 999999999
pausemovetime = 999999999

[State 0]
type = varset
trigger1 = Time <= 10
sysvar(3) = 0

[State 0]
Type = EnvShake
trigger1 = Time = 1
Time = 1
Ampl = 1

[State 0]
	type = SuperPause
	trigger1 = Time = 0
	Time = 10
	movetime = 10
	anim = -1;13+(random%4);18;玻璃破碎效果，原来是210100
	sound = F10010, 0
	pos = const(size.mid.pos.x) ,const(size.mid.pos.y)
	darken = 0

; BG
[State 0]
	type = Explod
	trigger1 = time = 0
	anim = F3508
	pos = 0, 0
	ID = 203531
	Sprpriority = -7
	scale = 42.7, 1
	postype = Left
	bindtime = -1
	IgnoreHitPause = 1
;	removetime = 18
	supermovetime = 999999999
	pausemovetime = 999999999

[State 5250, 1];STUN晕眩字幕
type = Explod
trigger1 = time = 0
anim = f6021
scale = 0.5,0.5
pos = 215,70
postype = left
bindtime = -1
sprpriority = 999999999999999
facing = 1
ontop = 0
ownpal = 1
ignorehitpause = 1 
;persistent = 0

[State 5250, 1]
type = Explod
trigger1 = time = 0
anim = f7410
scale = 0.5,0.5
pos = const(size.mid.pos.x) ,const(size.mid.pos.y)
;pos = 30,-70
postype = p1
bindtime = -1
sprpriority = 999999999999999
facing = 1
ontop = 1
ownpal = 1
ignorehitpause = 1 
;persistent = 0

[State 0, warning sound]
type = PlaySnd
trigger1 = time = 0
value = F10200, 3

[State 0]
type = StateTypeSet
trigger1 = Time = 0
physics = Statetype

[State 0, Anim]
type = ChangeAnim
Trigger1 = time = 0
value = Ifelse(Statetype=S,5002,Ifelse(Statetype=C,5022,5012))

[State 0, To190011]
type = selfState
Trigger1 = (AnimTime =0)||(Time>28)
value = 190011
;--------------------------------------------------------------
;faint(^^;
;--------------------------------------------------------------
[Statedef 190011]
type = U
physics = U
velset = 0,0

[State 0, physic]
	type = StateTypeSet
	trigger1 = Time = 0
	physics = Statetype

[State 0, Anim]
	type = ChangeAnim
	Trigger1 = Time = 0
	value = Ifelse(Statetype=S,5007,Ifelse(Statetype=C,5027,5017))

[State 0, Blink]
	type = PalFX
	trigger1 = GameTime%10 = 1
	time = 2
	add = 90,65,160

[State 0, Freeze]
	type = ChangeAnim
	trigger1 = Time <= 80
	value = anim	
	
[State 0, VelSet]
	type = velset
	Trigger1 = AnimTime
	x = GameTime%3-1

[State 0, END]
	type = selfState
	Trigger1 = (AnimTime =0) || (Time > 99)
	value = Ifelse(Statetype=S,0,11)
	ctrl = 1
;--------------------------------------------------------------

;==============================================================
;超杀结局特效 (helper State of "hyper combo finish")
;==============================================================
[Statedef 99999]
ctrl = 0

[State 0]
	type = PosSet
	trigger1 = Time = 0
	x = 99999
	y = 99999

[State 0]
	type = varset
	trigger1 = Root,NumExplod(120505) = 0
	var(0) = 1

[State 0]
	type = AssertSpecial
	trigger1 = NumExplod(99999)
	flag = nobg
	flag2 = nofg
	flag3 = invisible
	IgnoreHitPause = 1

[State 0]
	Type = EnvShake
	trigger1 = 1
	Time = 1
	Ampl = 0

;-------------------KOF的红白闪光--------------------AH的代码

[State 0]
type = PlaySnd
trigger1 = time = 0
value = f5200,0
channel = 10
volume = 255
IgnoreHitPause = 1

[State 3040, 7]
type = EnvColor
trigger1 = var(0) && !var(1)
trigger1 = time % 9 = 0
trigger1 = time <= 33
;persistent = 0
;ignorehitpause = 1
time = 3
value = 0,0,0
under = 1
IgnoreHitPause = 1

[State 3040, 7]
type = EnvColor
trigger1 = var(0) && !var(1)
trigger1 = time % 9 = 3
trigger1 = time <= 33
;persistent = 0
;ignorehitpause = 1
time = 3
value = 255,0,0
under = 1
IgnoreHitPause = 1

[State 3040, 7]
type = EnvColor
trigger1 = var(0) && !var(1)
trigger1 = time % 9 = 6
trigger1 = time <= 33
;persistent = 0
;ignorehitpause = 1
time = 3
value = 255,255,255
under = 1
IgnoreHitPause = 1
;-------------------以上--------------------

[State 0]
	type = varset
	trigger1 = NumExplod(99999)
	var(1) = 1
	IgnoreHitPause = 1

;==============================================================
;MAX2特效，无用
;==============================================================
;TYPE 1
[Statedef 88870]
ctrl = 0
anim = 99999

[State 0]
type = DestroySelf
trigger1 = time = 0
;--------------------------------------
;TYPE 2
[Statedef 88871]
ctrl = 0
anim = 99999

[State 0]
type = DestroySelf
trigger1 = time = 0
;--------------------------------------
;TYPE 3
[Statedef 88872]
ctrl = 0
anim = 99999

[State 0]
type = DestroySelf
trigger1 = time = 0
;==============================================================
;(Breaking Helper)
;==============================================================
;Level 1
[Statedef 88890]
ctrl = 0
anim = 99999

[State 0]
type = DestroySelf
trigger1 = time = 0

;==============================================================
; (helper of BLOCKING/JD)
;==============================================================
[Statedef 99997]
type = A
movetype = H ; memo damage
physics = N
ctrl = 0
poweradd = 0
anim = (Root,Statetype = C) * 11 + (Root,Statetype = A) * 41

;----------------Aj
[State 0]
	type = ChangeAnim
	trigger1 = Time = 0
	trigger1 = Root,Statetype = A
	trigger1 = Root,sysfvar(1) < 2  ;; << N,LWv
	value = Ifelse((Root,vel x) = 0, 41, Ifelse((Root,vel x) > 0, 42, 43))

[State 0]
	type = ChangeAnim
	trigger1 = Time = 0
	trigger1 = Root,Statetype = A
	trigger1 = Root,sysfvar(1) >= 2  ;; << M,SWv
	value = 41

; Aj...
[State 0]
	type = ChangeAnim
	trigger1 = Root,Statetype = A
	trigger1 = Root,vel y > -2
	trigger1 = Root,SelfAnimExist(Anim + 3)
	persistent = 0
	value = Anim + 3

;----------------
[State 0]
	type = AssertSpecial
	trigger1 = 1
	flag = invisible
;op;	flag = NoAutoTurn

[State 0]
	type = PlayerPush
	trigger1 = 1
	value = 0

[State 0]
	type = posset
	trigger1 = 1
	X = Root, pos X - 420
	Y = Root, Pos Y - 240
	IgnoreHitPause = 1

[State 0]
	type = offset
	trigger1 = 1
	x = 420
	y = 240
	IgnoreHitPause = 1

[State 0]
	type = HitOverride
	trigger1 = 1
;op;	attr = SCA, AA, AT, AP
	attr = SCA, NA, SA, HA, NP, SP, HP
	time = -1
	slot = 0 ;7
	Stateno = 99996
;op;	forceair = 1  ;; << (Kv)
	IgnoreHitPause = 1
	sparkno = -1 ;; << 

[State 0]
	type = NotHitBy
	trigger1 = 1
	value = , AT
	IgnoreHitPause = 1


; I/s
[State 0]
	type = ChangeState
;or;	trigger1 = Root,sysvar(4) = 2
	trigger1 = IsHelper(99997)
	trigger1 = Time > 5 ;; << t
;or;	trigger2 = Root,sysvar(4) = 3
	trigger2 = IsHelper(99998)
	trigger2 = Time > 9 ;; << t
	trigger3 = Root,Ctrl = 0
	trigger4 = Root,StateNo = 195500
	value = 99995
;-----------------
; 
[Statedef 99996]
type = A
movetype = H ; <<"H"
physics = N
ctrl = 0
poweradd = 0

[State 0]
	type = AssertSpecial
	trigger1 = 1
	flag = invisible

[State 0]
	type = PosSet
	trigger1 = Time = 0
	x = 99999
	y = 99999

[State 0]
	type = NotHitBy
	trigger1 = 1
	value = SCA

; d
;;  * GetHitVar(hitshaketime)
[State 0]
	type = varset
	trigger1 = time = 0
	var(0) = EnemyNear,HitPauseTime + 1

[State 0]
	type = ChangeState
	triggerall = time > 3
	trigger1 = time > var(0) + 3
	value = 99995
	IgnoreHitPause = 1
;-----------------
; s/I
[Statedef 99995]
ctrl = 0

[State 0]
	type = AssertSpecial
	trigger1 = 1 
	flag = invisible
[State 0]
	type = NotHitBy
	trigger1 = 1
	value = SCA

[State 0]
	type = DestroySelf

;or;	trigger1 = Root,sysvar(4) = 2
	trigger1 = IsHelper(99997)
	trigger1 = Root,StateNo != 195500
	trigger1 = Root,Command != "holdfwd"

;or;	trigger2 = Root,sysvar(4) = 3
	trigger2 = IsHelper(99998)
	trigger2 = Root,StateNo != 195500
	trigger2 = Root,Command != "holdback"

;or;	trigger3 = Root,sysvar(4) = 3
	trigger3 = IsHelper(99998)
	trigger3 = Root,StateNo = 195500
	trigger3 = Root,Command = "holdback"

	IgnoreHitPause = 1
;==============================================================

;--------------------------------------------------------------------
;特殊暴气
[Statedef 1990]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 0+Var(55)*1
poweradd = -1000
facep2 = 0
velset = 0,0

[state a]
type = null;varset
trigger1 = time=0
fvar(29)=0

[State 1990, 5]
type = varset
trigger1 = time = 0
fvar(30) = 2000

[State 0, Pause]
type =Pause
triggerall = RoundState = 2
trigger1 = time = 0
time = 5
movetime = 5
ignorehitpause = 1

[State 1990, 2]
type = PlaySnd
trigger1 = Time = 0
value = f7000,1

[State 1991, GrabSpark]
type = Explod
trigger1 = animelem = 1
anim = F996
postype = p1
scale=0.5,0.5
id=1990
pos = -20,60
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ignorehitpause = 1
sprpriority = 7

[State 1991, GrabSpark]
type = Explod
trigger1 = animelem = 1
anim = F995
postype = p1
scale=0.5,0.5
id=1990
pos = -20,60
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ignorehitpause = 1
sprpriority = -1

[State 1990, mode]
type = Changestate
trigger1 = command = "holdfwd"
trigger1 = command != "holdup"
trigger1 = command != "holddown"
trigger1 = command != "holdback"
value = 100
ctrl = 1

[State 1990, 4]
type = ChangeState
trigger1 = time=5
trigger1 = command != "holdfwd"
value = 1993
ctrl = 1

;=============================================================================

;--------------------------------------------------------------------
;通常暴气
[Statedef 1991]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 1991+Var(55)*10000
poweradd = -1000
facep2 = 0
velset = 0,0

[state a]
type = null;varset
trigger1 = time=0
fvar(29)=0

[State 1991, 5]
type = varset
trigger1 = time=0
fvar(30) = 2000

[State 1991,1]
type = HitBy
trigger1 = AnimElem = 1
value = SCA,NA,SA,HA,AP
time = 28

[State 210, 2]
type = PlaySnd
trigger1 = time = 1
value = f7000,1

[State 1991, 4]
type = EnvShake
trigger1 = animelem = 4
persistent = 0
time = 14
ampl = -5
ignorehitpause = 1

[State 1991, GrabSpark]
type = Explod
trigger1 = animelem = 1
anim = F996
postype = p1
scale=0.5,0.5
id=1990
pos = -20,60
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ignorehitpause = 1
sprpriority = 7

[State 1991, GrabSpark]
type = Explod
trigger1 = animelem = 1
anim = F995
postype = p1
scale=0.5,0.5
id=1990
pos = -20,60
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ignorehitpause = 1
sprpriority = -1

[State 1991, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------

;空中暴气
[Statedef 1992]
type    = U
movetype= I
physics = U
ctrl = 0
anim = 41+Var(55)*10000
facep2 = 0
poweradd = -1000

[state a]
type = null;varset
trigger1 = time=0
fvar(29)=0

[State 1990, 5]
type = varset
trigger1 = time=0
fvar(30) = 2000

[State 0, Pause]
type =Pause
triggerall = RoundState = 2
trigger1 = time = 0
time = 5
movetime = 5
ignorehitpause = 1

[State 1990, 2]
type = PlaySnd
trigger1 = Time = 0
value = f7000,1

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && (statetype=s|statetype=c)
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype=A
physics=A

[State 120, 3]
type = velSet
trigger1 = Time = 0 && statetype!=A
x=0
y=0

[State 1991, GrabSpark]
type = Explod
trigger1 = animelem = 1
anim = F996
postype = p1
scale=0.5,0.5
id=1990
pos = -20,60
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ignorehitpause = 1
sprpriority = 7

[State 1991, GrabSpark]
type = Explod
trigger1 = animelem = 1
anim = F995
postype = p1
scale=0.5,0.5
id=1990
pos = -20,60
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ignorehitpause = 1
sprpriority = -1

[State 1990, 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------

[Statedef 1993]
type    = S
movetype= I
physics = S
ctrl = 1
anim = 100+Var(55)*10000
facep2 = 0
velset = 0,0

[State 1990, kof13]
type =posadd
trigger1 = time = 0
trigger1 = time = 5
x = 20

[State 1990, kof13]
type =VelSet
trigger1 = time = 0
x = 18

[State 1990, kof13]
type =PlayerPush
trigger1 = time = 0
value =1

[State 1990, 4]
type = ChangeState
trigger1 = time = 10
value = 0
ctrl = 1

;--------------------------------------------------------------------------
;爆气残影
[Statedef 7999]
sprpriority = -5
movetype = I
ctrl = 0

[State -2,kof13];爆气残影
type = Afterimage
trigger1 = Time=0
time = -1
length = 13
framegap = 1
trans = add1
paladd = 72,72,0
palcolor = 206

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 9999, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 9999, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 9999, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 9999, AssertSpecial]
type = AssertSpecial
trigger1 = Time <= 0
trigger2 = !SelfAnimExist(Root, Anim)
trigger3 = !AnimExist(Root, Anim)
trigger4 = Root, StateNo >= 160
trigger4 = Root, StateNo < 5000
trigger4 = Root, MoveType = H
trigger5 = Root, StateNo >= 6000
trigger5 = Root, MoveType = H
flag = Invisible

[State 9999, SprPriority]
type = SprPriority
trigger1 = 1
value = -5

[State 9999, BindToRoot]
type = BindToRoot
trigger1 = 1
facing = 1
pos = 0,0
time = 1

[State ]
type = Changeanim
trigger1 = Ishelper
trigger1 = root,movetype != H
value = root,anim
elem = root,animelemno(1)
ignorehitpause = 1

[State a]
type = ChangeState
trigger1 = root,movetype = H
trigger1 = 1
value = 7998

[State 9999, Destroy]
type = DestroySelf
trigger1 = Root,fvar(30)<=0
trigger2 = Root, Alive=0
trigger3 = root,movetype = H

;-------------------------------------------------------------------------------
[Statedef 7998]
sprpriority = -5
movetype = I
ctrl = 0

[State -2,kof13];爆气残影
type = Afterimage
trigger1 = 1
time = 0

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 9999, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 9999, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 9999, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 9999, AssertSpecial]
type = AssertSpecial
trigger1 = Time <= 0
trigger2 = !SelfAnimExist(Root, Anim)
trigger3 = !AnimExist(Root, Anim)
trigger4 = Root, StateNo >= 160
trigger4 = Root, StateNo < 5000
trigger4 = Root, MoveType = H
trigger5 = Root, StateNo >= 6000
trigger5 = Root, MoveType = H
flag = Invisible

[State 9999, SprPriority]
type = SprPriority
trigger1 = 1
value = -5

[State 9999, BindToRoot]
type = BindToRoot
trigger1 = 1
facing = 1
pos = 0,0
time = 1

[State ]
type = Changeanim
trigger1 = Ishelper
value = 10000
ignorehitpause = 1

[State a]
type = ChangeState
trigger1 = root,movetype != H
value = 7999

[State 9999, Destroy]
type = DestroySelf
trigger1 = root,movetype != H

;===========================================================================

;===========================================================================
;(HELPER)13爆气
[Statedef 7550]
type = A
ctrl = 0
anim = 10000
velset = 0,0
movetype = I
physics = N
sprpriority = 10

[state a]
type = changestate
trigger1 = root,stateno = [1990,1992]
trigger2 = root,fvar(30)>0
value = 7551

;---------------------------------------------------------------------------
;(HELPER)13爆气
[Statedef 7551]
type = A
ctrl = 0
anim = 10000
velset = 0,0
movetype = I
physics = N
sprpriority = 10

[state a]
type =null
trigger1 = 1
trans = addalpha
alpha = 156, 156

[State 2080]
type = Explod
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = NumExplod(9060) = 0
anim = f1902
ID = 9060
postype = Back
bindtime = -1
pos = 56,229.5
sprpriority = 997
removetime = -1
ownpal = 1
scale = .5,.5
ontop = 1

[State 2080]
type = Explod
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = NumExplod(9060) = 0
anim = f1902
ID = 9060
postype = Back
bindtime = -1
pos = 56,229.5
sprpriority = 997
removetime = -1
ownpal = 1
facing = 1
scale = .5,.5
ontop = 1

[state a]
type = removeexplod
trigger1 = root,fvar(30)<=0
;trigger2 = root,fvar(29)>0
id = 9060

[state a]
type = removeexplod
trigger1 = RoundState > 2
id = 9060

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[state -2,a]
type = Explod
triggerall = RoundState <= 2
triggerall = root,fvar(31)<=0
triggerall = root,fvar(30)>0
trigger1 = teamside=1
trigger1 = numexplod(9602) = 0
anim = f1999
id = 9602
postype = back
bindtime = -1
pos = 30,219
sprpriority = 997
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999999
supermovetime = 999999
IgnoreHitPause = 1

[state -2,a]
type = Explod
triggerall = RoundState <= 2
triggerall = root,fvar(31)<=0
triggerall = root,fvar(30)>0
trigger1 = teamside=2
trigger1 = numexplod(9602) = 0
anim = f1999
id = 9602
postype = back
bindtime = -1
pos = 30,219
sprpriority = 997
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 999999
supermovetime = 999999
IgnoreHitPause = 1

[state a]
type = ModifyExplod
trigger1 = 1
ID = 9602
scale = root,fvar(30)*0.0024*0.31*0.9*0.525,0.3

[state a]
type = removeexplod
trigger1 = RoundState > 2
id = 9602

[state a]
type = removeexplod
trigger1 = root,fvar(30) = [-200,0]
id = 9060

[state a]
type = removeexplod
trigger1 = root,fvar(30) = [-200,0]
id = 9602

[state a]
type = changestate
trigger1 = root,fvar(30) = [-200,0]
value = 7550

;============================================================================================
;[RANKING] LO(\)pwp[/ranking helper State
;==============================================================

[Statedef 99980]
ctrl = 0

[State 0]
	type = AssertSpecial
	trigger1 = 1
	flag = invisible
	flag2 = NoBarDisplay

[State 0]
	type = NotHitBy
	trigger1 = 1
	value = SCA

; reset hits combo
[State 0]
	type = HitAdd
	trigger1 = time > 0
	value = -999

;------------------------------
; drawing flag
[State 0]
	type = varset
	triggerall = time = 0 && Win
	trigger1 = Root,Alive
	trigger1 = !NumPartner
	trigger2 = NumPartner
	trigger2 = Root,Alive || Partner,Alive
	var(9) = 1



;------------------------------
; var(31):	lifebar draw x
; var(32):	lifebar draw y
; var(33):	powerbar draw x
; var(34):	powerbar draw y
; fvar(3-5):	bar scale(w or h)

; pos init
;[State 0]
;	type = varset
;	trigger1 = time = 0
;	var(31) = Ifelse(TeamSide = 1, 26, 292)
[State 0]
	type = varset
	trigger1 = time = 0
	var(32) = 62

[State 0]
	type = varset
	trigger1 = time = 0
	var(31) = Ifelse(TeamSide = 1, -196, 502)

[State 0]
	type = varadd
	trigger1 = time = [100,110]
	var(31) = Ifelse(TeamSide = 1, 20, -20)
[State 0]
	type = varadd
	trigger1 = time%5 = 0 && time = [110,300]
	var(31) = Ifelse(TeamSide = 1, 1, -1)
[State 0]
	type = varadd
	trigger1 = time > 300
	var(31) = Ifelse(TeamSide = 1, 1, -1) * (time-300)*3

;------------------------------
;------------------------------
; get hit bonus
[State 0]
	type = varset
	trigger1 = time = 0 && var(9)
	fvar(13) = Ifelse(fvar(3) = 0, 30, Floor(fvar(13) / (fvar(3) + fvar(13) + 0.001) * 30))

; get guard bonus
[State 0]
	type = varset
	trigger1 = time = 0 && var(9)
	fvar(14) = 30 - Ifelse(fvar(4) / 12 >= 1, 30, Floor(fvar(4) / 12.00 * 30))

; get life bonus
[State 0]
	type = varset
	trigger1 = time = 0 && var(9)
	trigger1 = !NumPartner
	var(1) = Ifelse(Root,Life >= Const(Data.Life)-1, 30, Floor(Root,Life/1.00/Const(Data.Life)*30))
[State 0]
	type = varset
	trigger1 = time = 0 && var(9)
	trigger1 = NumPartner
	var(1) = Ifelse((Root,Life + Partner,Life) >= Const(Data.Life)*2-1, 30, Floor((Root,Life + Partner,Life)/2.00/Const(Data.Life)*30))

; hp finish helper
[State 0]
	type = varset
	trigger1 = time = 0 && var(45) < 2
	trigger1 = Root,NumHelper(99999)
	var(45) = 2
; get tech bonus
[State 0]
	type = varset
	trigger1 = time = 0 && var(9)
	fvar(15) = (var(48)=2)*5 + var(45)*5 + Floor(fvar(4) + fvar(5) + fvar(6) + fvar(7))
[State 0]
	type = varset
	trigger1 = time = 0 && var(9)
	trigger1 = fvar(15) > 30
	fvar(15) = 30

; Rank
[State 0]
	type = varset
	trigger1 = time = 0 && var(9)
	var(2) = Floor(fvar(13) + fvar(14) + fvar(15)) + var(1)
[State 0]
	type = varset
	trigger1 = time = 0 && var(9)
	var(2) = Ifelse(var(2) < 20, 0, Ifelse(var(2) > 99, 14, var(2) / 8))


;--------------------------------
; zu
[State 0]
	type = varset
	trigger1 = time = 0
	var(33) = (28 - var(2) * 2) * Ifelse(TeamSide = 1, 1, -1)
[State 0]
	type = varset
	trigger1 = time = 0
	var(34) = (var(48) != 2)*6 + (var(1) != 30)*6 + (var(45) = 0)*6


; _\
[State 0]
	type = varset
	trigger1 = time = 1
	var(57) = var(58)
[State 0]
	type = varset
	trigger1 = time = 1
	var(58) = 0
[State 0]
	type = varadd
	trigger1 = time > 120 && var(58) < var(57)
	trigger1 = var(51) < 1
	var(58) = 1 + (var(58)<var(57)-20)*(Random%9) + (var(58)<var(57)-200)*(Random%9*10) + (var(58)<var(57)-2000)*(Random%99*10) + (var(58)<var(57)-20000)*(Random%999*10)


; o[k
;------------
[State 0]
	type = varset
	trigger1 = time = 1
	fvar(2) = 0.40
[State 0]
	type = varadd
	trigger1 = time > 110
	fvar(2) = 0.01
[State 0]
	type = varset
	trigger1 = fvar(2) > 0.5
	fvar(2) = 0.5
;------------
[State 0]
	type = varset
	trigger1 = time = 1
	fvar(3) = 0
[State 0]
	type = varadd
	trigger1 = time > 120 && fvar(3) < 0.5
	fvar(3) = 0.1
;------------
[State 0]
	type = varset
	trigger1 = time = 1
	fvar(4) = 0
[State 0]
	type = varadd
	trigger1 = time > 130 && fvar(4) < 0.5
	fvar(4) = 0.1
;------------
[State 0]
	type = varset
	trigger1 = time = 1
	fvar(5) = 0
[State 0]
	type = varadd
	trigger1 = time > 140 && fvar(5) < 0.5
	fvar(5) = 0.1
;--------------------------------
;(drawing)
;--------------------------------
[State 0]
	type = RemoveExplod
	trigger1 = time = 0

;=======================================================
;计分板的内容
;=======================================================
;--------------------------------
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	anim = F160200
	postype = Left
	facing = Ifelse(TeamSide = 1, 1, -1)
	pos = var(31) + Ifelse(TeamSide = 1, 58, 78), var(32) + 22
	scale = fvar(2), fvar(2)
	sprpriority = -4
	bindtime = -1
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	anim = F160201
	postype = Left
	facing = Ifelse(TeamSide = 1, 1, -1)
	pos = var(31) + Ifelse(TeamSide = 1, 58, 78), var(32) + 22
	scale = fvar(2), fvar(2)
	sprpriority = -4
	bindtime = -1



;--------------------------------
;大底板
;--------------------------------
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	trigger1 = var(48) = 2
	id = 11
	anim = F160020
	postype = Left
	pos = var(31) + Ifelse(TeamSide = 1, 56, 76), var(32) + 22 + var(34)
	facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, fvar(3)
	sprpriority = -1
	bindtime = -1
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	trigger1 = var(48) = 2
	id = 10
	anim = F160030
	postype = Left
	pos = var(31) + Ifelse(TeamSide = 1, 56, 76), var(32) + 22 + var(34)
	scale = 0.5, fvar(3)
	sprpriority = 0
	bindtime = -1

;--------------------------------
; (perfect match)
;--------------------------------
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	trigger1 = var(1) = 30
	id = 11
	anim = F160021
	postype = Left
	pos = var(31) + Ifelse(TeamSide = 1, 56, 76), var(32) + 22 + (var(48) = 2) * 12 + var(34)
	facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, fvar(3)
	sprpriority = -1
	bindtime = -1
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	trigger1 = var(1) = 30
	id = 10
	anim = F160033
	postype = Left
	pos = var(31) + Ifelse(TeamSide = 1, 56, 76), var(32) + 22 + (var(48) = 2) * 12 + var(34)
	scale = 0.5, fvar(3)
	sprpriority = 0
	bindtime = -1

;--------------------------------
; (super/hyper finish message)
;--------------------------------
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	trigger1 = var(45) > 0
	id = 11
	anim = F160022
	postype = Left
	pos = var(31) + Ifelse(TeamSide = 1, 56, 76), var(32) + 22 + ((var(48) = 2) + (var(1) = 30)) * 12 + var(34)
	facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, fvar(3)
	sprpriority = -1
	bindtime = -1
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	trigger1 = var(45) > 0
	id = 10
	anim = F160030 + var(45)
	postype = Left
	pos = var(31) + Ifelse(TeamSide = 1, 56, 76), var(32) + 22 + ((var(48) = 2) + (var(1) = 30)) * 12 + var(34)
	scale = 0.5, fvar(3)
	sprpriority = 0
	bindtime = -1

;--------------------------------
;BAR们
;--------------------------------
; lights----
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	anim = F160005
	sprpriority = -1
	postype = Left
	pos = var(31) + var(33) + Ifelse(TeamSide = 1, 0, 127 - Floor(fvar(15) + fvar(13) + fvar(14)) - var(1)), var(32) + var(34)
	scale = Floor(fvar(13) + fvar(14) + fvar(15)) + var(1) + 2, fvar(4)
	bindtime = -1

; leftbar
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	anim = F160000
	postype = Left
	pos = var(31) + var(33) + Ifelse(TeamSide = 1, 0, 127 - Floor(fvar(15) + fvar(13) + fvar(14)) - var(1)), var(32) + var(34)
	sprpriority = 0
	bindtime = -1
	scale = 0.5, fvar(4)

; tech
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	anim = F160004
	postype = Left
	pos = var(31) + var(33) + Ifelse(TeamSide = 1, 2, 127 - Floor(fvar(15))), var(32) + var(34)
	sprpriority = 0
	bindtime = -1
	scale = fvar(15), fvar(4)

; hit
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	anim = F160001
	postype = Left
	pos = var(31) + var(33) + Ifelse(TeamSide = 1, 2 + Floor(fvar(15)),127 - Floor(fvar(15) + fvar(13))), var(32) + var(34)
	sprpriority = 0
	bindtime = -1
	scale = fvar(13), fvar(4)

; guard
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	anim = F160002
	postype = Left
	pos = var(31) + var(33) + Ifelse(TeamSide = 1, 2 + Floor(fvar(15) + fvar(13)),127 - Floor(fvar(15) + fvar(13) + fvar(14))), var(32) + var(34)
	sprpriority = 0
	bindtime = -1
	scale = fvar(14), fvar(4)

; life
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	anim = F160003
	postype = Left
	pos = var(31) + var(33) + Ifelse(TeamSide = 1, 2 + Floor(fvar(15) + fvar(13) + fvar(14)),127 - Floor(fvar(15) + fvar(13) + fvar(14)) - var(1)), var(32) + var(34)
	sprpriority = 0
	bindtime = -1
	scale = var(1), fvar(4)


;------------------------------
; tech
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	trigger1 = fvar(15) > 10
	anim = F160013
	postype = Left
	pos = var(31) + var(33) + Ifelse(TeamSide = 1, 2 + Floor(fvar(15)/2), 127 - 5 - Floor(fvar(15)/2) ), var(32) + 8 + var(34)
	scale = 0.5, fvar(4)
	sprpriority = 0
	bindtime = -1

; hit
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	trigger1 = fvar(13) > 1
	anim = F160011
	postype = Left
	pos = var(31) + var(33) + Ifelse(TeamSide = 1, 2 + Floor(fvar(15) + fvar(13)/2),127 - Floor(fvar(15) + fvar(13)/2) ), var(32) + 4 + var(34)
	scale = 0.5, fvar(4)
	sprpriority = 0
	bindtime = -1

; guard
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	trigger1 = fvar(14) > 1
	anim = F160010
	postype = Left
	pos = var(31) + var(33) + Ifelse(TeamSide = 1, 2 + Floor(fvar(15) + fvar(13) + fvar(14)/2), 127 - Floor(fvar(15) + fvar(13) + fvar(14)/2) ), var(32) + 8 + var(34)
	scale = 0.5, fvar(4)
	sprpriority = 0
	bindtime = -1

; life
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	trigger1 = var(1) > 1
	anim = F160012
	postype = Left
	pos = var(31) + var(33) + Ifelse(TeamSide = 1, 2 + Floor(fvar(15) + fvar(13) + fvar(14) + var(1)/2), 127 - Floor(fvar(15) + fvar(13) + fvar(14) + var(1)/2) ), var(32) + 4 + var(34)
	scale = 0.5, fvar(4)
	sprpriority = 0
	bindtime = -1
;--------------------------------------------------------------
; Rank
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	anim = F160150
	postype = Left
	pos = var(31) + Ifelse(TeamSide = 1, 22, 120), var(32) - 28
	sprpriority = -2
	scale = 0.5, fvar(5)
	bindtime = -1
;--;	trans = sub ; add1
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	anim = F160150
	postype = Left
	pos = var(31) + Ifelse(TeamSide = 1, 22, 120), var(32) - 28
	sprpriority = -1
	scale = 0.5, fvar(5)
	bindtime = -1
	trans = add
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9)
	anim = F160100 + var(2)
	postype = Left
	pos = var(31) + Ifelse(TeamSide = 1, 22, 120), var(32) - 28
	sprpriority = 0
	scale = 0.5, fvar(5)
	bindtime = -1
	trans = add

;--------------------------------
; win sound胜利声音
;--------------------------------
[State 0]
	type = PlaySnd
	triggerall = var(9)
	trigger1 = time = 120
	value = F10300, Ifelse(var(51) > 0, 1, 0)

; perfect sound
[State 0]
	type = PlaySnd
	triggerall = var(9)
	trigger1 = time = 160 && var(51) < 1
	trigger1 = var(1) = 30
	value = F10300, 2

;--------------------------------------------------------------
; (scores and bonus)分数什么的。
;--------------------------------------------------------------
; score
[State 0]
	type = varadd
	trigger1 = time = 0 && var(9)
	var(58) = var(2) * 250

[State 0]
	type = ParentVarSet
	trigger1 = time = 0
	trigger1 = Root,sysvar(4)
	trigger1 = var(58) > Root,var(58)
	var(58) = var(58)
;-----------------
; (score)
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9) && var(58) > 0
	anim = F300000 + var(58)%10
	postype = Left
	pos = var(31) + Ifelse(TeamSide=1,0,70) + Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 54, -9), var(32) - 20
	sprpriority = -1
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	removetime = 1
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9) && var(58) > 9
	anim = F300000 + var(58)/10%10
	postype = Left
	pos = var(31) + Ifelse(TeamSide=1,0,70) + Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 45, -18), var(32) - 20
	sprpriority = -1
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	removetime = 1
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9) && var(58) > 99
	anim = F300000 + var(58)/100%10
	postype = Left
	pos = var(31) + Ifelse(TeamSide=1,0,70) + Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 36, -27), var(32) - 20
	sprpriority = -1
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	removetime = 1
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9) && var(58) > 999
	anim = F300000 + var(58)/1000%10
	postype = Left
	pos = var(31) + Ifelse(TeamSide=1,0,70) + Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 27, -36), var(32) - 20
	sprpriority = -1
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	removetime = 1
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9) && var(58) > 9999
	anim = F300000 + var(58)/10000%10
	postype = Left
	pos = var(31) + Ifelse(TeamSide=1,0,70) + Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 18, -45), var(32) - 20
	sprpriority = -1
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	removetime = 1
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9) && var(58) > 99999
	anim = F300000 + var(58)/100000%10
	postype = Left
	pos = var(31) + Ifelse(TeamSide=1,0,70) + Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 9, -54), var(32) - 20
	sprpriority = -1
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	removetime = 1
[State 0]
	type = Explod
	trigger1 = time > 11 && var(9) && var(58) > 999999
	anim = F300000 + var(58)/1000000%10
	postype = Left
	pos = var(31) + Ifelse(TeamSide=1,0,70) + Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9, -63), var(32) - 20
	sprpriority = -1
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	removetime = 1

;==============================================================
;[RANKING] ranking helper State
;for survival mode(team mode)
;==============================================================
;var(0)  ranking/grade
;var(5)  draw pos Y
;var(10) scores
;var(11) wins

[Statedef 99985]
ctrl = 0

[State 0]
	type = PosSet
	trigger1 = Time = 0
	x = 99999999
	y = 99999999

[State 0]
	type = AssertSpecial
	trigger1 = 1
	flag = invisible

[State 0]
	type = AssertSpecial
	trigger1 = time < 9000
	flag = RoundNotOver

;------------------------------
;INIT
[State 0]
	type = varset
	trigger1 = Time = 0
	var(5) = 52
;------------------------------
[State 0]	;get players scores
	type = varset
	triggerall = Time = 0
	trigger1 = NumEnemy
	trigger1 = Enemy,sysvar(4)
	var(10) = Enemy,var(58)
;--------------------------------------------------------------
;(drawing)

[State 0, bar]
	type = Explod
	trigger1 = time = 50
	id = 0
	anim = F5600
	sprpriority = 2
	postype = Left
	pos = 0, var(5)
	scale = 0.5, 0.5
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	bindtime = -1
	ontop = 1
	IgnoreHitPause = 1
;--------------------------------------------------------------
;ranking
;--------------------------------------------------------------
[State 0, rank]
	type = VarSet
	trigger1 = Time = 0
	trigger1 = NumEnemy
	trigger1 = Enemy,sysvar(4)
	var(0) = Enemy,var(58)%100

;--------------
[State 0, rank]
	type = Explod
	trigger1 = time = 100
	id = 1
	anim = F160100 + var(0)
	sprpriority = 6
	postype = Left
	pos = 120, var(5) + 30
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	bindtime = -1
	ontop = 1
	IgnoreHitPause = 1
;--------------------------------------------------------------
;(wins)
;--------------------------------------------------------------
[State 0, wins]
	type = VarSet
	trigger1 = Time = 0
	var(11) = RoundNo - 1

[State 0, scr]
	type = Explod
	triggerall = time > 100
	triggerall = var(11) > 0
	trigger1 = NumExplod(11) < Floor(Log(10, var(11))) + 1
	id = 11
	anim = F300000 + var(11)/(10**Ifelse(NumExplod(11)=5, 6, Ifelse(NumExplod(11)=6, 5, NumExplod(11)))) % 10
	postype = Left
	pos = 155 + Floor(Log(10, var(11))) * 9 - NumExplod(11) * 9 , var(5) + 70
	sprpriority = 7
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	bindtime = -1
	ontop = 1
	IgnoreHitPause = 1
	scale = 0.5, 0.5
;--------------------------------------------------------------
;(scores and bonus)
;--------------------------------------------------------------
[State 0, score]
	type = Explod
	triggerall = Time > 100
	trigger1 = NumExplod(10) < Floor(Log(10, var(10))) + 1
	id = 10
	anim = F300000 + var(10)/(10**Ifelse(NumExplod(10)=5, 6, Ifelse(NumExplod(10)=6, 5, NumExplod(10)))) % 10
	postype = Left
	pos = 180 + Floor(Log(10, var(10))) * 9 - NumExplod(10) * 9 , var(5) + 98
	sprpriority = 7
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	bindtime = -1
	ontop = 1
	IgnoreHitPause = 1
	scale = 0.5, 0.5
;==============================================================
;[BARS] 各种各样的BAR来了。
;==============================================================
; var(0):	life
; var(1):	players life
; var(2):	damage
; var(3):	sound index
; var(4):	1/3 life switch
; var(10):	max life
; var(11-12):	just defence & block system
; var(15):	player change
; var(20):	power
; var(21):	players power
; var(22):	players type
; var(23-29):	max mode
; var(30):	max power
; var(31):	lifebar draw x
; var(32):	lifebar draw y
; var(33):	powerbar draw x
; var(34):	powerbar draw y
; var(35):	guardcrush
; var(36):	guardcrush 2
; var(40):	display all bars [0/2]
; var(41):	display power bars
; var(44):      jump type
; var(45):      *** finish
; var(46):	system sound of navigation
; var(47):	K.O. countdown
; var(48):	first attack
; var(49):	counter attack
; var(50):	dizzy
; var(51):	AI(def:-/player:-1/cpu:1)
; var(55):	stage infomation [2-99]
; var(57):	score
; var(58):	score
; var(59):	striker combo Stateno
;------------
; fvar(3-7):	bonus
; fvar(13):
;--------------------------------------------------------------
[Statedef 90900]
ctrl = 0
vel = 0, 0
poweadd = 0
;; anim = 0

[State 0]
	type = AssertSpecial
	trigger1 = 1
	flag = invisible

[State 0]
	type = AssertSpecial
	trigger1 = RoundState != 2
	flag = NoBarDisplay

[State 0]
	type = NotHitBy
	trigger1 = 1
	value = SCA
;==============================================================
; init draw pos x y

; lifebar x
[State 0]
	type = varset
	trigger1 = time = 0
	var(31) = 1

; lifebar y
[State 0]
	type = varset
	trigger1 = time = 0
	var(32) = 18

; powerbar x
[State 0]
	type = varset
	trigger1 = time = 0
	var(33) = Ifelse(TeamSide = 1, 6, 314)

; powerbar y
[State 0]
	type = varset
	trigger1 = time = 0
	var(34) = 223
;--------------------------------------------------------------
; get score from parent
[State 0]
	type = varset
	trigger1 = time = 0
	trigger1 = Root,sysvar(4)
	var(57) = Root,var(58)
;==============================================================
;switch of all bars displaying

;; all bars ON
[State 0]
	type = varset
	triggerall = RoundState = 2
	triggerall = var(40) != 1
;;	trigger1 = Root,sysvar(3) = 2
	trigger1 = IsHelper(90900)
	var(40) = 1
	IgnoreHitPause = 1

;; only power bars OFF (self)
[State 0]
	type = varset
	triggerall = RoundState = 2
	triggerall = var(40) != 2
;;	trigger1 = Root,sysvar(3) > 2
;;	trigger2 = NumEnemy
;;	trigger2 = Enemy,sysvar(4)
;;	trigger2 = Enemy,sysvar(3) < 2
	trigger1 = IsHelper(90901)
	trigger2 = var(22) = 4 && !NumPartner
	var(40) = 2
	IgnoreHitPause = 1

; all bars OFF
[State 0]
	type = varset
	triggerall = var(40)
;;	trigger1 = Root,sysvar(3) < 2
;;	trigger2 = NumEnemy
;;	trigger2 = Enemy,sysvar(4)
;;	trigger2 = Enemy,sysvar(3) < 2
;;	trigger3 = NumPartner
;;	trigger3 = Root,sysvar(4) = 0
;;	trigger4 = Root,Alive = 0
	trigger1 = RoundState != 2
	var(40) = 0
	IgnoreHitPause = 1


;--------------------------------------------------------------
; player change
;--------------------------------------------------------------

[State 0]
	type = varset
	trigger1 = var(15)
	trigger1 = !NumPartner
	var(15) = 0

[State 0]
	type = varset
	trigger1 = !var(15)
	trigger1 = Root,Alive = 0
	trigger1 = NumPartner
	trigger1 = Partner,Alive
	var(15) = 1

;==============================================================
; get parents parameters

; (MaxLife)
[State 0]
	type = varset
	trigger1 = var(15) = 0
	trigger1 = var(10) != Root,LifeMax
	var(10) = Root,LifeMax
	IgnoreHitPause = 1

[State 0]
	type = varset
	trigger1 = var(15) = 1
	trigger1 = NumPartner
	trigger1 = var(10) != Partner,LifeMax
	var(10) = Partner,LifeMax
	IgnoreHitPause = 1

; (Life)
[State 0]
	type = varset
	trigger1 = var(15) = 0
	trigger1 = var(1) != Root,Life
	var(1) = Root,Life
	IgnoreHitPause = 1

[State 0]
	type = varset
	trigger1 = var(15) = 1
	trigger1 = NumPartner
	trigger1 = var(1) != Partner,Life
	var(1) = Partner,Life
	IgnoreHitPause = 1

;------------------------------
; set player mode
;------------------------------
; normal mode
[State 0]
	type = varset
	triggerall = time = 0
	trigger1 = Root,NumPartner = 0
	var(22) = 1;Ifelse(!(Root,PalNo%3), 3, Root,PalNo%3)只保留了SNK模式

; team mode
[State 0]
	type = varset
	triggerall = time = 0
	trigger1 = Root,NumPartner
	trigger1 = Root,ID < Partner,ID
 	trigger2 = IsHelper(90901)
	var(22) = 4

;------------------------------
[State 0, is red life];只剩下四分之一血时
	type = varset
	trigger1 = var(22) = 1 && !var(4)
	trigger1 = var(1) <= var(10)/4
	var(4) = 1
	IgnoreHitPause = 1

[State 0, is red life];只剩下四分之一血时
	type = varset
	trigger1 = var(22) = 1 && !var(4)
	trigger1 = var(1) > var(10)/4
	var(4) = 0
	IgnoreHitPause = 1
;---------------------------------------

;==============================================================
;(GUARD CRUSH)
;==============================================================
[State 0]
	type = varset
	triggerall = var(35)
	trigger1 = !var(36)
	trigger2 = var(15) = 0
	trigger2 = var(36) && (Root,MoveType = H)
	trigger3 = var(15) = 1 && NumPartner
	trigger3 = var(36) && (Partner,MoveType = H)
	var(35) = 0

[State 0]
	type = varset
	triggerall = var(35) < 1
	trigger1 = NumEnemy
	trigger1 = Enemy,MoveType = H
	var(35) = 1

[State 0]
	type = varset
	triggerall = var(35) < 2
	trigger1 = var(15) = 0
	trigger1 = Root,StateNo = 190010
	trigger2 = var(15) = 1 && NumPartner
	trigger2 = Partner,StateNo = 190010
	var(35) = 2

[State 0]
	type = varadd
	triggerall = !var(12)
	trigger1 = var(15) = 0
	trigger1 = Root,StateNo = 150 || Root,StateNo = 152 ;|| Root,StateNo = 154 ;air
	trigger1 = Root,Time = 1
	var(36) = 1 + (Root,GetHitVar(Damage) + Root,GetHitVar(HitShakeTime))/20

;(Partner)
[State 0]
	type = varadd
	triggerall = !var(12)
	trigger1 = var(15) = 1 && NumPartner
	trigger1 = Partner,StateNo = 150 || Partner,StateNo = 152 ;|| Partner,StateNo = 154 ;air
	trigger1 = Partner,Time = 1
	var(36) = 1 + (Partner,GetHitVar(Damage) + Partner,GetHitVar(HitShakeTime))/20

[State 0]
	type = varset
	trigger1 = var(36) > 50
	var(36) = 50

[State 0]
	type = varadd
	triggerall = var(35) && var(36)
	trigger1 = var(35) = 1 && GameTime%50 = 0
	trigger2 = var(35) = 2 && GameTime%5 = 0
	var(36) = -1

[State 0]
	type = varset
	triggerall = var(36)
	trigger1 = var(15) = 0
	trigger1 = Root,StateNo = 190010
	trigger2 = var(15) = 1 && NumPartner
	trigger2 = Partner,StateNo = 190010
	var(36) = var(36) / 2
;-------------------------------------------------------------
[State 0, GCB]
	type = RemoveExplod
	triggerall = NumExplod(493000)
	trigger1 = !var(40)
	trigger2 = var(37) != var(36)
;--;	trigger3 = var(35) || Root,StateNo = 190010       
	ID = 493000
	IgnoreHitPause = 1

; 防御巴的底
[State 0, GuardBar-Frame2]
	type = Explod
	triggerall = NumExplod(490000) && NumExplod(490100)
	triggerall = NumExplod(493000) < 5
	trigger1 = var(40)
	ID = 493000
	anim = F211111
	sprpriority = 999
	postype = Left
	pos =  Ifelse(TeamSide = 1, 309, 120), var(32)+9
	facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	IgnoreHitPause = 1
                 trans = add

[State 0, GuardBar-1];防御槽能量
	type = Explod
	triggerall = NumExplod(490000) && NumExplod(490100)
	triggerall = NumExplod(493000) < 2
	trigger1 = var(40)
	ID = 493000
	Anim = F210000
	Sprpriority = 9999
	Postype = Left
	pos = Ifelse(TeamSide = 1, 89+var(36),290.5), var(32) + 59
	scale = Ifelse((var(36) = [1, 50]), 50-var(36), 50), 1.1
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	bindtime = -1
	ownpal = 1
	ontop = 1
	IgnoreHitPause = 1

[State 0, GuardBar-2]
	type = Explod
	triggerall = NumExplod(490000) && NumExplod(490100)
	triggerall = NumExplod(493000) < 3
	trigger1 = var(40)
	ID = 493000
	anim = F210005
	sprpriority = 9999
	postype = Left
	pos = Ifelse(TeamSide = 1, 92 + var(36), 178 + 50 - var(36)), var(32) + 12
	Facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	IgnoreHitPause = 1

; 防御巴的外框
[State 0, GuardBar-Frame2]
	type = Explod
	triggerall = NumExplod(490000) && NumExplod(490100)
	triggerall = NumExplod(493000) < 4
	trigger1 = var(40)
	ID = 493000
	anim = F211011 + (var(36)>=40)
	sprpriority = 99999
	postype = Left
	pos = Ifelse(TeamSide = 1, 309, 120), var(32)+9
	facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	IgnoreHitPause = 1

; 字
[State 0, GuardBar-Frame2]
	type = Explod
	triggerall = NumExplod(490000) && NumExplod(490100)
	triggerall = NumExplod(493000) < 5
	trigger1 = var(40)
	ID = 493000
	anim = F300260
	sprpriority = 999999
	postype = Left
	pos =  156, 21.5
	facing = 1
	scale = .5, .5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	IgnoreHitPause = 1

; memo guardpoint
[State 0]
	type = varset
	trigger1 = var(37) != var(36)
	var(37) = var(36)

;==============================================================
; (life bar) [ID: 490###]
;==============================================================
; using var(0) to keeping heigh fps.
[State 0]
	type = RemoveExplod
	trigger1 = var(0) != var(1)
	trigger2 = !var(40)
	trigger3 = var(15) = 0
	trigger3 = var(2) != var(1)
	trigger3 = Root,MoveType != H || Root,Alive = 0 || RoundState != 2
	trigger4 = var(15) = 1
	trigger4 = NumPartner
	trigger4 = var(2) != var(1)
	trigger4 = Partner,MoveType != H || Partner,Alive = 0 || RoundState != 2
	ID = 490000
	IgnoreHitPause = 1

[State 0]
type = RemoveExplod
trigger1 = NumExplod(490100)
trigger1 = !NumExplod(490000)
ID = 490100
ignorehitpause = 1

[State 0]
type = RemoveExplod
trigger1 = NumExplod(490200)
trigger1 = !NumExplod(490000)
ID = 490200
ignorehitpause = 1

[State 0]
type = RemoveExplod
trigger1 = NumExplod(490600)
trigger1 = !NumExplod(490000)
ID = 490600
ignorehitpause = 1

[state -2, BAR 1];血l底
type = Explod
triggerall = RoundState <= 2
trigger1 = numexplod(490050) = 0
anim = F300100
scale = 0.5, 0.5
postype = Left
pos = ifelse(TeamSide=1,191,235.5),20
ownpal = 1
;ontop = 1
sprpriority = 1000
bindtime = -1
removetime = -1
ignorehitpause = 1
facing = ifelse(TeamSide=1,1,-1)
ID = 490050

[state -2, BAR 1]
type = Explod
triggerall = RoundState <= 2
trigger1 = ifelse(enemynear,var(17)&&enemynear,name = "Lin",NumExplod(820) = 0,ifelse(root,Life > Root,LifeMax/4,ifelse(root,Life > Root,LifeMax/2,NumExplod(830) = 0,NumExplod(800) = 0),NumExplod(810) = 0))
anim = Fifelse(enemynear,var(17)&&enemynear,name = "Lin",300330,ifelse(root,Life > Root,LifeMax/4,ifelse(root,Life > Root,LifeMax/2,300320,300300),300310))
scale = 0.5, 0.5
postype = Left
pos = ifelse(TeamSide=1,191,235.5),20
ownpal = 1
ontop = 1
sprpriority = 1500
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
facing = ifelse(TeamSide=1,1,-1)
ID = ifelse(enemynear,var(17)&&enemynear,name = "Lin",820,ifelse(root,Life > Root,LifeMax/4,ifelse(root,Life > Root,LifeMax/2,830,800),810))

[State 0, Explod]
type = Explod
triggerall = NumPartner !=0
triggerall = RoundState <= 2
trigger1 = ifelse(enemynear,var(17)&&enemynear,name = "Lin",NumExplod(821) = 0,ifelse(partner,Life > Root,LifeMax/4,ifelse(partner,Life > Root,LifeMax/2,NumExplod(831) = 0,NumExplod(801) = 0),NumExplod(811) = 0))
anim = Fifelse(enemynear,var(17)&&enemynear,name = "Lin",300330,ifelse(partner,Life >Root,LifeMax/4,ifelse(partner,Life > Root,LifeMax/2,300320,300300),300310))
pos = ifelse(TeamSide=1,191,235.5),25
postype = Left
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 1500
facing = ifelse(TeamSide=1,1,-1)
ownpal = 1
scale = 0.5,0.5
ontop = 1
ID = ifelse(enemynear,var(17)&&enemynear,name = "Lin",821,ifelse(partner,Life >Root,LifeMax/4,ifelse(partner,Life > Root,LifeMax/2,831,801),811))

;-------------------------------------------
[State -2, BAR 1 Explod Scale Reset]
type = ModifyExplod
triggerAll = RoundState = 2
trigger1 = ifelse(enemynear,var(17)&&enemynear,name = "Lin",NumExplod(820) != 0,ifelse(root,Life > Root,LifeMax/4,ifelse(root,Life > Root,LifeMax/2,NumExplod(830) != 0,NumExplod(800) != 0),NumExplod(810) != 0))
ignorehitpause = 1
ID = ifelse(enemynear,var(17)&&enemynear,name = "Lin",820,ifelse(root,Life > Root,LifeMax/4,ifelse(root,Life > Root,LifeMax/2,830,800),810))
scale = (root,Life/(Root,LifeMax/100))*0.005,  ifelse(NumPartner =0,0.5,0.25)

[State 2090, 7]
type = ModifyExplod
triggerall = NumPartner !=0
triggerAll = RoundState = 2
trigger1 = ifelse(enemynear,var(17)&&enemynear,name = "Lin",NumExplod(821) != 0,ifelse(partner,Life > Root,LifeMax/4,ifelse(partner,Life > Root,LifeMax/2,NumExplod(831) != 0,NumExplod(801) != 0),NumExplod(811) != 0))
ID = ifelse(enemynear,var(17)&&enemynear,name = "Lin",821,ifelse(partner,Life >Root,LifeMax/4,ifelse(partner,Life > Root,LifeMax/2,831,801),811))
scale = (partner,Life /(Root,LifeMax/100))*0.005, 0.25

;-------------------------------------------

[State 0, LifeBarWindowFrame] ;血l外^
type = Explod
triggerall = RoundState <= 2
triggerall = NumPartner =0
trigger1 = numexplod(490100) = 0
trigger1 = TeamSide=1
trigger1 = var(40)
ID = 490100
anim = F300200
sprpriority = 1600
postype = Left
Pos = 156, 21.5
removetime = -1
supermovetime = 999999999
pausemovetime = 999999999
scale = 0.5, 0.5
facing = 1
bindtime = -1
ownpal = 1
ontop = 1
ignorehitpause = 1

[State 0, LifeBarWindowFrame] ;血l外^
type = Explod
triggerall = RoundState <= 2
triggerall = NumPartner =0
trigger1 = numexplod(490100) = 0
trigger1 = TeamSide=2
trigger1 = var(40)
ID = 490100
anim = F300210
sprpriority = 1600
postype = right
Pos =  -156, 21.5
removetime = -1
supermovetime = 999999999
pausemovetime = 999999999
scale = 0.5, 0.5
facing = -1
bindtime = -1
ownpal = 1
ontop = 1
ignorehitpause = 1

[State 0, LifeBarWindowFrame] ;血l外^
type = Explod
triggerall = RoundState <= 2
triggerall = NumPartner !=0
trigger1 = numexplod(490100) = 0
trigger1 = TeamSide=1
trigger1 = var(40)
ID = 490100
anim = F300220
sprpriority = 1600
postype = Left
Pos = 156, 21.5
removetime = -1
supermovetime = 999999999
pausemovetime = 999999999
scale = 0.5, 0.5
facing = 1
bindtime = -1
ownpal = 1
ontop = 1
ignorehitpause = 1

[State 0, LifeBarWindowFrame] ;血l外^
type = Explod
triggerall = RoundState <= 2
triggerall = NumPartner !=0
trigger1 = numexplod(490100) = 0
trigger1 = TeamSide=2
trigger1 = var(40)
ID = 490100
anim = F300230
sprpriority = 1600
postype = right
Pos =  -156, 21.5
removetime = -1
supermovetime = 999999999
pausemovetime = 999999999
scale = 0.5, 0.5
facing = -1
bindtime = -1
ownpal = 1
ontop = 1
ignorehitpause = 1

[state -2, BAR 1 Clean];青色
type = RemoveExplod
triggerAll = NumExplod(800) != 0
trigger1 = root,Life <= Root,LifeMax/4
trigger2 = root,Life = 0
trigger3 = RoundState != 2
trigger4 = enemynear,var(17)&&enemynear,name = "Lin"
trigger5 = root,Life > Root,LifeMax/2
ignorehitpause = 1
ID = 800

[state -2, BAR 1 Clean];红色
type = RemoveExplod
triggerAll = NumExplod(810) != 0
trigger1 = root,Life > Root,LifeMax/4
trigger2 = root,Life = 0
trigger3 = RoundState != 2
trigger4 = enemynear,var(17)&&enemynear,name = "Lin"
ignorehitpause = 1
ID = 810

[state -2, BAR 1 Clean];青色
type = RemoveExplod
triggerAll = NumExplod(801) != 0
trigger1 = partner,Life<= Root,LifeMax/4
trigger2 = partner,Life = 0
trigger3 = RoundState != 2
trigger4 = enemynear,var(17)&&enemynear,name = "Lin"
trigger5 = partner,Life > Root,LifeMax/2
ignorehitpause = 1
ID = 801

[state -2, BAR 1 Clean];红色
type = RemoveExplod
triggerAll = NumExplod(811) != 0
trigger1 = partner,Life>Root,LifeMax/4
trigger2 = partner,Life = 0
trigger3 = RoundState != 2
trigger4 = enemynear,var(17)&&enemynear,name = "Lin"
ignorehitpause = 1
ID = 811

[state -2, BAR 1 Clean];紫色
type = RemoveExplod
triggerAll = NumExplod(820) != 0
trigger1 = root,Life = 0
trigger2 = RoundState != 2
trigger3 = enemynear,var(17)=0&&enemynear,name = "Lin"
trigger4 = root,Life = Root,LifeMax
ignorehitpause = 1
ID = 820

[state -2, BAR 1 Clean];紫色
type = RemoveExplod
triggerAll = NumExplod(821) != 0
trigger1 = partner,Life = 0
trigger2 = RoundState != 2
trigger3 = enemynear,var(17)=0&&enemynear,name = "Lin"
trigger4 = partner,Life = Root,LifeMax
ignorehitpause = 1
ID = 821

[state -2, BAR 1 Clean];绿色
type = RemoveExplod
triggerAll = NumExplod(830) != 0
trigger1 = root,Life <= Root,LifeMax/2
trigger2 = RoundState != 2
trigger3 = enemynear,var(17)&&enemynear,name = "Lin"
ignorehitpause = 1
ID = 830

[state -2, BAR 1 Clean];绿色
type = RemoveExplod
triggerAll = NumExplod(831) != 0
trigger1 = partner,Life <= Root,LifeMax/2
trigger2 = RoundState != 2
trigger3 = enemynear,var(17)&&enemynear,name = "Lin"
ignorehitpause = 1
ID = 831

[State 5250, 1];DANGER危险字幕
type = Explod
triggerall = var(22) = 1 && RoundState = 2
trigger1 = var(4) && (var(0) > var(10)/4)
ID = 401000
anim = f2522
sprpriority = 99999
postype = Left
pos = Ifelse(TeamSide = 1, 30, 400), 210 - (NumExplod(400000)+ NumExplod(402000)+ NumExplod(401000) + NumExplod(1195500)) * 10
scale = .5,.5
ownpal = 1
ontop = 1
bindtime = -1
Supermovetime = 999999999
Pausemovetime = 999999999
IgnoreHitPause = 1
persistent = 0

;--------------------------------------------------------------
;防御BAR的代码
;--------------------------------------------------------------
[State 0, LifeBarshadow]
	type = Explod
	triggerall = !NumExplod(490000)
	trigger1 = var(40)
	ID = 490000
	anim = F200100 + var(22)
	sprpriority = -1
	postype = Left
	pos = Ifelse(TeamSide = 1, 160, 159), var(32)
	scale = 0.5, 0.5
	facing = Ifelse(TeamSide = 1, 1, -1)
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	bindtime = -1
	ownpal = 1
	ontop = 1
	IgnoreHitPause = 1
;---------------------------------------;Og
[State 0, LifeBarWindowFrame]
	type = Explod
	triggerall = !NumExplod(490100)
	trigger1 = var(40)
	ID = 490100
	anim = F200200 + TeamSide - 1
	sprpriority = -1
	postype = Left
	pos = Ifelse(TeamSide = 1, 160, 160), var(32)
;;	facing = Ifelse(TeamSide = 1, 1, -1)
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	IgnoreHitPause = 1
;---------------------------------------; Cg
[State 0]
	type = Explod
	triggerall = !NumExplod(490500)
	trigger1 = var(0) > var(1)
	trigger1 = var(40)
	ID = 490500
	anim = F200500
	sprpriority = 2
	postype = Left
	pos = Ifelse(TeamSide=1,141,179) + Ifelse(TeamSide=1,-1,1) * Floor(var(1)/1.00/var(10)*108), var(32) + 1
	facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	supermovetime = 999999999
	pausemovetime = 999999999
	IgnoreHitPause = 1

[State 0]
	type = Explod
	triggerall = !NumExplod(490510)
	trigger1 = var(40)
	ID = 490510
	anim = F200510
	sprpriority = 3
	postype = Left
	pos = Ifelse(TeamSide = 1, 160, 160), var(32)
	facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	IgnoreHitPause = 1
;--------------------------------------------------------------
; big damage sound
;--------------------------------------------------------------
[State 0]
type = PlaySnd
triggerall = RoundState = 2
triggerall = var(0) - var(1) > 300	;more then 300 damage!!!
trigger1 = var(15) = 0
trigger1 = Root,MoveType = H
trigger1 = Root,GetHitVar(Guarded) = 0
trigger2 = var(15) = 1 && NumPartner
trigger2 = Partner,MoveType = H
trigger2 = Partner,GetHitVar(Guarded) = 0
value = F10100, 2
channel = 20
IgnoreHitPause = 1

[State 9000, 5]
type = Explod
triggerall = RoundState = 2
triggerall = var(0) - var(1) > 300	;more then 300 damage!!!
trigger1 = var(15) = 0
trigger1 = Root,MoveType = H
trigger1 = Root,GetHitVar(Guarded) = 0
trigger2 = var(15) = 1 && NumPartner
trigger2 = Partner,MoveType = H
trigger2 = Partner,GetHitVar(Guarded) = 0
anim = f6020
scale = 0.5,0.5
pos = 215,70
postype = left
bindtime = -1
sprpriority = 99999999999999999999
facing = 1
ontop = 0
ownpal = 1
ignorehitpause = 1 

;新追加的CRUSH火花
[State 183, 3]
type = EnvShake
triggerall = RoundState = 2
triggerall = var(0) - var(1) > 300	
trigger1 = var(15) = 0
trigger1 = Root,MoveType = H
trigger1 = Root,GetHitVar(Guarded) = 0
trigger2 = var(15) = 1 && NumPartner
trigger2 = Partner,MoveType = H
trigger2 = Partner,GetHitVar(Guarded) = 0
ignorehitpause = 1
freq = 160
ampl = 6
phase = 160
time = 30

[State -2, Sp Finish]
type = Explod
triggerall = RoundState = 2
triggerall = var(0) - var(1) > 300	
trigger1 = var(15) = 0
trigger1 = Root,MoveType = H
trigger1 = Root,GetHitVar(Guarded) = 0
trigger2 = var(15) = 1 && NumPartner
trigger2 = Partner,MoveType = H
trigger2 = Partner,GetHitVar(Guarded) = 0
anim = f9910
removetime = -2
sprpriority = -1
pos = 0,0
postype = left
bindtime = -1
ignorehitpause = 1
ownpal = 1
;--------------------------------------------------------------
; memo life to var
[State 0]
	type = varset
	trigger1 = var(0) != var(1)
	var(0) = var(1)
	IgnoreHitPause = 1

; memo damage to var
[State 0]
	type = varset
	triggerall = var(2) != var(1)
	trigger1 = var(15) = 0
	trigger1 = Root,MoveType != H
	trigger2 = var(15) = 1 && NumPartner
	trigger2 = Partner,MoveType != H
	var(2) = var(1)
	IgnoreHitPause = 1

;==============================================================
;(power bar) [ID: 492###]
;==============================================================
; using var(22) to keep heigh fps.
; type 1 : sysvar(4) = 1 and Team mode
; type 2 : sysvar(4) = 2
; type 3 : sysvar(4) = 3
; type 4 : sysvar(4) = 4
[State 0]
	type = varset
	trigger1 = var(30) != Root,Const(Data.Power)
	var(30) = Root,Const(Data.Power)
	IgnoreHitPause = 1

[State 0]
	type = poweradd
	trigger1 = time = 0 && var(48) != 2
	trigger1 = RoundNo = 1 && Power < 1000
	value = 1000

;--------------------------------------------------------------
; memo power to var
[State 0]
	type = varset
	triggerall = RoundState = 2
	trigger1 = var(20) - Power != 0
	var(20) = Power
	IgnoreHitPause = 1

;--------------------------------------------------------------
;powerbar能量槽
;--------------------------------------------------------------

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = numexplod(27501) = 0
anim = f27501
scale = 0.5,0.5
id = 27501
postype = left
bindtime = -1
pos = 33,223.5
sprpriority = 100
removetime = -1
ownpal = 1
ontop = 1
trans = AddAlpha
alpha = 156,256
ignorehitpause = 1

[state -2,a];MAX
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = numexplod(27501) = 0
anim = f27501
scale = 0.5,0.5
id = 27501
postype = right
bindtime = -1
pos = -33,223.5
sprpriority = 100
removetime = -1
ownpal = 1
facing = -1
ontop = 1
trans = AddAlpha
alpha = 156,256
ignorehitpause = 1

[state a]
type = removeexplod
trigger1 = RoundState > 2
id = 27501

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

;---------------------[Q[W]

[state -2,a];Q[W0
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power >= 0
trigger1 = power < 1000
trigger1 = numexplod(27510) = 0
anim = f27510
scale = 0.5,0.5
id = 27510
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
ownpal = 1
ontop = 1

[state -2,a];Q[W0
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = power >= 0
trigger1 = power < 1000
trigger1 = numexplod(27510) = 0
anim = f27510
scale = 0.5,0.5
id = 27510
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
facing = -1
ownpal = 1
ontop = 1

[state -2,a];Q[W1
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power >= 1000
trigger1 = power < 2000
trigger1 = numexplod(27511) = 0
anim = f27511
scale = 0.5,0.5
id = 27511
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
ownpal = 1
ontop = 1

[state -2,a];Q[W1
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = power >= 1000
trigger1 = power < 2000
trigger1 = numexplod(27511) = 0
anim = f27511
scale = 0.5,0.5
id = 27511
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
facing = -1
ownpal = 1
ontop = 1

[state -2,a];Q[W2
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power >= 2000
trigger1 = power < 3000
trigger1 = numexplod(27512) = 0
anim = f27512
scale = 0.5,0.5
id = 27512
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
ownpal = 1
ontop = 1

[state -2,a];Q[W2
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = power >= 2000
trigger1 = power < 3000
trigger1 = numexplod(27512) = 0
anim = f27512
scale = 0.5,0.5
id = 27512
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
facing = -1
ownpal = 1
ontop = 1

[state -2,a];Q[W3
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power >= 3000
trigger1 = power < 4000
trigger1 = numexplod(27513) = 0
anim = f27513
scale = 0.5,0.5
id = 27513
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
ownpal = 1
ontop = 1

[state -2,a];Q[W3
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = power >= 3000
trigger1 = power < 4000
trigger1 = numexplod(27513) = 0
anim = f27513
scale = 0.5,0.5
id = 27513
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
facing = -1
ownpal = 1
ontop = 1

[state -2,a];Q[W4
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power >= 4000
trigger1 = power < 5000
trigger1 = numexplod(27514) = 0
anim = f27514
scale = 0.5,0.5
id = 27514
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
ownpal = 1
ontop = 1

[state -2,a];Q[W4
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = power >= 4000
trigger1 = power < 5000
trigger1 = numexplod(27514) = 0
anim = f27514
scale = 0.5,0.5
id = 27514
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
facing = -1
ownpal = 1
ontop = 1

[state -2,a];Q[W5
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power >= 5000
trigger1 = power < 6000
trigger1 = numexplod(27515) = 0
anim = f27515
scale = 0.5,0.5
id = 27515
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
ownpal = 1
ontop = 1
ignorehitpause = 1

[state -2,a];Q[W5
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = power >= 5000
trigger1 = power < 6000
trigger1 = numexplod(27515) = 0
anim = f27515
scale = 0.5,0.5
id = 27515
postype = back
bindtime = -1
pos = 23,224
sprpriority = 100
facing = -1
ownpal = 1
ontop = 1
ignorehitpause = 1

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =1
trigger1 = power >= 1000
trigger1 = power < 2000
trigger1 = numexplod(27611) = 0
anim = f27611
id = 27611
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =-1
trigger1 = power >= 1000
trigger1 = power < 2000
trigger1 = numexplod(27611) = 0
anim = f27611
id = 27611
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
facing = -1
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =1
trigger1 = power >= 1000
trigger1 = power < 2000
trigger1 = numexplod(27711) = 0
anim = f27711
id = 27711
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =-1
trigger1 = power >= 1000
trigger1 = power < 2000
trigger1 = numexplod(27711) = 0
anim = f27711
id = 27711
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
facing = -1
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =1
trigger1 = power >= 2000
trigger1 = power < 3000
trigger1 = numexplod(27612) = 0
anim = f27612
id = 27612
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =-1
trigger1 = power >= 2000
trigger1 = power < 3000
trigger1 = numexplod(27612) = 0
anim = f27612
id = 27612
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
facing = -1
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =1
trigger1 = power >= 2000
trigger1 = power < 3000
trigger1 = numexplod(27712) = 0
anim = f27712
id = 27712
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =-1
trigger1 = power >= 2000
trigger1 = power < 3000
trigger1 = numexplod(27712) = 0
anim = f27712
id = 27712
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
facing = -1
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =1
trigger1 = power >= 3000
trigger1 = power < 4000
trigger1 = numexplod(27613) = 0
anim = f27613
id = 27613
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =-1
trigger1 = power >= 3000
trigger1 = power < 4000
trigger1 = numexplod(27613) = 0
anim = f27613
id = 27613
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
facing = -1
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =1
trigger1 = power >= 3000
trigger1 = power < 4000
trigger1 = numexplod(27713) = 0
anim = f27713
id = 27713
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =-1
trigger1 = power >= 3000
trigger1 = power < 4000
trigger1 = numexplod(27713) = 0
anim = f27713
id = 27713
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
facing = -1
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =1
trigger1 = power >= 4000
trigger1 = power < 5000
trigger1 = numexplod(27614) = 0
anim = f27614
id = 27614
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =-1
trigger1 = power >= 4000
trigger1 = power < 5000
trigger1 = numexplod(27614) = 0
anim = f27614
id = 27614
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
facing = -1
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =1
trigger1 = power >= 4000
trigger1 = power < 5000
trigger1 = numexplod(27714) = 0
anim = f27714
id = 27714
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing =-1
trigger1 = power >= 4000
trigger1 = power < 5000
trigger1 = numexplod(27714) = 0
anim = f27714
id = 27714
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
facing = -1
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power >= 5000
trigger1 = numexplod(27615) = 0
anim = f27615
id = 27615
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = power >= 5000
trigger1 = numexplod(27615) = 0
anim = f27615
id = 27615
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
facing = -1
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power >= 5000
trigger1 = numexplod(27715) = 0
anim = f27715
id = 27715
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = power >= 5000
trigger1 = numexplod(27715) = 0
anim = f27715
id = 27715
postype = back
bindtime = -1
pos = 23,224
sprpriority = 110
facing = -1
ownpal = 1
ontop = 1
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[state a]
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 1000
id = 27510

[state a];1
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 2000
trigger3 = power < 1000
id = 27511

[state a];1
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 2000
trigger3 = power < 1000
id = 27611

[state a];1
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 2000
trigger3 = power < 1000
id = 27711

[state a];2
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 3000
trigger3 = power < 2000
id = 27512

[state a];2
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 3000
trigger3 = power < 2000
id = 27612

[state a];2
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 3000
trigger3 = power < 2000
id = 27712

[state a];3
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 4000
trigger3 = power < 3000
id = 27513

[state a];3
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 4000
trigger3 = power < 3000
id = 27613

[state a];3
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 4000
trigger3 = power < 3000
id = 27713

[state a];4
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 5000
trigger3 = power < 4000
id = 27514

[state a];4
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 5000
trigger3 = power < 4000
id = 27614

[state a];4
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 5000
trigger3 = power < 4000
id = 27714

[state a];5
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power >= 6000
trigger3 = power < 5000
id = 27515

[state a]
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power < 5000
trigger3 = matchover
id = 27615

[state a]
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power < 5000
trigger3 = matchover
id = 27715

[state -2,a];Q[W
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power < 5000
anim = f27520+floor(power*0.001)
scale = 0.5,0.5
id = 27520
postype = left
bindtime = -1
pos = 33,223.5
sprpriority = 99
ownpal = 1
ontop = 1
ignorehitpause = 1

[state -2,a];Q[W
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = power < 5000
anim = f27520+ floor(power*0.001)
scale = 0.5,0.5
id = 27520
postype = right
bindtime = -1
pos = -33,223.5
sprpriority = 99
ownpal = 1
facing = -1
ontop = 1
ignorehitpause = 1

[state a]
type = removeexplod
trigger1 = RoundState > 2
id = 27520

[state a]
type = ModifyExplod
trigger1 = 1
ID = 27520
scale = (power*0.001 - floor(power*0.001))*0.5,0.5

[state -2,a];MAX
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power >= 5000
trigger1 = numexplod(27525) = 0
anim = f27525
scale = 0.31,0.33
id = 27525
postype = left
bindtime = -1
pos = 33.5,223.5
sprpriority = 100
removetime = -1
ownpal = 1
ontop = 1

[state -2,a];MAX
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = power >= 5000
trigger1 = numexplod(27525) = 0
anim = f27525
scale = 0.31,0.33
id = 27525
postype = right
bindtime = -1
pos = -33.5,223.5
sprpriority = 100
removetime = -1
ownpal = 1
facing = -1
ontop = 1

[state -2,a];MAX
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power >= 5000
trigger1 = numexplod(27526) = 0
anim = f27526
scale = .66,.72
id = 27526
postype = left
bindtime = -1
pos = 33,221
sprpriority = 100
removetime = -1
ownpal = 1
ontop = 1

[state -2,a];MAX
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
;trigger1 = Facing = -1
trigger1 = power >= 5000
trigger1 = numexplod(27526) = 0
anim = f27526
scale = .66,.72
id = 27526
postype = right
bindtime = -1
pos = -33,221
sprpriority = 100
removetime = -1
ownpal = 1
facing = -1
ontop = 1

[state -2,a];MAX
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = power >= 5000
trigger1 = numexplod(27527) = 0
anim = f27527
scale = .26,.26
id = 27527
postype = back
bindtime = -1
pos = 70.5,223.2
sprpriority = 100
removetime = -1
ownpal = 1
ontop = 1

[state -2,a];MAX
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
;trigger1 = Facing = 1
trigger1 = power >= 5000
trigger1 = numexplod(27527) = 0
anim = f27527
scale = .26,.26
id = 27527
postype = back
bindtime = -1
pos = 70.5,223.2
sprpriority = 100
removetime = -1
ownpal = 1
facing = -1
ontop = 1

[state -2,a]
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = 1
trigger1 = numexplod(27500) = 0
anim = f27500
scale = 0.5,0.5
id = 27500
postype = left
bindtime = -1
pos = 58,223.5
sprpriority = 100
removetime = -1
ownpal = 1
ontop = 1
ignorehitpause = 1

[state -2,a];MAX
type = Explod
triggerall = var(40)
triggerall = RoundState <= 2
trigger1 = Facing = -1
trigger1 = numexplod(27500) = 0
anim = f27500
scale = 0.5,0.5
id = 27500
postype = right
bindtime = -1
pos = -58,223.5
sprpriority = 100
removetime = -1
ownpal = 1
facing = -1
ontop = 1
ignorehitpause = 1

[state a]
type = removeexplod
trigger1 = RoundState > 2
id = 27500

[state a]
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power < 5000
id = 27525

[state a]
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power < 5000
id = 27526

[state a]
type = removeexplod
trigger1 = RoundState > 2
trigger2 = power < 5000
id = 27527

;==============================================================
; long jump
;==============================================================
[State 0]
	type = varset
	triggerall = var(44) < 2
	triggerall = var(15) = 0
	triggerall = Root,StateType != A
	trigger1 = Root,Command = "holddown"
	trigger2 = Root,Command = "holddown" && (Root,Command = "holdfwd" || Root,Command = "holdback")
	var(44) = 16
	IgnoreHitPause = 1
[State 0]
	type = varset
	triggerall = var(44) < 2
	triggerall = var(15) = 1 && NumPartner
	triggerall = Partner,StateType != A
	trigger1 = Partner,Command = "holddown"
	trigger2 = Partner,Command = "holddown" && (Partner,Command = "holdfwd" || Partner,Command = "holdback")
	var(44) = 16
	IgnoreHitPause = 1

[State 0]
	type = varadd
	trigger1 = var(44) > 0
	var(44) = -1

;==============================================================
; (State 5210recovery!)
;==============================================================
; recovery message
[State 0];天蓝色底板
	type = null;Explod
	triggerall = RoundState = 2
	triggerall = !NumExplod(402001)
	trigger1 = var(15) = 0
	trigger1 = Root,StateNo = 5210 && Root,Time = 1 ;air rec
	trigger2 = var(15) = 1 && NumPartner
	trigger2 = Partner,StateNo = 5210 && Partner,Time = 1 ;air rec
	ID = 402001
	anim = F400007
	sprpriority = -1
	postype = Left
	pos = Ifelse(TeamSide = 1, 65, 255), 100 + (NumExplod(400000) + NumExplod(401000) + NumExplod(1195500)) * 14
	facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, 0.5
	ownpal = 1
	ontop = 1
	bindtime = -1
	Supermovetime = 999999999
	Pausemovetime = 999999999
[State 0]
	type = Explod
	triggerall = RoundState = 2
	triggerall = !NumExplod(402000)
	trigger1 = var(15) = 0
	trigger1 = Root,StateNo = 5210 && Root,Time = 1 ;air rec
	trigger2 = var(15) = 1 && NumPartner
	trigger2 = Partner,StateNo = 5210 && Partner,Time = 1 ;air rec
	ID = 402000
	anim = F402000 + (TeamSide-1)
	sprpriority = 5
	postype = left
	pos = Ifelse(TeamSide = 1, 45, 385), 205 - (NumExplod(400000) + NumExplod(401000) + NumExplod(1195500)) * 10
	scale = 0.5, 0.5
	ownpal = 1
	ontop = 1
	bindtime = -1
	Supermovetime = 999999999
	Pausemovetime = 999999999

;==============================================================
; FA
;==============================================================
; var(48)
[State 0]
	type = varset
	triggerall = RoundState = 2
	triggerall = var(48) = 0
	trigger1 = NumEnemy
	trigger1 = Enemy,sysvar(4)
	trigger1 = Enemy,NumExplod(920000)
	trigger2 = Root,sysvar(4)
	trigger2 = Root,NumExplod(920000)
	var(48) = -9
	IgnoreHitPause = 1

[State 0]
	type = varset
	triggerall = RoundState = 2
	triggerall = var(48) = 0
	trigger1 = Root,MoveType = H && Root,GetHitVar(Guarded) = 0
	trigger2 = NumPartner
	trigger2 = Partner,MoveType = H && Partner,GetHitVar(Guarded) = 0
	var(48) = -1
	IgnoreHitPause = 1
; enemy
[State 0]
	type = varset
	triggerall = RoundState = 2
	triggerall = var(48) = 0
	trigger1 = NumEnemy
	trigger1 = Enemy,MoveType = H && (Enemy,GetHitVar(Guarded)) = 0
	var(48) = 1
	IgnoreHitPause = 1

; first attact sound
[State 0, fa sound]
	type = PlaySnd
	trigger1 = RoundState = 2
	trigger1 = var(48) = 1
	value = F10100, 1
	channel = 20

; first attack get bonus
[State 0]
	type = varadd
	trigger1 = RoundState = 2
	trigger1 = var(48) = 1
	var(57) = 100

;-----------------------
; first attact message
[State 0];红色底板
	type = null;Explod
	trigger1 = RoundState = 2
	trigger1 = var(48) = 1 && !NumExplod(400001)
	ID = 400001
	anim = F400005
	sprpriority = -1
	postype = Left
	pos = Ifelse(TeamSide = 1, 65, 255), 100 + (NumExplod(401000) + NumExplod(1195500)) * 14
	facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, 0.5
	ownpal = 1
	ontop = 1
	bindtime = -1
	Supermovetime = 999999999
	Pausemovetime = 999999999
[State 0]
	type = Explod
	trigger1 = RoundState = 2
	trigger1 = var(48) = 1 && !NumExplod(400000)
	ID = 400000
	anim = F400000 + (TeamSide-1)
	sprpriority = 1
	postype = Left
	pos = Ifelse(TeamSide = 1, 55, 375), 205 + (NumExplod(401000) + NumExplod(1195500)) * 14
	scale = 0.5, 0.5
	ownpal = 1
	ontop = 1
	bindtime = -1
	Supermovetime = 999999999
	Pausemovetime = 999999999


; first attack var
[State 0]
	type = varset
	trigger1 = var(48) = 1
	var(48) = 2

; first attack icon
[State 0]
	type = Explod
	triggerall = !NumExplod(400010)
	trigger1 = var(40) ;display all bars
	trigger1 = var(48) = 2
	ID = 400010
	anim = F400010
	sprpriority = 2
	postype = Left
	pos = Ifelse(TeamSide = 1, 60, 367), var(32) - 11
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	scale = 0.5, 0.5
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999

; RemoveFA
[State 0]
	type = RemoveExplod
	trigger1 = NumExplod(400010)
	trigger1 = var(40) = 0
	ID = 400010

;--------------------------------------------------------------
;COUNTER
;--------------------------------------------------------------
;var(49)
; counter hit set
[State 0]
	type = varset
	triggerall = RoundState = 2
	triggerall = !var(49)
	triggerall = NumEnemy
;;;	triggerall = Enemy,NumHelper(90900) || Enemy,NumHelper(90901) || Enemy,NumHelper(90902)
	triggerall = Enemy,MoveType = A
	triggerall = Enemy,StateNo != 195500
	trigger1 = var(15) = 0
	trigger1 = Root,MoveType != A
	trigger2 = var(15) = 1 && NumPartner
	trigger2 = Partner,MoveType != A
	var(49) = 1
	IgnoreHitPause = 1

; counter hit
[State 0]
	type = varset
	triggerall = RoundState = 2
	triggerall = var(49) = 1
	triggerall = NumEnemy
;;;	triggerall = Enemy,NumHelper(90900) || Enemy,NumHelper(90901) || Enemy,NumHelper(90902)
	triggerall = Enemy,MoveType = H
	trigger1 = var(15) = 0
	trigger1 = Root,MoveHit
	trigger2 = var(15) = 1 && NumPartner
	trigger2 = Partner,MoveHit
	var(49) = 2
	IgnoreHitPause = 1

; sound of counter
[State 0]
	type = PlaySnd
	triggerall = RoundState = 2
	trigger1 = var(49) = 2 && !NumExplod(401000)
	value = F10200, 0
       volume = 250
	channel = 20
	IgnoreHitPause = 1

;-------------------
; get bonus - score
[State 0]
	type = VarAdd
	triggerall = var(51) = -1
	triggerall = RoundState = 2
	trigger1 = var(49) = 2 && !NumExplod(401000)
	var(57) = 110
	IgnoreHitPause = 1

; get bonus - ranking
[State 0]
	type = varadd
	triggerall = RoundState = 2
	trigger1 = var(49) = 2 && !NumExplod(401000)
	fvar(5) = 1
	IgnoreHitPause = 1

;-----------------------------

[State -2]
type = EnvColor
triggerall = RoundState = 2
;triggerall = !NumExplod(401002)
trigger1 = var(49) = 2
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 1

[State -2]
type = AssertSpecial
triggerall = RoundState = 2
trigger1 = var(49) = 2
flag = nojugglecheck

[State 0]
type = null;Explod
triggerall = RoundState = 2
trigger1 = var(49) = 2
anim = F20+(random&1);13+(random%4)
sprpriority = 45
postype = Left
pos = Floor(enemy,ScreenPos X + Const(Size.mid.Pos.X)), Floor(enemy,ScreenPos Y + Const(Size.mid.Pos.Y))
facing = facing;enemy,facing
velocity = 0,0
ownpal = 1
IgnoreHitPause = 1

[State 5100, EnvShake]
type = EnvShake
triggerall = RoundState = 2
trigger1 = var(49) = 2
;trigger1 = Time = 0
time = 20
ampl = 6
freq = 130

[State 0, Pause]
type = Pause
triggerall = RoundState = 2
trigger1 = var(49) = 2
;trigger1 = Time = 0
time = 2
movetime = 0

; counter hit message
[State 0];蓝色底板
	type = null;Explod
	triggerall = RoundState = 2
	triggerall = !NumExplod(401000)
	trigger1 = var(49) = 2
;;	trigger2 = Root,StateNo = 8200
;;	trigger3 = NumPartner
;;	trigger3 = Partner,StateNo = 8200
	ID = 401001
	anim = F400006
	sprpriority = -1
	postype = Left
	pos = Ifelse(TeamSide = 1, 65, 255), 100 + (NumExplod(400000) + NumExplod(1195500)) * 14
	facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, 0.5
	ownpal = 1
	ontop = 1
	bindtime = -1
	Supermovetime = 999999999
	Pausemovetime = 999999999
	IgnoreHitPause = 1
[State 0]
	type = Explod
	triggerall = RoundState = 2
	triggerall = !NumExplod(401000)
	trigger1 = var(49) = 2
;;	trigger2 = Root,StateNo = 8200
;;	trigger3 = NumPartner
;;	trigger3 = Partner,StateNo = 8200
	ID = 401000
	anim = F401000 + TeamSide - 1
	sprpriority = 2
	postype = Left
	pos = Ifelse(TeamSide = 1, 50, 407), 205 - (NumExplod(400000) + NumExplod(1195500)) * 10
	scale = 0.5, 0.5
	ownpal = 1
	ontop = 1
	bindtime = -1
	Supermovetime = 999999999
	Pausemovetime = 999999999
	IgnoreHitPause = 1


; counter hit reset
[State 0]
	type = varset
	triggerall = var(49)
	triggerall = NumEnemy
;;;	trigger1 = Enemy,NumHelper(90900) || Enemy,NumHelper(90901) || Enemy,NumHelper(90902)
	trigger1 = Enemy,MoveType != A
	trigger2 = Enemy,StateNo = 195500
	var(49) = 0
	IgnoreHitPause = 1
;--------------------------------------------------------------
; 无用 blocking/JD mark
;--------------------------------------------------------------
[State 0]
	type = RemoveExplod
	triggerall = RoundState = 2
	triggerall = NumExplod(1195501)
	trigger1 = Root,StateNo = 195500 && Root,Time = 1
	trigger2 = NumPartner
	trigger2 = Partner,StateNo = 195500 && Partner,Time = 1
	ID = 1195501
[State 0]
	type = RemoveExplod
	triggerall = RoundState = 2
	triggerall = NumExplod(1195500)
	trigger1 = Root,StateNo = 195500 && Root,Time = 1
	trigger2 = NumPartner
	trigger2 = Partner,StateNo = 195500 && Partner,Time = 1
	ID = 1195500

[State 0]
	type = Explod
	triggerall = RoundState = 2
	triggerall = !NumExplod(1195501)
	trigger1 = Root,StateNo = 195500 && Root,Time = 1
	trigger2 = NumPartner
	trigger2 = Partner,StateNo = 195500 && Partner,Time = 1
	ID = 1195501
	anim = F400006 - (var(22) = 3)
	sprpriority = -1
	postype = Left
	pos = Ifelse(TeamSide = 1, 65, 255), 100 ;;+ (NumExplod(400000) + NumExplod(401000)) * 14
	facing = Ifelse(TeamSide = 1, 1, -1)
	scale = 0.5, 0.5
	ownpal = 1
	ontop = 1
	bindtime = -1
	Supermovetime = 999999999
	Pausemovetime = 999999999
	IgnoreHitPause = 1
[State 0]
	type = Explod
	triggerall = RoundState = 2
	triggerall = !NumExplod(1195500)
	trigger1 = Root,StateNo = 195500 && Root,Time = 1
	trigger2 = NumPartner
	trigger2 = Partner,StateNo = 195500 && Partner,Time = 1
	ID = 1195500
	anim = F195500 + (TeamSide-1)*10 + (var(22)=3)*100 ;; + NumExplod(1195509)
	sprpriority = 2
	postype = Left
	pos = Ifelse(TeamSide = 1, 65, 255), 100 ;;+ (NumExplod(400000) + NumExplod(401000)) * 14
	scale = 0.5, 0.5
	ownpal = 1
	ontop = 1
	bindtime = -1
	Supermovetime = 999999999
	Pausemovetime = 999999999
	IgnoreHitPause = 1

;==============================================================
;打得多HITS的评分，原本 from CVS2
;==============================================================
; var(46)
; sound of rush hits
[State 0]
	type = VarSet
	triggerall = RoundState = 2 ;;&& Root,sysvar(4)
	triggerall = !var(46) || var(46) = 3
	trigger1 = var(15) = 0
	trigger1 = Root,MoveType = H && Root,GetHitVar(Guarded) = 0
	trigger1 = Root,StateNo != [120,155]
	trigger1 = (Root,GetHitVar(HitCount)) >= 5		;more then 5 hits
	var(46) = Ifelse((Root,GetHitVar(HitCount)) > 9, 4, 3)
	IgnoreHitPause = 1
[State 0]
	type = VarSet
	triggerall = RoundState = 2 ;;&& Root,sysvar(4)
	triggerall = !var(46) || var(46) = 3
	trigger1 = var(15) = 1 && NumPartner
	trigger1 = Partner,MoveType = H && Partner,GetHitVar(Guarded) = 0
	trigger1 = Partner,StateNo != [120,155]
	trigger1 = (Partner,GetHitVar(HitCount)) >= 5		;more then 5 hits
	var(46) = Ifelse((Partner,GetHitVar(HitCount)) > 9, 4, 3)
	IgnoreHitPause = 1

; system sound
[State 0]
	type = PlaySnd
	triggerall = RoundState = 2 ;;&& Root,sysvar(4)
	triggerall = var(46)
	trigger1 = var(15) = 0
	trigger1 = Root,MoveType != H 
	trigger2 = var(15) = 1 && NumPartner
	trigger2 = Partner,MoveType != H 
	value = F10100, var(46)
	channel = 20
	IgnoreHitPause = 1

[State 0]
	type = Explod
	triggerall = RoundState = 2 ;;&& Root,sysvar(4)
	triggerall = var(46) = 3
	trigger1 = var(15) = 0
	trigger1 = Root,MoveType != H 
	trigger2 = var(15) = 1 && NumPartner
	trigger2 = Partner,MoveType != H 
	anim = f6022
	sprpriority = -1
	postype = Left
pos = Ifelse(TeamSide = 2, 30, 400), 202 - (NumExplod(400000)+ NumExplod(402000)+ NumExplod(401000) + NumExplod(1195500)) * 10
	facing = 1
	scale = .5,.5
	ownpal = 1
	ontop = 1
	bindtime = -1
	Supermovetime = 999999999
	Pausemovetime = 999999999

[State 0]
	type = Explod
	triggerall = RoundState = 2 ;;&& Root,sysvar(4)
	triggerall = var(46) = 4
	trigger1 = var(15) = 0
	trigger1 = Root,MoveType != H 
	trigger2 = var(15) = 1 && NumPartner
	trigger2 = Partner,MoveType != H 
	anim = f6023
	sprpriority = -1
	postype = Left
pos = Ifelse(TeamSide = 2, 40, 390), 202 - (NumExplod(400000)+ NumExplod(402000)+ NumExplod(401000) + NumExplod(1195500)) * 10
	facing = 1
	scale = .5,.5
	ownpal = 1
	ontop = 1
	bindtime = -1
	Supermovetime = 999999999
	Pausemovetime = 999999999

; reset
[State 0]
	type = VarSet
	triggerall = RoundState = 2 ;;&& Root,sysvar(4)
	triggerall = var(46)
	trigger1 = var(15) = 0
	trigger1 = Root,MoveType != H
	trigger2 = var(15) = 0
	trigger2 = Root,MoveType = H && (Root,GetHitVar(HitCount)) < 4
	trigger3 = var(15) = 0
	trigger3 = Root,StateNo = [120,155]

	trigger4 = var(15) = 1 && NumPartner
	trigger4 = Partner,MoveType != H
	trigger5 = var(15) = 1 && NumPartner
	trigger5 = Partner,MoveType = H && (Partner,GetHitVar(HitCount)) < 4
	trigger6 = var(15) = 1 && NumPartner
	trigger6 = Partner,StateNo = [120,155]
	var(46) = 0
	IgnoreHitPause = 1

;--------------------------------------------------------------
; qbgXp[NE
;--------------------------------------------------------------
; (Root)
[State 0]
	type = Explod
	triggerall = NumExplod(505000) < 5
	triggerall = Root,StateNo = 5000 || Root,StateNo = 5010 || Root,StateNo = 5020 || Root,StateNo = 5070 || Root,StateNo = 5100
	triggerall = Root,Time < 5
	trigger1 = Root,Anim = 5002 || Root,Anim = 5012 || Root,Anim = 5022 || Root,Anim = 5030
	trigger2 = Root,Anim = 5001 || Root,Anim = 5011 || Root,Anim = 5021
	ID = 505000
	anim = F80 + Random%5
	sprpriority = -5
	postype = Left
	pos = Floor(Root,ScreenPos X + Const(Size.mid.Pos.X)), Floor(Root,ScreenPos Y + Const(Size.mid.Pos.Y))
;--;	facing = Root,facing
	velocity = (-1 - (Random%80)/10.00) * Root,facing, 1 + ((Random%100)-50)/10.00
	ownpal = 1
	IgnoreHitPause = 1

; (Partner)
[State 0]
	type = Explod
	triggerall = NumExplod(505001) < 5
	triggerall = NumPartner
	triggerall = Partner,StateNo = 5000 || Partner,StateNo = 5010 || Partner,StateNo = 5020 || Partner,StateNo = 5070 || Partner,StateNo = 5100
	triggerall = Partner,Time < 5
	trigger1 = Partner,Anim = 5002 || Partner,Anim = 5012 || Partner,Anim = 5022 || Partner,Anim = 5030
	trigger2 = Partner,Anim = 5001 || Partner,Anim = 5011 || Partner,Anim = 5021
	ID = 505001
	anim = F80 + Random%5
	sprpriority = -5
	postype = Left
	pos = Floor(Partner,ScreenPos X + Partner,Const(Size.mid.Pos.X)), Floor(Partner,ScreenPos Y + Partner,Const(Size.mid.Pos.Y))
;--;	facing = Partner,facing
	velocity = (-1 - (Random%80)/10.00) * Root,facing, 1 + ((Random%100)-50)/10.00
	ownpal = 1
	IgnoreHitPause = 1

;==============================================================
;var(58),var(57)
; get bonus
;==============================================================
[State 0]
	type = VarAdd
	triggerall = var(51) < 1
	triggerall = RoundState = 2
	trigger1 = NumEnemy
	trigger1 = Enemy,GetHitVar(HitShakeTime) > 0
	trigger1 = Enemy,MoveType = H && Enemy,GetHitVar(Guarded) = 0
	var(57) = 2
	IgnoreHitPause = 1
[State 0]
	type = VarAdd
	triggerall = var(51) < 1
	triggerall = RoundState = 2
	triggerall = NumEnemy
	triggerall = Enemy,GetHitVar(HitShakeTime) > 0
	triggerall = Enemy,MoveType = H && Enemy,GetHitVar(Guarded) = 0
	trigger1 = Root,HitDefAttr = SCA, SA, ST, SP
	trigger2 = NumPartner
	trigger2 = Partner,HitDefAttr = SCA, SA, ST, SP
	var(57) = 15
	IgnoreHitPause = 1
[State 0]
	type = VarAdd
	triggerall = var(51) < 1
	triggerall = RoundState = 2
	triggerall = NumEnemy
	triggerall = Enemy,GetHitVar(HitShakeTime) > 0
	triggerall = Enemy,MoveType = H && Enemy,GetHitVar(Guarded) = 0
	trigger1 = Root,HitDefAttr = SCA, SA, ST, SP
	trigger2 = NumPartner
	trigger2 = Partner,HitDefAttr = SCA, HA, HT, HP
	var(57) = 55
	IgnoreHitPause = 1

[State 0, get bonus proj]
	type = varadd
	triggerall = var(51) < 1
	triggerall = RoundState = 2
	trigger1 = Root,ProjHitTime(0) != -1 && Root,ProjHitTime(0) = 1
	trigger2 = NumPartner
	trigger2 = Partner,ProjHitTime(0) != -1 && Partner,ProjHitTime(0) = 1
	var(57) = 100
	IgnoreHitPause = 1

[State 0, get tec sbonus]
	type = varadd
	triggerall = var(51) < 1
	triggerall = RoundState = 2
	trigger1 = Root,StateNo = 195500
	trigger1 = Root,Time = 1
	var(57) = 100
	IgnoreHitPause = 1


;--------------------------------------------------------------
;; 计分	[ID:98###]
;--------------------------------------------------------------
[State 0]
	type = RemoveExplod
	triggerall = NumExplod(98000)
	trigger1 = var(57)%10 != var(58)%10
	trigger2 = var(40) = 0
	trigger3 = TeamSide = 1 && Floor(Log(10,var(57))) != Floor(Log(10,(var(58))))
	id = 98000
	IgnoreHitPause = 1
[State 0]
	type = RemoveExplod
	triggerall = NumExplod(98001)
	trigger1 = var(57)/10%10 != var(58)/10%10
	trigger2 = var(40) = 0
	trigger3 = TeamSide = 1 && Floor(Log(10,var(57))) != Floor(Log(10,(var(58))))
	id = 98001
	IgnoreHitPause = 1
[State 0]
	type = RemoveExplod
	triggerall = NumExplod(98002)
	trigger1 = var(57)/100%10 != var(58)/100%10
	trigger2 = var(40) = 0
	trigger3 = TeamSide = 1 && Floor(Log(10,var(57))) != Floor(Log(10,(var(58))))
	id = 98002
	IgnoreHitPause = 1
[State 0]
	type = RemoveExplod
	triggerall = NumExplod(98003)
	trigger1 = var(57)/1000%10 != var(58)/1000%10
	trigger2 = var(40) = 0
	trigger3 = TeamSide = 1 && Floor(Log(10,var(57))) != Floor(Log(10,(var(58))))
	id = 98003
	IgnoreHitPause = 1
[State 0]
	type = RemoveExplod
	triggerall = NumExplod(98004)
	trigger1 = var(57)/10000%10 != var(58)/10000%10
	trigger2 = var(40) = 0
	trigger3 = TeamSide = 1 && Floor(Log(10,var(57))) != Floor(Log(10,(var(58))))
	id = 98004
	IgnoreHitPause = 1
[State 0]
	type = RemoveExplod
	triggerall = NumExplod(98005)
	trigger1 = var(57)/100000%10 != var(58)/100000%10
	trigger2 = var(40) = 0
	trigger3 = TeamSide = 1 && Floor(Log(10,var(57))) != Floor(Log(10,(var(58))))
	id = 98005
	IgnoreHitPause = 1
[State 0]
	type = RemoveExplod
	triggerall = NumExplod(98006)
	trigger1 = var(57)/1000000%10 != var(58)/1000000%10
	trigger2 = var(40) = 0
	trigger3 = TeamSide = 1 && Floor(Log(10,var(57))) != Floor(Log(10,(var(58))))
	id = 98006
	IgnoreHitPause = 1

; Q
[State 0]
	type = varset
	trigger1 = var(58) != var(57)
	var(58) = var(57)
	IgnoreHitPause = 1


; _`
[State 0]
	type = Explod
	id = 98000
	triggerall = !NumExplod(98000)
	triggerall = var(40) && RoundState = 2
	triggerall = var(51) < 1
	trigger1 = var(58) > 0
	anim = F300000 + var(58)%10
	postype = Left
	pos = Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 89, 330), var(32) - 13
	sprpriority = 0
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999
	pausemovetime = 999999
	IgnoreHitPause = 1
[State 0]
	type = Explod
	id = 98001
	triggerall = !NumExplod(98001)
	triggerall = var(40) && RoundState = 2
	triggerall = var(51) < 1
	trigger1 = var(58) > 9
	anim = F300000 + var(58)/10%10
	postype = Left
	pos = Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 80, 321), var(32) - 13
	sprpriority = 0
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999
	pausemovetime = 999999
	IgnoreHitPause = 1
[State 0]
	type = Explod
	id = 98002
	triggerall = !NumExplod(98002)
	triggerall = var(40) && RoundState = 2
	triggerall = var(51) < 1
	trigger1 = var(58) > 99
	anim = F300000 + var(58)/100%10
	postype = Left
	pos = Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 71, 312), var(32) - 13
	sprpriority = 0
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999
	pausemovetime = 999999
	IgnoreHitPause = 1
[State 0]
	type = Explod
	id = 98003
	triggerall = !NumExplod(98003)
	triggerall = var(40) && RoundState = 2
	triggerall = var(51) < 1
	trigger1 = var(58) > 999
	anim = F300000 + var(58)/1000%10
	postype = Left
	pos = Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 62, 303), var(32) - 13
	sprpriority = 0
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999
	pausemovetime = 999999
	IgnoreHitPause = 1
[State 0]
	type = Explod
	id = 98004
	triggerall = !NumExplod(98004)
	triggerall = var(40) && RoundState = 2
	triggerall = var(51) < 1
	trigger1 = var(58) > 9999
	anim = F300000 + var(58)/10000%10
	postype = Left
	pos = Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 53, 294), var(32) - 13
	sprpriority = 0
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999
	pausemovetime = 999999
	IgnoreHitPause = 1
[State 0]
	type = Explod
	id = 98005
	triggerall = !NumExplod(98005)
	triggerall = var(40) && RoundState = 2
	triggerall = var(51) < 1
	trigger1 = var(58) > 99999
	anim = F300000 + var(58)/100000%10
	postype = Left
	pos = Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9 + 44, 285), var(32) - 13
	sprpriority = 0
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999
	pausemovetime = 999999
	IgnoreHitPause = 1
[State 0]
	type = Explod
	id = 98006
	triggerall = !NumExplod(98006)
	triggerall = var(40) && RoundState = 2
	triggerall = var(51) < 1
	trigger1 = var(58) > 999999
	anim = F300000 + var(58)/1000000%10
	postype = Left
	pos = Ifelse(TeamSide=1, Floor(Log(10,var(58))) * 9, 204), var(32) - 13
	sprpriority = 0
	scale = 0.5, 0.5
	bindtime = -1
	ownpal = 1
	ontop = 1
	removetime = -1
	supermovetime = 999999
	pausemovetime = 999999
	IgnoreHitPause = 1
;--------------------------------------------------------------
;; "CPU"
;--------------------------------------------------------------
[State 0, CPU-mark]
	type = Explod
	triggerall = var(51) = 1	;isAI
	triggerall = var(40)
	trigger1 = !NumExplod(297000)
	ID = 297000
	anim = F297000
	postype = Left
	pos = Ifelse(TeamSide = 1, 62, 230), 3
	sprpriority = 5
	removetime = -1
	supermovetime = 999999999
	pausemovetime = 999999999
	bindtime = -1
	ownpal = 1
	ontop = 1
	IgnoreHitPause = 1
	scale = 0.5, 0.5

[State 0, Remove CPU]
	type = RemoveExplod
	triggerall = NumExplod(297000)
	trigger1 = !var(40)
	ID = 297000
	IgnoreHitPause = 1
;==============================================================
;(dizzy process)
;==============================================================
[State 0]
	type = Varadd
	trigger1 = var(50) > 0
	var(50) = -1
;nor;	IgnoreHitPause = 1

[State 0]
	type = Varadd
	triggerall = Root,UniqHitCount <= 1
	triggerall = Root,GetHitVar(hitcount) < 3
	triggerall = Root,Time <= 1
	trigger1 = Root,Stateno = 5001 && Root,Anim = 5000 ;S
	trigger2 = Root,Stateno = 5001 && Root,Anim = 5010 ;C
	trigger3 = Root,Stateno = 5011 && Root,Anim = 5020 ;A
	var(50) = 50
	IgnoreHitPause = 1

[State 0]
	type = Varadd
	triggerall = Root,UniqHitCount <= 1
	triggerall = Root,GetHitVar(hitcount) < 3
	triggerall = Root,Time <= 1
	trigger1 = Root,Stateno = 5001 && Root,Anim = 5001
	trigger2 = Root,Stateno = 5001 && Root,Anim = 5011
	trigger3 = Root,Stateno = 5011 && Root,Anim = 5021
	var(50) = 100
	IgnoreHitPause = 1

[State 0]
	type = Varadd
	triggerall = Root,UniqHitCount <= 1
	triggerall = Root,GetHitVar(hitcount) < 3
	triggerall = Root,Time <= 1
	trigger1 = Root,Stateno = 5001 && Root,Anim = 5002
	trigger2 = Root,Stateno = 5001 && Root,Anim = 5012
	trigger3 = Root,Stateno = 5011 && Root,Anim = 5022
	var(50) = 200
	IgnoreHitPause = 1

[State 0]
	type = VarSet
	trigger1 = Root,StateNo = 190111
	var(50) = 0
	IgnoreHitPause = 1

;-------------------
; spinning the controll buttons!!!?

[State 0]
	type = VarSet
	trigger1 = Root,StateNo = 190111
	var(52) = 0
	IgnoreHitPause = 1
;==============================================================
; MaxHitCombo
;==============================================================
; MaxHitCombo bonus p1
[State 0]
	type = varset
	triggerall = RoundState = 2
	trigger1 = Root,GetHitVar(HitCount)
	trigger1 = Root,GetHitVar(HitCount) > fvar(3)
	fvar(3) = Root,GetHitVar(HitCount)
[State 0]
	type = varset
	triggerall = RoundState = 2
	triggerall = NumPartner
	trigger1 = Partner,GetHitVar(HitCount)
	trigger1 = Partner,GetHitVar(HitCount) > fvar(3)
	fvar(3) = Partner,GetHitVar(HitCount)

; MaxHitCombo bonus p2
[State 0]
	type = varset
	triggerall = RoundState = 2
	trigger1 = NumEnemy
	trigger1 = Enemy,GetHitVar(HitCount)
	trigger1 = Enemy,GetHitVar(HitCount) > fvar(13)
	fvar(13) = Enemy,GetHitVar(HitCount)

; Guard point
[State 0]
	type = varadd
	triggerall = RoundState = 2
	triggerall = !var(12)     ;; << not in 'just defence' mode!
	triggerall = NumEnemy
	triggerall = !(Enemy, HitDefAttr = SCA, NA, NP)
	trigger1 = Root,StateNo = 150 || Root,StateNo = 152 || Root,StateNo = 154 ;air
	trigger1 = Root,Time = 1
	fvar(4) = (Root,GetHitVar(Damage) + Root,GetHitVar(HitShakeTime))/20.00
[State 0]
	type = varadd
	triggerall = RoundState = 2
	triggerall = !var(12)     ;; << not in 'just defence' mode!
	triggerall = NumEnemy
	triggerall = !(Enemy, HitDefAttr = SCA, NA, NP)
	trigger1 = NumPartner
	trigger1 = Partner,StateNo = 150 || Partner,StateNo = 152 || Partner,StateNo = 154 ;air
	trigger1 = Partner,Time = 1
	fvar(4) = (Partner,GetHitVar(Damage) + Partner,GetHitVar(HitShakeTime))/20.00
;---------------
; blocking / just defence bonus
[State 0]
	type = varadd
	triggerall = RoundState = 2
	trigger1 = Root,StateNo = 195500
	trigger1 = Root,Time = 1
	fvar(6) = 0.5
	IgnoreHitPause = 1

; guard bonus
[State 0]
	type = varadd
	triggerall = RoundState = 2
	triggerall = var(12)      ;; << in just defence mode!
	trigger1 = Root,StateNo = 150 || Root,StateNo = 152 || Root,StateNo = 154 ;air
	trigger1 = Root,Time = 1
	fvar(7) = 0.25
	IgnoreHitPause = 1

[State 0]
	type = varadd
	triggerall = var(47) < 10
	trigger1 = Win
	trigger2 = NumEnemy
	trigger2 = Enemy,Win
	var(47) = 1
	IgnoreHitPause = 1


;==============================================================
;(special finish message)特别获胜的信息板
;==============================================================
[State 0]
	type = varset
	triggerall = var(47) < 2
	triggerall = var(45) = 0
	trigger1 = Root,WinKO
	trigger1 = Root,MoveHit
;or;	trigger1 = Root,HitDefAttr = SCA, SA, SP, ST
	trigger1 = !(Root,HitDefAttr = SCA, HA, HP, HT || Root,HitDefAttr = SCA, NA, NP, NT)
	trigger2 = NumPartner
	trigger2 = Partner,WinKO
	trigger2 = Partner,MoveHit
	trigger2 = !(Partner,HitDefAttr = SCA, HA, HP, HT || Partner,HitDefAttr = SCA, NA, NP, NT)
	var(45) = 1
	supermovetime = 999999999
	pausemovetime = 999999999
	IgnoreHitPause = 1

;(super / hyper finish)
[State 0]
	type = varset
	triggerall = var(47) < 2
	triggerall = var(45) = 0
	trigger1 = Root,WinKO
	trigger1 = Root,MoveHit
	trigger1 = Root,HitDefAttr = SCA, HA, HP, HT
	trigger2 = NumPartner
	trigger2 = Partner,WinKO
	trigger2 = Partner,MoveHit
	trigger2 = Partner,HitDefAttr = SCA, HA, HP, HT
	var(45) = 2
	supermovetime = 999999999
	pausemovetime = 999999999
	IgnoreHitPause = 1

[State 0]
	type = null;Helper
	triggerall = var(45) = 2
	triggerall = var(47) = 1
	triggerall = !NumHelper(99999)
	trigger1 = Root,WinKO
	trigger2 = NumPartner
	trigger2 = Partner,WinKO
	id = 99999
	StateNo = 99999
	supermovetime = 999999999
	pausemovetime = 999999999
	IgnoreHitPause = 1


;---------------------------------
[State 0]
	type = ChangeState
	trigger1 = var(47) = 1
	value = 99980
	IgnoreHitPause = 1

;--------------------------------------------------------------
;==============================================================
[Statedef -2]
;==============================================================
;--------------------------------------------------------------

;#ADD004BASC PIEs#
;============================================================================
; edited life & power bar
[State -2,1]
	type = Helper
                 triggerall = var(1)=5
	triggerall = !IsHelper
	triggerall = !NumHelper(90900)
	triggerall = !NumHelper(90901)
	triggerall = !NumHelper(90902)
	trigger1 = NumPartner
	trigger1 = ID < Partner,ID
	trigger2 = !NumPartner
	ID = 90900 ; 90901 ; *
	Stateno = 90900
	IgnoreHitPause = 1
                 ontop = 1
; (* 'ID = 90901' power bar off mode)
; (* 'ID = 90901' はパワ`バ`非表示モ`ド)
;======================================
;--------------------------------------
; blocking/JD system helper set
[State -2,1]
	type = Helper
                 triggerall = var(1)=5
	triggerall = !IsHelper
	triggerall = NumHelper(90900)
	triggerall = Helper(90900),var(22) = [2,3]
	triggerall = !NumHelper(99997) && !NumHelper(99998)
	triggerall = Ctrl || StateNo = 40 || StateNo = 52 || StateNo = 100
	triggerall = StateNo != 195500
	trigger1 = Helper(90900),var(22) = 2 && Command = "holdfwd"
	trigger2 = Helper(90900),var(22) = 3 && Command = "holdback"
	ID = 99997 + (Helper(90900),var(22) = 3)
	Stateno = 99997
	IgnoreHitPause = 1
                 ontop = 1
;--------------------------------------
; blocking/JD succeed!
[State -2,1]
	type = ChangeState
                 triggerall = var(1)=5
	triggerall = !IsHelper
	triggerall = NumHelper(90900)
	triggerall = Helper(90900),var(22) = [2,3]
	triggerall = NumHelper(99997) || NumHelper(99998)
	triggerall = Ctrl || StateNo = 40 || StateNo = 52 || StateNo = 100
	triggerall = StateNo != 195500
	trigger1 = NumHelper(99997)
	trigger1 = Helper(99997),StateNo = 99996
	trigger2 = NumHelper(99998)
	trigger2 = Helper(99998),StateNo = 99996
	value = 195500  ;; << 成功したrのステ`ト(上き可)
	IgnoreHitPause = 1
                 ontop = 1
;--------------------------------------
; muteki
[State -2,1]
	type = HitBy
                 triggerall = var(1)=5
	triggerall = !IsHelper
	triggerall = NumHelper(90900)
	triggerall = Helper(90900),var(22) = [2,3]
	trigger1 = NumHelper(99997)
	trigger1 = Helper(99997),StateNo = [99996, 99997]
	trigger2 = NumHelper(99998)
	trigger2 = Helper(99998),StateNo = [99996, 99997]
	value = SCA, NT, ST, HT
	IgnoreHitPause = 1
                 ontop = 1
;============================================================================

[State 0, DefenceMulSet]
type=DefenceMulSet
triggerall = var(1)=5
trigger1=1
value=IfElse(life<300,.6,life*.001)
ignorehitpause=1

[State -2, PowerAdd]
type = PowerAdd
triggerall = var(1)=5
triggerall = MoveType = H && Time = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5020
trigger3 = stateno = 5070
value = ifelse(GetHitVar(animtype) < 2,20,40)

[State -2, Spray Anim P1];地面水花
type = Explod
triggerall = var(1)>=2
triggerall = StageVar(info.author) = "water"
triggerall = pos Y = 0
trigger1 = time >= 0 && timemod = 16,0
persistent = 0
ID = 20
anim = F20
postype = p1
pos = 0,-5
ownpal = 1
;ontop = 1
bindtime = ifelse(pos Y != 0,0,-1)
removetime = 16
pausemovetime = 999999
supermovetime = 999999
sprpriority = 300

[State -2, 1];地面水花移除
type = removeexplod
trigger1 = pos Y != 0
trigger2 = teammode = simul
trigger2 = !alive
ID = 20

[State -3, 落地水花]
type = Explod
triggerall = var(1)>=2
triggerall = StageVar(info.author) = "water"
triggerall = Time = 1
trigger1 = StateNo=5201||StateNo=5202||StateNo=3015
ID = 22
anim = F22
postype = p1
pos = 10,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2
pausemovetime = 999999
supermovetime = 999999

[State -2 , 落地声效]
type = PlaySnd
triggerall = var(1)>=2
triggerall = Time = 1
trigger1 = StateNo=5201||StateNo=5202||StateNo=3015
value = F47,(0+(StageVar(info.author) = "water"))

[State -2, 血条头像]
type = helper
triggerall = !IsHelper
triggerall = var(1)=5
trigger1 =!NumHelper(9222)
stateno = 9222
id = 9222
ownpal = 1
ontop = 1
supermovetime = 9999999999
pausemovetime = 9999999999
IgnoreHitPause = 1
bindtime = -1
;----------------------------------
;【跳跃系统相关】
;----------------------------------
[State -2, 4]
type = varadd
trigger1 = 1
v = 25
value = -1

;----------------------------------
;【回复能量】
;----------------------------------
[state -2, 加能量1]
type = poweradd
triggerall = var(1)=5
TriggerAll = gametime % 20=0
triggerAll = movetype = I
triggerAll = roundstate=2
TriggerAll = !IsHelper
triggerAll = power < powermax
trigger1 = 1
value=10
persistent=0
ignorehitpause=1

[state -2, 加能量2]
type = poweradd
triggerall = var(1)=5
TriggerAll = gametime % 8=0
triggerAll = movetype = H
triggerAll = roundstate=2
TriggerAll = !IsHelper
triggerAll = power < powermax
trigger1 = 1
value=10
persistent=0
ignorehitpause=1

[state -2];被打一下加能量1
type = poweradd
triggerall = var(1)=5
triggerall = !IsHelper
triggerall = roundstate=2
triggerall = enemynear,stateno=[200,999]
trigger1 = enemynear,movecontact=1
trigger1 = time = 0
value=10-(MoveGuarded*7)
persistent=0
ignorehitpause=1

[state -2];被打一下加能量2
type = poweradd
triggerall = var(1)=5
triggerall = !IsHelper
triggerall = roundstate=2
triggerall = enemynear,stateno=[1000,1999]
trigger1 = enemynear,movecontact=1
trigger1 = time = 0
value=15-(MoveGuarded*7)
persistent=0
ignorehitpause=1

[state -2];被打一下加能量3
type = poweradd
triggerall = var(1)=5
triggerall = !IsHelper
triggerall = roundstate=2
triggerall = enemynear,stateno=[2000,3999]
trigger1 = enemynear,movecontact=1
trigger1 = time = 0
value=8-(MoveGuarded*4)
persistent=0
ignorehitpause=1

[state -2];攻击加能量1
type = poweradd
triggerall = var(1)=5
triggerall = !IsHelper
triggerall = roundstate=2
triggerall = movetype = A
triggerall = stateno=[200,999]
trigger1 = movecontact=1
value=4-(MoveGuarded*2)
persistent=0
ignorehitpause=1

[state -2];攻击加能量2
type = poweradd
triggerall = var(1)=5
triggerall = !IsHelper
triggerall = roundstate=2
triggerall = movetype = A
triggerall = stateno=[1000,1999]
trigger1 = movecontact=1
value=3-(MoveGuarded*1)
persistent=0
ignorehitpause=1

;----------------------------------
;【bc爆气】
;----------------------------------
;爆气能量槽
[state -2]
type = Helper
triggerall = var(1)=5
trigger1 = numhelper(7550) = 0
id = 7550
name = "13"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 7550
helpertype = normal
pausemovetime = 99999999
supermovetime = 99999999
keyctrl = 0
ownpal = 1
ignorehitpause = 1

;爆气相关
[state -2]
type = VarSet
triggerall = var(1)=5
TriggerAll = !IsHelper
trigger1 = fvar(30)<0
fvar(30) = 0

;爆气相关
[state -2]
type = varset
triggerall = var(1)=5
fvar(30)=0
TriggerAll = !IsHelper
trigger1 = Lose
trigger2 = Win
trigger3 = RoundState != 2

[State -2, 爆气残影]
type = Helper
triggerall = var(1)=5
triggerall = Alive
triggerall = Life > 0
triggerall = fvar(30) > 0
triggerall = NumHelper(7999) = 0
triggerall = RoundState = 2
trigger1 = stateno =[1990,1993]
helpertype = normal
name = "Shadow"
pausemovetime = 1000000000
supermovetime = 1000000000
id = 7999
pos = 0,0
postype = p1
stateno = 7999
keyctrl = 0
ownpal = 1

;爆气相关
[State -2,kof13];爆气黄色
type = PalFX
triggerall = var(1)=5
trigger1 = (GameTime%2)=0
trigger1 = fvar(30) > 0
time = 1
add = 255,100,0
ignorehitpause = 1

;爆气相关
[State -2]
type = Varadd
triggerall = var(1)=5
trigger1 = fvar(30) > 0
fvar(30) = -3
ignorehitpause = 1

[State -2, 爆气一段时间不检测连技所需点数]
type = AssertSpecial
triggerall = var(1)=5
TriggerAll = fvar(29)<1
TriggerAll = stateno = [1000,1999]
trigger1 = fvar(30) > 1
flag = NoJuggleCheck
ignorehitpause = 1

;------------------------------------------------------------------------------
;爆气基本效果(攻击力提升，技能开启)
;------------------------------------------------------------------------------
[State -2,kofmax];攻击力增加20%
type = AttackMulSet;-------------------------------1
triggerall = var(1)=5
trigger1 = fvar(30) > 0
value = 1.2
ignorehitpause=1

[State -2,kofmax];恢复原态
type = AttackMulSet
triggerall = var(1)=5
trigger1 = fvar(30) <=0
value = 1
ignorehitpause=1

;==============================================================================
;over结束
;==============================================================================
;==============================================================================
;Stun Evolution开始
;==============================================================================
;---------------------------------
; Variables
;---------------------------------
[State -2, VarSet]
type = VarSet
triggerall = stateno != [73000,73050]
trigger1 = roundstate < 2
v = 39
value = 240

[State -2, VarSet]
type = VarSet
trigger1 = var(39)> 240
v = 39
value = 240

[State -2, VarSet]
type = VarSet
trigger1 = var(39)<0
v = 39
value = 0

;---------------------------------
;Decrease when the char is hurt
;---------------------------------

[State -2, VarAdd]
type = VarAdd
Triggerall = (enemynear, hitdefattr != SCA, HA)
Triggerall = gametime%20 = 0
trigger1 = stateno = [4000,5099]
trigger1 = prevstateno != [4000,5099]
v =  39
value = -4 - Floor(Gethitvar(animtype))
ignorehitpause = 0

[State -2, VarAdd]
type = VarAdd
Triggerall = (enemynear, hitdefattr != SCA, HA)
Triggerall = gametime%20 = 0
trigger1 = stateno = [4000,5099]
trigger1 = prevstateno = [4000,5099]
v =  39
value = -2 - Floor(Gethitvar(animtype))
ignorehitpause = 0

;---------------------------------
;Continual increase
;---------------------------------

[State -2, VarAdd]
type = VarAdd
triggerall = stateno != [73000,73050]
trigger1 = MoveType != H
trigger1 = gametime%30 = 0
trigger1 = var(39) < 240
v = 39
ignorehitpause = 0
value = 2

;--------------------------------------
; Send the character in state of stun
;--------------------------------------
[State -2, Change]
type = changestate
triggerall = var(39) <0
triggerall = stateno != [73000,73500]
trigger1 = statetype = S
trigger2 = statetype = C
trigger3 = statetype = A
value = 73000
ctrl = 0

;-------------------------
; Delete Stun Explod :
;-------------------------
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 73050
id = 73100
ignorehitpause = 1

;-------------------------
; Stop Stun Sound :
;-------------------------
[State -2, StopSnd]
type = StopSnd
trigger1 = stateno != 73050
channel = 11
ignorehitpause = 1

;---------------------------------------------------------------------------
;T.O.P MODE
;---------------------------------------------------------------------------
[State -2,14]
type = PalFx
triggerall = var(1)=5
triggerall = (gethitvar(chainid)%10000)/1000 != [1,9]
triggerall = life <= lifemax*0.25
trigger1 = GameTime%6=0
trigger1 = roundstate = 2
add = 64,64,64
time = 3
ignorehitpause = 1
persistent = 1

[State 1100, 1]
type = Helper
triggerall = var(1)=5
triggerall = RoundState = 2
trigger1 = life <= lifemax*0.25
trigger1 = fvar(5)< 1
ID = 79997
sprpriority = 2
postype = P1
pos = 0,0
stateno = 79997
helpertype = normal
keyctrl = 0 
ownpal = 1
ontop = 1
;persistent = 0

[State -2, VarSet]
type = VarSet
triggerall = var(1)=5
trigger1 = NumHelper(79997)
fv = 5
value = 1

[State -2, VarSet]
type = VarSet
triggerall = var(1)=5
trigger1 = life > lifemax*0.25
fv = 5
value = 0

;---------------------------------------------------------------------------
;战前选模式
;---------------------------------------------------------------------------

[State 1100, 0]
type = Helper
triggerall = !IsHelper
triggerall = var(1)<2;not read config yet
trigger1 = NumHelper(99994)=0
Name = "选择模式"
helpertype = normal
Pos = 0,0
postype = p1
stateno = 99994
ID=99994
SprPriority = 1
keyctrl = 0
size.shadowoffset=0

[State a]
type = AssertSpecial
triggerall = !ishelper
trigger1 = var(1)<5
flag = nobardisplay

[State a]
type = AssertSpecial
triggerall = !ishelper
triggerall = roundstate <= 2
trigger1 = var(1)<2;5
flag = nomusic

[State a]
type = AssertSpecial
triggerall = !ishelper
triggerall = roundstate <= 2
trigger1 = stateno = [0,99999]
trigger1 = stateno != 95197
trigger1 = var(1)<5
flag = nomusic

[State a]
type = AssertSpecial
triggerall = !ishelper
triggerall = roundstate <= 2
trigger1 = stateno = 95197
trigger1 = time <= 135
flag = nomusic

[State 170, 2]
type=AssertSpecial
triggerall = !IsHelper
trigger1=NumHelper(99994)=1
flag =invisible
flag2 = nowalk

[State 170, 2]
type=CtrlSet
triggerall = !IsHelper
trigger1=NumHelper(99994)=1
value = 0

[State 170, 2]
type=ChangeState
triggerall = StateNo != 5500
;triggerall = fvar(20)!=1
triggerall = !IsHelper
triggerall = var(1)<2
trigger1=StateNo !=0 && StateNo !=95197
value = 0

;补2p 隐身
[State 170, 2]
type=AssertSpecial
triggerall = !IsHelper
;triggerall = fvar(20)!=1
triggerall = var(1)=2
trigger1=StateNo =0 && PrevStateNo !=[190,199]
flag=invisible
flag2 = nowalk

[State 170, 2]
type=ChangeState
triggerall = !IsHelper
;triggerall = fvar(20)!=1
triggerall = var(1)=2 && enemy,var(1)=2
trigger1 = StateNo =0 && PrevStateNo !=[190,199]
value = 190

;补2p 隐身
[State 170, 2]
type=AssertSpecial
triggerall = !IsHelper
;triggerall = fvar(20)!=1
triggerall = var(1)=2 && enemy,var(1)=2
trigger1=StateNo =0 && PrevStateNo !=[190,199]
flag=invisible
flag2 = nowalk

[State 170, 2]
type=null;ChangeState
triggerall = !IsHelper
triggerall = fvar(20)=1
triggerall = var(1)=2 && enemy,var(1)=2
trigger1=StateNo =0 && PrevStateNo !=[190,199]
value = 99986

[State 170, 2];如果var(1) 是0,1,2，3 都设定为不可控
type= CtrlSet
triggerall = !IsHelper
trigger1=var(1)<5
value = 0

[State 170, 2];如果var(1) 是0,1,2，3 都设定为不可控
type= CtrlSet;VarSet
triggerall = !IsHelper
trigger1 = var(1)<5
fv = 20
value = 0

[State 170, 2]
type= VarSet
triggerall = !IsHelper
triggerall = var(1)=2
trigger1 = StateNo = 0 && PrevStateNo=[190,199]
var(1) = 3

[State 170, 2];胜利之后 关闭控制
type= VarSet
triggerall = !IsHelper
trigger1=roundstate >2
var(1)= 4

[State 170, 2];蹲下不能胜利 修正
type= ChangeState
triggerall = StateNo = 11 && time >8
trigger1=roundstate >2
trigger1= var(1)=4
value = 0

[State 190, 0];ready fight
type = VarSet
triggerall = !IsHelper
triggerall = numpartner !=0
triggerall = fvar(20)=1
trigger1 = partner,var(1)=3
var(1)=3

[State 190, 0];ready fight
type = VarSet
triggerall = !IsHelper
triggerall = numpartner !=0
triggerall = fvar(20)=1
trigger1 = partner,var(1)=4
var(1)=4

[State 190, 0];ready fight
type = VarSet
trigger1 = var(1)=3 && enemy,var(1)=3
v = 1
value = 4

[State 190, 0];ready fight
type = VarSet
trigger1 = var(1)=3 && enemy,var(1)=4
v = 1
value = 4

[State 170, 2];同步3p var 5
type= varSet
triggerall=ID>partner,ID && var(1)!=5
trigger1 = partner,var(1)=5
var(1) = 5

[State 0, LifeSet]
type = LifeSet
triggerall = !ishelper
trigger1 = var(1) < 5
trigger1 = RoundState < 3
trigger1 = AILEVEL>=1
trigger1 = life != LifeMax
trigger1 = name != "Kain" | name != "Rugal"| name != "mukai"| name != "Goodman"| name != "Mizuchi"| name != "Igniz"| name != "zero" | name != "Magaki" | name != "Apollo"| name != "Neodio"| name != "Asura"| name != "kouryu"| name != "Demitri"| name != "Goenitz"| name = "Adel"
value = LifeMax

[State 0, LifeSet]
type = LifeSet
triggerall = !ishelper
trigger1 = AILEVEL<=0
trigger1 = var(1)<5
trigger1 = name = "Kain" | name = "Rugal"| name = "mukai"| name = "Goodman"| name = "Mizuchi"| name = "Igniz"| name = "zero" | name = "Magaki" | name = "Apollo"| name = "Neodio"| name = "Asura"| name = "kouryu"| name = "Demitri"| name = "Goenitz"| name = "Adel"
value = .3*LifeMax

[State a]
type = ChangeState
triggerall = stateno = 180
triggerall = Enemy,Stateno = 99971
trigger1 = time = 0
value = 99972

[State a]
type  = ChangeState
triggerall = stateno = 180
triggerall = Enemy,Stateno != 99971
trigger1 = MatchOver
value  = 99998

;-------------------------------------------------------------------------------
;色表
;-------------------------------------------------------------------------------
[state -2, No Clones]
type = remappal
triggerall = numenemy
triggerall = (fvar(36) = [1,12])
trigger1 = fvar(37) && !numhelper(12345) && matchno=1 && roundno=1
trigger1 = enemy,fvar(36) = fvar(36) 
source = 1, 1
dest = 1, Ifelse(teamside!=1 && enemynear,Numhelper(12345)=0,enemy,fvar(36)+teamside,fvar(36))
ignorehitpause = 1

[state -2, Palette]
type = varset
trigger1 = numhelper(12345)
trigger1 = helper(12345),fvar(36) = [1,12]
fvar(36) = helper(12345),fvar(36)
ignorehitpause = 1

[state -2, Palette Selection]
type = remappal
trigger1 = numhelper(12345)
trigger1 = helper(12345),fvar(36) = [1,12]
source = 1, 1
dest = 1, fvar(36)
ignorehitpause = 1

[state -2, Continue Palette]
type = remappal
trigger1 = fvar(37) && !AILevel && matchno>1
source = 1, 1
dest = 1, fvar(36)
ignorehitpause = 1

;-------------------------------------------------------------------------------
;技gc
;-------------------------------------------------------------------------------
[State -2, Helper]
type = Helper
triggerall = var(1)=5
triggerall = !IsHelper
triggerall = !NumHelper(79995)
trigger1 = roundstate >= 2
id = 79995
name = "skill bar"
pos = 0,0
postype = P1
stateno = 79995
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999
facing = facing*ifelse(teamside=1,1,-1)

[state a]
type = VarSet
triggerall = var(1)=5
triggerAll = roundstate=2
TriggerAll = power=powermax
TriggerAll = life=lifemax
TriggerAll = enemy,power=powermax
TriggerAll = enemy,life=lifemax
TriggerAll = !IsHelper
trigger1   = fvar(30)<=0
fvar(29)   = 2000

[State -2, Add Meter]
type = VarAdd
triggerall = var(1)=5
;triggerall = fvar(31) = 2
trigger1 = roundstate = 2
trigger1 = fvar(29) < 1000
fvar(29) = 1.4
ignorehitpause = 1

[State -2, Add Meter]
type = VarAdd
triggerall = var(1)=5
;triggerall = fvar(31) = 2
trigger1 = roundstate = 2
trigger1 = fvar(29) = [1000,1999.99]
fvar(29) = 0.7
ignorehitpause = 1

;-------------------------------------------------------------------------------
;跑步声音消失
;-------------------------------------------------------------------------------
[State -2, 1]
type = stopSnd
trigger1 = stateno != 100
channel = 10

;--------------------------------------------------------------
;光效代码开始
;--------------------------------------------------------------
[State -2]
type = Helper
triggerall = var(1)=2
triggerall = !NumHelper(23680)
trigger1 = StageVar(info.author) = "light"
pos = 0,0
stateno = 23680
id = 23680
ownpal = 1
persistent = 0
ignorehitpause = 1
postype = p1

[State -2]
type = Helper
triggerall = var(1)=2
triggerall = !NumHelper(23681)
trigger1 = StageVar(info.author) = "light"
pos = 134,0
stateno = 23681
id = 23681
ownpal = 1
persistent = 0
ignorehitpause = 1
postype = left

[State -2]
type = Helper
triggerall = var(1)=2
triggerall = !NumHelper(23682)
trigger1 = StageVar(info.author) = "light"
pos = -134,0
stateno = 23682
id = 23682
ownpal = 1
persistent = 0
ignorehitpause = 1
postype = right
;--------------------------------------------------------------
;-------------------------
; KO effect :
;-------------------------
[State -2, special ko]
type = Helper
triggerall = enemy,life <= 0
triggerall = Stateno != 99998
triggerall = numhelper(78000) <= 0
triggerall = Winko
trigger1 = stateno != [0,1999]
helpertype = normal
name = "KO Flash"
Id = 78000
stateno = 78000
pos = 0,0
postype = p1
facing = 1
ignorehitpause = 1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
ownpal = 1

;---------------------------------------------------------------------------
;胜利镜头移动
;---------------------------------------------------------------------------
[State a]
type = helper
triggerall = stateno =  180
trigger1 = pos X != 0
trigger1 = numhelper(94035)=0;Time = 0
name = "fuck"
id = 94035
pos = 0,0
postype = p1
stateno = 94035
helpertype = normal
ownpal = 1
keyctrl = 1

;---------------------------------------------------------------------------
;调整角落挤压问题
;---------------------------------------------------------------------------
[State 9990, 4.2]
type = AssertSpecial
trigger1 = BackEdgeBodyDist < 30
flag = noautoturn
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;TAG
;---------------------------------------------------------------------------

;呃，这些是debug用代码
[State -2, 1 デバッグ];☆
type = DisplayToClipboard
trigger1 = 1
text = "1P_s2:%d 1P_s3:%d 1P_s4:%d 1P_Sno:%d \n"
params = floor(sysfvar(2)),floor(sysfvar(3)),floor(sysfvar(4)),stateno
ignorehitpause = 1

[State -2, 1 デバッグ];☆
type = AppendToClipboard
trigger1 = numpartner
text = "3P_s2:%d 3P_s3:%d 3P_s4:%d 3P_Sno:%d \n"
params = floor(partner,sysfvar(2)),floor(partner,sysfvar(3)),floor(partner,sysfvar(4)),partner,stateno
ignorehitpause = 1

;开场ID大的人物退场（如P3>P1，所以P3退场）
[state -3];_幕判定
type = varset
triggerall = var(1)=5
triggerall = numpartner
triggerall = ID>partner,ID
trigger1 = roundstate < 2
sysfvar(3) = -1

;出场人物强制处理
[state -3];W前l制I★
type = varset
triggerall = var(1)=5
triggerall = numpartner
triggerall = ID>partner,ID
trigger1 = roundstate = 2 && alive && partner,alive
trigger1 = sysfvar(3) = 0 && stateno != [358000,358004]
trigger1 = partner,sysfvar(3) = 0 && partner,stateno != [358000,358004]
sysfvar(3) = 1

;P3开场后退场
[State -2];3Pイントロ★
type = ChangeState
triggerall = var(1)=5
triggerall = !IsHelper
trigger1 = ctrl
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = sysfvar(3) = -1
trigger1 = roundstate = 2 && alive && partner,alive
value = 358001
ctrl = 0

;无敌
[state -2];3Pイントロ_o郴
type = NotHitBy
trigger1 = sysfvar(3) = -1
value = SCA

;若换人过程被阻碍了
[State -2,交代ステ`トへ_妨害されてた龊稀]
type = ChangeState
triggerall = var(1)=5
triggerall = !IsHelper
triggerall = roundstate = 2
triggerall = numpartner
triggerall = partner,alive
triggerall = statetype != A && ctrl
trigger1 = sysfvar(3) > 0
trigger2 = partner,sysfvar(3) < -1;	特殊交代
value = 358001
ctrl = 0

;sysfvar(3)重设
[state -3]
triggerall = var(1)=5
type = varset
;死んだら解除☆
trigger1 = alive = 0
trigger1 = sysfvar(3) != 0
;パ`トナ`が倒されていたら解除
trigger2 = partner,alive = 0
trigger2 = sysfvar(3) != 0
;パ`トナ`が待C状Bになったら解除
trigger3 = partner,stateno = 358002
trigger3 = sysfvar(3) != 0
sysfvar(3) = 0

;换人提示消去
[state -3,AssistAttack消去]
type = removeExplod
triggerall = numexplod(358002)
trigger1 = movetype != A && stateno != 358004
id = 358002

;是否前场人物判定
[state -3,状r判定];☆
type = varset
trigger1 = 1
sysfvar(2) = (sysfvar(3) > 0 || sysfvar(3) = -1 || partner,sysfvar(3) <= -2 || stateno = 358002)

;---------------------------------------
;==============================================================
;两人夹击 四下 本体zero 同时呼叫狮子 老库和龙
[Statedef 93509]
type    = S
movetype= A
physics = S
poweradd = 0
velset = 0,0
anim = 93509
ctrl = 0
sprpriority = 3

[State 3005, ScreenBound]
type = screenbound
trigger1 = Time >= 0
value = 0
movecamera = 0,0

;狮子
[State 2100, 2]
type = Helper
trigger1 = AnimElem = 55
helpertype = normal
name = "Gulugan max"
ID = 93700
pos = 400,-160
postype = back
facing = -1
stateno = 93700
keyctrl = 0
ownpal = 1

;老库
[State 2100, 2]
type = Helper
trigger1 = AnimElem = 55
helpertype = normal
name = "Gulugan max"
ID = 93800
pos = -100,-160
postype = back
facing = 1
stateno = 93800
keyctrl = 0
ownpal = 1

;龙
[State 2100, 2]
type = Helper
trigger1 = AnimElem = 70
helpertype = normal
name = "Ron max"
ID = 93900
pos = 50,-300
postype = P1
facing = 1
stateno = 93900
keyctrl = 0
ownpal = 1

[State 815, 1]
type = posadd
trigger1 = AnimElem = 53,>= 0 && AnimElem = 54,< 0
x = -6

[State power]
type = poweradd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 13
trigger3 = AnimElem = 22
trigger4 = AnimElem = 44
value = 180

[State Snd];U
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 13
trigger3 = AnimElem = 22
value = S9999,9

[State Snd];qbg
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 15
trigger3 = AnimElem = 24
value = S9999,10

[State Snd];U
type = PlaySnd
trigger1 = AnimElem = 41
trigger2 = AnimElem = 43
trigger3 = AnimElem = 45
trigger4 = AnimElem = 47
trigger5 = AnimElem = 49
value = S5,5

[State Snd];U
type = PlaySnd
trigger1 = AnimElem = 42
trigger2 = AnimElem = 44
trigger3 = AnimElem = 46
trigger4 = AnimElem = 48
value = S5,6

[State 1010, 8]
type = targetlifeadd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 15
trigger3 = AnimElem = 24
value = -50
kill = 0

[State 1010, 8]
type = targetlifeadd
trigger1 = AnimElem = 41
trigger2 = AnimElem = 42
trigger3 = AnimElem = 43
trigger4 = AnimElem = 44
trigger5 = AnimElem = 45
trigger6 = AnimElem = 46
trigger7 = AnimElem = 47
trigger8 = AnimElem = 48
trigger9 = AnimElem = 49
value = -20
kill = 0

[State 1010, 8]
type = targetstate
trigger1 = Animelem = 15
value = 2014

[State 1010, 8]
type = targetstate
trigger1 = Animelem = 7
trigger2 = Animelem = 24
value = 2015

;最后一下击中后对手转到200550

[State 1010, 8]
type = targetstate
trigger1 = Animelem = 41
value = 200550

[State x]
type = Explod
trigger1 = AnimElem = 7,= 5
anim = F2
postype = p2
pos = 0,-65
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 7,= 5
anim = F2
postype = p2
pos = 0,-65
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 15,= 5
anim = F2
postype = p2
pos = 0,-100
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 15,= 5
anim = F2
postype = p2
pos = 0,-100
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 24,= 5
anim = F2
postype = p2
pos = 0,-20
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 24,= 5
anim = F2
postype = p2
pos = 0,-20
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 41
trigger2 = AnimElem = 42
anim = F6
postype = p1
pos = 50,-60
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 41
trigger2 = AnimElem = 42
anim = F6
postype = p1
pos = 50,-60
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 43
trigger2 = AnimElem = 44
anim = F6
postype = p1
pos = 50,-90
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 43
trigger2 = AnimElem = 44
anim = F6
postype = p1
pos = 50,-90
sprpriority = 5
persistent = 0

[State x]
type = EnvShake
trigger1 = AnimElem = 7
trigger2 = AnimElem = 15
trigger3 = AnimElem = 24
ampl = -4
time = 10
freq = 150

[State x]
type = Explod
trigger1 = AnimElem = 45
trigger2 = AnimElem = 46
anim = F6
postype = p1
pos = 50,-120
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 45
trigger2 = AnimElem = 46
anim = F6
postype = p1
pos = 50,-120
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 47
trigger2 = AnimElem = 48
anim = F6
postype = p1
pos = 50,-150
sprpriority = 5
persistent = 0

[State x]
type = Explod
trigger1 = AnimElem = 47
trigger2 = AnimElem = 48
anim = F6
postype = p1
pos = 50,-150
sprpriority = 5
persistent = 0

[State 1000, 6]
type = envcolor
trigger1 = AnimElem = 7
trigger2 = AnimElem = 15
trigger3 = AnimElem = 24
trigger4 = AnimElem = 41
trigger5 = AnimElem = 42
trigger6 = AnimElem = 43
trigger7 = AnimElem = 44
trigger8 = AnimElem = 45
trigger9 = AnimElem = 46
trigger10 = AnimElem = 47
trigger11 = AnimElem = 48
trigger23 = AnimElem = 49
time = 1
value = 255,255,255

[State 1010, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 93599
ctrl = 0

;----------------------------------------------------------------------
[Statedef 4180]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4181

;---------------------------------------------------------------------------
[Statedef 4181]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = time = 5
value = 5050+Var(55)*30000 

[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = 0
y = -12.6

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = 0
y = -12.6

[State 1281, 1]
type = VelAdd
trigger1 = Time = [5,10]
y = .9 

[State 1660, 2]
type = VelMul
trigger1 = Time = [3,21]
y = .915

[State 1281, 1]
type = VelAdd
trigger1 = Time >= 21
y = .565 

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 5100

;----------------------------------------------------------------------------------
[Statedef 4195]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 9280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(4888+Var(55)*30000 )
Trigger1 = Time >= 0
value = 4888+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(4888+Var(55)*30000 )
Trigger1 = Time >= 0
value = 2760+Var(55)*30000 

[State 9280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4196

;---------------------------------------------------------------------------------
[Statedef 4196]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,1.6,-1.6)
y = -14

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-1.6,1.6)
y = -14

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .7 

[State 3121, 1]
type = Helper
triggerall = StageVar(info.author) != "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
id = 18882
postype = p1
pos = 0, 0
sprpriority = 10
stateno = 18008
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = f25
id = 2100
sprpriority = -2
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
value = F5000, 11
volume = 20

[State 183, 3]
type = EnvShake
trigger1 = Pos Y >= -20 && Vel Y > 0
persistent = 0
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= -20
trigger1 = Floor(gethitvar(chainid)/10000) = 1
trigger2 = Floor(gethitvar(chainid)/10000) = 5
trigger3 = Floor(gethitvar(chainid)/10000) = 6
anim = F4018
postype = p1
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= -20
trigger1 = Floor(gethitvar(chainid)/10000) = 2
anim = F4019
postype = p1
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= -20
trigger1 = Floor(gethitvar(chainid)/10000) = 3
anim = F4022
postype = p1
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= -20
trigger1 = Floor(gethitvar(chainid)/10000) = 4
anim = F4021
postype = p1
pos = -30,-7
sprpriority = 2
supermove = 2
Bindtime = 1

[State 250, 7]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -20
value = 4197

;----------------------------------------------------------------------------------
[Statedef 4197]
type = L
movetype = H
physics = N

[State 0, 1]
type = palfx
trigger1 = 1
ignorehitpause=1
time = 0

[State 183, 3]
type = EnvShake
trigger1 = time = 0
persistent = 0
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 3121, 1]
type = Helper
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
id = 18882
postype = p1
pos = 0, 0
sprpriority = 10
stateno = 18008
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f25
id = 2100
sprpriority = -2
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
value = F5000, 11
volume = 20

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1002, 1]
type = PosSet
trigger1 = Time = 0
y = 0
[State 1002, 1]
type = velSet
trigger1 = Time = 0
y = 0

[State 1100,PosFreeze]
type = PosFreeze
trigger1 = time = [0,4]

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 4
;x = ifelse(facing=1,1.8,-1.8)
;x = ifelse(vel X >= 0,-1.8,1.8)
y = -2.8

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .55 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5165+Var(55)*30000 )
trigger1 = Time = [0,1]
value = 5165+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(5165+Var(55)*30000 )
trigger1 = Time = 0
value = 5100+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(5165+Var(55)*30000 )
trigger1 = Time = 7
value = 5160+Var(55)*30000 

[State 250, 7]
type = SelfState
trigger1 = time = 20
value = 4138

;--------------------------------------------------------------------------------
[Statedef 4138]
type    = L
movetype= H
physics = N
velset = 0,0

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time =0
anim = F4017
postype = p1
pos = -40,3
sprpriority = 3
supermove = 2
Bindtime = 1

[State 1002, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0 
value = F7,0
volume = 0

[State 8145, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 410, 4]
type = SelfState
trigger1 = Time = 0
trigger1 = Life <= 0|SysVar(4) = 1|SysVar(3) = 1 
value = 5150

[State 8145, 4]
type = SelfState
trigger1 = time =12
value = 5120


;------------------------------------------------------------------------------------
;---------------------------------------------------------------------------------------------------
[Statedef 4215]
type = A
movetype = H
physics = N

[state screenbound]
type = screenbound
trigger1 = 1
value = 1     
movecamera = 0,0

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 9280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 9280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 2760+Var(55)*30000 

[State 9280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4216

;-------------------------------------------------------------------------------------------------
[Statedef 4216]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[state screenbound]
type = screenbound
trigger1 = 1
value = 1     
movecamera = 0,0

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,1.6,-1.6)
y = -14

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-1.6,1.6)
y = -14

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .7 

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 1
trigger2 = Floor(gethitvar(chainid)/10000) = 5
trigger3 = Floor(gethitvar(chainid)/10000) = 6
anim = F4018
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 2
anim = F4019
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 3
anim = F4022
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 4
anim = F4021
pos = -30,-7
sprpriority = 2
supermove = 2
Bindtime = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5061+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5050+Var(55)*30000 

[State 8145, 4]
type = ChangeState
trigger1 = Pos Y >= -20 && Vel Y > 0
value = 4217

;---------------------------------------------------------------------------------------------------
[Statedef 4217]
type    = L
movetype= H
physics = N

[State 3550, 2]
type = PalFX
trigger1 = Time = 0
time = 1
add = 0, 0, 0

[State 2160, 33]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = F66
sprpriority = -10
postype = p1
pos = 0,0
bindtime = 1

[State 2160, 34]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = F67
sprpriority = 2
postype = p1
pos = 0,0
bindtime = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 0
anim = f25
id = 2100
sprpriority = -2
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 0
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0 
value = F7,0
volume = 0

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 0 
value = F5000,11

[State 183, 3]
type = EnvShake
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5101+Var(55)*30000 )
trigger1 = time = [0,5]
value = 5101+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(5101+Var(55)*30000 )
trigger1 = time = [0,5]
value = 5100+Var(55)*30000 

[State 1100,PosFreeze]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 4218

;--------------------------------------------------------------------------------------------------------
[Statedef 4218]
type    = L
movetype= H
physics = N

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 5101, 1]
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101+Var(55)*30000 ,5109+Var(55)*30000 ]
trigger2 = !selfanimexist(5160+Var(55)*30000  + (anim % 10))
value = 5160+Var(55)*30000 

[State 5101, 2]
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101+Var(55)*30000 ,5109+Var(55)*30000 ]
trigger1 = selfanimexist(5160+Var(55)*30000  + (anim % 10))
value = 5160+Var(55)*30000  + (anim % 10)

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = -2.5

[State 5101, 5]
type = VelAdd
trigger1 = 1
y = .5 

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 20
anim = F4017
postype = p1
pos = -40,3
sprpriority = 3
supermove = 2
Bindtime = 1

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) != "water"
triggerall = Vel Y > 0 && Pos Y >= 20
trigger1 = !SysVar(0)
value = F7,0
volume = 0

[State 8145, 3];qbg
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 20
trigger1 = anim = 5160+Var(55)*30000 
value = 41490

[State 8145, 2];qbg
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 20
trigger1 = anim = 5161+Var(55)*30000 
value = 4169
;-----------------------------
[Statedef 41490]
type = L
movetype = H
physics = N

[State 3550, 2]
type = PalFX
trigger1 = Time = 0
time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = 0
y = 0

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 410, 4]
type = SelfState
trigger1 = Time = 0
trigger1 = Life <= 0|SysVar(4) = 1|SysVar(3) = 1 
value = 5150

[State 8145, 4]
type = SelfState
trigger1 = time = 12
value = 5120

;------------------------------------------------------------------------------------------------------

[Statedef 4169]
type = L
movetype = H
physics = N
velset = 0,0

[State 3550, 2]
type = PalFX
trigger1 = Time = 0
time = 1
add = 0, 0, 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8145, 3]
type = ChangeAnim
trigger1 = selfanimexist(5111+Var(55)*30000 )
trigger1 = Time = 0
value = 5111+Var(55)*30000 

[State 8145, 3]
type = ChangeAnim
trigger1 = !selfanimexist(5111+Var(55)*30000 )
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 410, 4]
type = SelfState
trigger1 = Time = 0 &&(Life <= 0|SysVar(4) = 1|SysVar(3) = 1)
value = 5150

[State 8145, 4]
type = SelfState
trigger1 = time = 16
value = 5120

;---------------------------------------------------------------------------
[Statedef 3820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3820+var(55)*30000

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 2100, I]
type = Veladd
trigger1 = time = 0
x = -.7
y = -29.9

[State 2100, I]
type = Veladd
trigger1 = TIME >= 0
y = .60

[State 820, 1]
type = SelfState
trigger1 = AnimElemtime(3) >= 0
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
[Statedef 3825]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3825+var(55)*30000

[State 2100, I]
type = VelSet
trigger1 = AnimElem = 3
x = -16
y = -2

[State 820, 1]
type = ChangeState
trigger1 = AnimElemtime(3) >= 0
trigger1 = backEdgebodydist <= 5
value = 3830

;------------------------------------------------------------------------
[Statedef 30010]
type     = S
movetype = I
physics  = S
velset   = 0,0
anim     = 10050
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 100+(var(37)), 255-(var(37))

[state a]
type = varadd
trigger1 = time >=0
v = 37
value = 5

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 40
value = 30011

;------------------------------------------------------------------------
[Statedef 30011]
type     = S
movetype = I
physics  = S
velset   = 0,0
anim     = 10051
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(6) >= 0
x = 6

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 30012

;------------------------------------------------------------------------
[Statedef 30012]
type     = S
movetype = A
physics  = S
velset   = 0,0
anim     = 10052
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 0 && time <= 13
x = 2

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 14
x = 0.1

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem =6
attr = S,NA
hitflag = MAF
guardflag =
getpower = 0,0
givepower = 0,0
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 15,0
pausetime = 5,12
sparkno = 2
sparkxy = 0,-70
hitsound = s0,21
ground.type = High
ground.slide = 0
air.hittime = 20
sprpriority = 3
p2stateno = 5501
kill = 0

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(38)), (var(38))

[state a]
type = varadd
trigger1 = animelem = 7,>=0
v = 38
value = 5

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;------------------------------------------------------------------------
[Statedef 30020]
type     = S
movetype = I
physics  = S
velset   = 0,0
anim     = 10050
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 100+(var(37)), 255-(var(37))

[state a]
type = varadd
trigger1 = time >=0
v = 37
value = 5

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 40
value = 30021

;------------------------------------------------------------------------
[Statedef 30021]
type     = S
movetype = I
physics  = S
velset   = 0,0
anim     = 10051
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(6) >= 0
x = 4

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 30022

;------------------------------------------------------------------------
[Statedef 30022]
type     = S
movetype = A
physics  = S
velset   = 0,0
anim     = 10053
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 0 && time <= 6
x = 2

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 7
x = 0.6

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem =4
attr = S,NA
hitflag = MAF
guardflag =
getpower = 0,0
givepower = 0,0
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 15,0
pausetime = 5,12
sparkno = 2
sparkxy = -10,-80
hitsound = s0,20
ground.type = High
ground.slide = 0
air.hittime = 20
sprpriority = 3
p2stateno = 5500
kill = 0

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(38)), (var(38))

[state a]
type = varadd
trigger1 = animelem = 4,>=0
v = 38
value = 5

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
;------------------------------------------------------------------------
[Statedef 30030]
type     = S
movetype = I
physics  = S
velset   = 0,0
anim     = 10050
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 100+(var(37)), 255-(var(37))

[state a]
type = varadd
trigger1 = time >=0
v = 37
value = 5

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 40
value = 30031

;------------------------------------------------------------------------
[Statedef 30031]
type     = S
movetype = I
physics  = S
velset   = 0,0
anim     = 10051
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(6) >= 0
x = 3

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 30032

;------------------------------------------------------------------------
[Statedef 30032]
type     = S
movetype = A
physics  = S
velset   = 0,0
anim     = 10054
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 0 && time <= 6
x = 3
y = -1

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 7
x = 1.4
y = -0.2

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem =4
attr = S,NA
hitflag = MAF
guardflag =
getpower = 0,0
givepower = 0,0
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 15,0
pausetime = 5,12
sparkno = 2
sparkxy = -20,-80
hitsound = s0,21
ground.type = High
ground.slide = 0
air.hittime = 20
sprpriority = 3
p2stateno = 5501
kill = 0

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(38)), (var(38))

[state a]
type = varadd
trigger1 = animelem = 5,>=0
v = 38
value = 5

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;------------------------------------------------------------------------
[Statedef 30040]
type     = S
movetype = I
physics  = S
velset   = 0,0
anim     = 10050
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 100+(var(37)), 255-(var(37))

[state a]
type = varadd
trigger1 = time >=0
v = 37
value = 5

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 40
value = 30042

;------------------------------------------------------------------------
[Statedef 30041]
type     = S
movetype = I
physics  = S
velset   = 0,0
anim     = 10051
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(6) >= 0
x = 3

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 30042

;------------------------------------------------------------------------
[Statedef 30042]
type     = S
movetype = A
physics  = S
velset   = 0,0
anim     = 10055
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 0 && time <= 8
x = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 9
x = 0.6

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem =4
attr = S,NA
hitflag = MAF
guardflag =
getpower = 0,0
givepower = 0,0
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 15,0
pausetime = 5,12
sparkno = 2
sparkxy = -20,-40
hitsound = s0,20
ground.type = High
ground.slide = 0
air.hittime = 20
sprpriority = 3
p2stateno = 5500
kill = 0

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(38)), (var(38))

[state a]
type = varadd
trigger1 = animelem = 5,>=0
v = 38
value = 5

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;------------------------------------------------------------------------
[Statedef 30050]
type     = S
movetype = I
physics  = S
velset   = 0,0
anim     = 10050
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 25
value = 50,1
volume = 0
channel = 0

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 100+(var(37)), 255-(var(37))

[state a]
type = varadd
trigger1 = time >=0
v = 37
value = 5

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 40
value = 30052

;------------------------------------------------------------------------
[Statedef 30051]
type     = S
movetype = I
physics  = S
velset   = 0,0
anim     = 10051
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(6) >= 0
x = 3

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 30052

;------------------------------------------------------------------------
[Statedef 30052]
type     = S
movetype = A
physics  = S
velset   = 0,0
anim     = 10056
ctrl     = 0
sprpriority = 3

[State -2]
type = palfx
trigger1 = enemy,name = "Chizuru&Maki"
trigger1 = enemy,palno = 4
time = -1
add = -50,-50,-50
color = 120
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 14
value = 50,2
volume = 0
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 13 && time <= 67
x = 2.5

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 38
x = 0

[State a]
type = helper
trigger1 = AnimElem =14
name = "shadow"
helpertype = normal
ID = 30057
pos = 40,-87
postype = p1
stateno = 30057
keyctrl = 0
ownpal = 1

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem =14
attr = S,NA
hitflag = MAF
guardflag =
getpower = 0,0
givepower = 0,0
animtype = hard
air.animtype = hard
priority = 4,Hit
damage = 50,0
pausetime = 5,12
sparkno = -1;2
sparkxy = -20,-80
hitsound = s50,3
ground.type = High
ground.slide = 0
air.hittime = 20
sprpriority = 3
p2stateno = 5505
palfx.time = 220
palfx.add = 200,200,200
palfx.mul = 170,170,170
palfx.sinadd = 75,75,75,15
palfx.color = 0
palfx.invertall = 1
kill = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem =14
anim = 40061;30061
pos = 38,22
postype = p1  ;p2,front,back,left,right
bindtime = 1
scale = 1.2,1
removetime = 550
sprpriority = 20
ownpal = 1
trans = addalpha
alpha = 80,300

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(38)), (var(38))

[state a]
type = varadd
trigger1 = animelem = 15,>=0
v = 38
value = 5

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
;---------------------------------------------------------------------------
; 相手幼(下段)
[Statedef 3021]
type = A
movetype = H
physics = N
velset = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 3021

[State 0, SelfState]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 相手幼
[Statedef 3025]
type = A
movetype = H
physics = N
velset = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 3025

[State 0, SelfState]
type = SelfState
trigger1 = Animtime = 0
value = 5100

;--------------------------------------------------------------------------------
[Statedef 4200]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 9280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 9280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 2760+Var(55)*30000 

[State 9280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4201

;---------------------------------------------------------------------------------
[Statedef 4201]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,1.6,-1.6)
y = -14

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-1.6,1.6)
y = -14

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .7 

[State 2160, 33]
type = null;Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = F66
sprpriority = -10
postype = p1
pos = 0,0
bindtime = 1

[State 2160, 34]
type = null;Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = F67
sprpriority = 2
postype = p1
pos = 0,0
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = f24
id = 7400
pos = 54,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = f24
id = 7400
facing = -1
pos = 74,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 183, 3]
type = EnvShake
trigger1 = Pos Y >= -20 && Vel Y > 0
persistent = 0
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= -20
trigger1 = Floor(gethitvar(chainid)/10000) = 1
trigger2 = Floor(gethitvar(chainid)/10000) = 5
trigger3 = Floor(gethitvar(chainid)/10000) = 6
anim = F4018
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= -20
trigger1 = Floor(gethitvar(chainid)/10000) = 3
anim = F4022
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= -20
trigger1 = Floor(gethitvar(chainid)/10000) = 2
anim = F4019
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= -20
trigger1 = Floor(gethitvar(chainid)/10000) = 4
anim = F4021
pos = -30,-7
sprpriority = 2
supermove = 2
Bindtime = 1

[State 250, 7]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -20
value = 4197

;---------------------------------------------------------------------------
[Statedef 4202]
type = A
movetype = H
physics = N
velset = 0,0

[state a]
type = SelfState
trigger1 = alive = 0
value = 5002

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 9280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 2760+30000*var(55)

[State 9280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4203

;----------------------------------------------------------------------
[Statedef 4203]
type = A
movetype = H
physics = N
velset = -5.8,-5.6

[State 0, NotHitBy]
type = NotHitBy
triggerall = Vel Y > 0
triggerall = Pos Y >= -5
trigger1 = alive
value = SCA
time = 5

[state a]
type = SelfState
trigger1 = alive = 0
value = 5002

[State 5411, 1]
type = Velset
trigger1 = !alive
trigger1 = Time = 0
x = 2
y = -5

[State 5411, 1]
type = HitVelSet
trigger1 = alive
trigger1 = Time = 0
x = 1
y = 1

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .6

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .7

[State 183, 3]
type = EnvShake
trigger1 = Pos Y >= -0 && Vel Y > 5
persistent = 0
ignorehitpause = 1
time = 12
ampl = -6
freq = 95
phase = 95

[State 250, 7]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 5
value = 5460

;--------------------------------------------------------------------------------------
[Statedef 4885]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000)
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4186

;---------------------------------------------------------------------------
[Statedef 4185]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4186

;------------------------------------------------------------------------------------
[Statedef 4186]
type = A
movetype = H
physics = N
velset = 0,0

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = 0
y = -15

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = 0
y = -15

[State 1660, 2]
type = VelMul
trigger1 = Time = [11,18]
y = .9999

[State 1281, 1]
type = VelAdd
trigger1 = Time = [1,11]
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time >= 12
y = .55 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = time >= 0
value = 5012+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5061+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
Trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5061+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;--------------------------------------------------------------------------
[Statedef 4860]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5053+Var(55)*30000 )
value = 5053+Var(55)*30000 

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5053+Var(55)*30000 )
value = 5053+Var(55)*30000 

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5052+Var(55)*30000 

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4161

;-------------------------------------------------------------------------------------
[Statedef 4161]
type = A
movetype = H
physics = N
velset = -6,-8

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8145, 3];]@
type = ChangeAnim
trigger1 = Time = 25
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 8140, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X >= 0
trigger1 = time = 2
x = -20
y = -15

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X >= 0
trigger1 = time = 3
x = -10
y = -5

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X < 0
trigger1 = time = 2
x = 20
y = -15
[State 1310, 1]
type = PosAdd
trigger1 = p2dist X < 0
trigger1 = time = 3
x = 10
y = -5

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6,-6)
y = -7

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6,6)
y = -7

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .5 

[State 1281, 1]
type = VelAdd
trigger1 = Time >40
y = .8 

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;--------------------------------------------------------------------------------------
[Statedef 4450]
type    = S
movetype= H
physics = N
velset = 0,0

[State 9000, 8];
type = ChangeState
trigger1 = Pos Y != 0
value = 4115

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 9000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = selfanimexist(5003+Var(55)*30000 ) && selfanimexist(5013+Var(55)*30000 )
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5003,5013)+Var(55)*30000 

[State 9000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !selfanimexist(5003+Var(55)*30000 ) && !selfanimexist(5013+Var(55)*30000 )
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 9000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 9000, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 9000, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9000, 6]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 9000, 8]
type = SelfState
trigger1 = statetype = C
trigger1 = GetHitVar(yvel) != 0
value = 9010

[State 9000, 7]
type = SelfState
trigger1 = HitShakeOver
trigger1 = Pos Y = 0
value = 4276

[State 201, 2]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4115

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 4115

;--------------------------------------------------------------------------------
[Statedef 4115]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4116

;------------------------------------------------------------------------------------
[Statedef 4116]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6,-6)
y = -6.7

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6,6)
y = -6.7

[State 1660, 4]
type = VelMul
trigger1 = Time <= 8
x = .97

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .5 

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4105
trigger1 = time >= 0
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4110
trigger1 = time >= 15
value = SCA, HT
time = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = anim != 1237+Var(55)*30000  && time = 2
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = anim != 1237+Var(55)*30000  && time = 5
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = anim != 1237+Var(55)*30000  && time = 11
trigger1 = selfanimexist(5061+Var(55)*30000 )
value = 5061+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
Trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5061+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;--------------------------------------------------------------------------------------
[Statedef 4105]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4116

;---------------------------------------------------------------------------------
[Statedef 4110]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4116

;------------------------------------------------------------------------------------
[Statedef 4276]
type = S
movetype= H
physics = N

[State 9001, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9001, 4]
type = VelMul
trigger1 = Pos Y = 0
trigger1 = Time >= 0
x = .8

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 2160, 33]
type = Explod
trigger1 = vel X != 0 && Time = 0
trigger1 = Random < 700
anim = F4020
sprpriority = 3
postype = p1
pos = 3,0
bindtime = 1

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
anim = F4017
postype = p1
pos = -30,0
sprpriority = 3
supermove = 2
Bindtime = 1

[State 9001, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10+Var(55)*30000 

[State 9001, 7]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------------
[Statedef 4170]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(5052+Var(55)*30000 )
value = 5052+Var(55)*30000 

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4171

;--------------------------------------------------------------------------------
[Statedef 4171]
type = A
movetype = H
physics = N
velset = -6,-8.5

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X >= 0
trigger1 = time = 2
x = -20
y = -15

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X >= 0
trigger1 = time = 3
x = -10
y = -5

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X < 0
trigger1 = time = 2
x = 20
y = -15

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X < 0
trigger1 = time = 3
x = 10
y = -5

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6.5,-6.5)
y = -7

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6.5,6.5)
y = -7

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .5 

[State 1281, 1]
type = VelAdd
trigger1 = Time >40
y = .8 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 0
value = 5050+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 0
value = 5061+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 24
value = 5050+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 24
value = 5061+Var(55)*30000 

[State 250, 7]
type = SelfState
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = !selfanimexist(5161+Var(55)*30000 )
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 41670

[State 250, 7]
type = SelfState
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = !selfanimexist(5161+Var(55)*30000 )
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 41670

[State 250, 7]
type = SelfState
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = selfanimexist(5161+Var(55)*30000 )
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 41670

[State 1280, 3]
type = SelfState
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = selfanimexist(5161+Var(55)*30000 )
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 4167

;-----------------------------------------------------------------------------------
[Statedef 41670]
type = L
movetype = H
physics = N
velset = 0

[State 0, 1]
type = palfx
trigger1 = 1
ignorehitpause=1
time = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 52, 1]
type = Playsnd
trigger1 = Time = 0 
value = F7,0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8145, 1]
type = Posset
trigger1 = Time = 0
y = 0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = 0
y = 0

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 4
x = ifelse(vel X >= 0,-6,6)
y = -3.5

[State 1281, 1]
type = VelAdd
trigger1 = Time > 4
y = .5 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = Time = 0
value = 5100

[State 5101, 4]
type = PosSet
trigger1 = Time = 4
y = 20

[State 8145, 3];]@
type = ChangeAnim
trigger1 = selfanimexist(5163+Var(55)*30000 )
trigger1 = Time = 4
value = 5160+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = !selfanimexist(5163+Var(55)*30000 )
trigger1 = Time = 4
value = 5160+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = time = 18
value = 41680

;-------------------------------------------------------------------------
[Statedef 41680]
type = L
movetype = H
physics = N
velset = 0,0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 1]
type = Playsnd
trigger1 = Time = 0 
value = F7,0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = 0
y = 0

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 4
x = ifelse(vel X >= 0,-5,5)
y = -2

[State 1281, 1]
type = VelAdd
trigger1 = Time > 4
y = .6 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 5101, 4]
type = PosSet
trigger1 = Time = 4
y = 20

[State 8145, 3];]@
type = ChangeAnim
trigger1 = Time = 4
value = 5160+Var(55)*30000 

[State 52, 1]
type = Playsnd
trigger1 = Time = 0 
value = F7,0
volume = 0

[State 8145, 4]
type = SelfState
trigger1 = time = 12
value = 41690

;------------------------------------------------------------------------------
[Statedef 41690]
type = L
movetype = H
physics = N
velset = 0,0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 410, 4]
type = SelfState
trigger1 = Time = 0 && (Life <= 0|SysVar(4) = 1|SysVar(3) = 1 )
value = 5150

[State 8145, 4]
type = SelfState
trigger1 = time = 16
value = 5120

;----------------------------------------------------------------------------------
[Statedef 4167]
type = L
movetype = H
physics = N

[State 0, 1]
type = palfx
trigger1 = 1
ignorehitpause=1
time = 0

[State 52, 1]
type = Playsnd
trigger1 = Time = 1
value = F7,0
volume = 0

[State 183, 3]
type = EnvShake
trigger1 = time = 1
persistent = 0
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 3000,1] 
type = Explod
triggerall = time = 1 && prevstateno = 4166
trigger1 = Floor(gethitvar(chainid)/10000) = 1
trigger2 = Floor(gethitvar(chainid)/10000) = 5
trigger3 = Floor(gethitvar(chainid)/10000) = 6
postype = p1
anim = F4018
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = time = 1 && prevstateno = 4166
trigger1 = Floor(gethitvar(chainid)/10000) = 2
anim = F4019
postype = p1
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = time = 1 && prevstateno = 4166
trigger1 = Floor(gethitvar(chainid)/10000) = 3
anim = F4022
postype = p1
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = time = 1 && prevstateno = 4166
trigger1 = Floor(gethitvar(chainid)/10000) = 4
anim = F4021
postype = p1
pos = -30,-7
sprpriority = 2
supermove = 2
Bindtime = 1

[State 2160, 33]
type = Explod
trigger1 = time = 1
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8145, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
y = 0

[State 1100,PosFreeze]
type = PosFreeze
trigger1 = time = [0,6]

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 6
y = -3.5

[State 1281, 1]
type = VelAdd
trigger1 = Time > 6
y = .5 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = selfanimexist(5101+Var(55)*30000 )
trigger1 = Time = [0,2]
value = 5101+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = !selfanimexist(5101+Var(55)*30000 )
trigger1 = Time = [0,2]
value = 5100+Var(55)*30000 

[State 5101, 4]
type = PosSet
trigger1 = Time = 6
y = 20

[State 8145, 3];]@
type = ChangeAnim
trigger1 = selfanimexist(5161+Var(55)*30000 )
trigger1 = Time = 6
value = 5161+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = !selfanimexist(5161+Var(55)*30000 )
trigger1 = Time = 6
value = 5160+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = time = 20
value = 4168

;------------------------------------------------------------------------------------
[Statedef 4168]
type = L
movetype = H
physics = N

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 1]
type = Playsnd
trigger1 = Time = 0 
value = F7,0
volume = 0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
y = 0

[State 1100,PosFreeze]
type = PosFreeze
trigger1 = time = [0,4]

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 4
y = -2

[State 1281, 1]
type = VelAdd
trigger1 = Time > 4
y = .6 

[State 8145, 3]
type = ChangeAnim
trigger1 = selfanimexist(5111+Var(55)*30000 )
trigger1 = Time = 0
value = 5111+Var(55)*30000 

[State 8145, 3]
type = ChangeAnim
trigger1 = !selfanimexist(5111+Var(55)*30000 )
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 5101, 4]
type = PosSet
trigger1 = Time = 4
y = 20

;[State 8145, 3];]@
;type = ChangeAnim
;trigger1 = selfanimexist(5167+Var(55)*30000 )
;trigger1 = selfanimexist(5161+Var(55)*30000 )
;trigger1 = Time = 4
;value = 5167+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
;trigger1 = !selfanimexist(5167+Var(55)*30000 )
trigger1 = selfanimexist(5161+Var(55)*30000 )
trigger1 = Time = 4
value = 5161+Var(55)*30000 

;[State 8145, 3];]@
;type = ChangeAnim
;trigger1 = selfanimexist(5167+Var(55)*30000 )
;trigger1 = !selfanimexist(5161+Var(55)*30000 )
;trigger1 = Time = 4
;value = 5167+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
;trigger1 = !selfanimexist(5167+Var(55)*30000 )
trigger1 = !selfanimexist(5161+Var(55)*30000 )
trigger1 = Time = 4
value = 5160+Var(55)*30000 

[State 52, 1]
type = Playsnd
trigger1 = Time = 12
value = F7,0
volume = 0

[State 8145, 4]
type = SelfState
trigger1 = time = 12
value = 4169

;-------------------------------------------------------------------------------
[Statedef 4169]
type = L
movetype = H
physics = N
velset = 0,0

[State 3550, 2]
type = PalFX
trigger1 = Time = 0
time = 1
add = 0, 0, 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8145, 3]
type = ChangeAnim
trigger1 = selfanimexist(5111+Var(55)*30000 )
trigger1 = Time = 0
value = 5111+Var(55)*30000 

[State 8145, 3]
type = ChangeAnim
trigger1 = !selfanimexist(5111+Var(55)*30000 )
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 410, 4]
type = SelfState
trigger1 = Time = 0 &&(Life <= 0|SysVar(4) = 1|SysVar(3) = 1)
value = 5150

[State 8145, 4]
type = SelfState
trigger1 = time = 16
value = 5120

;==================================================================================
[Statedef 4815]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4056

;---------------------------------------------------------------------------------------
[Statedef 4810]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4041

;----------------------------------------------------------------------------------------
[Statedef 4041]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4030
trigger1 = time >= 0
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4035
trigger1 = time >= 14
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4570
trigger1 = time >= 28
value = SCA, HT
time = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5030+Var(55)*30000  && time = 2
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5030+Var(55)*30000  && time = 5
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5012+Var(55)*30000  && time = 5
value = 5050+Var(55)*30000 

[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6,-6)
y = -6.7

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6,6)
y = -6.7

[State 1660, 4]
type = VelMul
trigger1 = Time <= 8
x = .97

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .5 

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
[Statedef 4030]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4041

;------------------------------------------------------------------------------
[Statedef 4035]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4041

;---------------------------------------------------------------------------------
[Statedef 4570]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4041

;----------------------------------------------------------------------------------

[Statedef 4985]
type    = C
movetype= H
physics = N
velset = 0,0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 5010, 3] 
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = SelfState
trigger1 = HitShakeOver
value = 4278

[State 9000, 8]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4055

[State 5010, 6]
type = SelfState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020+Var(55)*30000 
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;------------------------------------------------------------------------------------

[Statedef 4278]
type    = C
movetype= H
physics = N

[State 9001, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9001, 4]
type = VelMul
trigger1 = Pos Y = 0
trigger1 = Time >= 0
x = .8

[State 2160, 33]
type = Explod
trigger1 = time = 0
anim = F4020
sprpriority = 2
postype = p1
pos = 20,0
bindtime = 1

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
anim = F4017
postype = p1
pos = -40,0
sprpriority = 3
supermove = 2
Bindtime = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)+Var(55)*30000 

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5030999, 88888]
type = ChangeState
trigger1 = HitOver
trigger1 = Pos Y != 0
value = 5030

[State 8145, 4]
type = SelfState
trigger1 = HitOver
value = 11
ctrl = 1

;-------------------------------------------------------------------------------

[Statedef 4055]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4056

;------------------------------------------------------------------------------

[Statedef 4056]
type = A
movetype = H
physics = N
velset = 0,0

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4045
trigger1 = time >= 0
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4050
trigger1 = time >= 14
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4575
trigger1 = time >= 28
value = SCA, HT
time = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5030+Var(55)*30000  && time = 2
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5030+Var(55)*30000  && time = 5
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5012+Var(55)*30000  && time = 5
value = 5050+Var(55)*30000 

[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6,-6)
y = -6.7-.8

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6,6)
y = -6.7-.8

[State 1660, 4]
type = VelMul
trigger1 = Time <= 8
x = .97

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .5 

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100
;--------------------------------------------------------------------------------

[Statedef 4045]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4056

;---------------------------------------------------------------------------

[Statedef 4050]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4056

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .5 

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------

[Statedef 4575]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4056
;----------------------------------------------------------
[Statedef 4490]
type    = C
movetype= H
physics = N
velset = 0,0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 5010, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = !selfanimexist(5023+Var(55)*30000 )
value = 5020 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 1]
type = ChangeAnim
trigger1 = Time = 0
;trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = selfanimexist(5023+Var(55)*30000 )
value = 5023+Var(55)*30000 

[State 5010, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 5010, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = SelfState
trigger1 = HitShakeOver
value = 4278

[State 9000, 8]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4075

;-----------------------------------------------------------------------
[Statedef 4278]
type    = C
movetype= H
physics = N

[State 9001, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9001, 4]
type = VelMul
trigger1 = Pos Y = 0
trigger1 = Time >= 0
x = .8

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)+Var(55)*30000 

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5030999, 88888]
type = ChangeState
trigger1 = HitOver
trigger1 = Pos Y != 0
value = 5030

[State 8145, 4]
type = SelfState
trigger1 = HitOver
value = 11
ctrl = 1

;------------------------------------------------------------------------------
[Statedef 4075]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4086

;--------------------------------------------------------------------------
[Statedef 4086]
type = A
movetype = H
physics = N
velset = -2,-6.5

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,2,-2)
y = -15

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-2,2)
y = -15

[State 1660, 2]
type = VelMul
trigger1 = Time = [11,18]
y = .9999

[State 1281, 1]
type = VelAdd
trigger1 = Time = [1,11]
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time >= 12
y = .55 

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4075
trigger1 = time >= 0
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4080
trigger1 = time >= 37
value = SCA, HT
time = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = time = 2
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5061+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
Trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5061+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;------------------------------------------------------------------
[Statedef 4080]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4086

;----------------------------------------------------------------------
[Statedef 4830]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4101

;--------------------------------------------------------------------------
[Statedef 4101]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6,-6)
y = -6.7

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6,6)
y = -6.7

[State 1660, 4]
type = VelMul
trigger1 = Time <= 8
x = .97

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .5 

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4090
trigger1 = time >= 0
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4095
trigger1 = time >= 15
value = SCA, HT
time = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = anim != 1237+Var(55)*30000  && time = 2
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = anim != 1237+Var(55)*30000  && time = 5
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = anim != 1237+Var(55)*30000  && time = 11
trigger1 = selfanimexist(5061+Var(55)*30000 )
value = 5061+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
Trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5061+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;----------------------------------------------------------------------
[Statedef 4090]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4101

;-----------------------------------------------------------------------------
[Statedef 4095]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4101

;------------------------------------------------------------------------
[Statedef 4945]
type    = S
movetype= H
physics = N
velset = 0,0

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 4055

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 9000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 9000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 9000, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 9000, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9000, 6]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 9000, 8]
type = SelfState
trigger1 = statetype = C
trigger1 = GetHitVar(yvel) != 0
value = 9010

[State 5010, 6]
type = SelfState
trigger1 = HitShakeOver
value = 5030

[State 9000, 7]
type = SelfState
trigger1 = HitShakeOver
trigger1 = Pos Y = 0
value = 4276

[State 201, 2]
type = SelfState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4055

;-----------------------------------------------------------------------
[Statedef 4955]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1025, Anim] ;Custom animation
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(4295+Var(55)*30000 )
trigger1 = selfanimexist(5052+Var(55)*30000 )
value = 4295+Var(55)*30000 

[State 1025, Anim] ;Custom animation
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(4295+Var(55)*30000 )
trigger1 = selfanimexist(5052+Var(55)*30000 )
value = 5052+Var(55)*30000 

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(4295+Var(55)*30000 )
trigger1 = !selfanimexist(5052+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4296

;------------------------------------------------------------------------
[Statedef 4295]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 1025, Anim] ;Custom animation
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(4295+Var(55)*30000 )
trigger1 = selfanimexist(5052+Var(55)*30000 )
value = 4295+Var(55)*30000 

[State 1025, Anim] ;Custom animation
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(4295+Var(55)*30000 )
trigger1 = selfanimexist(5052+Var(55)*30000 )
value = 5052+Var(55)*30000 

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(4295+Var(55)*30000 )
trigger1 = !selfanimexist(5052+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4296
;-----------------------------------------------------------------
[Statedef 4296]
type    = A
movetype= H
physics = N

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,17,-17)
y = -4.8

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-17,17)
y = -4.8

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
y = .45 

[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -10
trigger1 = BackEdgeBodyDist < 30
trigger2 = FrontEdgeBodyDist < 30
value = 1
movecamera = 0

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -10
trigger1 = BackEdgeBodyDist <= 0
trigger2 = FrontEdgeBodyDist <= 0
value = 4297

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 4237

;-----------------------------------------------------------------------------
[Statedef 4297]
type    = A
movetype= H
physics = N

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0
x = 0;15 - BackEdgeBodyDist

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 5015+Var(55)*30000 

[State 1027, 撞墙声音]
type = PlaySnd
trigger1 = Time = 0
value = F5000,2

[State 1027, 撞墙震动]
type = envshake
trigger1 = !Time
time = 10

[State 296, 撞墙火花]
type = Explod
trigger1 = Time = 0
anim = F70
pos = -10,-50
postype = p1
sprpriority = -1
supermove = 1
bindtime = 1
ownpal = 1
removeongethit = 1

[State 1027, State]
type = ChangeState
trigger1 = Time = 2
value = 4298

;--------------------------------------------------------------------------
[Statedef 4298]
type = A
movetype = H
physics = N
velset = -2,-7

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time = 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time = 5
value = 5050+Var(55)*30000 

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 8145, 1]
type = Velset
trigger1 = p2dist X >= 0
trigger1 = Time = 0
x = 2
y = -7

[State 8145, 1]
type = Velset
trigger1 = p2dist X <= 0
trigger1 = Time = 0
x = -2
y = -7

[State 1500, 2]
type = PosAdd
trigger1 = Time = 1
trigger2 = Time = 2
y = -20

[State 1281, 1]
type = VelAdd
trigger1 = Time < 2
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .4 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 35
y = .5 

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 5100

;-------------------------------------------------------------------------
[Statedef 4237]
type = L
movetype = H
physics = N
;velset = 0,0

[State 0, 1]
type = palfx
trigger1 = 1
ignorehitpause=1
time = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 2160, 33]
type = Explod
trigger1 = time = 0
anim = F4020
sprpriority = 2
postype = p1
pos = 20,0
bindtime = 1

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
anim = F4017
postype = p1
pos = 30,0
sprpriority = 3
supermove = 2
Bindtime = 1

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0 
value = F7,0

[State 1027, Sound]
type = PlaySnd
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
value = F12,0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(5166+Var(55)*30000 )
Trigger1 = Time = 0
value = 5166+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(5166+Var(55)*30000 )
Trigger1 = Time = 0
value = 5100+Var(55)*30000 

[State 1660, 4]
type = VelMul
trigger1 = time = 0
x = .4

[State 8, 0]
type = posset
trigger1 = 1
y = 0
[State 8[State 0, 0]
type = VelSet
trigger1 = 1
y = 0

[State 250, 7]
type = SelfState
trigger1 = time = 20
value = 4238

;-----------------------------------------------------------------------------------
[Statedef 4238]
type    = L
movetype= H
physics = N
velset = 0,0

[State 1002, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 410, 4]
type = SelfState
trigger1 = Time = 0
trigger1 = Life <= 0|SysVar(4) = 1|SysVar(3) = 1 
value = 5150

[State 8145, 4]
type = SelfState
trigger1 = time =12
value = 5120

;=================================================================================
[Statedef 4301]
type    = S
movetype= H
physics = S

[State 9001, 2]
type = HitVelSet
trigger1 = Time = 0
x = 0

[State 9001, 7]
type = SelfState
trigger1 = time = 28
value = 0
ctrl = 1
;============================================================================
[Statedef 4330]
type = S
movetype = H
physics = N
velset = 0,0

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 4335

[State 5000, 1]
type = ChangeAnim
trigger1 = time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 5000, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9000, 7];XCh
type = SelfState
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = HitShakeOver
trigger1 = Pos Y = 0
value = 4276

[State 9000, 8]
type = SelfState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045

[State 9000, 8];
type = ChangeState
trigger1 = Pos Y != 0
value = 4335

;--------------------------------------------------------------------------------
[Statedef 4335]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 201, 2]
type = SelfState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 5050+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4336

;------------------------------------------------------------------------
[Statedef 4336]
type = A
movetype = H
physics = N
ctrl = 0

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = ifelse(prevstateno = 4540,.65 ,.5 )

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0 && prevstateno = 4540
trigger1 = enemy,facing=1
x = ifelse(facing=1,2.5,-2.5)
y = -9

[State 0, 1]
type = VelSet
trigger1 = Time = 0 && prevstateno = 4540
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-2.5,2.5)
y = -9

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0 && prevstateno != 4540
trigger1 = enemy,facing=1
x = ifelse(facing=1,2.8,-2.8)
y = -6.3

[State 0, 1]
type = VelSet
trigger1 = Time = 0 && prevstateno != 4540
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-2.8,2.8)
y = -6.3

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4335
trigger1 = prevstateno != 4375
trigger1 = prevstateno != 4980
trigger1 = time >= 0
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno != 4335
trigger1 = prevstateno = 4375
trigger1 = prevstateno != 4980
trigger1 = time >= 0
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4980
trigger1 = prevstateno != 4375
trigger1 = prevstateno != 4335
trigger1 = time >= 20
value = SCA, HT
time = 1

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040+Var(55)*30000 
trigger2 = Time = 0
trigger2 = Anim != 5035+Var(55)*30000 
value = 5040+Var(55)*30000 

[State 3550, 2]
type = PalFX
trigger1 = Time = 0
trigger1 = Anim = 5040+Var(55)*30000 
time = 1
add = 0, 0, 0

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = H

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
anim = F4017
pos = -15,3
postype = p1
sprpriority = 3
supermove = 2
Bindtime = 1

[State 5040, 6]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52

;-----------------------------------------------------------------------------
[Statedef 4540]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 201, 2]
type = SelfState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 5050+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4336

;-----------------------------------------------------------------------------
[Statedef 4375]
type = A
movetype = H
physics = N

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 201, 2]
type = SelfState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 5050+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4336

;-------------------------------------------------------------------------------
[Statedef 4980]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 201, 2]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 5050+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4336;4981

;------------------------------------------------------------------------------
[Statedef 8882]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 10
anim = 10000

[State 0]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 800, 1]
type = PlaySnd
trigger1 = time=0
value = F778, 2

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 2
range = -3,-1

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 3
range = -1,1

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 4
range = 1,3

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 5
range = -8,-5

[State 1230]
type = veladd
trigger1 = 1
y = .44

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8880
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = 5+floor(Random/200.0),0
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8881
id = 8880+(time=2)
sprpriority = -1+(time=2)*11
postype = p1
pos = 30+floor(Random/250.0),-5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8882
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = 40+floor(Random/250.0),-15
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8883
id = 8880+(time=2)
sprpriority = -1+(time=2)*11
postype = p1
pos = -5-floor(Random/200.0),0
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8884
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = -30-floor(Random/250.0),-5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8885
id = 8880+(time=2)
sprpriority = -1+(time=2)*11
postype = p1
pos = -40-floor(Random/250.0),-15
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8880+floor(Random/250.0)
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = 0-floor(Random/500.0),5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(3),var(5)
accel = 0,.44
removetime =35

[State 2]
Type = ModifyExplod
Trigger1 =time>30
ID = 8880
Trans = addalpha
Alpha = 255-2*time,255-time

[State 2]
Type = ModifyExplod
Trigger1 =time>30
ID = 8881
Trans = addalpha
Alpha = 255-2*time,255-time

[State 1000, 5]
type = Explod
trigger1 = time=1
anim = F74448
id = 74448
sprpriority = -2
postype = p1
pos = 0,0
bindtime =  1
supermove = 1
under = 0
ownpal = 1

[State 1230]
type = destroyself
trigger1 = pos Y > 4 && vel Y > 0
trigger2 = time >= 40

;-------------------------------------------------------------------
[Statedef 8883]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 10000

[State 0]
type = AssertSpecial
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = 1
flag = invisible

[State 0]
type = NotHitBy
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = 1
value = SCA

[State 0, HitBy]
type = HitBy
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = 1
value = SCA

[State 800, 1]
type = PlaySnd
triggerall =root,var(18) = 0
triggerall = root,stateno!=3610
trigger1 = IsHelper
trigger1 = time =0
value = F778, 2

[State 1230]
type = VarRandom
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = time = [0,2]
v = 2
range = -3,-1

[State 1230]
type = VarRandom
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = time = [0,2]
v = 3
range = -1,1

[State 1230]
type = VarRandom
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = time = [0,2]
v = 4
range = 1,3

[State 1230]
type = VarRandom
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = time = [0,2]
v = 5
range = -8,-5

[State 1230]
type = veladd
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = 1
y = .44

[State 1000, 5]
type = Explod
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = time=0
anim = F8881
id = 8882+(time=2)
sprpriority = 999
postype = p1
pos = 5+floor(Random/200.0),0
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = time=0
anim = F8882
id = 8882+(time=2)
sprpriority = 999
postype = p1
pos = 30+floor(Random/250.0),-5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = time=0
anim = F8881
id = 8882+(time=2)
sprpriority = 999
postype = p1
pos = 40+floor(Random/250.0),-15
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = time=0
anim = F8882
id = 8882+(time=2)
sprpriority = 999
postype = p1
pos = -5-floor(Random/200.0),0
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = time=0
anim = F8881
id = 8882+(time=2)
sprpriority = 999
postype = p1
pos = -30-floor(Random/250.0),-5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = time=0
anim = F8881
id = 8882+(time=2)
sprpriority = 999
postype = p1
pos = -40-floor(Random/250.0),-15
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = time=0
anim = F8881+floor(Random/250.0)
id = 8882+(time=2)
sprpriority = 999
postype = p1
pos = 0-floor(Random/500.0),5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(3),var(5)
accel = 0,.44
removetime =35

[State 2]
Type = ModifyExplod
triggerall =root,var(18) = 0
trigger1 = IsHelper
Trigger1 =time>30
ID = 8882
Trans = addalpha
Alpha = 255-2*time,255-time

[State 2]
Type = ModifyExplod
triggerall =root,var(18) = 0
trigger1 = IsHelper
Trigger1 =time>30
ID = 8881
Trans = addalpha
Alpha = 255-2*time,255-time

[State 1230]
type = destroyself
triggerall =root,var(18) = 0
trigger1 = IsHelper
trigger1 = pos Y > 4 && vel Y > 0
trigger2 = time >= 90
;-----------------------------------------------------------------------------
[Statedef 4805]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4026

;------------------------------------------------------------------
[Statedef 4026]
type = A
movetype = H
physics = N
velset = -2,-7

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4015
trigger1 = time >= 0
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4020
trigger1 = time >= 35
value = SCA, HT
time = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = time = 2
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = time = 9
value = 5050+Var(55)*30000 

[State 8, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,2,-2)
y = -12.5

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-2,2)
y = -12.5

[State 1281, 1]
type = VelAdd
trigger1 = Time = [5,10]
y = .9 

[State 1660, 2]
type = VelMul
trigger1 = Time = [3,21]
y = .915

[State 1281, 1]
type = VelAdd
trigger1 = Time >= 21
y = .565 

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 5100

;-----------------------------------------------------------------
[Statedef 4015]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1100, 5]
type = PlayerPush
trigger1 = 1
value = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4026

;--------------------------------------------------------------------
[Statedef 4020]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1100, 5]
type = PlayerPush
trigger1 = 1
value = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4026

;-----------------------------------------------------------------------------
[Statedef 5680]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = -.4
y = -15

[State 52, 2]
type = Veladd
trigger1 = time >= 5
y = .7

[State 810,]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
ampl = 4
freq = 120
time = 10

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3680+Var(55)*30000 

[State 1830]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
[Statedef 4160]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5053+Var(55)*30000 )
value = 5053+Var(55)*30000 

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5053+Var(55)*30000 )
value = 5053+Var(55)*30000 

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5052+Var(55)*30000 

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4161

;-----------------------------------------------------------------------
[Statedef 777888999]
type = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[state 2901,1]
type = nothitby
trigger1 = 1
value = SCA

[State 0, PosSet]
type = PosSet
trigger1 = 1
x = enemynear, pos x
ignorehitpause = 1

[State 1100, 1]
type = Helper
trigger1 = time=0
id = 1234567777
sprpriority = 6
postype = P1
pos = 0,0
stateno = 195
helpertype = normal
keyctrl = 0 
facing=1
ownpal = 1
ontop = 1
ignorehitpause = 0
persistent = 0

[State 2205]
type = ChangeAnim
trigger1 = time = 0
trigger1 = selfanimexist(195+root,Var(55)*10000)
value = 195+root,Var(55)*10000

[State 5120, 5]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 195, 3]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = AnimElem = 13,>=0
trigger3 = time>400
value = 777888995

;---------------------------------------------------------------------------
[Statedef 777888995]
type = S
movetype = A
physics = N
poweradd = 0
velset = 0
ctrl = 0
sprpriority = 1
facep2 = 1

[State 0, VarSet]
type = Varadd
trigger1 = time = 0
v = 1
value = 1

[state 2901,1]
type = nothitby
trigger1 = 1
value = SCA

[State 2205]
type = ChangeAnim
trigger1 = time = 0&&var(1)=2
trigger1 = selfanimexist(200+root,Var(55)*10000)
value = 200+root,Var(55)*10000

[State 2205]
type = ChangeAnim
trigger1 = time = 0&&var(1)=[0,1]
trigger1 = selfanimexist(210+root,Var(55)*10000)
value = 210+root,Var(55)*10000

[State 2205]
type = ChangeAnim
trigger1 = time = 0
trigger1 =!selfanimexist(210+root,Var(55)*10000)
trigger1 = selfanimexist(230+root,Var(55)*10000)
value = 230+root,Var(55)*10000 

[State 1081, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 200, 3]
type = HitDef
trigger1 = 1
attr = S, NA
animtype = Light
damage = 0
guardflag = M
hitflag = MAF
pausetime = 1,2
sparkno = 0+(Random < 500)*100+(Random < 500)*100+(Random < 500)*100
guard.sparkno = -1
sparkxy = -15,-50
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 4985
persistent = 0

[State 100, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 777888995+(var(1)=2)

;-----------------------------------------------------------------------------
[Statedef 777888996]
type = S
movetype = A
physics = N
poweradd = 0
velset = 0
ctrl = 0
facep2 = 1
sprpriority = 1

[State 0, VarSet]
type = Varadd
trigger1 = time = 0
v = 2
value = 1

[State 2205]
type = ChangeAnim
trigger1 = time = 0&&var(2)=2
trigger1 = selfanimexist(220+root,Var(55)*10000)
value = 220+root,Var(55)*10000

[State 2205]
type = ChangeAnim
trigger1 = time = 0&&var(2)=3
trigger1 = selfanimexist(400+root,Var(55)*10000)
value = 400+root,Var(55)*10000

[State 2205]
type = ChangeAnim
trigger1 = time = 0&&var(2)=4
trigger1 = selfanimexist(420+root,Var(55)*10000)
value = 420+root,Var(55)*10000

[State 2205]
type = ChangeAnim
trigger1 = time = 0&&var(2)=[0,1]
trigger1 = selfanimexist(230+root,Var(55)*10000)
value = 230+root,Var(55)*10000 

[State 2205]
type = ChangeAnim
trigger1 = time = 0
trigger1 =!selfanimexist(230+root,Var(55)*10000)
trigger1 = selfanimexist(200+root,Var(55)*10000)
value = 200+root,Var(55)*10000

[State 1081, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 200, 3]
type = HitDef
trigger1 = 1
attr = S, NA
animtype = Light
damage = 0
guardflag = M
hitflag = MAF
pausetime = 1,2
sparkno = 0+(Random < 500)*100+(Random < 500)*100+(Random < 500)*100
guard.sparkno = -1
sparkxy = -15,-30
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 4985
persistent = 0

[State 100, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 777888996+(var(2)=4)

;------------------------------------------------------------------------------
[Statedef 777888997]
type = S
movetype = A
physics = N
poweradd = 0
velset = 0
ctrl = 0
facep2 = 1
sprpriority = 1

[State 2205]
type = ChangeAnim
trigger1 = time = 0
trigger1 = selfanimexist(240+root,Var(55)*10000)
value = 240+root,Var(55)*10000

[State 2205]
type = ChangeAnim
trigger1 = time = 0
trigger1 =!selfanimexist(240+root,Var(55)*10000)
trigger1 = selfanimexist(200+root,Var(55)*10000)
value = 200+root,Var(55)*10000

[State 1081, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 200, 3]
type = HitDef
trigger1 = 1
attr = S, NA
animtype = Light
damage = 0
guardflag = M
hitflag = MAF
pausetime = 1,2
sparkno = 0+(Random < 500)*100+(Random < 500)*100+(Random < 500)*100
guard.sparkno = -1
sparkxy = -15,-30
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 30
ground.hittime = 9
ground.velocity = -7.5
guard.hittime = 6
guard.velocity = -7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 4985
persistent = 0

[State 1010, 0]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype != H
trigger3 = Parent,stateno != [3750,3752]
trigger4 = root,statetype = L
trigger5 = movetype = H
ignorehitpause = 1
persistent = 0

;--------------------------------------------------------------------------------
[Statedef 4975]
type    = S
movetype= H
physics = N
velset = 0,0

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 4980

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 9000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 9000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 9000, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 9000, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9000, 6]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 9000, 8]
type = ChangeState
trigger1 = statetype = C
trigger1 = GetHitVar(yvel) != 0
value = 9010

[State 9000, 7]
type = SelfState
trigger1 = HitShakeOver
trigger1 = Pos Y = 0
value = 4276

[State 201, 2]
type = SelfState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 4980

;-----------------------------------------------------------------------

[Statedef 4277]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 5010, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = SelfState
trigger1 = HitShakeOver
value = 4278

[State 9000, fenghua]
type = ChangeState
trigger1 = Pos Y != 0
trigger2 = Time = 0
trigger2 = GetHitVar(yvel) != 0 && GetHitVar(fall)
value = 4275

[State 9000, 8]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045
;-------------------------------------------------------------------------------
[Statedef 4275]
type    = S
movetype= H
physics = N
velset = 0,0

[State 9000, 8];
type = ChangeState
trigger1 = Pos Y != 0
value = 4045

[State 5000, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 5000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 5000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 5000, 3]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 9000, 7]
type = SelfState
trigger1 = HitShakeOver
trigger1 = Pos Y = 0
value = 4276

[State 201, 2]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045

[State 201, 2]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045

;-----------------------------------------------------------------------------------
[Statedef 4900]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 9280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 9280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 2760+Var(55)*30000 

[State 9280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4211

;------------------------------------------------------------------------------
[Statedef 4211]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,1.6,-1.6)
y = -14

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-1.6,1.6)
y = -14

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .7 

;[State 2160, 33]
;type = Explod
;trigger1 = Vel Y > 0 && Pos Y >= -20
;anim = F66
;sprpriority = -10
;postype = p1
;pos = 0,0
;bindtime = 1

;[State 2160, 34]
;type = Explod
;trigger1 = Vel Y > 0 && Pos Y >= -20
;anim = F67
;sprpriority = 2
;postype = p1
;pos = 0,0
;bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = f24
id = 7400
pos = 54,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = f24
id = 7400
facing = -1
pos = 74,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 183, 3]
type = EnvShake
trigger1 = Pos Y >= -20 && Vel Y > 0
persistent = 0
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 250, 7]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -20
value = 4197

;------------------------------------------------------------------------------
;---------------------------------------------------------------------------
;
[Statedef 4720]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 52, 1]
type = Veladd
trigger1 = time >= 0 && TIME < 9
y = -.1

[State 52, 1]
type = VelSet
trigger1 = time = 9
x = -2.4
y = -14

[State 52, 2]
type = Veladd
trigger1 = time >= 9
y = .5


[State 52, 1]
type = lifeadd
trigger1 = time = 9
value = -300

[State 2600, GrndEX1]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
id = 1507
anim = f66
postype = p1
pos = 0,5
sprpriority = -3
ownpal = 1
removeongethit = 1

[State 2600, GrndEX2]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
id = 1508
anim = f67
postype = p1
pos = 0,13
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = f24
id = 7400
pos = 54,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = f24
id = 7400
facing = -1
pos = 74,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 810,]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
ampl = 10
freq = 120
time = 10

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
value = 1237

[State 1830]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100
;==============================================================================
[Statedef 4150]
type = L
movetype = H
physics = N

[State 8140, 1]
type = posSet
trigger1 = 1
y = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 5080, 1]
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5081)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081+Var(55)*30000,5089+Var(55)*30000])|| (anim = [5111+Var(55)*30000 ,5119+Var(55)*30000 ]) || (anim = [5161+Var(55)*30000 ,5162+Var(55)*30000 ]) || anim = 5101+Var(55)*30000 
trigger1 = selfanimexist(sysvar(2) + (anim % 10)+Var(55)*30000 )
sysvar(2) = anim % 10

[State 5080, 3]
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090+Var(55)*30000 
trigger1 = !selfanimexist(5090+Var(55)*30000 )
sysvar(2) = 5030

[State 5080, 3]
type = ChangeAnim
trigger1 = 1
value = sysvar(2)+Var(55)*30000 

[State 8145, 2];qbg
type = SelfState
trigger1 = HitShakeOver = 1
trigger1 = (anim = [5081+Var(55)*30000,5089+Var(55)*30000])|| (anim = [5111+Var(55)*30000 ,5119+Var(55)*30000 ]) || (anim = [5161+Var(55)*30000 ,5162+Var(55)*30000 ]) || anim = 5101+Var(55)*30000 
value = 4146

[State 8145, 3];qbg
type = SelfState
trigger1 = HitShakeOver = 1
trigger1 = anim = 5080+Var(55)*30000  || (anim = [5100+Var(55)*30000 ,5110+Var(55)*30000 ])
value = 4148

;---------------------------------------------------------------------------------
[Statedef 4146]
type = L
movetype = H
physics = N
velset = 0

[State 0, 1]
type = palfx
trigger1 = 1
ignorehitpause=1
time = 0


[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 183, 3]
type = EnvShake
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 2160, 33]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = F66
sprpriority = -10
postype = p1
pos = 0,0
bindtime = 1

[State 2160, 34]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = F67
sprpriority = 2
postype = p1
pos = 0,0
bindtime = 1

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0 
value = F7,0
volume = 0

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f24
id = 7400
pos = 54,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f24
id = 7400
facing = -1
pos = 74,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 8145, 1]
type = Posset
trigger1 = Time = 0
y = 0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = 0
y = 0

[State 1100,PosFreeze]
type = PosFreeze
trigger1 = time = [0,4]

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 4
trigger1 = enemy,facing=1
x = ifelse(facing=1,2.5,-2.5)
y = -5
[State 0, 1]
type = VelSet
trigger1 = Time = 4
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-2.5,2.5)
y = -5

[State 1281, 1]
type = VelAdd
trigger1 = Time > 4
y = .5 

[State 8145, 2]
type = ChangeAnim
trigger1 = time = 0
value = 5111+Var(55)*30000 

[State 5101, 4]
type = PosSet
trigger1 = Time = 4
y = 20

[State 8145, 3]
type = ChangeAnim
trigger1 = selfanimexist(5167+Var(55)*30000 )
trigger1 = Time = 4
value = 5167+Var(55)*30000 

[State 8145, 3]
type = ChangeAnim
trigger1 = !selfanimexist(5167+Var(55)*30000 )
trigger1 = Time = 4
value = 5161+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = time = 25
value = 4147

;---------------------------------------------------------------------------------
[Statedef 4147]
type = L
movetype = H
physics = N

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 1]
type = Playsnd
trigger1 = Time = 0
value = F7,0
volume = 0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
y = 0

[State 1100,PosFreeze]
type = PosFreeze
trigger1 = time = [0,4]

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 4
y = -2.5

[State 1281, 1]
type = VelAdd
trigger1 = Time > 4
y = .6 

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 0
value = 5111+Var(55)*30000 

[State 5101, 4]
type = PosSet
trigger1 = Time = 4
y = 20

[State 8145, 3]
type = ChangeAnim
trigger1 = selfanimexist(5167+Var(55)*30000 )
trigger1 = Time = 4
value = 5167+Var(55)*30000 

[State 8145, 3]
type = ChangeAnim
trigger1 = !selfanimexist(5167+Var(55)*30000 )
trigger1 = Time = 4
value = 5161+Var(55)*30000 

[State 52, 1]
type = Playsnd
trigger1 = Time = 13 
value = F7,0
volume = 0

[State 8145, 4]
type = SelfState
trigger1 = time = 13
value = 4169

;--------------------------------------------------------------------------------
[Statedef 4148]
type = L
movetype = H
physics = N

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 183, 3]
type = EnvShake
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 2160, 33]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = F66
sprpriority = -10
postype = p1
pos = 0,0
bindtime = 1

[State 2160, 34]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
anim = F67
sprpriority = 2
postype = p1
pos = 0,0
bindtime = 1

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0 
value = F7,0
volume = 0

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 0 
anim = f24
id = 7400
pos = 54,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = Time = 0 
anim = f24
id = 7400
facing = -1
pos = 74,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = 0
y = 0

[State 1100,PosFreeze]
type = PosFreeze
trigger1 = time = [0,4]

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 4
trigger1 = enemy,facing=1
x = ifelse(facing=1,2.5,-2.5)
y = -5

[State 0, 1]
type = VelSet
trigger1 = Time = 4
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-2.5,2.5)
y = -5

[State 1281, 1]
type = VelAdd
trigger1 = Time > 4
y = .5 

[State 8145, 3];qbg
type = ChangeAnim
trigger1 = Time = 0
value = 5100+Var(55)*30000 

[State 5101, 4]
type = PosSet
trigger1 = Time = 4
y = 20

[State 8145, 3];qbg
type = ChangeAnim
trigger1 = Time = 4
value = 5160+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = time = 25
value = 4149

;---------------------------------------------------------------------------------
[Statedef 4149]
type = L
movetype = H
physics = N

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 5101, 4]
type = PosSet
trigger1 = Time = 0 || Time >= 13
y = 0

[State 52, 1]
type = Playsnd
trigger1 = (Time = 0 || Time = 13) 
value = F7,0
volume = 0

[State 8145, 1]
type = Velset
trigger1 = Time = 0 || Time >= 13
y = 0

[State 1100,PosFreeze]
type = PosFreeze
trigger1 = time = [0,4]

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 4
y = -2

[State 1281, 1]
type = VelAdd
trigger1 = Time > 4
y = .6 

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 0
value = 5100+Var(55)*30000 

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 4
value = 5160+Var(55)*30000 

[State 5101, 4]
type = PosSet
trigger1 = Time = 4
y = 20

[State 8145, 4]
type = SelfState
trigger1 = time = 13
value = 41490

;----------------------------------------------------------------------
[Statedef 41490]
type = L
movetype = H
physics = N

[State 3550, 2]
type = PalFX
trigger1 = Time = 0
time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = 0
y = 0

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 410, 4]
type = SelfState
trigger1 = Time = 0
trigger1 = Life <= 0|SysVar(4) = 1|SysVar(3) = 1 
value = 5150

[State 8145, 4]
type = SelfState
trigger1 = time = 12
value = 5120
;---------------------------------------------------------------------------
[Statedef 4640]
type    = S
movetype= H
physics = N
velset = -.5,0
sprpriority = -1

[State 2100, DM Spark 2]
type = Explod
trigger1 = TIME = 0
anim = F2
postype = p1
pos = -15,-60
bindtime = 1
sprpriority = 5
ownpal = 1

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2540+Var(55)*30000

[State 1];J
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = CHANGESTATE
trigger1 = animtime = 0
value = 4650

------------------------------------------------------------
[Statedef 4650]
type = A
movetype = H
physics = N
velset = -6,-7

[State 197, quake]
type = EnvShake
trigger1 = time = 0
time = 30
ampl = 6
freq = 90

[state a]
type = NOTHITBY
trigger1 = 1
value = SCA

[State 865, 2]
type = VelAdd
trigger1 = 1
y = .45

[State 354, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052+Var(55)*30000)
value = 5050+Var(55)*30000

[State 354, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052+Var(55)*30000)
value = 5052+Var(55)*30000

[State 354, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050+Var(55)*30000
trigger1 = SelfAnimExist(5060+Var(55)*30000)
persistent = 0
value = 5060+Var(55)*30000

[State 354, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052+Var(55)*30000
trigger1 = SelfAnimExist(5062+Var(55)*30000)
persistent = 0
value = 5062+Var(55)*30000

[State 865, 5]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
[Statedef 4777]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 52, 1]
type = VelSet
trigger1 = TIME = 0
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = animelemTIME(2) = 0
x = -1.4
y = -14

[State 52, 2]
type = lifeadd
trigger1 = time = 0
value=0

[State 52, 2]
type = Veladd
trigger1 = animelemtime(2) > 1
y = .45

[State 810,]
type = EnvShake
trigger1 = animelemtime(2) > 1
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
ampl = 10
freq = 120
time = 15

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = f24
id = 7400
pos = 54,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = Vel Y > 0 && Pos Y >= -20
anim = f24
id = 7400
facing = -1
pos = 74,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
value = 2760+Var(55)*30000

[State 1830]
type = SelfState
trigger1 = animelemtime(2) > 1
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;-------------------------------------------------------------------------------------
[Statedef 4820]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1236+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4071

;------------------------------------------------------------------------------
[Statedef 4071]
type = A
movetype = H
physics = N
velset = -2,-6.5

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,2,-2)
y = -15

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-2,2)
y = -15

[State 1660, 2]
type = VelMul
trigger1 = Time = [11,18]
y = .9999

[State 1281, 1]
type = VelAdd
trigger1 = Time = [1,11]
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time >= 12
y = .55 

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4060
trigger1 = time >= 0
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4065
trigger1 = time >= 30
value = SCA, HT
time = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = time = 2
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5061+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
Trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5061+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;-------------------------------------------------------------------------------
[Statedef 4060]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4071

;-----------------------------------------------------------------------------
[Statedef 4065]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4071

;====================================================================================
[Statedef 4317]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= H				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
sprpriority = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 3833+Var(55)*30000 

[State 821, 3]
type = SelfState
Trigger1 = time =500
value = 0
ctrl =1

;---------------------------------------------------------------------------------------
[Statedef 4318]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= H				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
sprpriority = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 3834+Var(55)*30000 

[State 5200, 5]
type = Offset
triggerall=TIME<500
trigger1=gametime%2=1
x = -5

[State 821, 3]
type = SelfState
Trigger1 = time =500
value = 0
ctrl =1

;------------------------------------------------------------------------------------
[Statedef 4319]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= H				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
sprpriority = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 3835+Var(55)*30000 

[State 5200, 5]
type = Offset
triggerall=TIME<500
trigger1=gametime%2=1
x = -5

[State 821, 3]
type = SelfState
Trigger1 = time =500
value = 0
ctrl =1

;========================================================================================
[Statedef 4320]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= H				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
sprpriority = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 3836+Var(55)*30000 

[State 5200, 5]
type = Offset
triggerall=TIME<20
trigger1=gametime%2=1
x = -5

[State 1];J
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[state a]
type = velset
trigger1 = ANIMELEM = 2
x = -10
y = -20

[State 821, 1]
type = VelAdd
Trigger1 = ANIMELEMTIME(2)>0
y = .6

[State 821, 3]
type = SelfState
Triggerall = ANIMELEMTIME(2)>0
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

--------------------------------------------------------------------------
[Statedef 4850]
type = A
movetype = H
physics = N

[State 9000, 8];
type = ChangeState
trigger1 = Pos Y != 0
value = 4140

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 9000, 8]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
trigger1 = Pos Y != 0
value = 4140

[State 201, 2]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
trigger1 = Pos Y = 0
value = 4240

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 4140

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5163+Var(55)*30000 )
trigger1 = Time >= 0
value = 5163+Var(55)*30000 

[State 8145, 3]
type = ChangeAnim
trigger1 = !selfanimexist(5163+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5017+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4131

;-----------------------------------------------------------------------
[Statedef 4131]
type = A
movetype = H
physics = N
velset = 0,15

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 1
y = 25

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .6 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 0
value = 5061+Var(55)*30000 

[State 8145, 3]
type = ChangeAnim
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 5
value = 5050+Var(55)*30000 

[State 250, 7]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 4127

;----------------------------------------------------------------------
[Statedef 4127]
type =  L
movetype = H
physics = N
velset = 0,0

[State 3550, 2]
type = PalFX
trigger1 = Time = 0
time = 1
add = 0, 0, 0

[State 52, 1]
type = Playsnd
trigger1 = Time = 0 
value = F7,0
volume = 0

[State 183, 3]
type = EnvShake
trigger1 = time = 0
persistent = 0
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 2160, 33]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
anim = F66
sprpriority = -10
postype = p1
pos = 0,-25
bindtime = 1

[State 2160, 34]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
anim = F67
sprpriority = 2
postype = p1
pos = 0,-25
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f25
id = 7400
pos = 0,-25
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f25
id = 7400
facing = -1
pos = 0,-25
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
value = F5000, 10
volume = 20

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8145, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5111+Var(55)*30000 )
trigger1 = selfanimexist(5161+Var(55)*30000 )
trigger1 = Time = 0
value = 5161+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5111+Var(55)*30000 )
trigger1 = selfanimexist(5167+Var(55)*30000 )
trigger1 = Time = 3
value = 5167+Var(55)*30000 

[State 1500, 2]
type = PosAdd
trigger1 = selfanimexist(5167+Var(55)*30000 )
trigger1 = Time = 0
y = 25

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5111+Var(55)*30000 )
trigger1 = selfanimexist(5161+Var(55)*30000 )
trigger1 = Time = 6
value = 5111+Var(55)*30000 

[State 1500, 2]
type = Posset
trigger1 = selfanimexist(5167+Var(55)*30000 )
trigger1 = Time = 6
y = 0

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5111+Var(55)*30000 )
trigger1 = selfanimexist(5167+Var(55)*30000 )
trigger1 = Time = 12
value = 5167+Var(55)*30000 

[State 1500, 2]
type = PosAdd
trigger1 = selfanimexist(5167+Var(55)*30000 )
trigger1 = Time = 12
y = 25

[State 8145, 1]
type = Velset
trigger1 = Time = 12
y = -4

[State 1281, 1]
type = VelAdd
trigger1 = Time > 12
y = .8 

[State 8145, 3]
type = ChangeAnim
trigger1 = !selfanimexist(5161+Var(55)*30000 )
trigger1 = Time = 0
value = 5160+Var(55)*30000 

[State 250, 7]
type = SelfState
trigger1 = time = 20
value = 4128

;--------------------------------------------------------------------------------
[Statedef 4128]
type    = L
movetype= H
physics = N
velset = 0,0

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0 
value = F7,0
volume = 0

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time =0
anim = F4017
postype = p1
pos = -40,3
sprpriority = 3
supermove = 2
Bindtime = 1

[State 1002, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5111+Var(55)*30000 )
trigger1 = Time = 0
value = 5111+Var(55)*30000 

[State 8145, 3]
type = ChangeAnim
trigger1 = !selfanimexist(5111+Var(55)*30000 )
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 410, 4]
type = SelfState
trigger1 = Time = 0
trigger1 = Life <= 0|SysVar(4) = 1|SysVar(3) = 1 
value = 5150

[State 8145, 4]
type = SelfState
trigger1 = time =30
value = 5120

;--------------------------------------------------------------------
[Statedef 4140]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(4136+Var(55)*30000 )
Trigger1 = Time >= 0
value = 4136+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(4136+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5050+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4141

;------------------------------------------------------------------------
[Statedef 4141]
type = A
movetype = H
physics = N
velset = 0,0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,7.5,-7.5)
y = 8

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-7.5,7.5)
y = 8

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .4 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 40
y = .8 

[State 250, 7]
type = SelfState
trigger1 = Pos Y >= -10 && Vel Y > 0
value = 4137

;-----------------------------------------------------------------------
[Statedef 4137]
type = L
movetype = H
physics = N

[State 3550, 2]
type = PalFX
trigger1 = Time = 0
time = 1
add = 0, 0, 0

[State 183, 3]
type = EnvShake
trigger1 = time = 0
persistent = 0
ignorehitpause = 1
ampl = 4
freq = 180
time = 15

[State 2160, 33]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F66
sprpriority = -10
postype = p1
pos = 0,0
bindtime = 1

[State 2160, 34]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F67
sprpriority = 2
postype = p1
pos = 0,0
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f24
id = 7400
pos = 54,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f24
id = 7400
facing = -1
pos = 74,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 52, 1]
type = Playsnd
trigger1 = Time = 0
value = F7,0
volume = 0

[State 1002, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100,PosFreeze]
type = PosFreeze
trigger1 = time = [0,4]

[State 1660, 4]
type = VelMul
trigger1 = Time = [5,6]
x = .5

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 4
y = -4

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .45 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5165+Var(55)*30000 )
trigger1 = Time = [0,1]
value = 5165+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(5165+Var(55)*30000 )
trigger1 = Time = 0
value = 5100+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(5165+Var(55)*30000 )
trigger1 = Time = 7
value = 5160+Var(55)*30000 

[State 250, 7]
type = SelfState
trigger1 = time = 26
value = 4138

;------------------------------------------------------------------------
[Statedef 4138]
type    = L
movetype= H
physics = N
velset = 0,0

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time =0
anim = F4017
postype = p1
pos = -40,3
sprpriority = 3
supermove = 2
Bindtime = 1

[State 1002, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0 
value = F7,0
volume = 0

[State 8145, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 410, 4]
type = SelfState
trigger1 = Time = 0
trigger1 = Life <= 0|SysVar(4) = 1|SysVar(3) = 1 
value = 5150

[State 8145, 4]
type = SelfState
trigger1 = time =12
value = 5120

;--------------------------------------------------------------------
[Statedef 4240]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4241

;---------------------------------------------------------------------------
[Statedef 4241]
type = A
movetype = H
physics = N
velset = -7,3

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(4236+Var(55)*30000 )
Trigger1 = Time = 4
value = 4236+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(4236+Var(55)*30000 )
Trigger1 = Time = 4
value = 5050+Var(55)*30000 

[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,8,-8)
y = -3

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-8,8)
y = -3

[State 1660, 4]
type = VelMul
trigger1 = Time <= 8
x = .98

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .4 

[State 250, 7]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 4237

;--------------------------------------
[Statedef 4800]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4011

;---------------------------------------------------------------------------
[Statedef 4011]
type = A
movetype = H
physics = N
velset = 0,0

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4000
trigger1 = time >= 0
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4005
trigger1 = time >= 30
value = SCA, HT
time = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = time = 2
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = time = 9
value = 5050+Var(55)*30000 

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,2,-2)
y = -12.6

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-2,2)
y = -12.6

[State 1281, 1]
type = VelAdd
trigger1 = Time = [5,10]
y = .9 

[State 1660, 2]
type = VelMul
trigger1 = Time = [3,21]
y = .915

[State 1281, 1]
type = VelAdd
trigger1 = Time >= 21
y = .565 

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 5100

;-------------------------------
[Statedef 4000]
type = A
movetype = H
physics = N
ctrl = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 1500, 2]
type = Posset
trigger1 = Time = 0
trigger1 = Pos Y >= 1
y = 0

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4011

;-----------------------------------
[Statedef 4005]
type = A
movetype = H
physics = N

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 1500, 2]
type = Posset
trigger1 = Time = 0
trigger1 = Pos Y >= 1
y = 0

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4011

;-----------------------------------------------------------------------------
[Statedef 4025]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4026

;--------------------------------------------------------------------------
[Statedef 4130]
type = S
movetype = H
physics = N

[State 9000, 8];
type = ChangeState
trigger1 = Pos Y != 0
value = 4140

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = null;HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 9000, 8]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
trigger1 = Pos Y != 0
value = 4140

[State 201, 2]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
trigger1 = Pos Y = 0
value = 4240

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 4140

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5163+Var(55)*30000 )
trigger1 = Time >= 0
value = 5163+Var(55)*30000 

[State 8145, 3]
type = ChangeAnim
trigger1 = !selfanimexist(5163+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5017+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4131

;---------------------------------------------------------------------------------
[Statedef 4666]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 5000, 1]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 5000, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 5000, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4661

;--------------------------------------------------------------------------
[Statedef 4661]
type = A
movetype = H
physics = N
velset = 0,0

[State 8145, 2]
type = ChangeAnim
trigger1 = time = 2
trigger1 = anim = 5030+Var(55)*30000|anim = [5000+Var(55)*30000,5007+Var(55)*30000] 
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = time = 2
trigger1 = !selfanimexist(1237+Var(55)*30000)
trigger1 = anim = [5010+Var(55)*30000,5017+Var(55)*30000] 
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = time = 2
trigger1 = selfanimexist(1237+Var(55)*30000)
trigger1 = anim = [5010+Var(55)*30000,5017+Var(55)*30000] 
value = 1237+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000)
trigger1 = time = 5
value = 5050+Var(55)*30000 

[State 5030, 1]
type = VelAdd
trigger1 = 1
y = .55 

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;------------------------------------------------------------------------
[Statedef 4667]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 5000, 1]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 5000, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 5000, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4661

;-------------------------------------------------------------------------------
[Statedef 4190]
type = A
movetype = H
physics = N

[State 0, llio]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4191

;------------------------------------------------------------------------
[Statedef 4191]
type = A
movetype = H
physics = N
velset = -2,-6.5

[State 0, llio]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = 0
y = -15

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = 0
y = -15

[State 1660, 2]
type = VelMul
trigger1 = Time = [11,18]
y = .9999

[State 1281, 1]
type = VelAdd
trigger1 = Time = [1,11]
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time >= 12
y = .55 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = time = 2
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = time = 10
value = 5061+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
Trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5061+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;-------------------------------
[Statedef 4600]
type = S
movetype = H
physics = N
ctrl = 0

[State anim]
type = ChangeAnim
trigger1 = Time < 40
value = anim
elem = animelemno(0)

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1500, 2]
type = Posset
trigger1 = Time = 0
trigger1 = Pos Y >= 1
y = 0

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4105

;-----------------------------------------------------------------------------
[Statedef 4840]
type = A
movetype = H
physics = N

[State 9000, 8];
type = ChangeState
trigger1 = Pos Y != 0
value = 4045

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 201, 2]
type = SelfState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 4045

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1230]
type = ChangeAnim
Trigger1 = Time >= 0
value = 5070+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4121

;--------------------------------------------------------------------------------
[Statedef 4121]
type = A
movetype = H
physics = N
velset = 0,0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,1.7,-1.7)
y = -8

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-1.7,1.7)
y = -8

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .78 

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 17
value = 4122

;-------------------------------------------------------------------------------
[Statedef 4122]
type    = L
movetype= H
physics = N

[State 3550, 2]
type = PalFX
trigger1 = Time = 0
time = 1
add = 0, 0, 0

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 1 
value = F7,0
volume = 0

[State -1]
type = null;ChangeState
triggerall = SysVar(4) != 1&&SysVar(3) != 1 
triggerall = var(58)|var(58) > 7
triggerall = time = 0
trigger1 = stateno = 5100 || stateno = 4122 || stateno = 4167
value = 3990

[State 2160, 33]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 1
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 5100, 2]
type = ChangeAnim
trigger1 = time = [0,4]
value = 5100+Var(55)*30000 

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6]
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = Time = 4
value = 4123

;--------------------------------------------------------------------------
[Statedef 4123]
type    = L
movetype= H
physics = N

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 5101, 1]
type = ChangeAnim
trigger1 = time = 0
value = 5160+Var(55)*30000 

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = -2.5

[State 5101, 5]
type = VelAdd
trigger1 = 1
y = .8 

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 20
anim = F4017
postype = p1
pos = 0,3
sprpriority = 3
supermove = 2
Bindtime = 1

[State 52, 1]
type = Playsnd
triggerall = StageVar(info.author) != "water"
triggerall = Vel Y > 0 && Pos Y >= 20
trigger1 = !SysVar(0)
value = F7,0
volume = 0

[State 8145, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 20
value = 41490

;---------------------------------------------------------------------------
[Statedef 7820]
type = A
movetype = H
physics = S
ctrl = 0
velset = 0,0
sprpriority = 997

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
y = -4

[State 0, VelSet]
type = VelSet
trigger1 =time=120
x = 0
y = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = time =[40,119]
trigger2 = time>320
y = 0.1

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
x = 0
y = 100

[State 0, PosSet]
type =PosSet
trigger1 =time=162
x = 30
y = -60

[State 0, PosSet]
type =PosSet
trigger1 =time=225
x = 0
y = -60

[State 0, AngleDraw]
type = AngleDraw
Trigger1 = Time < 162
scale = 1,1

[State 0, AngleDraw]
type = AngleDraw
Trigger1 = Time >= 162
scale = .5,.5

[State 3050]
type = ChangeAnim
Trigger1 = Time = 0
value = 2760+Var(55)*30000 

[State 3050]
type = ChangeAnim2
Trigger1 = Time = 162
value = 3820+Var(55)*30000 

[State 3050]
type = ChangeAnim2
Trigger1 = Time = 225
value = 3825+Var(55)*30000 

[State 3050]
type = ChangeAnim
Trigger1 = Time = 320
value = 2760+Var(55)*30000 

[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = time = 360
value = 99999

[State 0, TargetState]
type = SelfState
trigger1 = life<=0
trigger1 = enemynear,stateno=3830
value = 5002

;---------------------------------------------------------------------------
;=================================================================================
;跪倒
[Statedef 7311]
type = S
movetype = H
physics = N
velset = 0,0

[State 1500, 2]
type = Posset
trigger1 = Time = 0 
y = 0

[State 0, 1]
type = palfx
trigger1 = 1
ignorehitpause=1
time = 0

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(5950+Var(55)*30000 )
Trigger1 = Time = 0
value = 5950+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 =!selfanimexist(5950+Var(55)*30000)
trigger1 =selfanimexist(5600+Var(55)*30000 )
Trigger1 = Time = 0
value = 5600+Var(55)*30000

[State 800, 1]
type = ChangeState
trigger1 = animtime = 0
value = 7312

;---------------------------------------------------------------------------------
[Statedef 7312]
type = L
movetype = H
physics = N
velset = 0,0

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time < 25
value = 5111+Var(55)*30000

[State 1280, 2]
type = ChangeAnim
trigger1 = time =25
value = 5121+Var(55)*30000

[State 250, 7]
type = SelfState
trigger1 = animtime = 0&&anim=5121+Var(55)*30000
value = 0
ctrl = 1

[State 9000, 8]
type = SelfState
trigger1 = time =25
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4169;5110

;---------------------------------------------------------------------------------------
[Statedef 11492]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 10
anim = 10000

[State 0]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 800, 1]
type = PlaySnd
trigger1 = time=0
value = F778, 2
;channel = 0

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 2
range = -3,-1

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 3
range = -1,1

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 4
range = 1,3

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 5
range = -8,-5

[State 1230]
type = veladd
trigger1 = 1
y = .44

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8880
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = 5+floor(Random/200.0),0
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8881
id = 8880+(time=2)
sprpriority = -1+(time=2)*11
postype = p1
pos = 30+floor(Random/250.0),-5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8882
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = 40+floor(Random/250.0),-15
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8883
id = 8880+(time=2)
sprpriority = -1+(time=2)*11
postype = p1
pos = -5-floor(Random/200.0),0
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8884
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = -30-floor(Random/250.0),-5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8885
id = 8880+(time=2)
sprpriority = -1+(time=2)*11
postype = p1
pos = -40-floor(Random/250.0),-15
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=2
anim = F8880+floor(Random/250.0)
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = 0-floor(Random/500.0),5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(3),var(5)
accel = 0,.44
removetime =35

[State 2]
Type = ModifyExplod
Trigger1 =time>30
ID = 8880
Trans = addalpha
Alpha = 255-2*time,255-time

[State 2]
Type = ModifyExplod
Trigger1 =time>30
ID = 8881
Trans = addalpha
Alpha = 255-2*time,255-time

[State 1000, 5]
type = Explod
trigger1 = time=1
anim = F74448
id = 74448
sprpriority = -2
postype = p1
pos = 0,0
bindtime =  1
supermove = 1
under = 0
ownpal = 1

[State 1230]
type = destroyself
trigger1 = pos Y > 4 && vel Y > 0
trigger2 = time >= 40

;==============================================================================
[Statedef 8010]
ctrl = 0
anim = 10000

[state 0, vel]
type = veladd
trigger1 = 1
x = .06

[State 3121, 1]
type = Helper
triggerall = StageVar(info.author) != "water"
trigger1 = !time
id = 8882
postype = p1
pos = 0, 5
sprpriority = 10
stateno = 11492
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State 51000, Explod]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = !time
anim = f74
scale = 0.8,0.8
pos = 50,5
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
random = 100,50
sprpriority = 9
ontop = 1

[State 51000, Explod]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = !time
anim = f74
scale = 0.8,0.8
pos = -50,5
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
random = 100,50
sprpriority = 9
ontop = 1

[State 51000, Explod]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = !time
anim = f74
scale = 0.8,0.8
pos = 50,5
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
random = 100,50
sprpriority = -1

[State 51000, Explod]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = !time
anim = f74
scale = 0.8,0.8
pos = -50,5
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
random = 100,50
sprpriority = -1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = !time
anim = f25
id = 2100
sprpriority = -2
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State explod]
type = Explod
triggerall = StageVar(info.author) = "water"
trigger1 = !time
anim = f25
facing = -1
id = 2100
sprpriority = 6
postype = p1
pos = 9,-1
bindtime = 1
ignorehitpause = 0
under = 0
ownpal = 1

[State 855, whomp]
type = PlaySnd
triggerall = StageVar(info.author) = "water"
trigger1 = !time
value = F5000, 10
volume = 20

[State 0, end]
type = DestroySelf
trigger1 = time = 17

;---------------------------------------------------------------------------
;慢幼
;---------------------------------------------------------------------------
[Statedef 14900]
type     = A
movetype = I
physics  = N
juggle   = 0
ctrl     = 0
anim     = 10000
sprpriority = 1

[State 3020, 1]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
ignorehitpause = 1

[State 1001,]
type = Pause
triggerall = roundstate = 2
trigger1 = (GameTime%3) = 0
trigger1 = time = [0,20]
time = 1

[State 1001,]
type = Pause
triggerall = roundstate = 2
trigger1 = (GameTime%6) = 0
trigger1 = time = [21,30]
time = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time = 30
;---------------------------------------------------------------------------
;晕声效
;---------------------------------------------------------------------------
[Statedef 14901]
type     = A
physics  = N
ctrl     = 0
anim     = 10000

[State 5254, 3]
type = PlaySnd
trigger1 = Time = 0
value = f12,2
loop = 1
channel = 1

[State 1000]
type = ChangeState
trigger1 = root,stateno!= 95254
value = 14902
;------------------------------------------------------------------------------
; Now Stun!!!
;------------------------------------------------------------------------------

[Statedef 95254]
type = S
movetype = I
physics = S
anim = 5300+Var(55)*30000 
ctrl = 0

[State 5254, 2]
type = Hitfallset
trigger1 = Time = 0
value = 0

[State a]
type = helper
trigger1 = Time = 0
name = "shadow"
helpertype = normal
ID = 14901
pos = 0,0
postype = p1
stateno = 14901
keyctrl = 0
ownpal = 1

[State 5254, 7]
type = selfState
trigger1 = Time = 200
trigger2 = NumHelper(90900)
trigger2 = Helper(90900), Var(52) >= 12
value = 0
ctrl = 1

---------------------------------------------------------------------------
[Statedef 14902]
type     = A
physics  = N
ctrl     = 0
anim     = 10000

[State 0, StopSnd]
type = StopSnd
trigger1 = 1
channel = 1
ignorehitpause = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time = 1
;---------------------------------------------------------------------------
;Slip Damage
;---------------------------------------------------------------------------
[Statedef 5410]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
trigger1 = Pos Y > 0
y = 0
ignorehitpause = 1

[State 5411, 1]
type = Velset
trigger1 = !alive
trigger1 = Time = 0
x = 1
y = -5

[state a]
type = SelfState
trigger1 = alive = 0
trigger1 = time = 1
value = 5002

[State 5410, 1]
type = null
triggerall = facing = enemy,facing
trigger1 = time = 0

[State 5410, 2] 
type = ChangeAnim
trigger1 = Time = 0
value = 5305+Var(55)*30000 

[State 5410, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5410, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5411

;---------------------------------------------------------------------------
[Statedef 5411]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5411, 1]
type = VelAdd
trigger1 = alive
trigger1 = 1
y = GetHitVar(yaccel)

[State 5411, 1]
type = VelAdd
trigger1 = !alive
trigger1 = 1
y = 0.45

[State 5411, 1]
type = VelAdd
trigger1 = !alive
trigger1 = Time = 0
x = IfElse(facing=enemy,Facing,7,-7)
y = -5

[State 5411, 1]
type = HitVelSet
trigger1 = alive
trigger1 = Time = 0
x = 1
y = 1

[State 5411, 4]
type = ChangeState
;trigger1 = HitOver
trigger1 = Vel Y > 0    ;Hit ground
trigger1 = Pos Y >= 20  ;.
value = 5413 

;---------------------------------------------------------------------------;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
;---------------------------------------------------------------------------;---------------------------------------------------------------------------
[Statedef 5413]
type    = A
movetype= H
physics = N

[State 5413, 2]
type = ChangeAnim
trigger1 = time = 0
value = 5306+Var(55)*30000 
persistent = 0

[State 5413, 3] 
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5413, EnvShake]
type = nothitby
trigger1 = Time >= 0
value = SCA
time = 1

[State 5413, 2]
type = VelMul
trigger1 = abs(Vel X)>4
x = ifelse((abs(Vel X)=(4,4.88]),4/abs(Vel X),.82)

[State 5413, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5414

;-------------------------------------------------------------------------------
[Statedef 5414]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = palfx
trigger1 = time = 0
time = 0

[State 5414, EnvShake]
type = velset
trigger1 = 1
x = -5 + (Time>0) + (Time>1) + (Time>5) + (Time>10) + (Time>17) - (Time=14)
y = 0

[State 5414, EnvShake]
type = null;nothitby
trigger1 = Time >= 0
value = SCA
time = 1

[State 5414, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5414, Var]
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5414, 2]
type = Null;ChangeAnim
trigger1 = GetHitVar(groundtype) = 1
trigger1 = time = 0
value = 5306

[State 5414, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5414, 4]
type = null;PosAdd
trigger1 = Vel x<1
x=IfElse(time%4=0,4,IfElse(time%4=2,-4,0))

[State 5414, 4]
type = PosAdd
trigger1 = Vel x<1
y=IfElse(time%2=0,4,IfElse(time%2=1,-4,0))

[State 5100, GrabSpark]
type = Explod
trigger1 = Time = 1
id = 67
anim = F60
postype = p1
pos = 0,0
sprpriority = -2
ownpal = 1
removetime = -2

[State 0]
type = Explod
triggerall = time < 10
triggerall = Time%4 = 0
trigger1 = StageVar(info.author) ="Water"
id = 65100
anim = F135
sprpriority = 7
postype = p1
pos = -10,0
ownpal = 1
scale = 0.6,0.6

[State 5414, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5414, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7,4

[State 5414, 12]
type = ChangeState
trigger1 = anim = 5306+Var(55)*30000 
trigger1 = Time = 20
value = 5415

[State 5414, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;--------------------------------------------------------------------
[Statedef 5415]
type    = L
movetype= H
physics = S;N
ctrl = 0

[State 100, 2]
type = PlaySnd
triggerall = Time = 0
trigger1 = StageVar(info.author) ="Water"
value = F5000,10
volumescale = 200
persistent = 0
channel = 5

[State 0]
type = Explod
triggerall = Time = 0
trigger1 = StageVar(info.author) ="Water"
id = 65100
anim = F135
sprpriority = 7
postype = p1
pos = 0,0
ownpal = 1
scale = 0.8,0.8

[State 5415, EnvShake]
type = screenbound
trigger1 = Time >= 0
value = 1
movecamera = 1,0

[State 5415, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5415, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5415, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5415, 2]
type = ChangeAnim
trigger1 = time = 0
value = 5110+Var(55)*30000 

[State 5415, Var]
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5415, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5415, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) 
trigger3 = Anim = 5110+Var(55)*30000 
value = 5150

[State 5415, 11] ;If just died
type = selfState
triggerall = alive
trigger1 = time = 14;20
value = 5120

[State 5415, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5415, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5415, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;=================================================================================
[Statedef 4580]
type = A
movetype = H
physics = N
velset = 0

[State 1280, 3]
type = SelfState
trigger1 = time = 0
value = 4581

;------------------------------------------------------------------------------
[Statedef 4581]
type = A
movetype = H
physics = N
velset = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 210, 3]
type = PosAdd
trigger1 = !animexist(5165+Var(55)*30000 )
trigger1 = time = 0
X = 20
y = 17

[State 210, 3]
type = PosAdd
trigger1 = animexist(5165+Var(55)*30000 )
trigger1 = time = 0
X = 0
y = 0

[State 1370, Anim]
type = ChangeAnim
trigger1 = animexist(5165+Var(55)*30000 )
trigger1 = time = 0
value = 5165+Var(55)*30000 

[State 1370, Anim]
type = ChangeAnim
trigger1 = !animexist(5165+Var(55)*30000 )
trigger1 = time = 0
value = 5160+Var(55)*30000 

[State 1420, Velocity]
type = VelSet
trigger1 = time = 4
y = -5.5
x = 4

[State 1525, 4]
type = VelAdd
trigger1 = Time > 4
y = .4 

[State 1370, Sprite2]
type = SprPriority
trigger1 = time >= 4
value = 1

[State 1420, State]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;----------------------------------------------------------------------------
[Statedef 4585]
type = A
movetype = H
physics = N
velset = 0

[State 1370, Sprite2]
type = turn
trigger1 = time = 0
value = 1

[State 1280, 3]
type = SelfState
trigger1 = time = 0
value = 4581

;================================================================================
[Statedef 4303]
type    = S
movetype= H
physics = N
velset = 0,0

[State 3550, 2]
type = PalFX
trigger1 = Time = 0
time = 0

[State 9000, 8]
type = posset
trigger1 = time = 0
y = 0

[State 5000, 1]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(43000+Var(55)*30000 )
trigger1 = selfanimexist(4340+Var(55)*30000 )
trigger1 = selfanimexist(5400+Var(55)*30000 )
value = 43000+Var(55)*30000 

[State 5000, 1]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(43000+Var(55)*30000 )
trigger1 = selfanimexist(4340+Var(55)*30000 )
trigger1 = selfanimexist(5400+Var(55)*30000 )
value = 5400+Var(55)*30000 

[State 5000, 1]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(43000+Var(55)*30000 )
trigger1 = !selfanimexist(4340+Var(55)*30000 )
trigger1 = selfanimexist(5400+Var(55)*30000 )
value = 43000+Var(55)*30000 

[State 5000, 1]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(43000+Var(55)*30000 )
trigger1 = selfanimexist(4340+Var(55)*30000 )
trigger1 = !selfanimexist(5400+Var(55)*30000 )
value = 43000+Var(55)*30000 

[State 5000, 1]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(43000+Var(55)*30000 )
trigger1 = !selfanimexist(4340+Var(55)*30000 )
trigger1 = !selfanimexist(5400+Var(55)*30000 )
value = 43000+Var(55)*30000 

[State 5000, 1]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(43000+Var(55)*30000 )
trigger1 = selfanimexist(4340+Var(55)*30000 )
trigger1 = !selfanimexist(5400+Var(55)*30000 )
value = 4340+Var(55)*30000 

[State 5000, 1]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(43000+Var(55)*30000 )
trigger1 = !selfanimexist(4340+Var(55)*30000 )
trigger1 = selfanimexist(5400+Var(55)*30000 )
value = 5400+Var(55)*30000 
ignorehitpause = 1

[State 5000, 1]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(43000+Var(55)*30000 )
trigger1 = selfanimexist(4340+Var(55)*30000 )
trigger1 = selfanimexist(5400+Var(55)*30000 )
value = 5400+Var(55)*30000 
ignorehitpause = 1

[State 5000, 1]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(43000+Var(55)*30000 )
trigger1 = !selfanimexist(4340+Var(55)*30000 )
trigger1 = !selfanimexist(5400+Var(55)*30000 )
value = 5000+Var(55)*30000 

[State 9000, 7]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4304

;----------------------------------------------------------------------------
[Statedef 4304]
type    = S
movetype= H
physics = N

[State 9000, 8]
type = velset
trigger1 = Time = 0
x = -7

[State 1660, 4]
type = VelMul
trigger1 = 1
x = .86

[State 9001, 7]
type = SelfState
trigger1 = time = 25
value = 0
ctrl = 1

;-----------------------------------------------------------------------------
[Statedef 4280]
type    = S
movetype= H
physics = N
velset = 0,0

[State 9000, 8];
type = ChangeState
trigger1 = Pos Y != 0
value = 4055

[State 9000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 9000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 9000, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 9000, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9000, 6]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 9000, 8]
type = SelfState
trigger1 = statetype = C
trigger1 = GetHitVar(yvel) != 0
value = 9010

[State 9000, 7]
type = SelfState
trigger1 = HitShakeOver
trigger1 = Pos Y = 0
value = 4276

[State 201, 2]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4055

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 4055

;-------------------------------
[Statedef 4605]
type = S
movetype = H
physics = N
ctrl = 0

[State anim]
type = ChangeAnim
trigger1 = 1
value = anim
elem = animelemno(0)

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1500, 2]
type = Posset
trigger1 = Time = 0
trigger1 = Pos Y >= 1
y = 0

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4115

;---------------------------------------------------------------------------
[Statedef 4550]
type = S
movetype = H
physics = N
velset = 0,0

[State 4040, posset] 
type = posset 
trigger1 = Time = 0
y = 0

[State 5000, 1]
type = ChangeAnim
trigger1 = time = 0
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 5000, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9000, 7]
type = changestate
trigger1 = HitShakeOver
value = 4551

[State 9000, 8]
type = SelfState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045

;----------------------------------------------------------------------------
[Statedef 4551]
type = S
movetype= H
physics = N

[State 9001, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9001, 4]
type = VelMul
trigger1 = Pos Y = 0
trigger1 = Time >= 0
x = .8

[State 2160, 33]
type = Explod
trigger1 = vel X != 0 && Time = 0
trigger1 = Random < 700
anim = F4020
sprpriority = 3
postype = p1
pos = 3,0
bindtime = 1

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
anim = F4017
postype = p1
pos = -40,0
sprpriority = 3
supermove = 2
Bindtime = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 9001, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10+Var(55)*30000 

[State 9001, 7]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 5980]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = -.4
y = -15

[State 52, 2]
type = Veladd
trigger1 = time >= 5
y = .7

[State 810,]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
ampl = 4
freq = 120
time = 10

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5980+Var(55)*30000 

[State 1830]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;------------------------------------------------------------------------
[Statedef 4825]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4086

;------------------------------------------------------------------------
[Statedef 4495]
type    = C
movetype= H
physics = N
velset = 0,0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 5010, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = !selfanimexist(5023+Var(55)*30000 )
value = 5020 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = selfanimexist(5023+Var(55)*30000 )
value = 5023+Var(55)*30000 

[State 5010, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 5010, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = SelfState
trigger1 = HitShakeOver
value = 42791

[State 9000, 8]
type = SelfState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4060

;-----------------------------------------------------------------------------------
[Statedef 4890]
type = A
movetype = H
physics = N

[State 0, llio]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4191

;---------------------------------------------------------------------------
[Statedef 4905]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 9280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 9280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 2760+Var(55)*30000 

[State 9280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4221

;--------------------------------------------------------------------------------
[Statedef 4221]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,1.6,-1.6)
y = -14

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-1.6,1.6)
y = -14

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .7 

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 1
trigger2 = Floor(gethitvar(chainid)/10000) = 5
trigger3 = Floor(gethitvar(chainid)/10000) = 6
anim = F4018
postype = p1
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 2
anim = F4019
postype = p1
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 3
anim = F4022
postype = p1
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 4
anim = F4021
postype = p1
pos = -30,-7
sprpriority = 3
supermove = 2
Bindtime = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5061+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5050+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= -20 && Vel Y > 0
value = 4217

;-------------------------------------------------------------------------------
[Statedef 4220]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 9280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 9280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 2760+Var(55)*30000 

[State 9280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4221

;----------------------------------------------------------------------------------
[Statedef 5460]
type = L
movetype = H
physics = N
velset = 0, 0

[State -3, 44: Ouch D]
type = PlaySnd
triggerall = StageVar(info.author) != "water"
triggerall = Alive
triggerall = time = 2
trigger1 = name = "Shingo Yabuki"
value = F7,1
channel = 6

[State a]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
anim = F66
sprpriority = -1
postype = p1
pos = 0,0
bindtime = 1

[State a]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
anim = F67
sprpriority = 9
postype = p1
pos = 0,0
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f24
id = 7400
pos = 54,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State 1200, 0]
type = explod
triggerall = StageVar(info.author) = "water"
trigger1 = time = 0
anim = f24
id = 7400
facing = -1
pos = 74,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1

[State a]
type = PalFX
trigger1 = time = 0
time = 0
add = 0,0,0

[State 0, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 15
ampl = -8

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5100+ifelse(SelfAnimexist(5101),1,0)+(ifelse(var(34)<1,0,10000*var(34)))

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 5461

;--------------------------------------------------------------------------------
[Statedef 5461]
type = A
movetype = H
physics = N
velset = 0, 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = IfElse(((enemynear,Pos X - Pos X) * facing < 0),1.8,-1.8)
y = -3

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5160+ifelse(SelfAnimexist(5161),1,0)+(ifelse(var(34)<1,0,10000*var(34)))

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .55

[State 0, SelfState]
type = SelfState
trigger1 = Pos Y >= -2 && Vel Y > 4
value = 5110

;------------------------------------------------------------------------------
[Statedef 4250]
type    = S
movetype = H
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 99999
sprpriority = 1

[State 1002, 1]
type = PosSet
trigger1 = 1
x = 0

[State 802, 2]
type = Changeanim
trigger1 = Time = 0
value = 1237+Var(55)*30000 
supermove = 1
pausemovetime = 99999

[State 1200, Muteki]
type = NotHitBy
trigger1 = 1
value = SCA
time=1

[State 110, 0]
type = PlayerPush
trigger1 = 1
value = 0

[State 210, 4]
type = SprPriority
trigger1 = p2stateno = 3904
trigger1 = 1
value = 3

[State 802, 4]
type = SelfState 
trigger1 = time = 1000
value = 5100

;---------------------------------------------------------------------------
[Statedef 4307]
type    = L
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 1002, 1]
type = PosSet
trigger1 = Time = 1
y = 0

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 0
value = 5110

[State 410, 4]
type = SelfState
trigger1 = Time >= 1
trigger1 = Life <= 0
value = 5150

[State 8145, 4]
type = SelfState
trigger1 = time = 120
value = 5120

;-----------------------------------------------------------------------------
[Statedef 7150]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 201, 2]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4105

[State pos]
type = posset
trigger1 = 1
y = 0

[State pos]
type = posadd
Trigger1 = Time =3
x = -15

[State pos]
type = posadd
Trigger1 = Time =5
x = 15

[State 3455, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 5000+Var(55)*30000 
elem = 2

[State 2205]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 7151

;-----------------------------------------------------------------------------------
[Statedef 7151]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 3455, 2]
type = ChangeAnim
Trigger1 = Time = [0,3]
value = 5007+Var(55)*30000 
elem = 1

[State 3455, 2]
type = ChangeAnim
Trigger1 = Time = [4,7]
value = 5007+Var(55)*30000 
elem = 2

[State 3455, 2]
type = ChangeAnim
Trigger1 = Time >= 8
value = 5007+Var(55)*30000 
elem = 3

[State pos]
type = posset
trigger1 = 1
y = 0

[State end]
type = SelfState
trigger1 = time = 100
value = 0
ctrl = 1

;--------------------------------------------------------------------------
[Statedef 7313]
type = S
movetype = H
physics = N
velset = 0,0

[State 1500, 2]
type = Posset
trigger1 = Time = 0 
y = 0

[State 0, 1]
type = palfx
trigger1 = 1
ignorehitpause=1
time = 0

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State a]
type = Helper
trigger1 = time = 0
trigger2 = time = 20
trigger3 = time = 30
name = "Slow"
stateno = 14900
ID = 14900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(5950+Var(55)*30000 )
Trigger1 = Time = 0
value = 5950+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 =!selfanimexist(5950+Var(55)*30000)
trigger1 =selfanimexist(5600+Var(55)*30000 )
Trigger1 = Time = 0
value = 5600+Var(55)*30000

[State 800, 1]
type = ChangeState
trigger1 = animtime = 0
value = 7314

;---------------------------------------------------------------------------------
[Statedef 7314]
type = L
movetype = H
physics = N
velset = 0,0

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time < 75
value = 5111+Var(55)*30000

[State 1280, 2]
type = ChangeAnim
trigger1 = time =75
value = 5121+Var(55)*30000

[State 250, 7]
type = SelfState
trigger1 = animtime = 0&&anim=5121+Var(55)*30000
value = 0
ctrl = 1

[State 9000, 8]
type = SelfState
trigger1 = time =25
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4169;5110

;-----------------------------------------------------------------------------
[Statedef 4910]
type = A
movetype = H
physics = N

[State 0, llio]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 9280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 9280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 2760+Var(55)*30000 

[State 9280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4231

;---------------------------------------------------------------------------
[Statedef 4231]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 0, llio]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,1.6,-1.6)
y = -14

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-1.6,1.6)
y = -14

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .7 

[State 8145, 2]
type = ChangeAnim
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5061+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5050+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= -20 && Vel Y > 0
value = 4217

;------------------------------------------------------------------------------
[Statedef 4990]
type    = C
movetype= H
physics = N
velset = 0,0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = SelfState
trigger1 = HitShakeOver
;trigger1 = Anim != 5030+Var(55)*30000 
value = 42791

[State 9000, 8]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4040

[State 5010, 6]
type = SelfState
trigger1 = HitShakeOver
;trigger1 = Anim = 5030+Var(55)*30000 
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020+Var(55)*30000 
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021+Var(55)*30000 
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022+Var(55)*30000 
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;-----------------------------------------------------------------------------
[Statedef 42791]
type    = C
movetype= H
physics = N

[State 9001, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9001, 4]
type = VelMul
trigger1 = Pos Y = 0
trigger1 = Time >= 0
x = .8

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)+Var(55)*30000 

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5030999, 88888]
type = ChangeState
trigger1 = HitOver
trigger1 = Pos Y != 0
value = 5030

[State 8145, 4]
type = SelfState
trigger1 = HitOver
value = 11
ctrl = 1

;-------------------------------------------------------------------------
[Statedef 4040]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,1237+Var(55)*30000 ))

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0 && !selfanimexist(1237+Var(55)*30000 )
value = ifelse((GetHitVar(groundtype)=1),5030+Var(55)*30000 ,ifelse((GetHitVar(airtype)=1),5030+Var(55)*30000 ,5012+Var(55)*30000 ))

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4041

;----------------------------------------------------------------------------------
[Statedef 4041]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4030
trigger1 = time >= 0
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4035
trigger1 = time >= 14
value = SCA, HT
time = 1

[State 800, 1]
type = HitBy
trigger1 = prevstateno = 4570
trigger1 = time >= 28
value = SCA, HT
time = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5030+Var(55)*30000  && time = 2
value = 5030+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5030+Var(55)*30000  && time = 5
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = anim = 5012+Var(55)*30000  && time = 5
value = 5050+Var(55)*30000 

[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6,-6)
y = -6.7

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6,6)
y = -6.7

[State 1660, 4]
type = VelMul
trigger1 = Time <= 8
x = .97

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .5 

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;-----------------------------------------------------------------------------------
[Statedef 4480]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = !selfanimexist(5021+Var(55)*30000 )
value = 5020 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = selfanimexist(5023+Var(55)*30000 )
value = 5021+Var(55)*30000 

[State 5010, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 5010, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 5010, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = SelfState
trigger1 = HitShakeOver
value = 4278

[State 9000, 8]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4075

;------------------------------------------------------------------------
[Statedef 4425]
type    = S
movetype= H
physics = N
velset = 0,0

[State 9000, 8];
type = ChangeState
trigger1 = Pos Y != 0
value = 4115

[State 9000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = selfanimexist(5002+Var(55)*30000) && selfanimexist(5012+Var(55)*30000)
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5002,5012)+Var(55)*30000 

[State 9000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !selfanimexist(5002+Var(55)*30000) && selfanimexist(5012+Var(55)*30000)
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 5000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 5000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 5000, 3]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 9000, 7]
type = SelfState
trigger1 = HitShakeOver
trigger1 = Pos Y = 0
value = 4276

[State 201, 2]
type = ChangeState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4115

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 4115

;-------------------------------------------------------------------------------
[Statedef 18007]
type = S
ctrl = 0
anim = 10000

[State 1000, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20
freq = 100
ampl = -4

[State 1000, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 2
under = 1

[State 1000, Explod]
type = Explod
trigger1 = Time = 0
anim = f63
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
sprpriority = 9
removeongethit = 0
ontop = 1

[State 1000, Explod]
type = Explod
trigger1 = Time = 0
anim = f74449
Id = 100
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
sprpriority = -9
removeongethit = 0

[State 5100, 12]
type = PlaySnd
trigger1 = Time = 0
value = F5000,3

[State 1000, Pause]
type = Pause
triggerall = RoundState = 2
trigger1 = time = [5,25]
time = 1
movetime = 1
ignorehitpause = 1

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 50

;-------------------------------------------------------------------------------
[Statedef 18008]
type = S
ctrl = 0
anim = 10000

[State 1000, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20
freq = 100
ampl = -4

[State 1000, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 2
under = 1

[State 1000, Explod]
type = Explod
trigger1 = Time = 0
anim = f663
;scale = 0.9,0.9
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
sprpriority = 9
removeongethit = 0
ontop = 1

[State 1000, Explod]
type = Explod
trigger1 = Time = 0
anim = f74449
;scale = 0.9,0.9
Id = 100
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
sprpriority = -9
removeongethit = 0

[State 1000, Explod]
type = Explod
trigger1 = time = [0,5]
anim = f65
scale = 0.8,0.8
pos = 0,15
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 1.7,-5
accel = 0,0.2
random = 100,50
removetime = -2
sprpriority = 99

[State 1000, Explod]
type = Explod
trigger1 = time = [0,5]
anim = f65
scale = 0.8,0.8
pos = 0,15
postype = p1
facing = -1
vfacing = 1
bindtime = 1
vel = -1.8,-5
accel = 0,0.2
random = 100,50
removetime = -2
sprpriority = 8

[State 51000, Explod]
type = Explod
trigger1 = gametime%10 = 0
trigger1 = time = [0,10]
anim = f74
scale = 0.8,0.8
pos = 50,5
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
random = 100,50
sprpriority = 9
ontop = 1

[State 51000, Explod]
type = Explod
trigger1 = gametime%10 = 0
trigger1 = time = [0,10]
anim = f74
scale = 0.8,0.8
pos = -50,5
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
random = 100,50
sprpriority = 9
ontop = 1

[State 51000, Explod]
type = Explod
trigger1 = gametime%10 = 0
trigger1 = time = [0,10]
anim = f74
scale = 0.8,0.8
pos = 50,5
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
random = 100,50
sprpriority = -1

[State 51000, Explod]
type = Explod
trigger1 = gametime%10 = 0
trigger1 = time = [0,10]
anim = f74
scale = 0.8,0.8
pos = -50,5
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
random = 100,50
sprpriority = -1

[State 1000, Helper]
type = Helper
triggerall = numhelper(18008) <= 25
trigger1 = time = [0,10]
helpertype = normal
name = "Fragmentos-1"
stateno = 18011
id = 18008
pos = -25,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 1000, Helper]
type = Helper
triggerall = numhelper(18008) <= 25
trigger1 = time = [0,10]
helpertype = normal
name = "Fragmentos-2"
stateno = 18014
id = 18008
pos = -50,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 1000, Helper]
type = Helper
triggerall = numhelper(18008) <= 25
trigger1 = time = [0,10]
helpertype = normal
name = "Fragmentos-3"
stateno = 18016
id = 18008
pos = -50,5
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 5100, 12]
type = PlaySnd
trigger1 = Time = 0
value = F5000,3

[State 1000, Pause]
type = Pause
triggerall = RoundState = 2
trigger1 = time = [5,25]
time = 1
movetime = 1
ignorehitpause = 1

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 1027

;-------------------------------------------------------------------------------
;Fragmentos-1
[Statedef 18011]
type = S
ctrl = 0
anim = 10000
velset = 0,0

[State 1000, PosSet]
type = Posadd
trigger1 = time = 0
x = 0+random%-100

[State 1000, PosSet]
type = Posadd
trigger1 = time = 0
y = 1+random%10

[State 1000, VelSet]
type = VelSet
trigger1 = time = 0
x = 1+random%1
y = -7+random%5

[State 1000, VelAdd]
type = VelAdd
trigger1 = time = [5,99]
y = .35

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = f75
scale = 0.8,0.8
id = 18008
pos = 0,15
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
sprpriority = 8

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = Vel Y > 0 && Pos Y >= 0
id = 18008

[State 1000, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 10
value = 18012

;-------------------------------------------------------------------------------
[Statedef 18012]
type = S
ctrl = 0
anim = 10000
velset = 0,0

[State 1000, VelSet]
type = VelSet
trigger1 = time = 2
x = 2+random%2
y = -2.3

[State 1000, VelAdd]
type = VelAdd
trigger1 = time = [10,99]
y = .45

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = f75
scale = 0.8,0.8
id = 18008
pos = 0,15
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
sprpriority = 8

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = Vel Y > 0 && Pos Y >= 0
id = 18008

[State 1000, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 18013

;-------------------------------------------------------------------------------
[Statedef 18014]
type = S
ctrl = 0
anim = 10000
velset = 0,0

[State 1000, PosSet]
type = Posadd
trigger1 = time = 0
x = 0+random%-100

[State 1000, PosSet]
type = Posadd
trigger1 = time = 0
y = 1+random%10

[State 1000, VelSet]
type = VelSet
trigger1 = time = 0
x = -1+random%1
y = -7+random%5

[State 1000, VelAdd]
type = VelAdd
trigger1 = time = [5,99]
y = .35

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = f75
scale = 0.8,0.8
id = 18008
pos = 0,15
postype = p1
facing = -1
vfacing = 1
bindtime = -1
removetime = -1
sprpriority = 8

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = Vel Y > 0 && Pos Y >= 0
id = 18008

[State 1000, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 10
value = 18015

;-------------------------------------------------------------------------------
[Statedef 18015]
type = S
ctrl = 0
anim = 10000
velset = 0,0

[State 1000, VelSet]
type = VelSet
trigger1 = time = 2
x = -2+random%2
y = -2.3

[State 1000, VelAdd]
type = VelAdd
trigger1 = time = [10,99]
y = .45

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = f75
scale = 0.8,0.8
id = 18008
pos = 0,15
postype = p1
facing = -1
vfacing = 1
bindtime = -1
removetime = -1
sprpriority = 8

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = Vel Y > 0 && Pos Y >= 0
id = 18008

[State 1000, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 18013

;-------------------------------------------------------------------------------
[Statedef 18016]
type = S
ctrl = 0
anim = 10000
velset = 0,0

[State 1000, PosSet]
type = Posadd
trigger1 = time = 0
x = 0+random%-100

[State 1000, PosSet]
type = Posadd
trigger1 = time = 0
y = 1+random%10

[State 1000, VelSet]
type = VelSet
trigger1 = time = 0
y = -8+random%5

[State 1000, VelAdd]
type = VelAdd
trigger1 = time = [5,99]
y = .35

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = f75
scale = 0.8,0.8
id = 18008
pos = 0,15
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
sprpriority = 8

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = Vel Y > 0 && Pos Y >= 0
id = 18008

[State 1000, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 10
value = 18017

;-------------------------------------------------------------------------------
[Statedef 18017]
type = S
ctrl = 0
anim = 10000
velset = 0,0

[State 1000, VelSet]
type = VelSet
trigger1 = time = 2
y = -2.3

[State 1000, VelAdd]
type = VelAdd
trigger1 = time = [10,99]
y = .45

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = f75
scale = 0.8,0.8
id = 18008
pos = 0,15
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
sprpriority = 8

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = Vel Y > 0 && Pos Y >= 0
id = 18008

[State 1000, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 18013
;-------------------------------------------------------------------------------
[Statedef 18013]
type = S
ctrl = 0
anim = 10000
velset = 0,0

[State 1000, PosSet]
type = Posadd
trigger1 = time = 0
y = 0+random%-5

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = f76
scale = 0.8,0.8
pos = 0,15
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = 110
sprpriority = 8

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 110

;===================================================================================
[Statedef 4560]
type    = S
movetype= H
physics = N
velset = 0,0

[State 9000, 8];
type = ChangeState
trigger1 = Pos Y != 0
value = 4050

[State 9000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 9000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+Var(55)*30000 

[State 9000, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (selfanimexist(5047 + GetHitVar(animtype)+Var(55)*30000 ))
value = 5047 + GetHitVar(animtype)+Var(55)*30000 

[State 9000, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9000, 6]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 9000, 8]
type = SelfState
trigger1 = statetype = C
trigger1 = GetHitVar(yvel) != 0
value = 9010

[State 9000, 7]
type = SelfState
trigger1 = HitShakeOver
trigger1 = Pos Y = 0
value = 4276

[State 201, 2]
type = SelfState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4050

[State 9000, 8]
type = ChangeState
trigger1 = Pos Y != 0
value = 4050

;--------------------------------------------------------------------------
[Statedef 4865]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(5052+Var(55)*30000 )
value = 5052+Var(55)*30000 

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
value = 5030+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4166

;-----------------------------------------------------------------------------
[Statedef 4165]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 8140, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(5052+Var(55)*30000 )
value = 5052+Var(55)*30000 

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 8140, 4]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4166

;----------------------------------------------------------------------------
[Statedef 4166]
type = A
movetype = H
physics = N
velset = -6,-8.5

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X >= 0
trigger1 = time = 2
x = -20
y = -15
[State 1310, 1]
type = PosAdd
trigger1 = p2dist X >= 0
trigger1 = time = 3
x = -10
y = -5

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X < 0
trigger1 = time = 2
x = 20
y = -15

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X < 0
trigger1 = time = 3
x = 10
y = -5

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6.5,-6.5)
y = -7

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6.5,6.5)
y = -7

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .5 

[State 1281, 1]
type = VelAdd
trigger1 = Time >40
y = .8 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 0
value = 5050+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 0
value = 5061+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 24
value = 5050+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 24
value = 5061+Var(55)*30000 

[State 250, 7]
type = SelfState
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = !selfanimexist(5161+Var(55)*30000 )
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 41670

[State 250, 7]
type = SelfState
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = !selfanimexist(5161+Var(55)*30000 )
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 41670

[State 250, 7]
type = SelfState
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = selfanimexist(5161+Var(55)*30000 )
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 41670

[State 1280, 3]
type = SelfState
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = selfanimexist(5161+Var(55)*30000 )
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 4167

;---------------------------------------------------------------------------
[Statedef 94550]
type = S
movetype = H
physics = N
velset = 0,0

[State 4040, posset] 
type = posset 
trigger1 = Time = 0
y = 0

[State 5000, 1]
type = ChangeAnim
trigger1 = time = 0
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)+Var(55)*30000 

[State 5000, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9000, 7]
type = changestate
trigger1 = HitShakeOver
value = 94551

[State 9000, 8]
type = SelfState
trigger1 = life = 0|SysVar(4) = 1|SysVar(3) = 1 
value = 4045

;----------------------------------------------------------------------------
[Statedef 94551]
type = S
movetype= H
physics = N

[State 9001, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9001, 4]
type = VelMul
trigger1 = Pos Y = 0
trigger1 = Time >= 0
x = .8

[State 2160, 33]
type = Explod
trigger1 = vel X != 0 && Time = 0
trigger1 = Random < 700
anim = F4020
sprpriority = 3
postype = p1
pos = 3,0
bindtime = 1

[State 9001, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10+Var(55)*30000 

[State 9001, 7]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------

;---------------------------------------------------------------------------
[Statedef 4911]
type = A
movetype = H
physics = N
anim = 5012+Var(55)*30000
velset = 0,0
sprpriority = -1
ctrl = 0

[State 23220, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 3
value = 5050+Var(55)*30000

[State 23220, VelSet]
type = VelSet
trigger1 = Time = 3
y = -5

[State 23220, VelAdd]
type = VelAdd
trigger1 = Time > 3 && Pos Y < 0
y = 1

[State 23220, ChangeState]
type = ChangeState
trigger1 = Anim = 5050+Var(55)*30000 && Pos Y >= 0 && Vel Y > 0
value = 4912

;---------------------------------------------------------------------------
[Statedef 4912]
type = L
movetype = H
physics = N
anim = 5100+Var(55)*30000
velset = 0,0
ctrl = 0

[State 23221, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 23221, EnvShake]
type = EnvShake
trigger1 = !Time
time = 5
ampl = -4

[State 23221, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 5100+Var(55)*30000 && !AnimTime
value = 5160+Var(55)*30000

[State 23221, VelSet]
type = VelSet
trigger1 = Anim = 5160+Var(55)*30000 && AnimElem = 1
y = -1

[State 23221, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
y = .4

[State 23221, ChangeState]
type = ChangeState
trigger1 = Anim = 5160+Var(55)*30000 && Pos Y >= 0 && Vel Y > 0
value = 4913

;-------------------------------------------------------------------------------
[Statedef 4913]
type = L
movetype = H
physics = N
anim = 5170+Var(55)*30000
velset = 0,0
ctrl = 0

[State 23222, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 23222, SelfState]
type = SelfState
trigger1 = !AnimTime
value = IfElse(Alive,5110,5150)

;---------------------------------------------------------------------------------------------------
[Statedef 4915]
type = A
movetype = H
physics = N

[state screenbound]
type = screenbound
trigger1 = 1
value = 1     
movecamera = 0,0

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 9280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 9280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 2760+Var(55)*30000 

[State 9280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4916

;-------------------------------------------------------------------------------------------------
[Statedef 4916]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[state screenbound]
type = screenbound
trigger1 = 1
value = 1     
movecamera = 0,0

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,1.6,-1.6)
y = -17

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-1.6,1.6)
y = -17

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .7 

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 1
trigger2 = Floor(gethitvar(chainid)/10000) = 5
trigger3 = Floor(gethitvar(chainid)/10000) = 6
anim = F4018
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 2
anim = F4019
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 3
anim = F4022
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 4
anim = F4021
pos = -30,-7
sprpriority = 2
supermove = 2
Bindtime = 1

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5061+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5050+Var(55)*30000 

[State 8145, 4]
type = ChangeState
trigger1 = Pos Y >= -20 && Vel Y > 0
value = 4217

;--------------------------------------------------------------------------
[Statedef 4930]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4251

;------------------------------------------------------------------------------
[Statedef 4251]
type = A
movetype = H
physics = N
velset = -7,3

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,8,-8)
y = -3

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-8,8)
y = -3

[State 1660, 4]
type = VelMul
trigger1 = Time <= 8
x = .9

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .9

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 2
value = 5030+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 5
value = 5050+Var(55)*30000 

[State 8145, 3];]@
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Time = 5
value = 5061+Var(55)*30000 

[State 250, 7]
type = SelfState
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 4237

[State 250, 7]
type = SelfState
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 4247

;---------------------------------------------------------------------------
[Statedef 4247]
type = L
movetype = H
physics = N
;velset = 0,0

[State 0, 1]
type = palfx
trigger1 = 1
ignorehitpause=1
time = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 3121, 1]
type = Helper
trigger1 = time = 0
id = 8882
postype = p1
pos = -10, 0
sprpriority = 10
stateno = 11492
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999 
pausemovetime = 99999

[State 3000,1] 
type = Explod
trigger1 = time = 0
anim = F63
postype = p1
pos = -10,0
sprpriority = 3
supermove = 2
Bindtime = 1

[State 1500, 2]
type = PosAdd
trigger1 = selfanimexist(5160+Var(55)*30000 )
trigger1 = AnimElem = 3
x = -10

[State 1660, 4]
type = VelMul
trigger1 = 1
x = .92

[State 8[State 0, 0]
type = VelSet
trigger1 = 1
y = 0

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5160+Var(55)*30000 )
trigger1 = Time = 0
value = 5160+Var(55)*30000 

[State 250, 7]
type = SelfState
trigger1 = time =17
value = 4248

;----------------------------------------------------------------------------------
[Statedef 4248]
type    = L
movetype= H
physics = N
velset = 0,0

[State 1002, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5110+Var(55)*30000 )
trigger1 = Time = 0
value = 5110+Var(55)*30000 

[State 410, 4]
type = SelfState
trigger1 = Time = 0
trigger1 = Life <= 0|SysVar(4) = 1|SysVar(3) = 1 
value = 5150

[State 8145, 4]
type = SelfState
trigger1 = time =20
value = 5120

;--------------------------------------------------------------------------
[Statedef 4225]
type = A
movetype = H
physics = N

[State 0, llio]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 9280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 9280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 2760+Var(55)*30000 

[State 9280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4226

;--------------------------------------------------------------------------
[Statedef 4226]
type = A
movetype = H
physics = N
velset = -3.8,-5.6

[State 0, llio]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,1.6,-1.6)
y = -14

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-1.6,1.6)
y = -14

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .7 

[State 8145, 2]
type = ChangeAnim
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 5050+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5061+Var(55)*30000 

[State 8145, 2]
type = ChangeAnim
trigger1 = !selfanimexist(5061+Var(55)*30000 )
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5050+Var(55)*30000 

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= -20 && Vel Y > 0
value = 4217

;------------------------------------------------------------------------
[Statedef 4235]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(1237+Var(55)*30000 )
Trigger1 = Time >= 0
value = 1237+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(1234+Var(55)*30000 )
Trigger1 = Time >= 0
value = 5012+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4236

;----------------------------------------------------------------------
[Statedef 4236]
type = A
movetype = H
physics = N
velset = -7,3

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 1280, 2]
type = ChangeAnim
trigger1 = selfanimexist(4236+Var(55)*30000 )
Trigger1 = Time = 4
value = 4236+Var(55)*30000 

[State 1280, 2]
type = ChangeAnim
trigger1 = !selfanimexist(4236+Var(55)*30000 )
Trigger1 = Time = 4
value = 5050+Var(55)*30000 

[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,8,-8)
y = -3

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-8,8)
y = -3

[State 1660, 4]
type = VelMul
trigger1 = Time <= 8
x = .98

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .4 

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 1
trigger2 = Floor(gethitvar(chainid)/10000) = 5
trigger3 = Floor(gethitvar(chainid)/10000) = 6
anim = F4018
postype = p1
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 2
anim = F4019
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 3
anim = F4022
postype = p1
pos = -30,3
sprpriority = 2
supermove = 2
Bindtime = 1

[State 3000,1] 
type = Explod
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = Floor(gethitvar(chainid)/10000) = 4
anim = F4021
postype = p1
pos = -30,-7
sprpriority = 2
supermove = 2
Bindtime = 1

[State 250, 7]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 4237

;---------------------------------------------------------------------------
[Statedef 4855]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 2000, 15]
type = EnvColor
trigger1 = time = 0
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide!= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 17,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 123, 4]
type = Explod
trigger1 = time = 0 && TeamSide= 1
trigger1 = NumExplod(1) = 0
id = 20000
anim = F2000
pos = 210,85
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5053+Var(55)*30000 )
value = 5053+Var(55)*30000 

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5053+Var(55)*30000 )
value = 5053+Var(55)*30000 

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5052+Var(55)*30000 

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4156

;-------------------------------------------------------------------------
[Statedef 4155]
type = A
movetype = H
physics = N

[State 1500, 2]
type = Posset
trigger1 = Time = 0 && Pos Y >= 1
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5053+Var(55)*30000 )
value = 5053+Var(55)*30000 

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = selfanimexist(5053+Var(55)*30000)
value = 5053+Var(55)*30000 

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5052+Var(55)*30000 

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 1280, 3]
type = SelfState
trigger1 = HitShakeOver = 1
value = 4156

;-------------------------------------------------------------------------------
[Statedef 4156]
type = A
movetype = H
physics = N

[State 800, 1]
type = HitBy
trigger1 = 1
value = SCA, HT
time = 1

[State 8145, 3];]@
type = ChangeAnim
trigger1 = Time = 25
trigger1 = selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 8140, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !selfanimexist(5052+Var(55)*30000 )
trigger1 = !selfanimexist(5053+Var(55)*30000 )
value = 5050+Var(55)*30000 

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X >= 0
trigger1 = time = 2
x = -20
y = -15

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X >= 0
trigger1 = time = 3
x = -10
y = -5

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X < 0
trigger1 = time = 2
x = 20
y = -15

[State 1310, 1]
type = PosAdd
trigger1 = p2dist X < 0
trigger1 = time = 3
x = 10
y = -5

[State 8[State 0, 0]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6,-6)
y = -7

[State 0, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6,6)
y = -7

[State 1281, 1]
type = VelAdd
trigger1 = Time < 1
y = .9 

[State 1281, 1]
type = VelAdd
trigger1 = Time > 5
y = .5 

[State 1281, 1]
type = VelAdd
trigger1 = Time >40
y = .8 

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100


;==============================================================================
;Stun Mode 
;==============================================================================
[Statedef 73000]
type    = A
movetype= H
physics = N
velset = 0,0

[State 13000, ChangeAnim1]
type = ChangeAnim
trigger1 =  hitshakeover
trigger1 = SelfAnimExist(5052+Var(55)*30000)
value = 5052+Var(55)*30000 
persistent = 0

[State 13000, Changeanim2] ;Self falling animation
type = ChangeAnim
trigger1 =  hitshakeover
trigger1 = !SelfAnimExist(5052+Var(55)*30000)
value = 5050+Var(55)*30000 
persistent = 0

[State 13000, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 1

[State 13000, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2bodydist X < -20
persistent = 0

[State 13000, VarSet]
type = VarSet
trigger1 = 1
v = 39
value = -240

[State 13000, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 3000, 1]
type = VelSet
trigger1 = time >= 0
x = 0
y = 0

[State 13000, 2]
type = velset
trigger1 = time >= 3
x = -2.4
y = -9

[State 13000, 3]
type = velset
trigger1 = time >= 6
y = -7

[State 13000, 4]
type = velset
trigger1 = time >= 9
y = -5

[State 13000, 5]
type = velset
trigger1 = time >= 12
y = -2

[State 13000, 6]
type = velset
trigger1 = time >= 15
y = 0

[State 13000, 7]
type = velset
trigger1 = time >= 18
y = 3

[State 13000, 8]
type = velset
trigger1 = time >= 21
y = 6

[State 13000, 10]
type = velset
trigger1 = time >= 24
y = 8

[State 13000, 11]
type = velset
trigger1 = time >= 27
y = 10

[State 13000, 12]
type = velset
trigger1 = time >= 30
y = 12

[State 13000, 12]
type = velset
trigger1 = time >= 33
y = 14

[State 13000, 4]
type = changestate
trigger1 = Pos y > -vel y
trigger1 = time >= 10
value = 73010

;---------------------------------------------------------------------------
[Statedef 73010]
type    = A
movetype= H
physics = N
anim = 5100+Var(55)*30000 

[State 13010, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 5
freq = 100
ampl = -4

[State 13010, PlaySnd]
type = PlaySnd
triggerall = StageVar(info.author) != "water"
trigger1 = time = 0
value = F5000,1

[State 2160, 33]
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = time = 1
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 0
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 13010, VarSet]
type = VarSet
trigger1 = 1
v = 39
value = 0

[State 13010, NotHitBy]
type = NotHitBy
trigger1 =  time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 6

[State 13010, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 13010, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 13010, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 13010, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 13010, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 13010, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.46

[State 13010, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110

[State 13010, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 13010, 10]
type = PosFreeze
trigger1 = 1

[State 13010, 11]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

[State 8010, Change]
type = ChangeState
trigger1 = time = 5
value = 73020

;---------------------------------------------------------------------------
[Statedef 73020]
type    = C
movetype= H
physics = N
anim = 5160+Var(55)*30000 

[State 13020, VarSet]
type = VarSet
trigger1 = 1
v = 39
value = 0

[State 13020, NotHitBy]
type = NotHitBy
trigger1 =  time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 20

[State 13020, 3]
type = HitFallVel
trigger1 = Time = 0

[State 13020, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 13020, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .43

[State 13020, 6] ;Hit ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 24
trigger1 = life>0
value = 73030

[State 13020, 6] ;Hit ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 24
trigger1 = life<=0
value = 5110

;--------------------------------------------------------------------------------
[Statedef 73030]
type    = C
movetype= H
physics = N
anim = 5110+Var(55)*30000 

[State 13030, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 5
freq = 100
ampl = -2

[State 13030, 1]
type = PlaySnd
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 0
value = F5000,0

[State 13030, VarSet]
type = VarSet
trigger1 = 1
v = 39
value = 0

[State 13030, NotHitBy]
type = NotHitBy
trigger1 =  time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 50

[State 13030, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 13030, 2]
type = HitFallDamage
trigger1 = Time = 0

[State 13030, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 13030, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 13030, Explod]
type = null;Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 1
persistent = 0
ID = 73030
anim = F50
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1
pausemovetime = 0
removetime = -2
ignorehitpause = 1
scale = 1, 1
ownpal = 1

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = time = 1
anim = F22
postype = p1
pos = -30,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2

[State 52, 着陆声效]
type = PlaySnd
trigger1 = time  = 0
value = F47,(0+(StageVar(info.author) = "water"))

[State 3000,1] 
type = Explod
triggerall = StageVar(info.author) != "water"
trigger1 = Time = 1
anim = F4017
postype = p1
pos = 0,3
sprpriority = 3
supermove = 2
Bindtime = 1

[State 13030, 4]
type = VelSet
trigger1 = Time = 0
y = 0

[State 13030, 5]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 13030, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.40

[State 13030, 7]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 13030, 8]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 13030, 9]
type = Changestate
trigger1 = time = 40
value = 73040

;-------------------------------------------------------------------------
[Statedef 73040]
type    = C
movetype= H
physics = N
anim = 5120+Var(55)*30000 

[State 13040, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 13040, VarSet]
type = VarSet
trigger1 = 1
v = 39
value = 0

[State 13040, 1]
type = VelSet
trigger1 = Time = 0
x = 0

[State 13040, 2]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 27

[State 13040, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 73050
ctrl = 0

;------------------------------------------------------------------------
[Statedef 73050]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 5300+Var(55)*30000 
sprpriority = 0

[State 13050, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 13050, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 13050, 2]
type = varset
trigger1 = time = 0
v = 39
value = 240

[State 13050, Explod]
type = Explod
trigger1 = Time = 0
anim = F73100
scale = .5,.5
ID= 73100
sprpriority = 4
postype = p1
pos = 0,-102
bindtime = -1
pausemovetime = 140
removetime = 140
ignorehitpause = 1
scale = 1,1
ownpal = 1

[State 13050, 2]
type = Playsnd
trigger1 = time = 0
value = F5100,0
channel = 11
loop = 1

[State 13050, 2]
type = SelfState;ChangeState
trigger1 = time = 140
value = 0
ctrl = 1

;==========================================================================
;k.o.彩画
;==========================================================================
[Statedef 78000]
type = A
ctrl = 0
anim = 99999
velset = 0,0
movetype = I
physics = N
sprpriority = 7

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[state a]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State a,震动]
type = EnvShake
trigger1 = 1
time = 1

[state a]
type = changestate
trigger1 = winko
value = 78001

;-------------------------------------------------------------------------------
[StateDef 78001]
type = A
ctrl = 0
anim = 99999
velset = 0,0
movetype = I
physics = N
sprpriority = 7

[state a]
type =playsnd
trigger1 =time=0
value = f7000,7
persistent = 0

[state a]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 100, AssertSpecial]
type = AssertSpecial
triggerall = time <=90
trigger1 = 1
trigger2 = 2
trigger3 = 3
flag = noBG
flag2 = noFG
flag3 = noshadow

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State a,震动]
type = EnvShake
trigger1 = 1
time = 1

[State 0]
type = Explod
triggerall = time = 0
trigger1 = !numexplod(8100)
anim = f8100
id = 8100
sprpriority = -10
postype = left
pos = 213,120
;persistent = 0
removetime = 90
supermovetime = 9999999999999
pausemovetime = 9999999999999
scale = 0.67*1.4, 0.5
bindtime = -1
ownpal = 1
under = 1
IgnoreHitPause = 1

[State 0]
type = Explod
triggerall = time = 0
trigger1 = !numexplod(8110)
anim = f8110
id = 8110
sprpriority = -10
postype = left
pos = 213,120
;persistent = 0
removetime = 90
supermovetime = 9999999999999
pausemovetime = 9999999999999
scale = 0.67*1.4, 0.5
bindtime = -1
ownpal = 1
under = 1
IgnoreHitPause = 1


[State 7100, PlaySnd]
type = VarSet
triggerall = var(9) = 0
trigger1 = NumExPlod(8100)
trigger1 = NumExPlod(8110)
var(9) = 1

[State 7100, PlaySnd]
type = VarSet
triggerall = var(9) = 1
trigger1 = roundstate <= 2
var(9) = 0


[State 0]
type = Explod
triggerall = time = 90
trigger1 = var(9)
anim = f8200
id = 8200
sprpriority = -10
postype = left
pos = 213,120
;persistent = 0
;removetime = 90
supermovetime = 9999999999999
pausemovetime = 9999999999999
scale = 0.67*1.4, 0.5
bindtime = -1
ownpal = 1
under = 1
IgnoreHitPause = 1

[State 0]
type = Explod
triggerall = time = 90
trigger1 = var(9)
anim = f8210
id = 8210
sprpriority = -10
postype = left
pos = 213,120
;persistent = 0
;removetime = 90
supermovetime = 9999999999999
pausemovetime = 9999999999999
scale = 0.67*1.4, 0.5
bindtime = -1
ownpal = 1
under = 1
IgnoreHitPause = 1

;-------------------------------------------------------------------------------
[Statedef 7740]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 10
anim = 10000

[State 0]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 2
range = -3,-1

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 3
range = -1,1

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 4
range = 1,3

[State 1230]
type = VarRandom
trigger1 = time = [0,2]
v = 5
range = -9,-7

[State 1230]
type = veladd
trigger1 = 1
y = .44

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=4
anim = F8880
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = 5+floor(Random/200.0),0
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=4
anim = F8881
id = 8880+(time=2)
sprpriority = -1+(time=2)*11
postype = p1
pos = 30+floor(Random/250.0),-5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=4
anim = F8882
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = 40+floor(Random/250.0),-15
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(4),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=4
anim = F8883
id = 8880+(time=2)
sprpriority = -1+(time=2)*11
postype = p1
pos = -5-floor(Random/200.0),0
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=4
anim = F8884
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = -30-floor(Random/250.0),-5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=4
anim = F8885
id = 8880+(time=2)
sprpriority = -1+(time=2)*11
postype = p1
pos = -40-floor(Random/250.0),-15
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(2),var(5)
accel = 0,.44
removetime =35

[State 1000, 5]
type = Explod
trigger1 = time=0
trigger2 = time=4
anim = F8880+floor(Random/250.0)
id = 8880+(time=2)
sprpriority = 10-(time=2)*11
postype = p1
pos = 0-floor(Random/500.0),5
bindtime =  1
supermove = 1
under = 0
ownpal = 1
scale =.5,.5
vel = var(3),var(5)
accel = 0,.44
removetime =35

[State 2]
Type = ModifyExplod
Trigger1 =time>30
ID = 8880
Trans = addalpha
Alpha = 255-2*time,255-time

[State 2]
Type = ModifyExplod
Trigger1 =time>30
ID = 8881
Trans = addalpha
Alpha = 255-2*time,255-time

[State 1230]
type = destroyself
trigger1 = pos Y > 4 && vel Y > 0
trigger2 = time >= 40
;=========================================================================
;--------------------------------------------------------------
;技能点显示
;--------------------------------------------------------------
[Statedef 79995]
ctrl = 0
anim = 10000
ownpal = 1

[State 橙色c-1]
type = Explod
triggerall = NumExplod(97032) = 0
trigger1 = root,fvar(29) >= 1000
anim = F309-(teamside-1)
ID = 97032
pos = Ifelse(TeamSide = 1, 40, 387),228
sprpriority =9999
postype = left
scale = 0.5,0.5
OnTop = 1
supermove = 1
BindTime = -1
ownpal = 1
removetime = -1

[State 橙色c-2]
type = Explod
triggerall = NumExplod(97042) = 0
trigger1 = root,fvar(29) >= 2000
anim = F309-(teamside-1)
ID = 97042
pos = Ifelse(TeamSide = 1, 47, 379),228.5
sprpriority =9999
postype = left
scale = 0.5,0.5
OnTop = 1
supermove = 1
BindTime = -1
ownpal = 1
removetime = -1

;-----------------------
[State 0, VarSet]
type = VarSet
trigger1 = root,fvar(29)<999
v = 1
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = root,fvar(29)<1998
v = 2
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = var(1)=0
trigger1 = root,fvar(29)>=1000
v = 1
value = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = var(2)=0
trigger1 = root,fvar(29)>1999
v = 2
value = 1

;-----------------------
[State a]
type = helper
trigger1 = var(1)=1
trigger2 = var(2)=1
name = "EX-shadow"
helpertype = normal
ID = 79996
pos = 0,0
postype = p1
stateno = 79996
keyctrl = 0
ownpal = 1

;-----------------------
[State 取消ST珠-1]
type = RemoveExplod
trigger1 = numexplod(97032) && root,fvar(29)< 1000
trigger2 = roundstate != 2
id = 97032
ignorehitpause =1
persistent =1

[State 取消ST珠-2]
type = RemoveExplod
trigger1 = numexplod(97042) && root,fvar(29)< 2000
trigger2 = roundstate != 2
id = 97042
ignorehitpause =1
persistent =1

;-------------------------------------------
[State a, Explod]
type = Explod
trigger1 = !NumExplod(310)
trigger1 = TeamSide = 1
anim = F310
ID = 310
postype = Back
sprpriority = 400
pos = 47,229.5
ownpal = 1
bindtime = -1
scale = 1,0.5
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State a, Explod]
type = Explod
trigger1 = !NumExplod(320)
trigger1 = TeamSide = 2
anim = F310
ID = 320
postype = Back
sprpriority = 400
pos = 47,229.5
ownpal = 1
bindtime = -1
scale = 1,0.5
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State 6140, ModifyExplod]
type = ModifyExplod
triggerall = TeamSide = 1
triggerall = parent,fvar(29) < 1001
trigger1 = NumExplod(310)
ID = 310
scale = (parent,fvar(29))/1000.0,.5
ignorehitpause = 1

[State 6140, ModifyExplod]
type = ModifyExplod
triggerall = TeamSide = 2
triggerall = parent,fvar(29) < 1001
trigger1 = NumExplod(320)
ID = 320
scale = (parent,fvar(29))/1000.0,.5
ignorehitpause = 1
;-------------------------------------------

[State a, Explod]
type = Explod
triggerall = parent,fvar(29) > 1000
trigger1 = !NumExplod(311)
trigger1 = TeamSide = 1
anim = F311
ID = 311
postype = Back
sprpriority = 500
pos = 47,229.5
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State a, Explod]
type = Explod
triggerall = parent,fvar(29) > 1000
trigger1 = !NumExplod(321)
trigger1 = TeamSide = 2
anim = F311
ID = 321
postype = Back
sprpriority = 500
pos = 47,229.5
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State 6140, ModifyExplod]
type = ModifyExplod
triggerall = TeamSide = 1
triggerall = parent,fvar(29) > 1000
trigger1 = NumExplod(311)
ID = 311
scale = ((parent,fvar(29)-1000)/1000.0),.5
ignorehitpause = 1

[State 6140, ModifyExplod]
type = ModifyExplod
triggerall = TeamSide = 2
triggerall = parent,fvar(29) > 1000
trigger1 = NumExplod(321)
ID = 321
scale = ((parent,fvar(29)-1000)/1000.0),.5
ignorehitpause = 1
;-------------------------------------------

[State a, Explod]
type = Explod
triggerall = parent,fvar(29) > 1999
trigger1 = !NumExplod(312)
trigger1 = TeamSide = 1
anim = F312
ID = 312
postype = Back
sprpriority = 600
pos = 47,229.5
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State a, Explod]
type = Explod
triggerall = parent,fvar(29) > 1999
trigger1 = !NumExplod(322)
trigger1 = TeamSide = 2
anim = F312
ID = 322
postype = Back
sprpriority = 600
pos = 47,229.5
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State 6140, ModifyExplod]
type = ModifyExplod
triggerall = TeamSide = 1
triggerall = parent,fvar(29) > 1999
trigger1 = NumExplod(312)
ID = 312
scale = (parent,fvar(29)-1000)/1000.0,.5
ignorehitpause = 1

[State 6140, ModifyExplod]
type = ModifyExplod
triggerall = TeamSide = 2
triggerall = parent,fvar(29) > 1999
trigger1 = NumExplod(322)
ID = 322
scale = (parent,fvar(29)-1000)/1000.0,.5
ignorehitpause = 1

;-------------------------------------------
[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = TeamSide = 1
triggerall = parent,fvar(29) > 1999
trigger1 = NumExplod(310)
ID = 310
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = TeamSide = 2
triggerall = parent,fvar(29) > 1999
trigger1 = NumExplod(320)
ID = 320
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = TeamSide = 1
triggerall = NumExplod(311)
trigger1 = parent,fvar(29) > 1999
trigger2 = parent,fvar(29) < 999
ID = 311
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = TeamSide = 2
triggerall = NumExplod(321)
trigger1 = parent,fvar(29) > 1999
trigger2 = parent,fvar(29) < 999
ID = 321
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = TeamSide = 1
triggerall = parent,fvar(29) < 1999
trigger1 = NumExplod(312)
ID = 312
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = TeamSide = 2
triggerall = parent,fvar(29) < 1999
trigger1 = NumExplod(322)
ID = 322
ignorehitpause = 1

[State 0, p3-1-4]
type = RemoveExplod
trigger1 = Roundstate != 2
ignorehitpause = 1

;--------------------------------------------------------------
;Skill Bar Snd
;--------------------------------------------------------------
[Statedef 79996]
ctrl = 0
anim = 10000
ownpal = 1

[State a, PlaySnd]
type = PlaySnd
trigger1 = !time
value = f20,7

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = time = 0
trigger1 = Parent,var(1)=1
v = 1
value = 1

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = time = 0
trigger1 = Parent,var(2)=1
v = 2
value = 1

[State 70001, DestroySelf]
type = DestroySelf
trigger1 = time = 1

;--------------------------------------------------------------
[Statedef 79997]
ctrl = 0
anim = 10000
ownpal = 1

[State top,1]
type = SuperPause
trigger1 = !time
time = 10
anim = -1
persistent = 0

[State a, PlaySnd]
type = PlaySnd
trigger1 = !time
value = f20,6

[State top,3]
type = Explod
trigger1 = !time
anim = F164
id = 164
pos = 0,-75
postype = P1
sprpriority = 2
removetime = 50
bindtime = -1
supermove = 1
ignorehitpause = 1
ownpal = 1
persistent = 0
ontop = 1

[State 1010, 0]
type = destroyself
trigger1 = root,movetype = H
ignorehitpause = 1
persistent = 0

;===============================================================================
;------------------------------------------------------------------------------
[Statedef 99926]
type = a
anim = 99999

[State a]
type = Explod
trigger1 = IsHelper(99920)
trigger1 = time = 0
ignorehitpause = 1
Anim = F5920
ID = 0
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 3
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State a]
type = Explod
trigger1 = IsHelper(99921)
trigger1 = time = 0
ignorehitpause = 1
Anim = F5921
ID = 1
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 3
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State a]
type = Explod
trigger1 = IsHelper(99922)
trigger1 = time = 0
ignorehitpause = 1
Anim = F5922
ID = 2
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 3
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State a]
type = Explod
trigger1 = IsHelper(99923)
trigger1 = time = 0
ignorehitpause = 1
Anim = F5923
ID = 3
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 3
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State a]
type = Explod
trigger1 = IsHelper(99924)
trigger1 = time = 0
ignorehitpause = 1
Anim = F5924
ID = 4
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 3
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State a]
type = Explod
trigger1 = IsHelper(99925)
trigger1 = time = 0
ignorehitpause = 1
Anim = F5925
ID = 5
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 3
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State a]
type = Explod
trigger1 = IsHelper(99926)
trigger1 = time = 0
ignorehitpause = 1
Anim = F5926
ID = 6
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 3
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State a]
type = Explod
trigger1 = IsHelper(99927)
trigger1 = time = 0
ignorehitpause = 1
Anim = F5927
ID = 7
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 3
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State a]
type = Explod
trigger1 = IsHelper(99928)
trigger1 = time = 0
ignorehitpause = 1
Anim = F5928
ID = 8
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 3
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State a]
type = Explod
trigger1 = IsHelper(99929)
trigger1 = time = 0
ignorehitpause = 1
Anim = F5929
ID = 9
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 3
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = 1
v = 1
value = 1

[state a]
type = ModifyExplod
trigger1 = 1
;ID = 6
scale = 0.5+var(1)*0.015,0.5+var(1)*0.015
ignorehitpause = 1

[State a]
type = RemoveExplod
trigger1 = time = 18
;id = 6

[state a]
type = destroyself
trigger1 = time = 18

;-----------------------------------------------------------------------------
;战前选模式
;-----------------------------------------------------------------------------
[Statedef 99994]
type = a
anim = 99999

[state 1]
type = varset
trigger1 = time = 0
var(1)=0

;------------------------------------------------------

[state 5900, Reset Variables]
type = varrangeset
trigger1 = !roundsexisted && matchno = 1
value = 0

[state 5900, Reset Variables]
type = varrangeset
trigger1 = !roundsexisted && matchno = 1
fvalue = 0

[State 5900, Palette Selector]
type = VarSet
trigger1 = 1
fv = 37
value = 1

[State 5900, Pal Selector on]
type=helper
triggerall=fvar(37) && !numhelper(12345) && !AILevel&&numenemy 
trigger1 = matchno=1 && !(teammode = simul) && !(enemy, teammode = simul)
trigger2 = !fvar(36) 
trigger3 = (teammode = turns)
trigger3 = !roundsexisted && (enemy,roundsexisted)
id =12345
stateno = 12345
facing = facing
ownpal = 1

[state 5900, No Palette selector]
type = remappal
trigger1 = !fvar(37) || AILevel
source = 1, 1
dest = 1, palno
ignorehitpause = 1

;------------------------------------------------------

[state -3, nofg]
type = assertspecial
trigger1 = 1
flag = NoFG
flag2= nobg

[State 3601, BG]
type = Explod
triggerall = teamside = 1
triggerall = NumExplod(5990)=0 && movetype!=h
trigger1 = 1
ignorehitpause = 1
Anim = F5990
ID = 5990
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1
ontop = 1

[State 3601, BG]
type = Explod
triggerall = teamside = 1
triggerall = NumExplod(5991)=0 && movetype!=h
trigger1 = 1
ignorehitpause = 1
Anim = F5991
ID = 5991
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1
ontop = 1

[State 3601, BG]
type = Explod
triggerall = teamside = 1
triggerall = NumExplod(55921)=0 && movetype!=h
trigger1 = 1
ignorehitpause = 1
Anim = F55921
ID = 55921
Pos = 25,234
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1
ontop = 1
velocity = -.5,0 

[State 3601, BG]
type = Explod
triggerall = teamside = 1
triggerall = NumExplod(55900)=0 && movetype!=h
trigger1 = 1
ignorehitpause = 1
Anim = F55900
ID = 55900
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = teamside = 1
triggerall = NumExplod(55901)=0 && movetype!=h
trigger1 = 1
ignorehitpause = 1
Anim = F55901
ID = 55901
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = teamside = 1
triggerall = NumExplod(55902)=0 && movetype!=h
trigger1 = 1
ignorehitpause = 1
Anim = F55902
ID = 55902
Pos = 0,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = teamside = 1
triggerall = NumExplod(55904)=0 && movetype!=h
trigger1 = 1
ignorehitpause = 1
Anim = F55904
ID = 55904
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = -4
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = teamside = 1
triggerall = NumExplod(55905)=0 && movetype!=h
trigger1 = 1
ignorehitpause = 1
Anim = F55905
ID = 55905
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = -4
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = parent,teammode != simul 
triggerall = teamside = 1
triggerall = NumExplod(55906)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55906
ID = 55906
Pos = 0,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = parent,teammode != simul 
triggerall = teamside = 2
triggerall = NumExplod(55923)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55923
ID = 55923
Pos = 213.5,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 2
ownpal = 1
removeongethit = 1
facing = -1

[State 3601, BG]
type = Explod
triggerall = parent,teammode = simul && parent,ID < partner,ID
triggerall = teamside = 1
triggerall = NumExplod(55918)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55918
ID = 55918
Pos = 0,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = parent,teammode = simul && parent,ID < partner,ID
triggerall = teamside = 2
triggerall = NumExplod(55922)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55922
ID = 55922
Pos = 213.5,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 2
ownpal = 1
removeongethit = 1
facing = -1

[State 3601, BG]
type = Explod
triggerall = parent,teammode = simul && parent,ID > partner,ID
triggerall = teamside = 1
triggerall = NumExplod(55924)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55924
ID = 55924
Pos = 0,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = parent,teammode = simul && parent,ID > partner,ID
triggerall = teamside = 2
triggerall = NumExplod(55925)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55925
ID = 55925
Pos = 213.5,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 2
ownpal = 1
removeongethit = 1
facing = -1

[State 3601, BG]
type = Explod
triggerall = teamside = 1
triggerall = NumExplod(55908)=0 && movetype!=h
trigger1 = 1
ignorehitpause = 1
Anim = F55908
ID = 55908
postype = back
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = -1
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = NumExplod(55903)=0 && movetype!=h
triggerall = parent,teammode != simul
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = F55903
ID = 55903
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = -3
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = NumExplod(55909)=0 && movetype!=h
triggerall = parent,teammode = simul
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = F55909
ID = 55909
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = -3
ownpal = 1
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = root,teammode != simul  || (root,teammode = simul && root,ID < partner,ID)
triggerall = teamside = 1
trigger1 = time = 0
value = f5900,5
channel = 9
loop = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = root,teammode != simul  || (root,teammode = simul && root,ID < partner,ID)
triggerall = teamside = 1
trigger1 = time = 20 
value = f5900,4

[State 倒数]
type = Helper
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
triggerall = numhelper(99929)=0
trigger1 = (parent,teammode != simul) && (enemy,teammode != simul)
trigger1 = parent,var(1)=0||enemy,var(1)=0
trigger1 = time = 0
trigger2 = (parent,teammode = simul)||(enemy,teammode = simul)
trigger2 = time = 0
ignorehitpause = 1
persistent = 1
name = "9"
stateno = 99926
ID = 99929
postype = back
facing = 1

[State 倒数]
type = Helper
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
triggerall = numhelper(99928)=0
trigger1 = (parent,teammode != simul) && (enemy,teammode != simul)
trigger1 = parent,var(1)=0||enemy,var(1)=0
trigger1 = time = 60
trigger2 = (parent,teammode = simul)||(enemy,teammode = simul)
trigger2 = time = 60
ignorehitpause = 1
persistent = 1
name = "8"
stateno = 99926
ID = 99928
postype = back
facing = 1

[State 倒数]
type = Helper
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
triggerall = numhelper(99927)=0
trigger1 = (parent,teammode != simul) && (enemy,teammode != simul)
trigger1 = parent,var(1)=0||enemy,var(1)=0
trigger1 = time = 120
trigger2 = (parent,teammode = simul)||(enemy,teammode = simul)
trigger2 = time = 120
ignorehitpause = 1
persistent = 1
name = "7"
stateno = 99926
ID = 99927
postype = back
facing = 1

[State 倒数]
type = Helper
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
triggerall = numhelper(99926)=0
trigger1 = (parent,teammode != simul) && (enemy,teammode != simul)
trigger1 = parent,var(1)=0||enemy,var(1)=0
trigger1 = time = 180
trigger2 = (parent,teammode = simul)||(enemy,teammode = simul)
trigger2 = time = 180
ignorehitpause = 1
persistent = 1
name = "6"
stateno = 99926
ID = 99926
postype = back
facing = 1

[State 倒数]
type = Helper
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
triggerall = numhelper(99925)=0
trigger1 = (parent,teammode != simul) && (enemy,teammode != simul)
trigger1 = parent,var(1)=0||enemy,var(1)=0
trigger1 = time = 240
trigger2 = (parent,teammode = simul)||(enemy,teammode = simul)
trigger2 = time = 240
ignorehitpause = 1
persistent = 1
name = "5"
stateno = 99926
ID = 99925
postype = back
facing = 1

[State 倒数]
type = Helper
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
triggerall = numhelper(99925)=0
trigger1 = (parent,teammode != simul) && (enemy,teammode != simul)
trigger1 = parent,var(1)=0||enemy,var(1)=0
trigger1 = time = 300
trigger2 = (parent,teammode = simul)||(enemy,teammode = simul)
trigger2 = time = 300
ignorehitpause = 1
persistent = 1
name = "4"
stateno = 99926
ID = 99924
postype = back
facing = 1

[State 倒数]
type = Helper
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
triggerall = numhelper(99925)=0
trigger1 = (parent,teammode != simul) && (enemy,teammode != simul)
trigger1 = parent,var(1)=0||enemy,var(1)=0
trigger1 = time = 360
trigger2 = (parent,teammode = simul)||(enemy,teammode = simul)
trigger2 = time = 360
ignorehitpause = 1
persistent = 1
name = "3"
stateno = 99926
ID = 99923
postype = back
facing = 1

[State 倒数]
type = Helper
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
triggerall = numhelper(99925)=0
trigger1 = (parent,teammode != simul) && (enemy,teammode != simul)
trigger1 = parent,var(1)=0||enemy,var(1)=0
trigger1 = time = 420
trigger2 = (parent,teammode = simul)||(enemy,teammode = simul)
trigger2 = time = 420
ignorehitpause = 1
persistent = 1
name = "2"
stateno = 99926
ID = 99922
postype = back
facing = 1

[State 倒数]
type = Helper
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
triggerall = numhelper(99925)=0
trigger1 = (parent,teammode != simul) && (enemy,teammode != simul)
trigger1 = parent,var(1)=0||enemy,var(1)=0
trigger1 = time = 480
trigger2 = (parent,teammode = simul)||(enemy,teammode = simul)
trigger2 = time = 480
ignorehitpause = 1
persistent = 1
name = "1"
stateno = 99926
ID = 99921
postype = back
facing = 1

[State 倒数]
type = Helper
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
trigger1 = numhelper(99925)=0
trigger1 = (parent,teammode != simul) && (enemy,teammode != simul)
trigger1 = parent,var(1)=0||enemy,var(1)=0
trigger1 = time = 540
trigger2 = (parent,teammode = simul)||(enemy,teammode = simul)
trigger2 = time = 540
ignorehitpause = 1
persistent = 1
name = "0"
stateno = 99926
ID = 99920
postype = back
facing = 1

[State 倒数]
type = Explod
triggerall = teamside = 1
triggerall = parent,var(1)=0
triggerall = (numpartner = 0||numpartner != 0)
triggerall = NumExplod(5916)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = f5913
ID = 5916
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 2
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State -3, AI]
type = null;RemoveExplod
triggerall = parent,teammode = simul
triggerall = enemy,teammode = simul
trigger1 = parent,var(1)>0
trigger1 = partner,var(1)>0
trigger1 = enemy,var(1)>0
trigger1 = enemynear,var(1)>0
ID = 5916

[State 倒数]
type = null;Explod
triggerall = parent,teammode = simul
triggerall = enemy,teammode = simul
trigger1 = parent,var(1)>0
trigger1 = partner,var(1)>0
trigger1 = enemy,var(1)>0
trigger1 = enemynear,var(1)>0
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
trigger1 = NumExplod(5916)=0
ignorehitpause = 1
persistent = 1
Anim = f5914
ID = 5916
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 2
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State 99992, BG]
type = null;Explod
triggerall = parent,teammode = simul
triggerall = enemy,teammode = simul
trigger1 = parent,var(1)>0
trigger1 = partner,var(1)>0
trigger1 = enemy,var(1)>0
trigger1 = enemynear,var(1)>0
triggerall = teamside = 1
triggerall = NumExplod(5591)=0 && movetype!=h
persistent = 0
anim = f5591
id = 5591
postype = back
scale = 1.6,1.2
sprpriority = 4
ownpal = 1
ontop = 1

[State -3, AI]
type = null;RemoveExplod
triggerall = parent,teammode != simul
triggerall = enemy,teammode = simul
trigger1 = parent,var(1)>0
trigger1 = enemy,var(1)>0
trigger1 = enemynear,var(1)>0
ID = 5916

[State 倒数]
type = null;Explod
triggerall = parent,teammode != simul
triggerall = enemy,teammode = simul
trigger1 = parent,var(1)>0
trigger1 = enemy,var(1)>0
trigger1 = enemynear,var(1)>0
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
trigger1 = NumExplod(5916)=0
ignorehitpause = 1
persistent = 1
Anim = f5914
ID = 5916
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 2
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State 99992, BG]
type = null;Explod
triggerall = parent,teammode != simul
triggerall = enemy,teammode = simul
trigger1 = parent,var(1)>0
trigger1 = enemy,var(1)>0
trigger1 = enemynear,var(1)>0
triggerall = teamside = 1
triggerall = NumExplod(5591)=0 && movetype!=h
persistent = 0
anim = f5591
id = 5591
postype = back
scale = 1.6,1.2
sprpriority = 4
ownpal = 1
ontop = 1

[State -3, AI]
type = null;RemoveExplod
triggerall = parent,teammode = simul
triggerall = enemy,teammode != simul
trigger1 = parent,var(1)>0
trigger1 = partner,var(1)>0
trigger1 = enemy,var(1)>0
ID = 5916

[State 倒数]
type = null;Explod
triggerall = parent,teammode = simul
triggerall = enemy,teammode != simul
trigger1 = parent,var(1)>0
trigger1 = partner,var(1)>0
trigger1 = enemy,var(1)>0
triggerall = teamside = 1
triggerall = (numpartner = 0||numpartner != 0)
trigger1 = NumExplod(5916)=0
ignorehitpause = 1
persistent = 1
Anim = f5914
ID = 5916
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 2
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State 99992, BG]
type = null;Explod
triggerall = parent,teammode = simul
triggerall = enemy,teammode != simul
trigger1 = parent,var(1)>0
trigger1 = partner,var(1)>0
trigger1 = enemy,var(1)>0
triggerall = teamside = 1
triggerall = NumExplod(5591)=0 && movetype!=h
persistent = 0
anim = f5591
id = 5591
postype = back
scale = 1.6,1.2
sprpriority = 4
ownpal = 1
ontop = 1

[State -3, AI]
type = RemoveExplod
triggerall = parent,teammode != simul
triggerall = enemy,teammode != simul
trigger1 = parent,var(1)>0
trigger1 = enemy,var(1)>0
ID = 5916

[State 倒数]
type = Explod
triggerall = parent,teammode != simul
triggerall = enemy,teammode != simul
triggerall = teamside = 1
trigger1 = parent,var(1)>0
trigger1 = enemy,var(1)>0
triggerall = (numpartner = 0||numpartner != 0)
trigger1 = NumExplod(5916)=0
ignorehitpause = 1
persistent = 1
Anim = f5914
ID = 5916
postype = back
Pos = 214,75
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 2
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State 99992, BG]
type = Explod
triggerall = parent,teammode != simul
triggerall = enemy,teammode != simul
triggerall = teamside = 1
triggerall = NumExplod(5591)=0 && movetype!=h
trigger1 = parent,var(1)>0
trigger1 = enemy,var(1)>0
persistent = 0
anim = f5591
id = 5591
postype = back
scale = 1.6053,1.2
sprpriority = 4
ownpal = 1
ontop = 1

[State 99992, BG]
type = Explod
triggerall = (parent,teammode = simul && parent,ID < partner,ID)||(enemy,teammode = simul && parent,teammode != simul)
triggerall = teamside = 1
triggerall = NumExplod(5591)=0 && movetype!=h
trigger1 = time = 560
persistent = 0
anim = f5591
id = 5591
postype = back
scale = 1.6053,1.2
sprpriority = 4
ownpal = 1
ontop = 1

;------------------------------------------------------
[State 0, VarSet]
type = VarSet
trigger1 = (parent,teammode = simul && parent,ID < partner,ID)
fv = 20
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = parent,teammode != simul
fv = 20
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = (parent,teammode = simul && parent,ID > partner,ID)
fv = 20
value = 1

;------------------------------------------------------
;========================= TAG模式

; 0 说明是1p，1 说明是3p

[state 1]
type = varset
triggerall = numpartner != 0
triggerall = parent,var(1)=0
trigger1 = root,fvar(20)!=1
trigger1 = parent,Command="z"
trigger1 = parent,Command="c"
trigger2 = root,fvar(20)=1
trigger2 = parent,Command="z"
trigger2 = parent,Command="c"
var(1)=ifelse(var(1)=0,1,0)

[state 1]
type = PlaySnd
triggerall = NumPartner = 1
trigger1 = root,fvar(20)!=1
trigger1 = parent,Command="z"
trigger1 = parent,Command="c"
trigger2 = root,fvar(20)=1
trigger2 = parent,Command="z"
trigger2 = parent,Command="c"
value = f21,0
channel = 2

[State 3601, BG];P1/P2/P3/P4头像
type = Explod
triggerall = parent,var(1)=0
triggerall = numpartner != 0
triggerall = NumExplod(5901)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9010+parent,var(55)*10000
ID = 5910
Pos = 100-fvar(20)*35,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = -3
ownpal = 1
removeongethit = 1
trans = AddAlpha
alpha = 100, 256

;------------------------------
;人像
[State 3601,char 0]
type = Explod
triggerall = parent,var(1)=0
triggerall = numpartner != 0
triggerall = NumExplod(5901)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9001+parent,var(55)*10000+(root,fvar(20))
ID = 5901
postype = back
Pos = 125-fvar(20)*30,195-fvar(20)*12.5;
bindtime = -1
removetime = -1
sprpriority = 3
;ownpal = 1
removeongethit = 1
shadow = 0,0,0

[State 3601, shadow 0]
type = Explod
triggerall = parent,var(1)=0
triggerall = numpartner != 0
triggerall = NumExplod(5914)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9001+parent,var(55)*10000+(root,fvar(20))
ID = 5914
postype = back
Pos = 125-fvar(20)*30,195-fvar(20)*12.5;
bindtime = -1
removetime = -1
scale = 1,0.5
sprpriority = -2
;ownpal = 1
removeongethit = 1
shadow = 0,0,0
vfacing = -1
trans = addalpha
alpha = 120,120

;---------------------------------
[State 等待]
type = Explod
triggerall = teamside = 1
triggerall = parent,var(1)>0
triggerall = numpartner != 0
triggerall = NumExplod(55907)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = f55907
ID = 55907
postype = back
Pos = 30-fvar(20)*30,0-fvar(20)*12.5;0,0
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 4
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State 等待]
type = Explod
triggerall = teamside = 2
triggerall = parent,var(1)>0
triggerall = numpartner != 0
triggerall = NumExplod(55907)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = f55907
ID = 55907
postype = back
Pos = 225-fvar(20)*30,0-fvar(20)*12.5;195,0
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 4
ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = -1

[State 3601, BG];P1/P3头像
type = Explod
triggerall = teamside = 1
triggerall = parent,var(1)>0
triggerall = numpartner != 0
triggerall = NumExplod(5920)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9110+parent,var(55)*10000
ID = 5920
Pos = 100-fvar(20)*35,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = -3
ownpal = 1
removeongethit = 1
trans = AddAlpha
alpha = 100, 256

[State 3601, BG];P2/P4头像
type = Explod
triggerall = teamside = 2
triggerall = parent,var(1)>0
triggerall = numpartner != 0
triggerall = NumExplod(5921)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9110+parent,var(55)*10000
ID = 5921
Pos = 100-fvar(20)*35,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = -3
ownpal = 1
removeongethit = 1
trans = AddAlpha
alpha = 100, 256

[State 3601, BG]
type = Explod
triggerall = parent,teammode = simul && parent,ID < partner,ID 
triggerall = teamside = 1
triggerall = parent,var(1)>0
triggerall = NumExplod(55916)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55916
ID = 55916
Pos = 59.5,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = parent,teammode = simul && parent,ID < partner,ID 
triggerall = teamside = 2
triggerall = parent,var(1)>0
triggerall = NumExplod(55917)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55917
ID = 55917
Pos = 274,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
removeongethit = 1
facing = -1

[State 3601, BG]
type = Explod
triggerall = parent,teammode = simul && parent,ID > partner,ID 
triggerall = teamside = 1
triggerall = parent,var(1)>0
triggerall = NumExplod(55919)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55919
ID = 55919
Pos = 0,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = parent,teammode = simul && parent,ID > partner,ID 
triggerall = teamside = 2
triggerall = parent,var(1)>0
triggerall = NumExplod(55920)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55920
ID = 55920
Pos = 213.5,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
removeongethit = 1
facing = -1

;;;;;;;;;;
[State 3601, BG]
type = PlaySnd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
;triggerall = var(2)=0
trigger1 = root,fvar(20)!=1
trigger1 = parent,Command="up"
value = f21,0
channel = 2

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
;triggerall = var(2)=0
trigger1 = root,fvar(20)!=1
trigger1 = parent,Command="up"
ID = 5901

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
;triggerall = var(2)=0
trigger1 = root,fvar(20)!=1
trigger1 = parent,Command="up"
ID = 5910

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
;triggerall = var(2)=0
trigger1 = root,fvar(20)!=1
trigger1 = parent,Command="up"
ID = 5914

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000)
;triggerall = var(2)=0
triggerall = root,fvar(20)!=1
trigger1 = parent,Command="up"
trigger2 = parent,Var(59) && Random %2=1
var(55)=1

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = !AnimExist(9001+(parent,var(55)+1)*10000)
triggerall = AnimExist(9001+(parent,var(55)+2)*10000)
;triggerall = var(2)=0
triggerall = root,fvar(20)!=1
trigger1 = parent,Command="up"
trigger2 = parent,Var(59) && Random %2=1
var(55)=2

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = !AnimExist(9001+(parent,var(55)+1)*10000) && !AnimExist(9001+(parent,var(55)+2)*10000)
triggerall = AnimExist(9001+(parent,var(55)+3)*10000)
;triggerall = var(2)=0
triggerall = root,fvar(20)!=1
trigger1 = parent,Command="up"
trigger2 = parent,Var(59) && Random %2=1
var(55)=3

[State 3601, BG]
type = PlaySnd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
;triggerall = var(2)=0
triggerall = root,fvar(20)!=1
trigger1 = parent,Command="down"
trigger2 = parent,Var(59) && Random %2=1
value = f21,0
channel = 2

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
;triggerall = var(2)=0
triggerall = root,fvar(20)!=1
trigger1 = parent,Command="down"
trigger2 = parent,Var(59) && Random %2=1
ID = 5901

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
;triggerall = var(2)=0
triggerall = root,fvar(20)!=1
trigger1 = parent,Command="down"
trigger2 = parent,Var(59) && Random %2=1
ID = 5910

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
;triggerall = var(2)=0
triggerall = root,fvar(20)!=1
trigger1 = parent,Command="down"
trigger2 = parent,Var(59) && Random %2=1
ID = 5914

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = !AnimExist(9001+(parent,var(55)-1)*10000) && !AnimExist(9001+(parent,var(55)-2)*10000)
triggerall = AnimExist(9001+(parent,var(55)-3)*10000)
;triggerall = var(2)=0
triggerall = root,fvar(20)!=1
trigger1 = parent,Command="down"
trigger2 = parent,Var(59) && Random %2=1
v = 55
value = -3

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = !AnimExist(9001+(parent,var(55)-1)*10000) && !AnimExist(9001+(parent,var(55)-3)*10000)
triggerall = AnimExist(9001+(parent,var(55)-2)*10000)
;triggerall = var(2)=0
triggerall = root,fvar(20)!=1
trigger1 = parent,Command="down"
trigger2 = parent,Var(59) && Random %2=1
v = 55
value = -2

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
;triggerall = !AnimExist(9001+(parent,var(55)-3)*10000) && !AnimExist(9001+(parent,var(55)-2)*10000)
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)
;triggerall = var(2)=0
triggerall = root,fvar(20)!=1
trigger1 = parent,Command="down"
trigger2 = parent,Var(59) && Random %2=1
v = 55
value = -1

;3p 选人
[State 3601, BG]
type = PlaySnd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
;triggerall = var(2)=1
trigger1 = root,fvar(20)=1
trigger1 = partner,Command="up"
value = f21,0
channel = 2

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
;triggerall = var(2)=1
trigger1 = root,fvar(20)=1
trigger1 = partner,Command="up"
ID = 5901

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
;triggerall = var(2)=1
trigger1 = root,fvar(20)=1
trigger1 = partner,Command="up"
ID = 5910

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
;triggerall = var(2)=1
trigger1 = root,fvar(20)=1
trigger1 = partner,Command="up"
ID = 5914

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000)
;triggerall = var(2)=1
triggerall = root,fvar(20)=1
trigger1 = partner,Command="up"
trigger2 = parent,Var(59) && Random %2=1
var(55)=1

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = !AnimExist(9001+(parent,var(55)+1)*10000)
triggerall = AnimExist(9001+(parent,var(55)+2)*10000)
;triggerall = var(2)=1
triggerall = root,fvar(20)=1
trigger1 = partner,Command="up"
trigger2 = parent,Var(59) && Random %2=1
var(55)=2

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = !AnimExist(9001+(parent,var(55)+1)*10000) && !AnimExist(9001+(parent,var(55)+2)*10000)
triggerall = AnimExist(9001+(parent,var(55)+3)*10000)
;triggerall = var(2)=1
triggerall = root,fvar(20)=1
trigger1 = partner,Command="up"
trigger2 = parent,Var(59) && Random %2=1
var(55)=3

[State 3601, BG]
type = PlaySnd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
;triggerall = var(2)=1
triggerall = root,fvar(20)=1
trigger1 = partner,Command="down"
trigger2 = parent,Var(59) && Random %2=1
value = f21,0
channel = 2

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
;triggerall = var(2)=1
triggerall = root,fvar(20)=1
trigger1 = partner,Command="down"
trigger2 = parent,Var(59) && Random %2=1
ID = 5901

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
;triggerall = var(2)=1
triggerall = root,fvar(20)=1
trigger1 = partner,Command="down"
trigger2 = parent,Var(59) && Random %2=1
ID = 5910

[State -3, AI]
type = RemoveExplod
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
;triggerall = var(2)=1
triggerall = root,fvar(20)=1
trigger1 = partner,Command="down"
trigger2 = parent,Var(59) && Random %2=1
ID = 5914

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = !AnimExist(9001+(parent,var(55)-1)*10000) && !AnimExist(9001+(parent,var(55)-2)*10000)
triggerall = AnimExist(9001+(parent,var(55)-3)*10000)
;triggerall = var(2)=1
triggerall = root,fvar(20)=1
trigger1 = partner,Command="down"
trigger2 = parent,Var(59) && Random %2=1
v = 55
value = -3

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = !AnimExist(9001+(parent,var(55)-1)*10000) && !AnimExist(9001+(parent,var(55)-3)*10000)
triggerall = AnimExist(9001+(parent,var(55)-2)*10000)
;triggerall = var(2)=1
triggerall = root,fvar(20)=1
trigger1 = partner,Command="down"
trigger2 = parent,Var(59) && Random %2=1
v = 55
value = -2

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner != 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
;triggerall = !AnimExist(9001+(parent,var(55)-3)*10000) && !AnimExist(9001+(parent,var(55)-2)*10000)
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)
;triggerall = var(2)=1
triggerall = root,fvar(20)=1
trigger1 = partner,Command="down" && parent,Var(59)=0
trigger2 = parent,Var(59) && Random %2=1
v = 55
value = -1

[state var,default]
type = parentvarset
triggerall = numpartner != 0
triggerall = parent,var(1)<1
trigger1 = root,fvar(20)!=1
trigger1 = parent,Command="a" || parent,Command="x" || parent,Command="b" || parent,Command="y"
trigger2 = root,fvar(20)=1
trigger2 = parent,Command="a" || parent,Command="x" || parent,Command="b" || parent,Command="y"
trigger3 = time = 560
var(1)=1

[State 3601, BG]
type = PlaySnd
triggerall = parent,var(1)>0
triggerall = numpartner != 0
triggerall = NumExplod(5911)=0
trigger1 = root,fvar(20)!=1
trigger2 = root,fvar(20)=1
value = f21,1
channel = 2
persistent = 0

[State 3601, BG]
type = PlaySnd
triggerall = parent,var(1)>0
triggerall = numpartner != 0
triggerall = NumExplod(5911)=0
trigger1 = root,fvar(20)!=1
trigger2 = root,fvar(20)=1
value = 5900,5900+(parent,var(55))
persistent = 0

[State -3, AI]
type = RemoveExplod
triggerall = parent,var(1)>0
triggerall = numpartner != 0
trigger1 = NumExplod(5911)=0
ID = 5901

[State -3, AI]
type = RemoveExplod
triggerall = parent,var(1)>0
triggerall = numpartner != 0
trigger1 = NumExplod(5911)=0
ID = 5914

[State -3, AI]
type = RemoveExplod
triggerall = parent,var(1)>0
triggerall = numpartner != 0
trigger1 = NumExplod(5911)=0
ID = 5915

;------------------------------
;人像
[State 3601, 人物]
type = Explod
triggerall = parent,var(1)>0
triggerall = numpartner != 0
triggerall = NumExplod(5911)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9002+parent,var(55)*10000+(root,fvar(20))
ID = 5911
postype = back
Pos = 125-fvar(20)*30,195-fvar(20)*12.5;
bindtime = -1
removetime = -1
sprpriority = 3
;ownpal = 1
removeongethit = 1
shadow = 0,0,0

[State 3601, 影子]
type = Explod
triggerall = parent,var(1)>0
triggerall = numpartner != 0
triggerall = NumExplod(5914)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9002+parent,var(55)*10000+(root,fvar(20))
ID = 5914
postype = back
Pos = 125-fvar(20)*30,195-fvar(20)*12.5;
bindtime = -1
removetime = -1
scale = 1,0.5
sprpriority = -2
;ownpal = 1
removeongethit = 1
shadow = 0,0,0
vfacing = -1
trans = addalpha
alpha = 120,120

;---------------------------------

;确认后
[State -3, AI]
type = null;ChangeState
triggerall = parent,teammode = simul
triggerall = enemy,teammode = simul
triggerall = parent,var(1)>=1 && enemy,var(1)>=1 && partner,var(1)>=1 && enemynear,var(1)>0
trigger1 = time >= 200
value = 99992

[State -3, AI]
type = null;ChangeState
triggerall = parent,teammode != simul
triggerall = enemy,teammode = simul
triggerall = parent,var(1)>=1 && enemy,var(1)>=1 && enemynear,var(1)>0
trigger1 = time >= 200
value = 99992

[State -3, AI]
type = null;ChangeState
triggerall = parent,teammode = simul
triggerall = enemy,teammode != simul
triggerall = parent,var(1)>=1 && enemy,var(1)>=1 && partner,var(1)>=1
trigger1 = time >= 200
value = 99992

;----------------单人模式

[State 3601, BG];P1/P2头像
type = Explod
triggerall = parent,var(1)=0
triggerall = numpartner = 0
triggerall = NumExplod(5901)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9010+parent,var(55)*10000
ID = 5910
Pos = 100,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = -3
ownpal = 1
removeongethit = 1
trans = AddAlpha
alpha = 100, 256

;---------------------------------------------------

;人像
[State 3601, 人物]
type = Explod
triggerall = parent,var(1)=0
triggerall = numpartner = 0
triggerall = NumExplod(5901)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9001+parent,var(55)*10000
ID = 5901
postype = back
Pos = 97,185
bindtime = -1
removetime = -1
sprpriority = 3
;ownpal = 1
removeongethit = 1
shadow = 0,0,0

[State 3601, 影子]
type = Explod
triggerall = parent,var(1)=0
triggerall = numpartner = 0
triggerall = NumExplod(5914)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9001+parent,var(55)*10000
ID = 5914
postype = back
Pos = 97,185
bindtime = -1
removetime = -1
scale = 1,0.5
sprpriority = -2
;ownpal = 1
removeongethit = 1
shadow = 0,0,0
vfacing = -1
trans = addalpha
alpha = 120,120

[State 3601, BG]
type = PlaySnd
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
trigger1 = parent,Command="up"
value = f21,0
channel = 2

[State -3, AI]
type = RemoveExplod
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
trigger1 = parent,Command="up"
ID = 5901

[State -3, AI]
type = RemoveExplod
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
trigger1 = parent,Command="up"
ID = 5914

[State -3, AI]
type = RemoveExplod
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000) || AnimExist(9001+(parent,var(55)+2)*10000)|| AnimExist(9001+(parent,var(55)+3)*10000)
trigger1 = parent,Command="up"
ID = 5910

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = AnimExist(9001+(parent,var(55)+1)*10000)
trigger1 = parent,Command="up" && parent,Var(59)=0
trigger2 = parent,Var(59) && Random %2=1
var(55)=1

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = !AnimExist(9001+(parent,var(55)+1)*10000)
triggerall = AnimExist(9001+(parent,var(55)+2)*10000)
trigger1 = parent,Command="up" && parent,Var(59)=0
trigger2 = parent,Var(59) && Random %2=1
var(55)=2

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = !AnimExist(9001+(parent,var(55)+1)*10000) && !AnimExist(9001+(parent,var(55)+2)*10000)
triggerall = AnimExist(9001+(parent,var(55)+3)*10000)
trigger1 = parent,Command="up" && parent,Var(59)=0
trigger2 = parent,Var(59) && Random %2=1
var(55)=3

[State 3601, BG]
type = PlaySnd
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
trigger1 = parent,Command="down" && parent,Var(59)=0
trigger2 = parent,Var(59) && Random %2=1
value = f21,0
channel = 2

[State -3, AI]
type = RemoveExplod
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
trigger1 = parent,Command="down" && parent,Var(59)=0
trigger2 = parent,Var(59) && Random %2=1
ID = 5901

[State -3, AI]
type = RemoveExplod
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
trigger1 = parent,Command="down" && parent,Var(59)=0
trigger2 = parent,Var(59) && Random %2=1
ID = 5914

[State -3, AI]
type = RemoveExplod
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)|| AnimExist(9001+(parent,var(55)-2)*10000)|| AnimExist(9001+(parent,var(55)-3)*10000)
trigger1 = parent,Command="down" && parent,Var(59)=0
trigger2 = parent,Var(59) && Random %2=1
ID = 5910

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = !AnimExist(9001+(parent,var(55)-1)*10000) && !AnimExist(9001+(parent,var(55)-2)*10000)
triggerall = AnimExist(9001+(parent,var(55)-3)*10000)
trigger1 = parent,Command="down" && parent,Var(59)=0
trigger2 = parent,Var(59) && Random %2=1
v = 55
value = -3

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
triggerall = !AnimExist(9001+(parent,var(55)-1)*10000) && !AnimExist(9001+(parent,var(55)-3)*10000)
triggerall = AnimExist(9001+(parent,var(55)-2)*10000)
trigger1 = parent,Command="down" && parent,Var(59)=0
trigger2 = parent,Var(59) && Random %2=1
v = 55
value = -2

[State -3, AI]
type = ParentVarAdd
triggerall = numpartner = 0
triggerall = parent,var(1)=0
;triggerall = roundno = 1 ||(parent,TeamMode = turns && !parent,RoundsExisted)
triggerall = parent,var(55)!=0
;triggerall = !AnimExist(9001+(parent,var(55)-3)*10000) && !AnimExist(9001+(parent,var(55)-2)*10000)
triggerall = AnimExist(9001+(parent,var(55)-1)*10000)
trigger1 = parent,Command="down" && parent,Var(59)=0
trigger2 = parent,Var(59) && Random %2=1
v = 55
value = -1

[state var,default]
type = parentvarset
triggerall = numpartner = 0
triggerall = parent,var(1)<1
triggerall = time >=10
trigger1 = parent,Command="a" ||parent,Command="x" ||parent,Command="b" ||parent,Command="y"
trigger1 = parent,Var(59)=0
trigger2 = time = 560
;trigger3 = RoundNo >1 && parent,TeamMode !=turns
;trigger4 = parent,TeamMode = turns && parent,RoundsExisted
trigger3 = parent,Var(59)
trigger3 = time >= IfElse(Random%20=1,IfElse(Random%20=1,IfElse(Random%20=1,IfElse(Random%20=1,55,73),96),110),151)
var(1)=1

[State 3601, BG]
type = PlaySnd
triggerall = parent,var(1)>0
triggerall = numpartner = 0
triggerall = NumExplod(5911)=0
trigger1 = 1
value = f21,1
channel = 2
persistent = 0

[State 3601, BG]
type = PlaySnd
triggerall = parent,var(1)>0
triggerall = numpartner = 0
triggerall = NumExplod(5911)=0
trigger1 = 1
value = 5900,5900+(parent,var(55))
persistent = 0

[State -3, AI]
type = RemoveExplod
triggerall = parent,var(1)>0
triggerall = numpartner = 0
trigger1 = NumExplod(5911)=0
ID = 5901

[State -3, AI]
type = RemoveExplod
triggerall = parent,var(1)>0
triggerall = numpartner = 0
trigger1 = NumExplod(5911)=0
ID = 5914

[State 3601, 人物]
type = Explod
triggerall = parent,var(1)>0
triggerall = numpartner = 0
triggerall = NumExplod(5911)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9002+parent,var(55)*10000
ID = 5911
postype = back
Pos = 97,185
bindtime = -1
removetime = -1
sprpriority = 3
;ownpal = 1
removeongethit = 1
shadow = 0,0,0

[State 3601, 影子]
type = Explod
triggerall = parent,var(1)>0
triggerall = numpartner = 0
triggerall = NumExplod(5914)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9002+parent,var(55)*10000
ID = 5914
postype = back
Pos = 97,185
bindtime = -1
removetime = -1
scale = 1,0.5
sprpriority = -2
;ownpal = 1
removeongethit = 1
shadow = 0,0,0
vfacing = -1
trans = addalpha
alpha = 120,120

[State 准备]
type = Explod
triggerall = teamside = 1
triggerall = parent,var(1)>0
triggerall = numpartner = 0
triggerall = NumExplod(55907)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = f55907
ID = 55907
postype = back
Pos = 0,0
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 4
;ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = 1

[State 准备]
type = Explod
triggerall = teamside = 2
triggerall = parent,var(1)>0
triggerall = numpartner = 0
triggerall = NumExplod(55907)=0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = f55907
ID = 55907
postype = back
Pos = 195,0
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 4
;ownpal = 1
removeongethit = 1
shadow = 0,0,0
facing = -1

[State 3601, BG];P1头像
type = Explod
triggerall = teamside = 1
triggerall = parent,var(1)>0
triggerall = NumExplod(5920)=0
triggerall = numpartner = 0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9110+parent,var(55)*10000
ID = 5920
Pos = 100,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = -3
ownpal = 1
removeongethit = 1
trans = AddAlpha
alpha = 100, 256

[State 3601, BG];P2头像
type = Explod
triggerall = teamside = 2
triggerall = parent,var(1)>0
triggerall = NumExplod(5921)=0
triggerall = numpartner = 0
trigger1 = 1
ignorehitpause = 1
persistent = 1
Anim = 9110+parent,var(55)*10000
ID = 5921
Pos = 100,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = -3
ownpal = 1
removeongethit = 1
trans = AddAlpha
alpha = 100, 256

[State 3601, BG]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = teamside = 1
triggerall = parent,var(1)>0
triggerall = NumExplod(55912)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55912
ID = 55912
Pos = 0,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = teamside = 2
triggerall = parent,var(1)>0
triggerall = NumExplod(55913)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55912
ID = 55913
Pos = 139,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 5
ownpal = 1
removeongethit = 1
facing = -1

[State 3601, BG]
type = Explod
triggerall = parent,teammode != simul 
triggerall = teamside = 1
triggerall = parent,var(1)>0
triggerall = NumExplod(55916)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55916
ID = 55916
Pos = 0,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 3601, BG]
type = Explod
triggerall = parent,teammode != simul 
triggerall = teamside = 2
triggerall = parent,var(1)>0
triggerall = NumExplod(55917)=0
trigger1 = 1
ignorehitpause = 1
Anim = F55917
ID = 55917
Pos = 213.5,0
postype = back
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
removeongethit = 1
facing = -1

;--------------------------

;确认后
[State -3, AI]
type = ChangeState
triggerall = parent,teammode != simul
triggerall = enemy,teammode != simul
triggerall = parent,var(1)>=1 && enemy,var(1)>=1
trigger1 = time >= 200
value = 99992

;=========================================================================

[State -3, AI]
type = ChangeState
trigger1 = time = 580
value = 99992

[State -3, AI]
type = RemoveExplod
trigger1 = parent,Command="a" ||parent,Command="x" ||parent,Command="b" ||parent,Command="y"
trigger1 = parent,Var(59)=0
trigger2 = time = 560
trigger3 = NumExplod(55907)=1
ID = 5910

[State -3, AI]
type = RemoveExplod
trigger1 = parent,Command="a" ||parent,Command="x" ||parent,Command="b" ||parent,Command="y"
trigger1 = parent,Var(59)=0
trigger2 = time = 560
trigger3 = NumExplod(55907)=1
ID = 55918

[State -3, AI]
type = RemoveExplod
trigger1 = parent,Command="a" ||parent,Command="x" ||parent,Command="b" ||parent,Command="y"
trigger1 = parent,Var(59)=0
trigger2 = time = 560
trigger3 = NumExplod(55907)=1
ID = 55922

[State -3, AI]
type = RemoveExplod
trigger1 = parent,Command="a" ||parent,Command="x" ||parent,Command="b" ||parent,Command="y"
trigger1 = parent,Var(59)=0
trigger2 = time = 560
trigger3 = NumExplod(55907)=1
ID = 55924

[State -3, AI]
type = RemoveExplod
trigger1 = parent,Command="a" ||parent,Command="x" ||parent,Command="b" ||parent,Command="y"
trigger1 = parent,Var(59)=0
trigger2 = time = 560
trigger3 = NumExplod(55907)=1
ID = 55925

[State 5800, 可控]
type = DestroySelf
Trigger1 = time = 580

;---------------------------------------------------------------------------------
;setting finished
;---------------------------------------------------------------------------------
[Statedef 99991]
type = a
anim = 99999
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
x = 0
y = 0

[State 0, Explod]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 0
anim = f5800
ID = 5800
pos = 147,85
postype = left
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .5,.5
sprpriority = 30
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 1
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 20
anim = f5810
ID = 5810
pos = 205,108
postype = left
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .5,.5
sprpriority = 30
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 2
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 20
anim = f5811
ID = 5811
pos = 202,108
postype = left
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .5,.5
sprpriority = 30
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 3
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 20
anim = f5812
ID = 5812
pos = 202,108
postype = left
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .5,.5
sprpriority = 30
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 4
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 20
anim = f5813
ID = 5813
pos = 202,108
postype = left
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .5,.5
sprpriority = 30
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 5
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 20
anim = f5814
ID = 5814
pos = 202,108
postype = left
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .5,.5
sprpriority = 30
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 6
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 20
anim = f5815
ID = 5815
pos = 202,108
postype = left
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .5,.5
sprpriority = 30
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 7
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 20
anim = f5816
ID = 5816
pos = 202,108
postype = left
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .5,.5
sprpriority = 30
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 8
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 20
anim = f5817
ID = 5817
pos = 202,108
postype = left
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .5,.5
sprpriority = 30
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 9
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 20
anim = f5818
ID = 5818
pos = 202,108
postype = left
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .5,.5
sprpriority = 30
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 90
anim = f5819
ID = 5819
pos = 90,90
postype = left
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .5,.5
sprpriority = 30
ontop = 1
ownpal = 1

[State a]
type = PlaySnd
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 1
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 0
value = f10500,1

[State a]
type = PlaySnd
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 2
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 0
value = f10500,2

[State a]
type = PlaySnd
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 3
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 0
value = f10500,3

[State a]
type = PlaySnd
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 4
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 0
value = f10500,4

[State a]
type = PlaySnd
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 5
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 0
value = f10500,5

[State a]
type = PlaySnd
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 6
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 0
value = f10500,6

[State a]
type = PlaySnd
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 7
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 0
value = f10500,7

[State a]
type = PlaySnd
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 8
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 0
value = f10500,8

[State a]
type = PlaySnd
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = roundno = 9
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 0
value = f10500,9

[State a]
type = PlaySnd
triggerall = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 90
value = f10500,10

[State 5800, 可控]
type = DestroySelf
Trigger1 = Time=100

;----------------------------------------------------------------------------------------
[Statedef 99992]
type = a
anim = 99999

[state -3, nofg]
type = assertspecial
trigger1 = 1
flag = NoFG

[state -3, nolifebar]
type = assertspecial
trigger1 = 1
flag = NoBarDisplay
flag2=timerfreeze

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55900

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55901

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55902

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55912

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55903

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55913

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55904

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55905

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55916

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55917

[State -3, AI]
type = RemoveExplod
trigger1 = time = 0
ID = 55918

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55919

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55920

[State -3, AI]
type = RemoveExplod
trigger1 = time = 60
ID = 55921

[State -3, AI]
type = RemoveExplod
trigger1 = time = 0
ID = 55922

[State -3, AI]
type = RemoveExplod
trigger1 = time = 60
ID = 55923

[State -3, AI]
type = RemoveExplod
trigger1 = time = 0
ID = 55924

[State -3, AI]
type = RemoveExplod
trigger1 = time = 0
ID = 55925

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55907

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55908

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55909

[State -3, AI]
type = RemoveExplod
trigger1 = time = 75
ID = 55919

[State 0, StopSnd]
type = StopSnd
Trigger1 = Time=16
channel = 9

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=0
ID = 5910

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=75
ID = 5920

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 5921

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 5911

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 5914

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 5916

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55900

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55901

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55902

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55903

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55913

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55904

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55905

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55906

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55907

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55908

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55909

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 55919

[State 5800, 删除其他动画]
type = RemoveExplod
Trigger1 = Time=60
ID = 5591

[State 99992, BG]
type = Explod
;triggerall = root,fvar(20)!=1
triggerall = teamside = 1
triggerall = NumExplod(5592)=0 && movetype!=h
trigger1 = time = 60
persistent = 0
anim = f5592
id = 5592
postype = back
scale = 1.6,1.2
sprpriority = 4
ownpal = 1
ontop = 1

[State 99992, BG]
type = Explod
;triggerall = root,fvar(20)!=1
triggerall = teamside = 1
triggerall = NumExplod(5593)=0 && movetype!=h
trigger1 = time = 60
persistent = 0
anim = f5593
id = 5593
postype = back
scale = 1.35,1
sprpriority = 5
ownpal = 1
ontop = 1

[State 99992, BG]
type = Explod
;triggerall = root,fvar(20)!=1
triggerall = teamside = 1
triggerall = NumExplod(5594)=0 && movetype!=h
trigger1 = time = 60
persistent = 0
anim = f5594
id = 5594
postype = back
scale = 1.35,1
sprpriority = 5
ownpal = 1
ontop = 1

[State 99992, BG]
type = Explod
;triggerall = root,fvar(20)!=1
triggerall = teamside = 1
triggerall = NumExplod(5595)=0 && movetype!=h
trigger1 = time = 60
persistent = 0
anim = f5595
id = 5595
postype = back
scale = 1.35,1
sprpriority = 5
ownpal = 1
ontop = 1

[State 99992, BG]
type = Explod
;triggerall = root,fvar(20)!=1
triggerall = teamside = 1
triggerall = NumExplod(5596)=0 && movetype!=h
trigger1 = time = 60
persistent = 0
anim = f5596
id = 5596
postype = back
scale = 1.35,1
sprpriority = 5
ownpal = 1
ontop = 1

[State 99992, BG]
type = Explod
;triggerall = root,fvar(20)!=1
triggerall = teamside = 1
triggerall = NumExplod(5597)=0 && movetype!=h
trigger1 = time = 60
persistent = 0
anim = f5597
id = 5597
postype = back
scale = 1.35,1
sprpriority = 5
ownpal = 1
ontop = 1

[State 99992, BG]
type = Explod
;triggerall = root,fvar(20)!=1
triggerall = teamside = 1
triggerall = NumExplod(5598)=0 && movetype!=h
trigger1 = time = 60
persistent = 0
anim = f5598
id = 5598
postype = back
scale = 1.35,1
sprpriority = 5
ownpal = 1
ontop = 1

[state -3, R}hFpwp[]
type = NULL;helper
;triggerall = root,fvar(20)!=1
triggerall = teamside = 1
triggerall = NumExplod(99927)=0 && movetype!=h
trigger1 = time = 70
helpertype = normal
name = "next stage"
stateno = 99927
ID = 99927
postype = p1
pos = 0,0
keyctrl = 0
pausemovetime = 2147483647
supermovetime = 2147483647

[State -3, AI]
type = DestroySelf
Trigger1 = Time=85

[State -3, AI]
type = DestroySelf
triggerall = parent,var(1)=2
trigger1 = TeamMode = single || TeamMode = simul || TeamMode = turns
trigger1 = RoundNo > 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time>= 84
value = 99901

;-----------------------------------------------------------------------------------
[Statedef 99993]
ctrl = 0
vel = 0, 0
poweadd = 0
anim = 99999

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time = 144
v = 1
value = 5

[State -3, AI]
type = DestroySelf
trigger1 = time = 145

;---------------------------------------------------------------------------
[Statedef 99901]
type = A
physics = S
anim = 99999

[State a]
type= playsnd
triggerall = root,fvar(20)!=1
triggerall = teamside = 1
trigger1 = time = 10
value = f21,3
channel = 27

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = timerfreeze

[State 1100, GtFNg\]
type = Explod
trigger1 = teamside = 1
trigger1 = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
trigger1 = time = 20
persistent = 0
anim = f99927
postype = left
pos = 213.5,115
id = 40
ontop = 1
supermove = 1
sprpriority = 998
ignorehitpause = 1

[State 1100, GtFNg\]
type = Explod
trigger1 = parent,teammode != simul || (parent,teammode = simul && parent,ID < partner,ID)
trigger1 = StageVar(info.name) = "Forest Mansion"
trigger1 = teamside = 1
trigger1 = time = 20
persistent = 0
anim = f99928
postype = left
pos = 213.5,125
id = 40
ontop = 1
supermove = 1
sprpriority = 998
ignorehitpause = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time >=20
trigger1 = time <40
ID = 40
scale = 1,(time-20)*.05

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time >=30
trigger1 = time <200
ID = 40
scale = 1,1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time >=200
ID = 40
scale = 1,(210-time)*.1

[State -3, AI]
type = ParentVarSet
trigger1 = time >= 208
var(1)=2

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >= 210

;------------------------------------------------------------------------------
[Statedef 94035]
type = S
physics  = S
anim = 99999
ctrl = 0

[state a]
type=turn
trigger1=ishelper(94035)
trigger1=facing!=root,facing
ignorehitpause=1

[State 4]
type = VelSet
trigger1 = root,pos X > 0
x = ifelse(facing = 1,6,-6)

[State 4]
type = VelSet
trigger1 = root,pos X < 0
x = ifelse(facing = 1,-6,6)

[State 4]
type = VelSet
trigger1 = root,pos X = [-5,5]
x = 0

[State a]
type = Width
trigger1 = 1
value = 1,1

[State a]
type = ScreenBound
trigger1 =1
value =1
movecamera = 427,0

[State a]
type = PlayerPush
trigger1 =1
value = 0
;-------------------------------------------

;-------------------------------------------
[Statedef 99998]
type           = S
physics        = S
sprpriority    = 0
anim = 99999

[State a]
type = EnvColor
trigger1 = 1
value = 255,255,255
time = 2

[State a]
type  = null
trigger1 = 1

[state a]
type = assertspecial
trigger1 = MatchOver=0
trigger1 = time < 10
flag = roundnotover

[state a]
type = assertspecial
trigger1 = MatchOver=1
trigger1 = time < 10
flag = roundnotover

;=====================================================
[statedef 95196]
type=S
physics=N
movetype=I
velset=0,0
ctrl=0

[state 1]
type = ChangeAnim
triggerall= time = 0
trigger1 = selfanimexist(0+var(55))
value = 0+var(55)

[state 1]
type = ChangeAnim
triggerall= time = 0
trigger1 = !selfanimexist(0+var(55))
trigger1 = selfanimexist(0+Var(55)*6000)
value = 0+Var(55)*6000

[state 1]
type = ChangeAnim
triggerall= time = 0
trigger1 = !selfanimexist(0+var(55))
trigger1 = !selfanimexist(0+Var(55)*6000)
trigger1 = selfanimexist(0+var(55)*11000)
value = 0+var(55)*11000

[state 1]
type=StopSnd
trigger1=time=0
channel=0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = var(1)!=5
value = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = var(1)=5
value = 1

[State 1,濡p2涔绛寰浜,杩readyfight]
type=selfstate
trigger1=enemynear,stateno=95196
trigger2=enemynear,stateno=95197
trigger3=enemynear,stateno=95198
value=95197

;=========================================================
[statedef 95197]
type=S
physics=N
movetype=I
velset=0,0
ctrl=0

;------------------------------------------

[State 1100, 0]
type = Helper
triggerall = !IsHelper
triggerall = NumHelper(99993)=0
trigger1 = time = 0
name = "CtrlSet"
helpertype = normal
postype = left
stateno = 99993
ID = 99993
keyctrl = 0
persistent = 0

[State 1100, 0]
type = Helper
triggerall = !IsHelper
triggerall = NumHelper(99991)=0
trigger1 = time = 0
name = "fightfont"
helpertype = normal
Pos = 160,120
postype = left
stateno = 99991
ID=99991
SprPriority = 5
keyctrl = 0
ownpal = 1
size.shadowoffset=0
persistent = 0

;------------------------------------------

[state 1]
type = ChangeAnim
trigger1 = prevstateno != 95197
trigger1=anim!=0+var(55)
trigger1 = selfanimexist(0+var(55))
value = 0+var(55)

[state 1]
type = ChangeAnim
trigger1 = prevstateno != 95197
trigger1=anim!=0+Var(55)*6000
trigger1 = !selfanimexist(0+var(55))
trigger1 = selfanimexist(0+Var(55)*6000)
value = 0+Var(55)*6000

[state 1]
type = ChangeAnim
trigger1 = prevstateno != 95197
trigger1=anim!=0+var(55)*11000
trigger1 = !selfanimexist(0+var(55))
trigger1 = !selfanimexist(0+Var(55)*6000)
trigger1 = selfanimexist(0+var(55)*11000)
value = 0+var(55)*11000

;------------------------------------------
[State 0, CtrlSet]
type = CtrlSet
trigger1 = var(1)!=5
value = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = var(1)=5
value = 1

[state 1]
type= selfstate
Trigger1 = var(1)=5
value=0

;=====================================================
[statedef 95198]
type=S
physics=N
movetype=I
velset=0,0
ctrl=0
anim=0+var(55)

[State 画面黑]
type = Envcolor
trigger1 = time = 0
value = 0,0,0
time = 1

[state 1]
type=StopSnd
trigger1=time=0
channel=0

[state 1]
type = ChangeAnim
trigger1=1
trigger1 = selfanimexist(0+var(55))
value = 0+var(55)

[state 1]
type = ChangeAnim
trigger1=1
trigger1 = !selfanimexist(0+var(55))
trigger1 = selfanimexist(0+Var(55)*6000)
value = 0+Var(55)*6000

[state 1]
type = ChangeAnim
trigger1=1
trigger1 = !selfanimexist(0+var(55))
trigger1 = !selfanimexist(0+Var(55)*6000)
trigger1 = selfanimexist(0+var(55)*11000)
value = 0+var(55)*11000

[State 0, CtrlSet]
type = CtrlSet
trigger1 = var(1)!=5
value = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = var(1)=5
value = 1

[State 1,濡p2涔绛寰浜,杩readyfight]
type=selfstate
trigger1= time = 1
value=95196

;--------------------------------------------------------------
;光效初始位置
;--------------------------------------------------------------
[Statedef 23680]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = -10

[State 3680, 4]
type = changeanim
trigger1 = time%2 = 0
value = 99999

[State 3680, 4]
type = ChangeAnim
triggerall = time%2 = 1
trigger1 = ((root,anim = [0,99999]) && root,movetype != H)
trigger2 = (root,anim = [5000,9999])
value = root,anim
elem = root,animelemno(0)
ignorehitpause = 1
persistent = 1

[State 3680, 0]
type = PalFX
trigger1 = time = 0
time = -1
add = 224,88,0
sinadd = 48,50,32,16
;add = 248,232,192

[State 3680,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3680, 4]
type=BindToParent
trigger1 = 1
time = -1
facing = 1
pos = (1+ifelse(Parent,fvar(35) = 1,-1,0)+ifelse(Parent,fvar(35) = 2,-2,0))*ifelse(Facing = -1,-1,1),0
;--------------------------------------------------------------
;光效左
;--------------------------------------------------------------
[Statedef 23681]
type    = S
movetype= H
physics = N
velset = 0,0
anim = 99999
sprpriority = -10

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X > 0 && RootDist X < 52
fvar(35) = 1

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X < 0
fvar(35) = 0

[State 3680,1]
type = NotHitBy
trigger1 = 1
value = SCA
;--------------------------------------------------------------
;光效右
;--------------------------------------------------------------
[Statedef 23682]
type    = S
movetype= H
physics = N
velset = 0,0
anim = 99999
sprpriority = -10

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X < 0 && RootDist X > 52
fvar(35) = 1

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X > 0
fvar(35) = 2

[State 3680,1]
type = NotHitBy
trigger1 = 1
value = SCA
;--------------------------------------------------------------
;光效代码结束
;---------------------------------------------------------------
;--------------------------------------------------------------
;色表相关
;--------------------------------------------------------------
[Statedef 12345]
physics = N
anim = 10000
velset = 0,0
sprpriority = 5

[State 12345, Reset]
type = varset
trigger1 = !time
fvar(38) = 200

[State 12345, Pal]
type = varset
trigger1 = !time
fvar(36) = root,palno
 
[State 12345, Varset]
type = varset
trigger1   = fvar(36)<1 ||fvar(36)>12
fvar(36) = 1+(fvar(36)<1)*11
 
[State 12345, PlaySnd]
type = PlaySnd
trigger1 = fvar(39)=2 
value = f21,0
channel = 2

[State 12345, Countdown]
type = VarAdd
trigger1 = 1 
fvar(38) = -1

[State 12345, Countdown]
type = VarAdd
trigger1 = !fvar(39) && fvar(38)<150
trigger1 = root,command="holdback" ||root,command="holdfwd"
fvar(38) = 25
 
[State 12345, Varadd]
type=varadd
trigger1 = !fvar(39)
trigger1 = root,command = "holdback" ||root,command = "holdfwd"
fvar(36) = 1-(root,command = "holdback" && facing=1 ||root,command="holdfwd" && facing=-1)*2
 
[State 12345, Varadd]
type = varadd
trigger1 = (root,command = "holdback" ||root,command = "holdfwd") && !fvar(39) ||fvar(39)
fvar(39) = 1
 
[State 12345, Varset]
type = varset
trigger1 = !time||fvar(39)>= 17
fvar(39) = 0
 
[State 12345, End]
type=destroyself
trigger1 = root,fvar(20)!=1
trigger1 = parent,Command="a" ||parent,Command="x" ||parent,Command="b" ||parent,Command="y"
trigger2 = root,fvar(20)=1
trigger2 = partner,Command="a" ||partner,Command="x" ||partner,Command="b" ||partner,Command="y"
trigger3 = time >= 380
trigger4 = NumExplod(55907)=1
trigger5 = root,var(1) >0
;trigger6=root,AILevel;开启则AI不选色表

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;ST-等待
;---------------------------------------------------------------------------
[Statedef 99986]
type    = L
movetype= H
physics = N
sprpriority = 0
ctrl = 0
anim = 99999

[State a]
type = ChangeState
trigger1 = partner,id>id
trigger1 = RoundState <2
value = 5900

[State a]
type = VarSet
trigger1 = RoundState >=2
fvar(20)=1

[State -3, 000]
type = CtrlSet
trigger1 = RoundState =3
value = 0

[State 6000, 4]
type = PlayerPush
trigger1 = 1
ignorehitpause = 1
value = 0

[State 170, 1]
type = width
trigger1 = 1
ignorehitpause = 1
edge = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State 10000, offSet]
type = velSet
trigger1 = roundstate = 2
ignorehitpause = 1
x = partner,vel x
y = partner,vel y;0

[State 10000, offSet]
type = posSet
trigger1 = roundstate = 2
ignorehitpause = 1
x = partner,pos x
y = partner,pos y;0

[State 10000, offSet]
type = posSet
trigger1 = roundstate != 2
x = -1000
y = 0

[State 10000, offSet]
type = changeanim
trigger1 = roundstate >= 3
value = 5110+30000*var(55)

[State 9990, 4.2]
type = AssertSpecial
trigger1 = roundstate >= 3
flag = invisible

[State 9990, 2]
type = turn
trigger1 = partner, facing != facing
;trigger1 = partner,P2dist X <= 0

[State 9990, 3]
type = screenbound
trigger1 = 1
value = 0

[State -3, 000]
type = ChangeState
trigger1 = Win ||DrawGame
value = 5150

[State -3, 000]
type = changestate
trigger1 = enemy,Win;roundstate > 2
value = 5150

[State -3, 000]
type = StateTypeSet
trigger1 = partner,movetype =A
movetype = A

[State -3, 000]
type = StateTypeSet
trigger1 = partner,movetype =H
movetype = H

[State -3, 000]
type = StateTypeSet
trigger1 = partner,movetype =I
movetype = I

[State -3, 000]
type = StateTypeSet
trigger1 = partner,stateType =A
stateType = A

[State -3, 000]
type = StateTypeSet
trigger1 = partner,stateType =C
stateType = C

[State -3, 000]
type = StateTypeSet
trigger1 = partner,stateType =S
stateType = S

[State -3, 000]
type = StateTypeSet
trigger1 = partner,stateType =L
stateType = L

;---------------------------------------------------------------------------
;----------------------------------------
[Statedef 40005]
anim = 99999

[State 3020, 1]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
ignorehitpause = 1

[State 40001, P1 BG]
type = Explod
triggerall = !numexplod(15650)
triggerall = teamside = 1
trigger1 = !time
anim = f15605
ID = 15650
pos = 0,abs((240*var(0))-81)
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
sprpriority = -4
ownpal = 1
ignorehitpause = 1

[State 40001, P1 PORTRAIT]
type = Explod
triggerall = !numexplod(15660)
triggerall = teamside = 1
trigger1 = !time
anim = 15609+root,var(55)+root,var(54)
ID = 15660
pos = 0,abs((240*var(0))-81)
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
sprpriority = -2
ownpal = 1
ignorehitpause = 1

[State 40001, P2 BG]
type = Explod
triggerall = !numexplod(15651)
triggerall = teamside = 2
trigger1 = !time
anim = f15606
ID = 15651
pos = 0,abs((240*var(0))-81)
postype = right  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
facing = -1
sprpriority = -4
ownpal = 1
ignorehitpause = 1

[State 40001, P2 PORTRAIT]
type = Explod
triggerall = !numexplod(15661)
triggerall = teamside = 2
trigger1 = !time
anim = 15609+root,var(55)+root,var(54)
ID = 15661
pos = 0,abs((240*var(0))-81)
postype = right  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
facing = -1
sprpriority = -2
ownpal = 1
ignorehitpause = 1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15650
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15650
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15650
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15650
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15650
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15650
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15650
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15650
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15651
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15651
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15651
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15651
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15651
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15651
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15651
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15651
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15660
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15660
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15660
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15660
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15660
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15660
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15660
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15660
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15661
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15661
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15661
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15661
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15661
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15661
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15661
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15661
scale = 1,1

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 60
;----------------------------------------
;===================================================================
;交代モ`ション
;===================================================================
[Statedef 358000]
type = S
ctrl = 0
velset = 0,0

;请求换人的动画，下面的value要自己设，动画也需要自己设定，怕麻烦可以直接用挑衅动作
[state 358000,Anim涓]
type = changeanim
trigger1 = time = 0
value = 195+var(55)*10000

;请求换人动画所需要用的台词声效，需要自己设定
[State 358000, 交代ボイス]
type = PlaySnd
trigger1 = time = 1
value = 5900,5900;			台~

;画面绑定，可无视
[State 358000,カメラに追われないように]
type = ScreenBound
trigger1 = partner,stateno = 358003
value = 0
movecamera = 0,0

;可再次进入的时间计数重设
[state 8000];待Crg
type = varset
trigger1 = partner,stateno = 358003
sysfvar(4) = 60
ignorehitpause = 1

;请求换人成功
[state 8000,2];交代成立
type = varset
trigger1 = partner,stateno = 358003
sysfvar(3) = 1
ignorehitpause = 1

;换人命令成立后无敌
[state 8000,2];交代成立後o场
type = nothitby
trigger1 = partner,stateno = 358003 || time > 10
value = SCA
time = 999

;无推挤效果，可无视
[state 358000,押し出し判定削除]
type = playerpush
trigger1 = partner,stateno = 358003
value = 0

;请求换人成功后退场
[State 358000,ジャンプステ`トへ]
type = Changestate
trigger1 = animtime = 0 || time > 30
value = 358001

;===================================================================
;後退ジャンプ中
;===================================================================
[Statedef 358001]
type = S
ctrl = 0
anim = 40+var(55)*30000

[State 40,起跳瞬间灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = anim = 40+var(55)*30000 && animtime = 0
anim = f50
id = 50
pos = 0,0
scale =.45,.45
ontop = 0
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0

[State 40, 跳起的水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = anim = 40+var(55)*30000 && animtime = 0
anim = F22
facing = -1
postype = p1
pos = 0,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2
persistent = 0

[State 40, 水花声效]
type = PlaySnd
trigger1 = StageVar(info.author) = "water"
trigger1 = anim = 40+var(55)*30000 && animtime = 0
value = F47,1
persistent = 0

;ココ
;ジャンプ音の指定
;跳跃音效，需要自己设定
[State 358000, ジャンプ音]
type = PlaySnd
trigger1 = StageVar(info.author) != "water"
trigger1 = anim = 40+var(55)*30000 && animtime = 0
value = f40,0
persistent = 0

;画面绑定，可无视
[State 358001,カメラに追われないように]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;跳跃动画，通常不用换
[State 358001,後方ジャンプ]
type = ChangeAnim
trigger1 = anim = 40+var(55)*30000 && animtime = 0
value = 43+var(55)*30000

;移动速度，可无视
[State 358001,ジャンプ速度]
type = VelSet
trigger1 = anim = 43+var(55)*30000
x = -15
Y = -5

;可再次进入的时间计数重设
[state 8001,5];特殊交代の待Crg
type = varset
trigger1 = time = 0
trigger1 = partner,sysfvar(3) = -2
sysfvar(4) = 60*1

;可再次进入的时间计数重设
[state 8001,5];ディレイドの待Crg
type = varset
trigger1 = time = 0
trigger1 = partner,sysfvar(3) < -2
sysfvar(4) = 60*5;◆

;退到版边切换为待机状态
[State 358001,待Cステ`トに移行]
type = ChangeState
trigger1 = backEdgeDist <= -40
value = 358002

;===================================================================
;待C中
;===================================================================
[Statedef 358002]
type = A
ctrl = 0
anim = 0
movetype= I
physics = S

;Attack提示动画消去
[state 8000];Attack消去
type = removeexplod
trigger1 = 1
ID = 358002

;援护攻击类型选择重设
[state 8001];アシストxkリセット
type = varset
trigger1 = sysfvar(3) != 0
sysfvar(3) = 0

;可再次进入的时间计数小于0时重设
[state 8002];待Crg0
type = varset
trigger1 = sysfvar(4) < 0
sysfvar(4) = 0

;可再次进入的时间计数缓慢减少
[state 8002];待Crgカウントダウン
type = varadd
trigger1 = sysfvar(4) > 0
sysfvar(4) = -1

;画面绑定，可无视
[State 358002,カメラに追われないように]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;透明化不可视
[State 358002,透明化]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

;无敌，以免被打到
[state 358002,o郴]
type = NotHitBy
trigger1 = 1
value = SCA

;无推挤效果，可无视
[state 358002,押し出し判定削除]
type = playerpush
trigger1 = 1
value = 0

;图像变黑
[State 358002, \ずみ]
type = PalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 100, 100, 100

;待机时回血
[State -358002,待C中ライフ回]
type = LifeAdd
trigger1 = sysfvar(4) = 0
value = 1
;↓の一行はコメントアウト部分も含めて一切涓しないでください。
;回复速度，数值越小速度越快
persistent = 7;回;◇

;转向，与队友同方向
[State 358002,向き合わせ]
type = Turn
trigger1 = numpartner
trigger1 = facing != partner,facing

;使位置处于屏幕外
[State 358002,すごく後ろに移]
type = PosSet
trigger1 = 1
x = -10000*(facing)
y = 0
ignorehitpause = 1
persistent = 1

;强制切换的进场动作，包括队友请求换人、对方死亡、回合结束等
[State 358002,通常乱入]
type = ChangeState
triggerall = numpartner
trigger1 = partner,stateno = 358000 && partner,time >= 10;	相方が後退モ`ション
trigger2 = partner,alive = 0;					相方死亡
trigger3 = win || losetime || DrawGame;				ラウンドK了
trigger4 = ID < partner,ID && partner,stateno = 358002;		相方も待Cステ`ト☆
value = 358003

;援护可用提示，需要自己加上提示的动画
[state 905900,AssistOK表示]
type = null; Explod
trigger1 = !numexplod(358001) && !numexplod(358002)
trigger1 = sysfvar(4) = 0
anim = F3580
pos =  ifelse(teamside=1,80,173), 38
postype = left
facing = ifelse(teamside=1,1,1)
bindtime = -1
supermovetime = 9999999999999A
pausemovetime = 9999999999999
scale = .5, .5
ontop = 1
removetime = 1
ID = 358000

;换人槽，需要自己加上提示的动画
[state 905900,残りrg黄]
type = null; Explod
trigger1 = !numexplod(358001) && !numexplod(358002)
trigger1 = sysfvar(4) > 0
anim = F3583
pos =  ifelse(teamside=1,139-ceil(sysfvar(4)*0.25),180), 45
postype = left
facing = ifelse(teamside=1,1,1)
bindtime = -1
supermovetime = 9999999999999
pausemovetime = 9999999999999
scale = sysfvar(4)*0.25, .25
ontop = 1
removetime = 1
ID = 358003

;换人槽，需要自己加上提示的动画
[state 905900,残りrg黄]
type = null; Explod
trigger1 = !numexplod(358001) && !numexplod(358002)
trigger1 = sysfvar(4) > 0
anim = F3583
pos =  ifelse(teamside=1,139-ceil(sysfvar(4)*0.65),180), 45
postype = left
facing = ifelse(teamside=1,1,1)
bindtime = -1
supermovetime = 9999999999999
pausemovetime = 9999999999999
scale = sysfvar(4)*0.85, .25
ontop = 1
removetime = 1
ID = 358003

[state 905900,残りrg黄_1P趣我绚ㄕ{整]
type = null; Explod
trigger1 = !numexplod(358001) && !numexplod(358002)
trigger1 = sysfvar(4) > 0 && teamside=1
anim = F3583
pos =  138, 45
postype = left
facing = ifelse(teamside=1,1,1)
bindtime = -1
supermovetime = 9999999999999
pausemovetime = 9999999999999
scale = 2, .25
ontop = 1
removetime = 1
ID = 358003

;===特殊交代===============
;特殊换人状态
[state 8002,3];★
type = varset
sysfvar(3) = -2
triggerall = numpartner
triggerall = partner,alive && partner,stateno < 358000
triggerall = partner,ctrl && power >= 500 || power >= 1000
triggerall = sysfvar(4) <= 0
;乱入条件。常rステ`トへのAI述と同等でOKです;ココ
;特殊换人进场条件，例如换人连段之类的，需要自己补充AI
trigger1 = partner,command = "换人" 
trigger2 = partner, stateno=[120,158]
trigger2 = partner,command = "start" && partner,command = "holdback"
;以下附送一个耗气换人脱离的例子
;trigger2 = var(59)
;trigger2 = EnemyNear,Movetype = A && Partner,Movetype = H && power >= 1000 && EnemyNear,AnimTime <= -12 && EnemyNear,Stateno < 3000
;trigger2 = Random < 100/(1+(partner,stateno = [150,160)))

;可再次进入的时间计数重设
[state 8003];再突入F
type = varset
trigger1 = sysfvar(3) = -2
sysfvar(4) = 60*1

;切换特殊换人的进场动作
[State 358002,]
type = ChangeState
triggerall = numpartner
trigger1 = partner,alive
trigger1 = sysfvar(3) = -2
value = 358003

;===アシスト指定===============;ココ
;以下是援护攻击。下面要切换的动作虽然是有默认的状态号，但是我个人建议重新自己加入新的援护用状态比较好，
;例如自己新建状态号为360000/360050，专门用于援护攻击A/B，援护攻击状态结束之后就切换回退场动作
;另外，默认的援护攻击并非像KOF那样子出场人物叫出来的，而是非出场人物主动出来攻击，如果需要像KOF那样子
;呼叫才能出场的话，请自己加入请求援护动作和修改援护攻击的出场条件并修改相关代码
;最后如果不要援护攻击的话，把相关的varset去掉即可


;---アシスト攻A-------☆
;援护攻击A
[state 8002,1]
type = varset
triggerall = numpartner
triggerall = partner,alive
triggerall = partner,ctrl  && power >= 500 || power >= 1000
triggerall = sysfvar(4) <= 0
triggerall = partner,movetype != H;◇
;乱入後に移行するステ`ト番号
;进场后做的援护攻击状态编号，1000是默认值，详细的需要自己设定
sysfvar(3) = 11111+var(55)*10000
;乱入条件。常rステ`トへのAI述と同等でOKです
;进场条件，需要自己补充AI
trigger1 = partner,command = "援护攻击A"
ctrl=0

;可再次进入的时间计数重设
[state 8003];再突入F
type = varset
triggerall = partner,movetype != H;◇
trigger1 = sysfvar(3) = 11111+var(55)*10000;上のステ`ト番号とあわせる
sysfvar(4) = 60*2;乱入K了後(失『む)に再度乱入可能になるまでのF数
;-----------------------

;---アシスト攻B-------☆
;援护攻击B
[state 8002,1]
type = varset
triggerall = numpartner
triggerall = partner,alive
triggerall = partner,ctrl  && power >= 500 || power >= 1000
triggerall = sysfvar(4) <= 0
triggerall = partner,movetype != H;◇
;乱入後に移行するステ`ト番号
;进场后做的援护攻击状态编号，1100是默认值，详细的需要自己设定
sysfvar(3) = 22222+var(55)*10000
;乱入条件。常rステ`トへのAI述と同等でOKです
;进场条件，需要自己补充AI
trigger1 = partner,command = "援护攻击B"
ctrl=0

;可再次进入的时间计数重设
[state 8003];再突入F
type = varset
triggerall = partner,movetype != H;◇
trigger1 = sysfvar(3) = 22222+var(55)*10000
sysfvar(4) = 60*3;乱入K了後(失『む)に再度乱入可能になるまでのF数
;-----------------------

;切换援护攻击的进场动作
[State 358002,]
type = ChangeState
triggerall = numpartner
trigger1 = partner,alive
trigger1 = partner,movetype != H
trigger1 = sysfvar(3) != 0
value = 358004

;===================================================================
;通常突入
;===================================================================
[Statedef 358003]
type = A
ctrl = 1
physics = A
anim = 42+var(55)*30000

[State 358000, 交代ボイス]
type = PlaySnd
trigger1 = time = 1
value = f40,1;	

;进场的最初位置设定
[State 358003,突入初期位置]
type = PosSet
trigger1 = time = 0
x = -170*(facing)
y = -140

;特殊换人所需要的消费
[state 8003,2];特殊交代によるゲ`ジ消M
type = poweradd
trigger1 = sysfvar(3) = -2
trigger1 = time = 0
value = -500-500*(partner,ctrl=0)

;换人提示，需要自己加上提示的动画
[state 905900,Change表示]
type = Explod
trigger1 = time = 1
anim = F3581
pos =  ifelse(teamside=1,8,340), 120
postype = left
facing = ifelse(teamside=1,1,1)
bindtime = -1
supermovetime = 9999999999999
pausemovetime = 9999999999999
scale = .5, .5
ontop = 1
removetime = 30
ID = 358001

;进场的速度设定
[State 358003,突入落下]
type = VelSet
trigger1 = anim = 42+var(55)*30000;time >=0
x = 6
Y = 10

;===================================================================
;アシスト突入
;===================================================================
[Statedef 358004]
type = A
ctrl = 0
physics = N
anim = 42+var(55)*30000

[State 358000, 交代ボイス]
type = PlaySnd
trigger1 = time = 1
value = f40,1;	
persistent = 0

;特殊换人所需要的额外消费
[state 8004];ディレイドのゲ`ジ余消M
type = poweradd
trigger1 = time = 0
trigger1 = sysfvar(3) < -1
value = -500

;援护攻击提示，需要自己加上提示的动画
[state 905900,AssistAttack表示]
type = null;Explod
trigger1 = time = 0
anim = F3582
pos =  ifelse(teamside=1,8,255), 120
postype = left
facing = ifelse(teamside=1,1,1)
bindtime = -1
supermovetime = 9999999999999
pausemovetime = 9999999999999
scale = .5, .5
ontop = 1
removetime = -1
ID = 358002

;乱入行婴摔瑜盲莆恢盲人俣日{整をどうぞ
;进场的最初位置设定
[State 358003,突入初期位置]
type = PosSet
trigger1 = time = 0
x = partner,pos x
y = -140

;进场的速度设定
[State 358003,突入落下]
type = VelSet
trigger1 = anim = 42+var(55)*30000;time >=0
x = 3
Y = 10

;落地时动画切换
[State 358003,着地アニメ]
type = changeanim
trigger1 = pos y >= 0
value = 47+var(55)*30000
persistent = 0

[State 52,着陆灰尘]
type = Explod
trigger1 = StageVar(info.author) != "water"
trigger1 = pos y >= 0
anim = f50
scale = .55,.55
pos = 0,0
ontop = 1
ownpal = 1
postype = p1
spacing = 1
sprpriority = 8
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0

[State 52, 着陆水花]
type = Explod
trigger1 = StageVar(info.author) = "water"
trigger1 = pos y >= 0
anim = F22
postype = p1
pos = 20,0
ownpal = 1
ontop = 1
bindtime = 1
removetime = -2
persistent = 0

[State 52, 着陆声效]
type = PlaySnd
trigger1 = pos y >= 0
value = F47,(0+(StageVar(info.author) = "water"))
persistent = 0

;落地时速度为0
[State 358003,着地Vel]
type = velset
trigger1 = pos y >= 0
x = 0
y = 0

;落地后人物垂直坐标为0
[State 358003,着地Pos]
type = posset
trigger1 = pos y >= 0
y = 0

;可控设置
[State 358003,sfv3が0になった];◆
type = ctrlset
trigger1 = sysfvar(3) = 0
value = 1

;援护攻击落地后切换动作，会根据你之前设定的援护状态号进行动作切换
[State 358003,攻磨攻譬`トへ];☆
type = changestate
trigger1 = anim = 47+var(55)*30000 && animtime = 0
value = floor(abs(sysfvar(3)))

;====================================================
[Statedef 9222]
physics = N
velset = 0,0
anim = 10000
ctrl = 0
sprpriority = 99999

[State 915, 1]
type = Explod
triggerall = RoundState = 2
trigger1 = (root,ID < Partner,ID&&NumPartner)|!NumPartner
anim = F300240
ID = 9222
postype = left
pos = Ifelse(TeamSide = 1, 0, 426.5),0
facing = Ifelse(TeamSide = 1, 1, -1)
scale = .5,.5
ownpal = 1
ontop = 1
ignorehitpause = 1
sprpriority = 99999
pausemovetime = 99999
supermovetime = 99999
removetime = 1

[State 915, 1]
type = Explod
triggerall = RoundState = 2
trigger1 = (root,ID < Partner,ID&&NumPartner)|!NumPartner
anim = 9222+root,var(55)*10000+root,var(54)
ID = 9222
postype = left
pos = Ifelse(TeamSide = 1, 0, 426.5),-3
facing = Ifelse(TeamSide = 1, 1, -1)
scale = .5,.5
ownpal = 1
ontop = 1
ignorehitpause = 1
sprpriority = 9999999
pausemovetime = 99999
supermovetime = 99999
removetime = 1

[State 915, 1]
type = Explod
triggerall = RoundState = 2
trigger1 = root,ID > Partner,ID&&NumPartner
anim = F300250
ID = 9222
postype = left
pos = Ifelse(TeamSide = 1, 12, 414.5),50.5
facing = Ifelse(TeamSide = 1, 1, -1)
scale = .5,.5
ownpal = 1
ontop = 1
ignorehitpause = 1
sprpriority = 99999
pausemovetime = 99999
supermovetime = 99999
removetime = 1

[State 915, 1]
type = Explod
triggerall = RoundState = 2
trigger1 = root,ID > Partner,ID&&NumPartner
anim = 9003+root,var(55)*10000+root,var (54)
ID = 9222
postype = left
pos = Ifelse(TeamSide = 1, 13.5, 413),52.5
facing = Ifelse(TeamSide = 1, 1, -1)
scale = .5,.5
ownpal = 1
ontop = 1
ignorehitpause = 1
sprpriority = 999999
pausemovetime = 99999
supermovetime = 99999
removetime = 1

[state a]
type = destroyself
trigger1 = roundstate > 2

;===============================================================================
;[EOF]
;===============================================================================
